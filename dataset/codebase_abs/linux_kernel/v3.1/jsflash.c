static unsigned int F_1 ( unsigned long V_1 )\r\n{\r\nunsigned long V_2 ;\r\n__asm__ __volatile__("lda [%1] %2, %0\n\t" :\r\n"=r" (retval) :\r\n"r" (addr), "i" (ASI_M_BYPASS));\r\nreturn V_2 ;\r\n}\r\nstatic void F_2 ( unsigned long V_1 , T_1 V_3 )\r\n{\r\n__asm__ __volatile__("sta %0, [%1] %2\n\t" : :\r\n"r" (data), "r" (addr), "i" (ASI_M_BYPASS) :\r\n"memory");\r\n}\r\nstatic void F_3 ( unsigned long V_4 ) {\r\nunsigned int V_5 , V_6 ;\r\nfor (; ; ) {\r\nV_5 = F_1 ( V_4 ) ;\r\nV_6 = F_1 ( V_4 ) ;\r\nif ( ( V_5 & 0x40404040 ) == ( V_6 & 0x40404040 ) ) return;\r\n}\r\n}\r\nstatic void F_4 ( unsigned long V_7 , T_2 V_3 ) {\r\nF_2 ( V_7 , 0xAAAAAAAA ) ;\r\nF_2 ( V_7 , 0x55555555 ) ;\r\nF_2 ( V_7 , 0xA0A0A0A0 ) ;\r\nF_2 ( V_7 , V_3 ) ;\r\nF_3 ( V_7 ) ;\r\n}\r\nstatic void F_5 ( char * V_8 , unsigned long V_4 , T_3 V_9 ) {\r\nunion T_4 {\r\nchar V_10 [ 4 ] ;\r\nunsigned int V_11 ;\r\n} V_12 ;\r\nwhile ( V_9 >= 4 ) {\r\nV_9 -= 4 ;\r\nV_12 . V_11 = F_1 ( V_4 ) ;\r\nmemcpy ( V_8 , V_12 . V_10 , 4 ) ;\r\nV_4 += 4 ;\r\nV_8 += 4 ;\r\n}\r\n}\r\nstatic void F_6 ( struct V_13 * V_14 )\r\n{\r\nstruct V_15 * V_16 ;\r\nV_16 = F_7 ( V_14 ) ;\r\nwhile ( V_16 ) {\r\nstruct V_17 * V_18 = V_16 -> V_19 -> V_20 ;\r\nunsigned long V_21 = F_8 ( V_16 ) << 9 ;\r\nT_3 V_22 = F_9 ( V_16 ) ;\r\nint V_23 = - V_24 ;\r\nif ( ( V_21 + V_22 ) > V_18 -> V_25 )\r\ngoto V_26;\r\nif ( F_10 ( V_16 ) != V_27 ) {\r\nF_11 ( V_28 L_1 ) ;\r\ngoto V_26;\r\n}\r\nif ( ( V_18 -> V_29 & 0xff000000 ) != 0x20000000 ) {\r\nF_11 ( V_28 L_2 , ( int ) V_18 -> V_29 ) ;\r\ngoto V_26;\r\n}\r\nF_5 ( V_16 -> V_30 , V_18 -> V_29 + V_21 , V_22 ) ;\r\nV_23 = 0 ;\r\nV_26:\r\nif ( ! F_12 ( V_16 , V_23 ) )\r\nV_16 = F_7 ( V_14 ) ;\r\n}\r\n}\r\nstatic T_5 F_13 ( struct V_31 * V_31 , T_5 V_21 , int V_32 )\r\n{\r\nT_5 V_33 ;\r\nF_14 ( & V_34 ) ;\r\nswitch ( V_32 ) {\r\ncase 0 :\r\nV_31 -> V_35 = V_21 ;\r\nV_33 = V_31 -> V_35 ;\r\nbreak;\r\ncase 1 :\r\nV_31 -> V_35 += V_21 ;\r\nV_33 = V_31 -> V_35 ;\r\nbreak;\r\ndefault:\r\nV_33 = - V_36 ;\r\n}\r\nF_15 ( & V_34 ) ;\r\nreturn V_33 ;\r\n}\r\nstatic T_6 F_16 ( struct V_31 * V_31 , char T_7 * V_8 ,\r\nT_3 V_9 , T_5 * V_37 )\r\n{\r\nunsigned long V_4 = * V_37 ;\r\nchar T_7 * V_38 = V_8 ;\r\nunion T_4 {\r\nchar V_10 [ 4 ] ;\r\nunsigned int V_11 ;\r\n} V_12 ;\r\nif ( V_4 < V_39 || V_4 >= V_40 ) {\r\nreturn 0 ;\r\n}\r\nif ( ( V_4 + V_9 ) < V_4\r\n|| ( V_4 + V_9 ) >= V_40 ) {\r\nV_9 = V_40 - V_4 ;\r\n}\r\nif ( V_4 < V_39 && V_9 != 0 ) {\r\n#if 0\r\nsize_t x = JSF_BASE_ALL - p;\r\nif (x > togo) x = togo;\r\nclear_user(tmp, x);\r\ntmp += x;\r\np += x;\r\ntogo -= x;\r\n#else\r\nreturn 0 ;\r\n#endif\r\n}\r\nwhile ( V_9 >= 4 ) {\r\nV_9 -= 4 ;\r\nV_12 . V_11 = F_1 ( V_4 ) ;\r\nif ( F_17 ( V_38 , V_12 . V_10 , 4 ) )\r\nreturn - V_41 ;\r\nV_38 += 4 ;\r\nV_4 += 4 ;\r\n}\r\n* V_37 = V_4 ;\r\nreturn V_38 - V_8 ;\r\n}\r\nstatic T_6 F_18 ( struct V_31 * V_31 , const char T_7 * V_8 ,\r\nT_3 V_42 , T_5 * V_37 )\r\n{\r\nreturn - V_43 ;\r\n}\r\nstatic int F_19 ( unsigned long V_44 )\r\n{\r\nunsigned long V_4 ;\r\nV_4 = 0x20400000 ;\r\nF_2 ( V_4 , 0xAAAAAAAA ) ;\r\nF_2 ( V_4 , 0x55555555 ) ;\r\nF_2 ( V_4 , 0x80808080 ) ;\r\nF_2 ( V_4 , 0xAAAAAAAA ) ;\r\nF_2 ( V_4 , 0x55555555 ) ;\r\nF_2 ( V_4 , 0x10101010 ) ;\r\n#if 0\r\n{\r\nint i;\r\n__u32 x;\r\nfor (i = 0; i < 1000000; i++) {\r\nx = jsf_inl(p);\r\nif ((x & 0x80808080) == 0x80808080) break;\r\n}\r\nif ((x & 0x80808080) != 0x80808080) {\r\nprintk("jsf0: erase timeout with 0x%08x\n", x);\r\n} else {\r\nprintk("jsf0: erase done with 0x%08x\n", x);\r\n}\r\n}\r\n#else\r\nF_3 ( V_4 ) ;\r\n#endif\r\nreturn 0 ;\r\n}\r\nstatic int F_20 ( void T_7 * V_44 )\r\n{\r\nstruct V_45 V_46 ;\r\nchar T_7 * V_47 ;\r\nunsigned long V_4 ;\r\nunsigned int V_9 ;\r\nunion {\r\nunsigned int V_11 ;\r\nchar V_10 [ 4 ] ;\r\n} V_12 ;\r\nif ( F_21 ( & V_46 , V_44 , V_48 ) )\r\nreturn - V_41 ;\r\nV_4 = V_46 . V_49 ;\r\nV_9 = V_46 . V_50 ;\r\nif ( ( V_9 & 3 ) || ( V_4 & 3 ) ) return - V_36 ;\r\nV_47 = ( char T_7 * ) ( unsigned long ) V_46 . V_3 ;\r\nwhile ( V_9 != 0 ) {\r\nV_9 -= 4 ;\r\nif ( F_21 ( & V_12 . V_10 [ 0 ] , V_47 , 4 ) )\r\nreturn - V_41 ;\r\nF_4 ( V_4 , V_12 . V_11 ) ;\r\nV_4 += 4 ;\r\nV_47 += 4 ;\r\n}\r\nreturn 0 ;\r\n}\r\nstatic long F_22 ( struct V_31 * V_51 , unsigned int V_52 , unsigned long V_44 )\r\n{\r\nF_14 ( & V_34 ) ;\r\nint error = - V_53 ;\r\nvoid T_7 * V_54 = ( void T_7 * ) V_44 ;\r\nif ( ! F_23 ( V_55 ) ) {\r\nF_15 ( & V_34 ) ;\r\nreturn - V_56 ;\r\n}\r\nswitch ( V_52 ) {\r\ncase V_57 :\r\nif ( F_17 ( V_54 , & V_58 . V_59 , V_60 ) ) {\r\nF_15 ( & V_34 ) ;\r\nreturn - V_41 ;\r\n}\r\nbreak;\r\ncase V_61 :\r\nerror = F_19 ( V_44 ) ;\r\nbreak;\r\ncase V_62 :\r\nerror = F_20 ( V_54 ) ;\r\nbreak;\r\n}\r\nF_15 ( & V_34 ) ;\r\nreturn error ;\r\n}\r\nstatic int F_24 ( struct V_31 * V_31 , struct V_63 * V_64 )\r\n{\r\nreturn - V_65 ;\r\n}\r\nstatic int F_25 ( struct V_66 * V_66 , struct V_31 * V_67 )\r\n{\r\nF_14 ( & V_34 ) ;\r\nif ( V_58 . V_68 == 0 ) {\r\nF_15 ( & V_34 ) ;\r\nreturn - V_65 ;\r\n}\r\nif ( F_26 ( 0 , ( void * ) & V_58 . V_69 ) != 0 ) {\r\nF_15 ( & V_34 ) ;\r\nreturn - V_70 ;\r\n}\r\nF_15 ( & V_34 ) ;\r\nreturn 0 ;\r\n}\r\nstatic int F_27 ( struct V_66 * V_66 , struct V_31 * V_31 )\r\n{\r\nV_58 . V_69 = 0 ;\r\nreturn 0 ;\r\n}\r\nstatic int F_28 ( void )\r\n{\r\nint V_71 ;\r\nstruct V_72 * V_73 ;\r\nT_8 V_74 ;\r\nchar V_75 [ 128 ] ;\r\nstruct V_76 V_77 ;\r\nV_74 = F_29 ( V_78 ) ;\r\nV_74 = F_30 ( V_74 , L_3 ) ;\r\nif ( V_74 != 0 && ( V_79 ) V_74 != - 1 ) {\r\nif ( F_31 ( V_74 , L_4 ,\r\n( char * ) & V_77 , sizeof( V_77 ) ) == - 1 ) {\r\nF_11 ( L_5 ) ;\r\nreturn - V_65 ;\r\n}\r\nif ( V_77 . V_80 != 0 ) {\r\nF_11 ( L_6 ,\r\nV_77 . V_80 , V_77 . V_81 ) ;\r\nreturn - V_65 ;\r\n}\r\n#if 0\r\nif ((reg0.phys_addr >> 24) != 0x20) {\r\nprintk("jsflash: suspicious address: 0x%x:%x\n",\r\nreg0.which_io, reg0.phys_addr);\r\nreturn -ENXIO;\r\n}\r\n#endif\r\nif ( ( int ) V_77 . V_82 <= 0 ) {\r\nF_11 ( L_7 , ( int ) V_77 . V_82 ) ;\r\nreturn - V_65 ;\r\n}\r\n} else {\r\nF_11 ( L_8 ) ;\r\nF_31 ( V_78 , L_9 , V_75 , 128 ) ;\r\nif ( strcmp ( V_75 , L_10 ) != 0 &&\r\nstrcmp ( V_75 , L_11 ) != 0 ) {\r\nreturn - V_65 ;\r\n}\r\nV_77 . V_80 = 0 ;\r\nV_77 . V_81 = 0x20400000 ;\r\nV_77 . V_82 = 0x00800000 ;\r\n}\r\nif ( V_83 != V_84 ) {\r\nreturn - V_65 ;\r\n}\r\nif ( V_58 . V_68 == 0 ) {\r\nV_73 = & V_58 ;\r\nV_73 -> V_68 = V_77 . V_81 ;\r\nV_73 -> V_50 = V_77 . V_82 ;\r\nV_73 -> V_59 . V_49 = V_39 ;\r\nV_73 -> V_59 . V_50 = 0x01000000 ;\r\nstrcpy ( V_73 -> V_59 . V_85 , L_12 ) ;\r\nV_73 -> V_86 [ 0 ] . V_29 = V_73 -> V_68 ;\r\nV_73 -> V_86 [ 0 ] . V_25 = V_73 -> V_50 ;\r\nV_73 -> V_86 [ 1 ] . V_29 = V_73 -> V_68 + 1024 ;\r\nV_73 -> V_86 [ 1 ] . V_25 = V_73 -> V_50 - 1024 ;\r\nV_73 -> V_86 [ 2 ] . V_29 = V_39 ;\r\nV_73 -> V_86 [ 2 ] . V_25 = 0x01000000 ;\r\nF_11 ( L_13 , V_73 -> V_68 ,\r\n( int ) ( V_73 -> V_50 / ( 1024 * 1024 ) ) ) ;\r\n}\r\nif ( ( V_71 = F_32 ( & V_87 ) ) != 0 ) {\r\nF_11 ( V_28 L_14 ,\r\nV_88 ) ;\r\nV_58 . V_68 = 0 ;\r\nreturn V_71 ;\r\n}\r\nreturn 0 ;\r\n}\r\nstatic int F_33 ( void )\r\n{\r\nstatic F_34 ( V_89 ) ;\r\nstruct V_72 * V_73 ;\r\nstruct V_17 * V_18 ;\r\nint V_23 ;\r\nint V_90 ;\r\nif ( V_58 . V_68 == 0 )\r\nreturn - V_65 ;\r\nV_23 = - V_91 ;\r\nfor ( V_90 = 0 ; V_90 < V_92 ; V_90 ++ ) {\r\nstruct V_93 * V_94 = F_35 ( 1 ) ;\r\nif ( ! V_94 )\r\ngoto V_95;\r\nV_96 [ V_90 ] = V_94 ;\r\n}\r\nif ( F_36 ( V_97 , L_15 ) ) {\r\nV_23 = - V_24 ;\r\ngoto V_95;\r\n}\r\nV_98 = F_37 ( F_6 , & V_89 ) ;\r\nif ( ! V_98 ) {\r\nV_23 = - V_91 ;\r\nF_38 ( V_97 , L_15 ) ;\r\ngoto V_95;\r\n}\r\nfor ( V_90 = 0 ; V_90 < V_92 ; V_90 ++ ) {\r\nstruct V_93 * V_94 = V_96 [ V_90 ] ;\r\nif ( ( V_90 & V_99 ) >= V_100 ) continue;\r\nV_73 = & V_58 ;\r\nV_18 = & V_73 -> V_86 [ V_90 & V_99 ] ;\r\nV_94 -> V_101 = V_97 ;\r\nV_94 -> V_102 = V_90 ;\r\nsprintf ( V_94 -> V_103 , L_16 , V_90 ) ;\r\nV_94 -> V_104 = & V_105 ;\r\nF_39 ( V_94 , V_18 -> V_25 >> 9 ) ;\r\nV_94 -> V_20 = V_18 ;\r\nV_94 -> V_106 = V_98 ;\r\nF_40 ( V_94 ) ;\r\nF_41 ( V_94 , 1 ) ;\r\n}\r\nreturn 0 ;\r\nV_95:\r\nwhile ( V_90 -- )\r\nF_42 ( V_96 [ V_90 ] ) ;\r\nreturn V_23 ;\r\n}\r\nstatic int T_9 F_43 ( void ) {\r\nint V_71 ;\r\nif ( ( V_71 = F_28 () ) == 0 ) {\r\nF_33 () ;\r\nreturn 0 ;\r\n}\r\nreturn V_71 ;\r\n}\r\nstatic void T_10 F_44 ( void )\r\n{\r\nint V_90 ;\r\nfor ( V_90 = 0 ; V_90 < V_92 ; V_90 ++ ) {\r\nif ( ( V_90 & V_99 ) >= V_100 ) continue;\r\nF_45 ( V_96 [ V_90 ] ) ;\r\nF_42 ( V_96 [ V_90 ] ) ;\r\n}\r\nif ( V_58 . V_69 )\r\nF_11 ( L_17 ) ;\r\nV_58 . V_68 = 0 ;\r\nV_58 . V_69 = 0 ;\r\nF_46 ( & V_87 ) ;\r\nF_38 ( V_97 , L_15 ) ;\r\nF_47 ( V_98 ) ;\r\n}
