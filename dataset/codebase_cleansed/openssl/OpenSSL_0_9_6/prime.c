void callback(type,num)\r\nint type,num;\r\n{\r\nif (type == 0)\r\nfprintf(stderr,".");\r\nelse if (type == 1)\r\nfprintf(stderr,"+");\r\nelse if (type == 2)\r\nfprintf(stderr,"*");\r\nfflush(stderr);\r\n}\r\nint main(argc,argv)\r\nint argc;\r\nchar *argv[];\r\n{\r\nBIGNUM *rand;\r\nint num=256;\r\nif (argc >= 2)\r\n{\r\nnum=atoi(argv[1]);\r\nif (num == 0) num=256;\r\n}\r\nfprintf(stderr,"generate a strong prime\n");\r\nrand=BN_generate_prime(NULL,num,1,NULL,NULL,callback,NULL);\r\nfprintf(stderr,"\n");\r\nBN_print_fp(stdout,rand);\r\nfprintf(stdout,"\n");\r\nBN_free(rand);\r\nexit(0);\r\nreturn(0);\r\n}
