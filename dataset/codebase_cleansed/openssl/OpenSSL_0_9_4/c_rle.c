COMP_METHOD *COMP_rle(void)\r\n{\r\nreturn(&rle_method);\r\n}\r\nstatic int rle_compress_block(COMP_CTX *ctx, unsigned char *out,\r\nunsigned int olen, unsigned char *in, unsigned int ilen)\r\n{\r\nif (olen < (ilen+1))\r\n{\r\nreturn(-1);\r\n}\r\n*(out++)=0;\r\nmemcpy(out,in,ilen);\r\nreturn(ilen+1);\r\n}\r\nstatic int rle_expand_block(COMP_CTX *ctx, unsigned char *out,\r\nunsigned int olen, unsigned char *in, unsigned int ilen)\r\n{\r\nint i;\r\nif (olen < (ilen-1))\r\n{\r\nreturn(-1);\r\n}\r\ni= *(in++);\r\nif (i == 0)\r\n{\r\nmemcpy(out,in,ilen-1);\r\n}\r\nreturn(ilen-1);\r\n}
