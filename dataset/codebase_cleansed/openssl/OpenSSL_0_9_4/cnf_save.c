main()\r\n{\r\nLHASH *conf;\r\nlong l;\r\nconf=CONF_load(NULL,"../../apps/openssl.cnf",&l);\r\nif (conf == NULL)\r\n{\r\nfprintf(stderr,"error loading config, line %ld\n",l);\r\nexit(1);\r\n}\r\nlh_doall(conf,print_conf);\r\n}\r\nvoid print_conf(CONF_VALUE *cv)\r\n{\r\nint i;\r\nCONF_VALUE *v;\r\nchar *section;\r\nchar *name;\r\nchar *value;\r\nSTACK *s;\r\nif (cv->name != NULL) return;\r\nprintf("[ %s ]\n",cv->section);\r\ns=(STACK *)cv->value;\r\nfor (i=0; i<sk_num(s); i++)\r\n{\r\nv=(CONF_VALUE *)sk_value(s,i);\r\nsection=(v->section == NULL)?"None":v->section;\r\nname=(v->name == NULL)?"None":v->name;\r\nvalue=(v->value == NULL)?"None":v->value;\r\nprintf("%s=%s\n",name,value);\r\n}\r\nprintf("\n");\r\n}
