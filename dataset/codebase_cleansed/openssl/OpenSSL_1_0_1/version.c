int MAIN(int argc, char **argv)\r\n{\r\nint i,ret=0;\r\nint cflags=0,version=0,date=0,options=0,platform=0,dir=0;\r\napps_startup();\r\nif (bio_err == NULL)\r\nif ((bio_err=BIO_new(BIO_s_file())) != NULL)\r\nBIO_set_fp(bio_err,stderr,BIO_NOCLOSE|BIO_FP_TEXT);\r\nif (argc == 1) version=1;\r\nfor (i=1; i<argc; i++)\r\n{\r\nif (strcmp(argv[i],"-v") == 0)\r\nversion=1;\r\nelse if (strcmp(argv[i],"-b") == 0)\r\ndate=1;\r\nelse if (strcmp(argv[i],"-f") == 0)\r\ncflags=1;\r\nelse if (strcmp(argv[i],"-o") == 0)\r\noptions=1;\r\nelse if (strcmp(argv[i],"-p") == 0)\r\nplatform=1;\r\nelse if (strcmp(argv[i],"-d") == 0)\r\ndir=1;\r\nelse if (strcmp(argv[i],"-a") == 0)\r\ndate=version=cflags=options=platform=dir=1;\r\nelse\r\n{\r\nBIO_printf(bio_err,"usage:version -[avbofpd]\n");\r\nret=1;\r\ngoto end;\r\n}\r\n}\r\nif (version)\r\n{\r\nif (SSLeay() == SSLEAY_VERSION_NUMBER)\r\n{\r\nprintf("%s\n",SSLeay_version(SSLEAY_VERSION));\r\n}\r\nelse\r\n{\r\nprintf("%s (Library: %s)\n",\r\nOPENSSL_VERSION_TEXT,\r\nSSLeay_version(SSLEAY_VERSION));\r\n}\r\n}\r\nif (date) printf("%s\n",SSLeay_version(SSLEAY_BUILT_ON));\r\nif (platform) printf("%s\n",SSLeay_version(SSLEAY_PLATFORM));\r\nif (options)\r\n{\r\nprintf("options: ");\r\nprintf("%s ",BN_options());\r\n#ifndef OPENSSL_NO_MD2\r\nprintf("%s ",MD2_options());\r\n#endif\r\n#ifndef OPENSSL_NO_RC4\r\nprintf("%s ",RC4_options());\r\n#endif\r\n#ifndef OPENSSL_NO_DES\r\nprintf("%s ",DES_options());\r\n#endif\r\n#ifndef OPENSSL_NO_IDEA\r\nprintf("%s ",idea_options());\r\n#endif\r\n#ifndef OPENSSL_NO_BF\r\nprintf("%s ",BF_options());\r\n#endif\r\nprintf("\n");\r\n}\r\nif (cflags) printf("%s\n",SSLeay_version(SSLEAY_CFLAGS));\r\nif (dir) printf("%s\n",SSLeay_version(SSLEAY_DIR));\r\nend:\r\napps_shutdown();\r\nOPENSSL_EXIT(ret);\r\n}
