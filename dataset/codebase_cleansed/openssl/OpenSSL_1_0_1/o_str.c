int OPENSSL_strncasecmp(const char *str1, const char *str2, size_t n)\r\n{\r\n#if defined(OPENSSL_IMPLEMENTS_strncasecmp)\r\nwhile (*str1 && *str2 && n)\r\n{\r\nint res = toupper(*str1) - toupper(*str2);\r\nif (res) return res < 0 ? -1 : 1;\r\nstr1++;\r\nstr2++;\r\nn--;\r\n}\r\nif (n == 0)\r\nreturn 0;\r\nif (*str1)\r\nreturn 1;\r\nif (*str2)\r\nreturn -1;\r\nreturn 0;\r\n#else\r\nreturn strncasecmp(str1, str2, n);\r\n#endif\r\n}\r\nint OPENSSL_strcasecmp(const char *str1, const char *str2)\r\n{\r\n#if defined(OPENSSL_IMPLEMENTS_strncasecmp)\r\nreturn OPENSSL_strncasecmp(str1, str2, (size_t)-1);\r\n#else\r\nreturn strcasecmp(str1, str2);\r\n#endif\r\n}\r\nint OPENSSL_memcmp(const void *v1,const void *v2,size_t n)\r\n{\r\nconst unsigned char *c1=v1,*c2=v2;\r\nint ret=0;\r\nwhile(n && (ret=*c1-*c2)==0) n--,c1++,c2++;\r\nreturn ret;\r\n}
