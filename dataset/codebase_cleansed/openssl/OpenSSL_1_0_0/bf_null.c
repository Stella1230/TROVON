BIO_METHOD *BIO_f_null(void)\r\n{\r\nreturn(&methods_nullf);\r\n}\r\nstatic int nullf_new(BIO *bi)\r\n{\r\nbi->init=1;\r\nbi->ptr=NULL;\r\nbi->flags=0;\r\nreturn(1);\r\n}\r\nstatic int nullf_free(BIO *a)\r\n{\r\nif (a == NULL) return(0);\r\nreturn(1);\r\n}\r\nstatic int nullf_read(BIO *b, char *out, int outl)\r\n{\r\nint ret=0;\r\nif (out == NULL) return(0);\r\nif (b->next_bio == NULL) return(0);\r\nret=BIO_read(b->next_bio,out,outl);\r\nBIO_clear_retry_flags(b);\r\nBIO_copy_next_retry(b);\r\nreturn(ret);\r\n}\r\nstatic int nullf_write(BIO *b, const char *in, int inl)\r\n{\r\nint ret=0;\r\nif ((in == NULL) || (inl <= 0)) return(0);\r\nif (b->next_bio == NULL) return(0);\r\nret=BIO_write(b->next_bio,in,inl);\r\nBIO_clear_retry_flags(b);\r\nBIO_copy_next_retry(b);\r\nreturn(ret);\r\n}\r\nstatic long nullf_ctrl(BIO *b, int cmd, long num, void *ptr)\r\n{\r\nlong ret;\r\nif (b->next_bio == NULL) return(0);\r\nswitch(cmd)\r\n{\r\ncase BIO_C_DO_STATE_MACHINE:\r\nBIO_clear_retry_flags(b);\r\nret=BIO_ctrl(b->next_bio,cmd,num,ptr);\r\nBIO_copy_next_retry(b);\r\nbreak;\r\ncase BIO_CTRL_DUP:\r\nret=0L;\r\nbreak;\r\ndefault:\r\nret=BIO_ctrl(b->next_bio,cmd,num,ptr);\r\n}\r\nreturn(ret);\r\n}\r\nstatic long nullf_callback_ctrl(BIO *b, int cmd, bio_info_cb *fp)\r\n{\r\nlong ret=1;\r\nif (b->next_bio == NULL) return(0);\r\nswitch (cmd)\r\n{\r\ndefault:\r\nret=BIO_callback_ctrl(b->next_bio,cmd,fp);\r\nbreak;\r\n}\r\nreturn(ret);\r\n}\r\nstatic int nullf_gets(BIO *bp, char *buf, int size)\r\n{\r\nif (bp->next_bio == NULL) return(0);\r\nreturn(BIO_gets(bp->next_bio,buf,size));\r\n}\r\nstatic int nullf_puts(BIO *bp, const char *str)\r\n{\r\nif (bp->next_bio == NULL) return(0);\r\nreturn(BIO_puts(bp->next_bio,str));\r\n}
