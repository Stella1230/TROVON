static int ntfs_collate_binary(ntfs_volume *vol,\r\nconst void *data1, const int data1_len,\r\nconst void *data2, const int data2_len)\r\n{\r\nint rc;\r\nntfs_debug("Entering.");\r\nrc = memcmp(data1, data2, min(data1_len, data2_len));\r\nif (!rc && (data1_len != data2_len)) {\r\nif (data1_len < data2_len)\r\nrc = -1;\r\nelse\r\nrc = 1;\r\n}\r\nntfs_debug("Done, returning %i", rc);\r\nreturn rc;\r\n}\r\nstatic int ntfs_collate_ntofs_ulong(ntfs_volume *vol,\r\nconst void *data1, const int data1_len,\r\nconst void *data2, const int data2_len)\r\n{\r\nint rc;\r\nu32 d1, d2;\r\nntfs_debug("Entering.");\r\nBUG_ON(data1_len != data2_len);\r\nBUG_ON(data1_len != 4);\r\nd1 = le32_to_cpup(data1);\r\nd2 = le32_to_cpup(data2);\r\nif (d1 < d2)\r\nrc = -1;\r\nelse {\r\nif (d1 == d2)\r\nrc = 0;\r\nelse\r\nrc = 1;\r\n}\r\nntfs_debug("Done, returning %i", rc);\r\nreturn rc;\r\n}\r\nint ntfs_collate(ntfs_volume *vol, COLLATION_RULE cr,\r\nconst void *data1, const int data1_len,\r\nconst void *data2, const int data2_len) {\r\nint i;\r\nntfs_debug("Entering.");\r\nBUG_ON(cr != COLLATION_BINARY && cr != COLLATION_NTOFS_ULONG);\r\ni = le32_to_cpu(cr);\r\nBUG_ON(i < 0);\r\nif (i <= 0x02)\r\nreturn ntfs_do_collate0x0[i](vol, data1, data1_len,\r\ndata2, data2_len);\r\nBUG_ON(i < 0x10);\r\ni -= 0x10;\r\nif (likely(i <= 3))\r\nreturn ntfs_do_collate0x1[i](vol, data1, data1_len,\r\ndata2, data2_len);\r\nBUG();\r\nreturn 0;\r\n}
