int omap_pm_set_max_mpu_wakeup_lat(struct device *dev, long t)\r\n{\r\nif (!dev || t < -1) {\r\nWARN(1, "OMAP PM: %s: invalid parameter(s)", __func__);\r\nreturn -EINVAL;\r\n}\r\nif (t == -1)\r\npr_debug("OMAP PM: remove max MPU wakeup latency constraint: dev %s\n",\r\ndev_name(dev));\r\nelse\r\npr_debug("OMAP PM: add max MPU wakeup latency constraint: dev %s, t = %ld usec\n",\r\ndev_name(dev), t);\r\nreturn 0;\r\n}\r\nint omap_pm_set_min_bus_tput(struct device *dev, u8 agent_id, unsigned long r)\r\n{\r\nif (!dev || (agent_id != OCP_INITIATOR_AGENT &&\r\nagent_id != OCP_TARGET_AGENT)) {\r\nWARN(1, "OMAP PM: %s: invalid parameter(s)", __func__);\r\nreturn -EINVAL;\r\n}\r\nif (r == 0)\r\npr_debug("OMAP PM: remove min bus tput constraint: dev %s for agent_id %d\n",\r\ndev_name(dev), agent_id);\r\nelse\r\npr_debug("OMAP PM: add min bus tput constraint: dev %s for agent_id %d: rate %ld KiB\n",\r\ndev_name(dev), agent_id, r);\r\nreturn 0;\r\n}\r\nvoid omap_pm_enable_off_mode(void)\r\n{\r\noff_mode_enabled = true;\r\n}\r\nvoid omap_pm_disable_off_mode(void)\r\n{\r\noff_mode_enabled = false;\r\n}\r\nint omap_pm_get_dev_context_loss_count(struct device *dev)\r\n{\r\nstruct platform_device *pdev = to_platform_device(dev);\r\nint count;\r\nif (WARN_ON(!dev))\r\nreturn -ENODEV;\r\nif (dev->pm_domain == &omap_device_pm_domain) {\r\ncount = omap_device_get_context_loss_count(pdev);\r\n} else {\r\nWARN_ONCE(off_mode_enabled, "omap_pm: using dummy context loss counter; device %s should be converted to omap_device",\r\ndev_name(dev));\r\ncount = dummy_context_loss_counter;\r\nif (off_mode_enabled) {\r\ncount++;\r\ncount &= INT_MAX;\r\ndummy_context_loss_counter = count;\r\n}\r\n}\r\npr_debug("OMAP PM: context loss count for dev %s = %d\n",\r\ndev_name(dev), count);\r\nreturn count;\r\n}\r\nint omap_pm_get_dev_context_loss_count(struct device *dev)\r\n{\r\nreturn dummy_context_loss_counter;\r\n}\r\nint __init omap_pm_if_early_init(void)\r\n{\r\nreturn 0;\r\n}\r\nint __init omap_pm_if_init(void)\r\n{\r\nreturn 0;\r\n}
