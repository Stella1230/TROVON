static int __init dm814x_adpll_early_init(void)\r\n{\r\nstruct device_node *np;\r\nif (!timer_clocks_initialized)\r\nreturn -ENODEV;\r\nnp = of_find_node_by_name(NULL, "pllss");\r\nif (!np) {\r\npr_err("Could not find node for plls\n");\r\nreturn -ENODEV;\r\n}\r\nof_platform_populate(np, NULL, NULL, NULL);\r\nreturn 0;\r\n}\r\nstatic int __init dm814x_adpll_enable_init_clocks(void)\r\n{\r\nint i, err;\r\nif (!timer_clocks_initialized)\r\nreturn -ENODEV;\r\nfor (i = 0; i < ARRAY_SIZE(init_clocks); i++) {\r\nstruct clk *clock;\r\nclock = clk_get(NULL, init_clocks[i]);\r\nif (WARN(IS_ERR(clock), "could not find init clock %s\n",\r\ninit_clocks[i]))\r\ncontinue;\r\nerr = clk_prepare_enable(clock);\r\nif (WARN(err, "could not enable init clock %s\n",\r\ninit_clocks[i]))\r\ncontinue;\r\n}\r\nreturn 0;\r\n}\r\nint __init dm814x_dt_clk_init(void)\r\n{\r\nti_dt_clocks_register(dm814_clks);\r\nomap2_clk_disable_autoidle_all();\r\nomap2_clk_enable_init_clocks(NULL, 0);\r\ntimer_clocks_initialized = true;\r\nreturn 0;\r\n}
