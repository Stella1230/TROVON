static void sim_write(struct console *con, const char *s, unsigned n)\r\n{\r\nregister const int fd __asm__("er0") = 1;\r\nregister const char *_ptr __asm__("er1") = s;\r\nregister const unsigned _len __asm__("er2") = n;\r\n__asm__(".byte 0x5e,0x00,0x00,0xc7\n\t"\r\n: : "g"(fd), "g"(_ptr), "g"(_len));\r\n}\r\nstatic int __init sim_setup(struct earlycon_device *device, const char *opt)\r\n{\r\ndevice->con->write = sim_write;\r\nreturn 0;\r\n}
