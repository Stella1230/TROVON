static int virtio_gpu_probe(struct virtio_device *vdev)\r\n{\r\nif (vgacon_text_force() && virtio_gpu_modeset == -1)\r\nreturn -EINVAL;\r\nif (virtio_gpu_modeset == 0)\r\nreturn -EINVAL;\r\nreturn drm_virtio_init(&driver, vdev);\r\n}\r\nstatic void virtio_gpu_remove(struct virtio_device *vdev)\r\n{\r\nstruct drm_device *dev = vdev->priv;\r\ndrm_put_dev(dev);\r\n}\r\nstatic void virtio_gpu_config_changed(struct virtio_device *vdev)\r\n{\r\nstruct drm_device *dev = vdev->priv;\r\nstruct virtio_gpu_device *vgdev = dev->dev_private;\r\nschedule_work(&vgdev->config_changed_work);\r\n}
