static void __init m5307_i2c_init(void)\r\n{\r\n#if IS_ENABLED(CONFIG_I2C_IMX)\r\nwriteb(MCFSIM_ICR_AUTOVEC | MCFSIM_ICR_LEVEL5 | MCFSIM_ICR_PRI0,\r\nMCFSIM_I2CICR);\r\nmcf_mapirq2imr(MCF_IRQ_I2C0, MCFINTC_I2C);\r\n#endif\r\n}\r\nvoid __init config_BSP(char *commandp, int size)\r\n{\r\n#if defined(CONFIG_NETtel) || \\r\ndefined(CONFIG_SECUREEDGEMP3) || defined(CONFIG_CLEOPATRA)\r\nmemcpy(commandp, (char *) 0xf0004000, size);\r\ncommandp[size-1] = 0;\r\n#endif\r\nmach_sched_init = hw_timer_init;\r\nmcf_mapirq2imr(25, MCFINTC_EINT1);\r\nmcf_mapirq2imr(27, MCFINTC_EINT3);\r\nmcf_mapirq2imr(29, MCFINTC_EINT5);\r\nmcf_mapirq2imr(31, MCFINTC_EINT7);\r\n#ifdef CONFIG_BDM_DISABLE\r\nwdebug(MCFDEBUG_CSR, MCFDEBUG_CSR_PSTCLK);\r\n#endif\r\nm5307_i2c_init();\r\n}
