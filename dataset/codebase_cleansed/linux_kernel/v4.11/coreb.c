static long\r\ncoreb_ioctl(struct file *file, unsigned int cmd, unsigned long arg)\r\n{\r\nint ret = 0;\r\nswitch (cmd) {\r\ncase CMD_COREB_START:\r\nbfin_write_SYSCR(bfin_read_SYSCR() & ~0x0020);\r\nbreak;\r\ncase CMD_COREB_STOP:\r\nbfin_write_SYSCR(bfin_read_SYSCR() | 0x0020);\r\nbfin_write_SICB_SYSCR(bfin_read_SICB_SYSCR() | 0x0080);\r\nbreak;\r\ncase CMD_COREB_RESET:\r\nbfin_write_SICB_SYSCR(bfin_read_SICB_SYSCR() | 0x0080);\r\nbreak;\r\ndefault:\r\nret = -EINVAL;\r\nbreak;\r\n}\r\nCSYNC();\r\nreturn ret;\r\n}
