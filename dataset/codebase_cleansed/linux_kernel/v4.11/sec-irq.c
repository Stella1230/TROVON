int sec_irq_init(struct sec_pmic_dev *sec_pmic)\r\n{\r\nint ret = 0;\r\nint type = sec_pmic->device_type;\r\nconst struct regmap_irq_chip *sec_irq_chip;\r\nif (!sec_pmic->irq) {\r\ndev_warn(sec_pmic->dev,\r\n"No interrupt specified, no interrupts\n");\r\nsec_pmic->irq_base = 0;\r\nreturn 0;\r\n}\r\nswitch (type) {\r\ncase S5M8763X:\r\nsec_irq_chip = &s5m8763_irq_chip;\r\nbreak;\r\ncase S5M8767X:\r\nsec_irq_chip = &s5m8767_irq_chip;\r\nbreak;\r\ncase S2MPS11X:\r\nsec_irq_chip = &s2mps11_irq_chip;\r\nbreak;\r\ncase S2MPS13X:\r\nsec_irq_chip = &s2mps13_irq_chip;\r\nbreak;\r\ncase S2MPS14X:\r\nsec_irq_chip = &s2mps14_irq_chip;\r\nbreak;\r\ncase S2MPS15X:\r\nsec_irq_chip = &s2mps15_irq_chip;\r\nbreak;\r\ncase S2MPU02:\r\nsec_irq_chip = &s2mpu02_irq_chip;\r\nbreak;\r\ndefault:\r\ndev_err(sec_pmic->dev, "Unknown device type %lu\n",\r\nsec_pmic->device_type);\r\nreturn -EINVAL;\r\n}\r\nret = devm_regmap_add_irq_chip(sec_pmic->dev, sec_pmic->regmap_pmic,\r\nsec_pmic->irq,\r\nIRQF_TRIGGER_FALLING | IRQF_ONESHOT,\r\nsec_pmic->irq_base, sec_irq_chip,\r\n&sec_pmic->irq_data);\r\nif (ret != 0) {\r\ndev_err(sec_pmic->dev, "Failed to register IRQ chip: %d\n", ret);\r\nreturn ret;\r\n}\r\nBUILD_BUG_ON(((enum s2mps14_irq)S2MPS11_IRQ_RTCA0) != S2MPS14_IRQ_RTCA0);\r\nreturn 0;\r\n}
