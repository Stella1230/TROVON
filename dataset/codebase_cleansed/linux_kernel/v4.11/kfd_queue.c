void print_queue_properties(struct queue_properties *q)\r\n{\r\nif (!q)\r\nreturn;\r\npr_debug("Printing queue properties:\n");\r\npr_debug("Queue Type: %u\n", q->type);\r\npr_debug("Queue Size: %llu\n", q->queue_size);\r\npr_debug("Queue percent: %u\n", q->queue_percent);\r\npr_debug("Queue Address: 0x%llX\n", q->queue_address);\r\npr_debug("Queue Id: %u\n", q->queue_id);\r\npr_debug("Queue Process Vmid: %u\n", q->vmid);\r\npr_debug("Queue Read Pointer: 0x%p\n", q->read_ptr);\r\npr_debug("Queue Write Pointer: 0x%p\n", q->write_ptr);\r\npr_debug("Queue Doorbell Pointer: 0x%p\n", q->doorbell_ptr);\r\npr_debug("Queue Doorbell Offset: %u\n", q->doorbell_off);\r\n}\r\nvoid print_queue(struct queue *q)\r\n{\r\nif (!q)\r\nreturn;\r\npr_debug("Printing queue:\n");\r\npr_debug("Queue Type: %u\n", q->properties.type);\r\npr_debug("Queue Size: %llu\n", q->properties.queue_size);\r\npr_debug("Queue percent: %u\n", q->properties.queue_percent);\r\npr_debug("Queue Address: 0x%llX\n", q->properties.queue_address);\r\npr_debug("Queue Id: %u\n", q->properties.queue_id);\r\npr_debug("Queue Process Vmid: %u\n", q->properties.vmid);\r\npr_debug("Queue Read Pointer: 0x%p\n", q->properties.read_ptr);\r\npr_debug("Queue Write Pointer: 0x%p\n", q->properties.write_ptr);\r\npr_debug("Queue Doorbell Pointer: 0x%p\n", q->properties.doorbell_ptr);\r\npr_debug("Queue Doorbell Offset: %u\n", q->properties.doorbell_off);\r\npr_debug("Queue MQD Address: 0x%p\n", q->mqd);\r\npr_debug("Queue MQD Gart: 0x%llX\n", q->gart_mqd_addr);\r\npr_debug("Queue Process Address: 0x%p\n", q->process);\r\npr_debug("Queue Device Address: 0x%p\n", q->device);\r\n}\r\nint init_queue(struct queue **q, const struct queue_properties *properties)\r\n{\r\nstruct queue *tmp;\r\nBUG_ON(!q);\r\ntmp = kzalloc(sizeof(struct queue), GFP_KERNEL);\r\nif (!tmp)\r\nreturn -ENOMEM;\r\nmemcpy(&tmp->properties, properties, sizeof(struct queue_properties));\r\n*q = tmp;\r\nreturn 0;\r\n}\r\nvoid uninit_queue(struct queue *q)\r\n{\r\nkfree(q);\r\n}
