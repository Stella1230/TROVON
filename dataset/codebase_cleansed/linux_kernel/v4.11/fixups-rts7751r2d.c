int __init pcibios_map_platform_irq(const struct pci_dev *pdev, u8 slot, u8 pin)\r\n{\r\nif (mach_is_lboxre2())\r\nreturn lboxre2_irq_tab[slot];\r\nelse\r\nreturn rts7751r2d_irq_tab[slot];\r\n}\r\nint pci_fixup_pcic(struct pci_channel *chan)\r\n{\r\nunsigned long bcr1, mcr;\r\nbcr1 = __raw_readl(SH7751_BCR1);\r\nbcr1 |= 0x40080000;\r\npci_write_reg(chan, bcr1, SH4_PCIBCR1);\r\npci_write_reg(chan, 0x0000c3ff, SH4_PCIINTM);\r\npci_write_reg(chan, 0x0000380f, SH4_PCIAINTM);\r\npci_write_reg(chan, 0xfb900047, SH7751_PCICONF1);\r\npci_write_reg(chan, 0xab000001, SH7751_PCICONF4);\r\nmcr = __raw_readl(SH7751_MCR);\r\nmcr = (mcr & PCIMCR_MRSET_OFF) & PCIMCR_RFSH_OFF;\r\npci_write_reg(chan, mcr, SH4_PCIMCR);\r\npci_write_reg(chan, 0x0c000000, SH7751_PCICONF5);\r\npci_write_reg(chan, 0xd0000000, SH7751_PCICONF6);\r\npci_write_reg(chan, 0x0c000000, SH4_PCILAR0);\r\npci_write_reg(chan, 0x00000000, SH4_PCILAR1);\r\nreturn 0;\r\n}
