static int s5pv210_clk_suspend(void)\r\n{\r\nsamsung_clk_save(reg_base, s5pv210_clk_dump,\r\nARRAY_SIZE(s5pv210_clk_regs));\r\nreturn 0;\r\n}\r\nstatic void s5pv210_clk_resume(void)\r\n{\r\nsamsung_clk_restore(reg_base, s5pv210_clk_dump,\r\nARRAY_SIZE(s5pv210_clk_regs));\r\n}\r\nstatic void s5pv210_clk_sleep_init(void)\r\n{\r\ns5pv210_clk_dump =\r\nsamsung_clk_alloc_reg_dump(s5pv210_clk_regs,\r\nARRAY_SIZE(s5pv210_clk_regs));\r\nif (!s5pv210_clk_dump) {\r\npr_warn("%s: Failed to allocate sleep save data\n", __func__);\r\nreturn;\r\n}\r\nregister_syscore_ops(&s5pv210_clk_syscore_ops);\r\n}\r\nstatic inline void s5pv210_clk_sleep_init(void) { }\r\nstatic void __init __s5pv210_clk_init(struct device_node *np,\r\nunsigned long xxti_f,\r\nunsigned long xusbxti_f,\r\nbool is_s5p6442)\r\n{\r\nstruct samsung_clk_provider *ctx;\r\nctx = samsung_clk_init(np, reg_base, NR_CLKS);\r\nsamsung_clk_register_mux(ctx, early_mux_clks,\r\nARRAY_SIZE(early_mux_clks));\r\nif (is_s5p6442) {\r\nsamsung_clk_register_fixed_rate(ctx, s5p6442_frate_clks,\r\nARRAY_SIZE(s5p6442_frate_clks));\r\nsamsung_clk_register_pll(ctx, s5p6442_pll_clks,\r\nARRAY_SIZE(s5p6442_pll_clks), reg_base);\r\nsamsung_clk_register_mux(ctx, s5p6442_mux_clks,\r\nARRAY_SIZE(s5p6442_mux_clks));\r\nsamsung_clk_register_div(ctx, s5p6442_div_clks,\r\nARRAY_SIZE(s5p6442_div_clks));\r\nsamsung_clk_register_gate(ctx, s5p6442_gate_clks,\r\nARRAY_SIZE(s5p6442_gate_clks));\r\n} else {\r\nsamsung_clk_register_fixed_rate(ctx, s5pv210_frate_clks,\r\nARRAY_SIZE(s5pv210_frate_clks));\r\nsamsung_clk_register_pll(ctx, s5pv210_pll_clks,\r\nARRAY_SIZE(s5pv210_pll_clks), reg_base);\r\nsamsung_clk_register_mux(ctx, s5pv210_mux_clks,\r\nARRAY_SIZE(s5pv210_mux_clks));\r\nsamsung_clk_register_div(ctx, s5pv210_div_clks,\r\nARRAY_SIZE(s5pv210_div_clks));\r\nsamsung_clk_register_gate(ctx, s5pv210_gate_clks,\r\nARRAY_SIZE(s5pv210_gate_clks));\r\n}\r\nsamsung_clk_register_mux(ctx, mux_clks, ARRAY_SIZE(mux_clks));\r\nsamsung_clk_register_div(ctx, div_clks, ARRAY_SIZE(div_clks));\r\nsamsung_clk_register_gate(ctx, gate_clks, ARRAY_SIZE(gate_clks));\r\nsamsung_clk_register_fixed_factor(ctx, ffactor_clks,\r\nARRAY_SIZE(ffactor_clks));\r\nsamsung_clk_register_alias(ctx, s5pv210_aliases,\r\nARRAY_SIZE(s5pv210_aliases));\r\ns5pv210_clk_sleep_init();\r\nsamsung_clk_of_add_provider(np, ctx);\r\npr_info("%s clocks: mout_apll = %ld, mout_mpll = %ld\n"\r\n"\tmout_epll = %ld, mout_vpll = %ld\n",\r\nis_s5p6442 ? "S5P6442" : "S5PV210",\r\n_get_rate("mout_apll"), _get_rate("mout_mpll"),\r\n_get_rate("mout_epll"), _get_rate("mout_vpll"));\r\n}\r\nstatic void __init s5pv210_clk_dt_init(struct device_node *np)\r\n{\r\nreg_base = of_iomap(np, 0);\r\nif (!reg_base)\r\npanic("%s: failed to map registers\n", __func__);\r\n__s5pv210_clk_init(np, 0, 0, false);\r\n}\r\nstatic void __init s5p6442_clk_dt_init(struct device_node *np)\r\n{\r\nreg_base = of_iomap(np, 0);\r\nif (!reg_base)\r\npanic("%s: failed to map registers\n", __func__);\r\n__s5pv210_clk_init(np, 0, 0, true);\r\n}
