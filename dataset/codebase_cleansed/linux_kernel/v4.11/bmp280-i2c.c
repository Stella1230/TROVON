static int bmp280_i2c_probe(struct i2c_client *client,\r\nconst struct i2c_device_id *id)\r\n{\r\nstruct regmap *regmap;\r\nconst struct regmap_config *regmap_config;\r\nswitch (id->driver_data) {\r\ncase BMP180_CHIP_ID:\r\nregmap_config = &bmp180_regmap_config;\r\nbreak;\r\ncase BMP280_CHIP_ID:\r\ncase BME280_CHIP_ID:\r\nregmap_config = &bmp280_regmap_config;\r\nbreak;\r\ndefault:\r\nreturn -EINVAL;\r\n}\r\nregmap = devm_regmap_init_i2c(client, regmap_config);\r\nif (IS_ERR(regmap)) {\r\ndev_err(&client->dev, "failed to allocate register map\n");\r\nreturn PTR_ERR(regmap);\r\n}\r\nreturn bmp280_common_probe(&client->dev,\r\nregmap,\r\nid->driver_data,\r\nid->name,\r\nclient->irq);\r\n}\r\nstatic int bmp280_i2c_remove(struct i2c_client *client)\r\n{\r\nreturn bmp280_common_remove(&client->dev);\r\n}
