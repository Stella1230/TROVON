struct clk_hw *uniphier_clk_register_fixed_factor(struct device *dev,\r\nconst char *name,\r\nconst struct uniphier_clk_fixed_factor_data *data)\r\n{\r\nstruct clk_fixed_factor *fix;\r\nstruct clk_init_data init;\r\nint ret;\r\nfix = devm_kzalloc(dev, sizeof(*fix), GFP_KERNEL);\r\nif (!fix)\r\nreturn ERR_PTR(-ENOMEM);\r\ninit.name = name;\r\ninit.ops = &clk_fixed_factor_ops;\r\ninit.flags = data->parent_name ? CLK_SET_RATE_PARENT : 0;\r\ninit.parent_names = data->parent_name ? &data->parent_name : NULL;\r\ninit.num_parents = data->parent_name ? 1 : 0;\r\nfix->mult = data->mult;\r\nfix->div = data->div;\r\nfix->hw.init = &init;\r\nret = devm_clk_hw_register(dev, &fix->hw);\r\nif (ret)\r\nreturn ERR_PTR(ret);\r\nreturn &fix->hw;\r\n}
