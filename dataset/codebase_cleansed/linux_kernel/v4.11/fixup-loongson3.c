static void print_fixup_info(const struct pci_dev *pdev)\r\n{\r\ndev_info(&pdev->dev, "Device %x:%x, irq %d\n",\r\npdev->vendor, pdev->device, pdev->irq);\r\n}\r\nint __init pcibios_map_irq(const struct pci_dev *dev, u8 slot, u8 pin)\r\n{\r\nprint_fixup_info(dev);\r\nreturn dev->irq;\r\n}\r\nstatic void pci_fixup_radeon(struct pci_dev *pdev)\r\n{\r\nstruct resource *res = &pdev->resource[PCI_ROM_RESOURCE];\r\nif (res->start)\r\nreturn;\r\nif (!loongson_sysconf.vgabios_addr)\r\nreturn;\r\npci_disable_rom(pdev);\r\nif (res->parent)\r\nrelease_resource(res);\r\nres->start = virt_to_phys((void *) loongson_sysconf.vgabios_addr);\r\nres->end = res->start + 256*1024 - 1;\r\nres->flags = IORESOURCE_MEM | IORESOURCE_ROM_SHADOW |\r\nIORESOURCE_PCI_FIXED;\r\ndev_info(&pdev->dev, "BAR %d: assigned %pR for Radeon ROM\n",\r\nPCI_ROM_RESOURCE, res);\r\n}\r\nint pcibios_plat_dev_init(struct pci_dev *dev)\r\n{\r\nreturn 0;\r\n}
