enum i40iw_status_code i40iw_manage_vf_pble_bp(struct i40iw_sc_cqp *cqp,\r\nstruct i40iw_manage_vf_pble_info *info,\r\nu64 scratch,\r\nbool post_sq)\r\n{\r\nu64 *wqe;\r\nu64 temp, header, pd_pl_pba = 0;\r\nwqe = i40iw_sc_cqp_get_next_send_wqe(cqp, scratch);\r\nif (!wqe)\r\nreturn I40IW_ERR_RING_FULL;\r\ntemp = LS_64(info->pd_entry_cnt, I40IW_CQPSQ_MVPBP_PD_ENTRY_CNT) |\r\nLS_64(info->first_pd_index, I40IW_CQPSQ_MVPBP_FIRST_PD_INX) |\r\nLS_64(info->sd_index, I40IW_CQPSQ_MVPBP_SD_INX);\r\nset_64bit_val(wqe, 16, temp);\r\nheader = LS_64((info->inv_pd_ent ? 1 : 0), I40IW_CQPSQ_MVPBP_INV_PD_ENT) |\r\nLS_64(I40IW_CQP_OP_MANAGE_VF_PBLE_BP, I40IW_CQPSQ_OPCODE) |\r\nLS_64(cqp->polarity, I40IW_CQPSQ_WQEVALID);\r\nset_64bit_val(wqe, 24, header);\r\npd_pl_pba = LS_64(info->pd_pl_pba >> 3, I40IW_CQPSQ_MVPBP_PD_PLPBA);\r\nset_64bit_val(wqe, 32, pd_pl_pba);\r\ni40iw_debug_buf(cqp->dev, I40IW_DEBUG_WQE, "MANAGE VF_PBLE_BP WQE", wqe, I40IW_CQP_WQE_SIZE * 8);\r\nif (post_sq)\r\ni40iw_sc_cqp_post_sq(cqp);\r\nreturn 0;\r\n}
