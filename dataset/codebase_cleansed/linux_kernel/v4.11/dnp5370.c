static int __init dnp5370_init(void)\r\n{\r\nprintk(KERN_INFO "DNP/5370: registering device resources\n");\r\nplatform_add_devices(dnp5370_devices, ARRAY_SIZE(dnp5370_devices));\r\nprintk(KERN_INFO "DNP/5370: registering %zu SPI slave devices\n",\r\nARRAY_SIZE(bfin_spi_board_info));\r\nspi_register_board_info(bfin_spi_board_info, ARRAY_SIZE(bfin_spi_board_info));\r\nprintk(KERN_INFO "DNP/5370: MAC %pM\n", (void *)FLASH_MAC);\r\nreturn 0;\r\n}\r\nint bfin_get_ether_addr(char *addr)\r\n{\r\n*(u32 *)(&(addr[0])) = bfin_read32(FLASH_MAC);\r\n*(u16 *)(&(addr[4])) = bfin_read16(FLASH_MAC + 4);\r\nreturn 0;\r\n}
