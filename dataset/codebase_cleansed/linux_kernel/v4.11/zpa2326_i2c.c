static unsigned int zpa2326_i2c_hwid(const struct i2c_client *client)\r\n{\r\n#define ZPA2326_SA0(_addr) (_addr & BIT(0))\r\n#define ZPA2326_DEVICE_ID_SA0_SHIFT (1)\r\nreturn (ZPA2326_DEVICE_ID |\r\n(ZPA2326_SA0(client->addr) << ZPA2326_DEVICE_ID_SA0_SHIFT));\r\n}\r\nstatic int zpa2326_probe_i2c(struct i2c_client *client,\r\nconst struct i2c_device_id *i2c_id)\r\n{\r\nstruct regmap *regmap;\r\nregmap = devm_regmap_init_i2c(client, &zpa2326_regmap_i2c_config);\r\nif (IS_ERR(regmap)) {\r\ndev_err(&client->dev, "failed to init registers map");\r\nreturn PTR_ERR(regmap);\r\n}\r\nreturn zpa2326_probe(&client->dev, i2c_id->name, client->irq,\r\nzpa2326_i2c_hwid(client), regmap);\r\n}\r\nstatic int zpa2326_remove_i2c(struct i2c_client *client)\r\n{\r\nzpa2326_remove(&client->dev);\r\nreturn 0;\r\n}
