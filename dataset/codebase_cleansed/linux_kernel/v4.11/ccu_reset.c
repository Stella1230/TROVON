static int ccu_reset_assert(struct reset_controller_dev *rcdev,\r\nunsigned long id)\r\n{\r\nstruct ccu_reset *ccu = rcdev_to_ccu_reset(rcdev);\r\nconst struct ccu_reset_map *map = &ccu->reset_map[id];\r\nunsigned long flags;\r\nu32 reg;\r\nspin_lock_irqsave(ccu->lock, flags);\r\nreg = readl(ccu->base + map->reg);\r\nwritel(reg & ~map->bit, ccu->base + map->reg);\r\nspin_unlock_irqrestore(ccu->lock, flags);\r\nreturn 0;\r\n}\r\nstatic int ccu_reset_deassert(struct reset_controller_dev *rcdev,\r\nunsigned long id)\r\n{\r\nstruct ccu_reset *ccu = rcdev_to_ccu_reset(rcdev);\r\nconst struct ccu_reset_map *map = &ccu->reset_map[id];\r\nunsigned long flags;\r\nu32 reg;\r\nspin_lock_irqsave(ccu->lock, flags);\r\nreg = readl(ccu->base + map->reg);\r\nwritel(reg | map->bit, ccu->base + map->reg);\r\nspin_unlock_irqrestore(ccu->lock, flags);\r\nreturn 0;\r\n}
