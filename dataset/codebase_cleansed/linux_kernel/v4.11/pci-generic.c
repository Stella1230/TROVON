resource_size_t pcibios_align_resource(void *data, const struct resource *res,\r\nresource_size_t size, resource_size_t align)\r\n{\r\nstruct pci_dev *dev = data;\r\nresource_size_t start = res->start;\r\nstruct pci_host_bridge *host_bridge;\r\nif (res->flags & IORESOURCE_IO && start & 0x300)\r\nstart = (start + 0x3ff) & ~0x3ff;\r\nstart = (start + align - 1) & ~(align - 1);\r\nhost_bridge = pci_find_host_bridge(dev->bus);\r\nif (host_bridge->align_resource)\r\nreturn host_bridge->align_resource(dev, res,\r\nstart, size, align);\r\nreturn start;\r\n}\r\nvoid pcibios_fixup_bus(struct pci_bus *bus)\r\n{\r\npci_read_bridge_bases(bus);\r\n}
