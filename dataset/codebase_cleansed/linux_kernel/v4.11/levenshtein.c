int levenshtein(const char *string1, const char *string2,\r\nint w, int s, int a, int d)\r\n{\r\nint len1 = strlen(string1), len2 = strlen(string2);\r\nint *row0 = malloc(sizeof(int) * (len2 + 1));\r\nint *row1 = malloc(sizeof(int) * (len2 + 1));\r\nint *row2 = malloc(sizeof(int) * (len2 + 1));\r\nint i, j;\r\nfor (j = 0; j <= len2; j++)\r\nrow1[j] = j * a;\r\nfor (i = 0; i < len1; i++) {\r\nint *dummy;\r\nrow2[0] = (i + 1) * d;\r\nfor (j = 0; j < len2; j++) {\r\nrow2[j + 1] = row1[j] + s * (string1[i] != string2[j]);\r\nif (i > 0 && j > 0 && string1[i - 1] == string2[j] &&\r\nstring1[i] == string2[j - 1] &&\r\nrow2[j + 1] > row0[j - 1] + w)\r\nrow2[j + 1] = row0[j - 1] + w;\r\nif (row2[j + 1] > row1[j + 1] + d)\r\nrow2[j + 1] = row1[j + 1] + d;\r\nif (row2[j + 1] > row2[j] + a)\r\nrow2[j + 1] = row2[j] + a;\r\n}\r\ndummy = row0;\r\nrow0 = row1;\r\nrow1 = row2;\r\nrow2 = dummy;\r\n}\r\ni = row1[len2];\r\nfree(row0);\r\nfree(row1);\r\nfree(row2);\r\nreturn i;\r\n}
