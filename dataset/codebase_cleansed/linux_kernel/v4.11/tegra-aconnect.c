static int tegra_aconnect_probe(struct platform_device *pdev)\r\n{\r\nint ret;\r\nif (!pdev->dev.of_node)\r\nreturn -EINVAL;\r\nret = pm_clk_create(&pdev->dev);\r\nif (ret)\r\nreturn ret;\r\nret = of_pm_clk_add_clk(&pdev->dev, "ape");\r\nif (ret)\r\ngoto clk_destroy;\r\nret = of_pm_clk_add_clk(&pdev->dev, "apb2ape");\r\nif (ret)\r\ngoto clk_destroy;\r\npm_runtime_enable(&pdev->dev);\r\nof_platform_populate(pdev->dev.of_node, NULL, NULL, &pdev->dev);\r\ndev_info(&pdev->dev, "Tegra ACONNECT bus registered\n");\r\nreturn 0;\r\nclk_destroy:\r\npm_clk_destroy(&pdev->dev);\r\nreturn ret;\r\n}\r\nstatic int tegra_aconnect_remove(struct platform_device *pdev)\r\n{\r\npm_runtime_disable(&pdev->dev);\r\npm_clk_destroy(&pdev->dev);\r\nreturn 0;\r\n}\r\nstatic int tegra_aconnect_runtime_resume(struct device *dev)\r\n{\r\nreturn pm_clk_resume(dev);\r\n}\r\nstatic int tegra_aconnect_runtime_suspend(struct device *dev)\r\n{\r\nreturn pm_clk_suspend(dev);\r\n}
