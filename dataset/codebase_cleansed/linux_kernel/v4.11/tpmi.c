__init void iop13xx_add_tpmi_devices(void)\r\n{\r\nunsigned short device_id;\r\nif (__raw_readl(IOP13XX_ESSR0) & IOP13XX_INTERFACE_SEL_PCIX)\r\ndevice_id = __raw_readw(IOP13XX_ATUE_DID);\r\nelse\r\ndevice_id = __raw_readw(IOP13XX_ATUX_DID);\r\nswitch (device_id) {\r\ncase 0x3380:\r\ncase 0x3384:\r\ncase 0x3388:\r\ncase 0x338c:\r\ncase 0x3382:\r\ncase 0x3386:\r\ncase 0x338a:\r\ncase 0x338e:\r\nreturn;\r\ncase 0x3310:\r\ncase 0x3312:\r\ncase 0x3314:\r\ncase 0x3318:\r\ncase 0x331a:\r\ncase 0x331c:\r\ncase 0x33c0:\r\ncase 0x33c2:\r\ncase 0x33c4:\r\ncase 0x33c8:\r\ncase 0x33ca:\r\ncase 0x33cc:\r\ncase 0x33b0:\r\ncase 0x33b2:\r\ncase 0x33b4:\r\ncase 0x33b8:\r\ncase 0x33ba:\r\ncase 0x33bc:\r\ncase 0x3320:\r\ncase 0x3322:\r\ncase 0x3324:\r\ncase 0x3328:\r\ncase 0x332a:\r\ncase 0x332c:\r\nplatform_device_register(&iop13xx_tpmi_0_device);\r\nreturn;\r\ndefault:\r\nplatform_device_register(&iop13xx_tpmi_0_device);\r\nplatform_device_register(&iop13xx_tpmi_1_device);\r\nplatform_device_register(&iop13xx_tpmi_2_device);\r\nplatform_device_register(&iop13xx_tpmi_3_device);\r\nreturn;\r\n}\r\n}
