char *_braille_console_setup(char **str, char **brl_options)\r\n{\r\nif (!strncmp(*str, "brl,", 4)) {\r\n*brl_options = "";\r\n*str += 4;\r\n} else if (!strncmp(*str, "brl=", 4)) {\r\n*brl_options = *str + 4;\r\n*str = strchr(*brl_options, ',');\r\nif (!*str)\r\npr_err("need port name after brl=\n");\r\nelse\r\n*((*str)++) = 0;\r\n} else\r\nreturn NULL;\r\nreturn *str;\r\n}\r\nint\r\n_braille_register_console(struct console *console, struct console_cmdline *c)\r\n{\r\nint rtn = 0;\r\nif (c->brl_options) {\r\nconsole->flags |= CON_BRL;\r\nrtn = braille_register_console(console, c->index, c->options,\r\nc->brl_options);\r\n}\r\nreturn rtn;\r\n}\r\nint\r\n_braille_unregister_console(struct console *console)\r\n{\r\nif (console->flags & CON_BRL)\r\nreturn braille_unregister_console(console);\r\nreturn 0;\r\n}
