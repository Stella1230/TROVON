void __init clocksource_probe(void)\r\n{\r\nstruct device_node *np;\r\nconst struct of_device_id *match;\r\nof_init_fn_1_ret init_func_ret;\r\nunsigned clocksources = 0;\r\nint ret;\r\nfor_each_matching_node_and_match(np, __clksrc_of_table, &match) {\r\nif (!of_device_is_available(np))\r\ncontinue;\r\ninit_func_ret = match->data;\r\nret = init_func_ret(np);\r\nif (ret) {\r\npr_err("Failed to initialize '%s': %d",\r\nof_node_full_name(np), ret);\r\ncontinue;\r\n}\r\nclocksources++;\r\n}\r\nclocksources += acpi_probe_device_table(clksrc);\r\nif (!clocksources)\r\npr_crit("%s: no matching clocksources found\n", __func__);\r\n}
