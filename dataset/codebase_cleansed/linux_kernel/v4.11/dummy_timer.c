static int dummy_timer_starting_cpu(unsigned int cpu)\r\n{\r\nstruct clock_event_device *evt = per_cpu_ptr(&dummy_timer_evt, cpu);\r\nevt->name = "dummy_timer";\r\nevt->features = CLOCK_EVT_FEAT_PERIODIC |\r\nCLOCK_EVT_FEAT_ONESHOT |\r\nCLOCK_EVT_FEAT_DUMMY;\r\nevt->rating = 100;\r\nevt->cpumask = cpumask_of(cpu);\r\nclockevents_register_device(evt);\r\nreturn 0;\r\n}\r\nstatic int __init dummy_timer_register(void)\r\n{\r\nreturn cpuhp_setup_state(CPUHP_AP_DUMMY_TIMER_STARTING,\r\n"clockevents/dummy_timer:starting",\r\ndummy_timer_starting_cpu, NULL);\r\n}
