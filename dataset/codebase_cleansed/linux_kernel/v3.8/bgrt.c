static ssize_t show_version(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->version);\r\n}\r\nstatic ssize_t show_status(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->status);\r\n}\r\nstatic ssize_t show_type(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->image_type);\r\n}\r\nstatic ssize_t show_xoffset(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->image_offset_x);\r\n}\r\nstatic ssize_t show_yoffset(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->image_offset_y);\r\n}\r\nstatic ssize_t show_image(struct file *file, struct kobject *kobj,\r\nstruct bin_attribute *attr, char *buf, loff_t off, size_t count)\r\n{\r\nmemcpy(buf, attr->private + off, count);\r\nreturn count;\r\n}\r\nstatic int __init bgrt_init(void)\r\n{\r\nint ret;\r\nif (!bgrt_image)\r\nreturn -ENODEV;\r\nsysfs_bin_attr_init(&image_attr);\r\nimage_attr.private = bgrt_image;\r\nimage_attr.size = bgrt_image_size;\r\nbgrt_kobj = kobject_create_and_add("bgrt", acpi_kobj);\r\nif (!bgrt_kobj)\r\nreturn -EINVAL;\r\nret = sysfs_create_group(bgrt_kobj, &bgrt_attribute_group);\r\nif (ret)\r\ngoto out_kobject;\r\nret = sysfs_create_bin_file(bgrt_kobj, &image_attr);\r\nif (ret)\r\ngoto out_group;\r\nreturn 0;\r\nout_group:\r\nsysfs_remove_group(bgrt_kobj, &bgrt_attribute_group);\r\nout_kobject:\r\nkobject_put(bgrt_kobj);\r\nreturn ret;\r\n}
