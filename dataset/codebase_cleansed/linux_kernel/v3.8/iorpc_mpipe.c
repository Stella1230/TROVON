int gxio_mpipe_alloc_buffer_stacks(gxio_mpipe_context_t * context,\r\nunsigned int count, unsigned int first,\r\nunsigned int flags)\r\n{\r\nstruct alloc_buffer_stacks_param temp;\r\nstruct alloc_buffer_stacks_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_MPIPE_OP_ALLOC_BUFFER_STACKS);\r\n}\r\nint gxio_mpipe_init_buffer_stack_aux(gxio_mpipe_context_t * context,\r\nvoid *mem_va, size_t mem_size,\r\nunsigned int mem_flags, unsigned int stack,\r\nunsigned int buffer_size_enum)\r\n{\r\nint __result;\r\nunsigned long long __cpa;\r\npte_t __pte;\r\nstruct init_buffer_stack_aux_param temp;\r\nstruct init_buffer_stack_aux_param *params = &temp;\r\n__result = va_to_cpa_and_pte(mem_va, &__cpa, &__pte);\r\nif (__result != 0)\r\nreturn __result;\r\nparams->buffer.kernel.cpa = __cpa;\r\nparams->buffer.kernel.size = mem_size;\r\nparams->buffer.kernel.pte = __pte;\r\nparams->buffer.kernel.flags = mem_flags;\r\nparams->stack = stack;\r\nparams->buffer_size_enum = buffer_size_enum;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_MPIPE_OP_INIT_BUFFER_STACK_AUX);\r\n}\r\nint gxio_mpipe_alloc_notif_rings(gxio_mpipe_context_t * context,\r\nunsigned int count, unsigned int first,\r\nunsigned int flags)\r\n{\r\nstruct alloc_notif_rings_param temp;\r\nstruct alloc_notif_rings_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_ALLOC_NOTIF_RINGS);\r\n}\r\nint gxio_mpipe_init_notif_ring_aux(gxio_mpipe_context_t * context, void *mem_va,\r\nsize_t mem_size, unsigned int mem_flags,\r\nunsigned int ring)\r\n{\r\nint __result;\r\nunsigned long long __cpa;\r\npte_t __pte;\r\nstruct init_notif_ring_aux_param temp;\r\nstruct init_notif_ring_aux_param *params = &temp;\r\n__result = va_to_cpa_and_pte(mem_va, &__cpa, &__pte);\r\nif (__result != 0)\r\nreturn __result;\r\nparams->buffer.kernel.cpa = __cpa;\r\nparams->buffer.kernel.size = mem_size;\r\nparams->buffer.kernel.pte = __pte;\r\nparams->buffer.kernel.flags = mem_flags;\r\nparams->ring = ring;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_MPIPE_OP_INIT_NOTIF_RING_AUX);\r\n}\r\nint gxio_mpipe_request_notif_ring_interrupt(gxio_mpipe_context_t * context,\r\nint inter_x, int inter_y,\r\nint inter_ipi, int inter_event,\r\nunsigned int ring)\r\n{\r\nstruct request_notif_ring_interrupt_param temp;\r\nstruct request_notif_ring_interrupt_param *params = &temp;\r\nparams->interrupt.kernel.x = inter_x;\r\nparams->interrupt.kernel.y = inter_y;\r\nparams->interrupt.kernel.ipi = inter_ipi;\r\nparams->interrupt.kernel.event = inter_event;\r\nparams->ring = ring;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_MPIPE_OP_REQUEST_NOTIF_RING_INTERRUPT);\r\n}\r\nint gxio_mpipe_enable_notif_ring_interrupt(gxio_mpipe_context_t * context,\r\nunsigned int ring)\r\n{\r\nstruct enable_notif_ring_interrupt_param temp;\r\nstruct enable_notif_ring_interrupt_param *params = &temp;\r\nparams->ring = ring;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_MPIPE_OP_ENABLE_NOTIF_RING_INTERRUPT);\r\n}\r\nint gxio_mpipe_alloc_notif_groups(gxio_mpipe_context_t * context,\r\nunsigned int count, unsigned int first,\r\nunsigned int flags)\r\n{\r\nstruct alloc_notif_groups_param temp;\r\nstruct alloc_notif_groups_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_ALLOC_NOTIF_GROUPS);\r\n}\r\nint gxio_mpipe_init_notif_group(gxio_mpipe_context_t * context,\r\nunsigned int group,\r\ngxio_mpipe_notif_group_bits_t bits)\r\n{\r\nstruct init_notif_group_param temp;\r\nstruct init_notif_group_param *params = &temp;\r\nparams->group = group;\r\nparams->bits = bits;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_INIT_NOTIF_GROUP);\r\n}\r\nint gxio_mpipe_alloc_buckets(gxio_mpipe_context_t * context, unsigned int count,\r\nunsigned int first, unsigned int flags)\r\n{\r\nstruct alloc_buckets_param temp;\r\nstruct alloc_buckets_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_ALLOC_BUCKETS);\r\n}\r\nint gxio_mpipe_init_bucket(gxio_mpipe_context_t * context, unsigned int bucket,\r\nMPIPE_LBL_INIT_DAT_BSTS_TBL_t bucket_info)\r\n{\r\nstruct init_bucket_param temp;\r\nstruct init_bucket_param *params = &temp;\r\nparams->bucket = bucket;\r\nparams->bucket_info = bucket_info;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_INIT_BUCKET);\r\n}\r\nint gxio_mpipe_alloc_edma_rings(gxio_mpipe_context_t * context,\r\nunsigned int count, unsigned int first,\r\nunsigned int flags)\r\n{\r\nstruct alloc_edma_rings_param temp;\r\nstruct alloc_edma_rings_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_ALLOC_EDMA_RINGS);\r\n}\r\nint gxio_mpipe_init_edma_ring_aux(gxio_mpipe_context_t * context, void *mem_va,\r\nsize_t mem_size, unsigned int mem_flags,\r\nunsigned int ring, unsigned int channel)\r\n{\r\nint __result;\r\nunsigned long long __cpa;\r\npte_t __pte;\r\nstruct init_edma_ring_aux_param temp;\r\nstruct init_edma_ring_aux_param *params = &temp;\r\n__result = va_to_cpa_and_pte(mem_va, &__cpa, &__pte);\r\nif (__result != 0)\r\nreturn __result;\r\nparams->buffer.kernel.cpa = __cpa;\r\nparams->buffer.kernel.size = mem_size;\r\nparams->buffer.kernel.pte = __pte;\r\nparams->buffer.kernel.flags = mem_flags;\r\nparams->ring = ring;\r\nparams->channel = channel;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_INIT_EDMA_RING_AUX);\r\n}\r\nint gxio_mpipe_commit_rules(gxio_mpipe_context_t * context, const void *blob,\r\nsize_t blob_size)\r\n{\r\nconst void *params = blob;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params, blob_size,\r\nGXIO_MPIPE_OP_COMMIT_RULES);\r\n}\r\nint gxio_mpipe_register_client_memory(gxio_mpipe_context_t * context,\r\nunsigned int iotlb, HV_PTE pte,\r\nunsigned int flags)\r\n{\r\nstruct register_client_memory_param temp;\r\nstruct register_client_memory_param *params = &temp;\r\nparams->iotlb = iotlb;\r\nparams->pte = pte;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_MPIPE_OP_REGISTER_CLIENT_MEMORY);\r\n}\r\nint gxio_mpipe_link_open_aux(gxio_mpipe_context_t * context,\r\n_gxio_mpipe_link_name_t name, unsigned int flags)\r\n{\r\nstruct link_open_aux_param temp;\r\nstruct link_open_aux_param *params = &temp;\r\nparams->name = name;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_LINK_OPEN_AUX);\r\n}\r\nint gxio_mpipe_link_close_aux(gxio_mpipe_context_t * context, int mac)\r\n{\r\nstruct link_close_aux_param temp;\r\nstruct link_close_aux_param *params = &temp;\r\nparams->mac = mac;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_LINK_CLOSE_AUX);\r\n}\r\nint gxio_mpipe_get_timestamp_aux(gxio_mpipe_context_t * context, uint64_t * sec,\r\nuint64_t * nsec, uint64_t * cycles)\r\n{\r\nint __result;\r\nstruct get_timestamp_aux_param temp;\r\nstruct get_timestamp_aux_param *params = &temp;\r\n__result =\r\nhv_dev_pread(context->fd, 0, (HV_VirtAddr) params, sizeof(*params),\r\nGXIO_MPIPE_OP_GET_TIMESTAMP_AUX);\r\n*sec = params->sec;\r\n*nsec = params->nsec;\r\n*cycles = params->cycles;\r\nreturn __result;\r\n}\r\nint gxio_mpipe_set_timestamp_aux(gxio_mpipe_context_t * context, uint64_t sec,\r\nuint64_t nsec, uint64_t cycles)\r\n{\r\nstruct set_timestamp_aux_param temp;\r\nstruct set_timestamp_aux_param *params = &temp;\r\nparams->sec = sec;\r\nparams->nsec = nsec;\r\nparams->cycles = cycles;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_SET_TIMESTAMP_AUX);\r\n}\r\nint gxio_mpipe_adjust_timestamp_aux(gxio_mpipe_context_t * context,\r\nint64_t nsec)\r\n{\r\nstruct adjust_timestamp_aux_param temp;\r\nstruct adjust_timestamp_aux_param *params = &temp;\r\nparams->nsec = nsec;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_MPIPE_OP_ADJUST_TIMESTAMP_AUX);\r\n}\r\nint gxio_mpipe_arm_pollfd(gxio_mpipe_context_t * context, int pollfd_cookie)\r\n{\r\nstruct arm_pollfd_param temp;\r\nstruct arm_pollfd_param *params = &temp;\r\nparams->pollfd.kernel.cookie = pollfd_cookie;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_ARM_POLLFD);\r\n}\r\nint gxio_mpipe_close_pollfd(gxio_mpipe_context_t * context, int pollfd_cookie)\r\n{\r\nstruct close_pollfd_param temp;\r\nstruct close_pollfd_param *params = &temp;\r\nparams->pollfd.kernel.cookie = pollfd_cookie;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_CLOSE_POLLFD);\r\n}\r\nint gxio_mpipe_get_mmio_base(gxio_mpipe_context_t * context, HV_PTE *base)\r\n{\r\nint __result;\r\nstruct get_mmio_base_param temp;\r\nstruct get_mmio_base_param *params = &temp;\r\n__result =\r\nhv_dev_pread(context->fd, 0, (HV_VirtAddr) params, sizeof(*params),\r\nGXIO_MPIPE_OP_GET_MMIO_BASE);\r\n*base = params->base;\r\nreturn __result;\r\n}\r\nint gxio_mpipe_check_mmio_offset(gxio_mpipe_context_t * context,\r\nunsigned long offset, unsigned long size)\r\n{\r\nstruct check_mmio_offset_param temp;\r\nstruct check_mmio_offset_param *params = &temp;\r\nparams->offset = offset;\r\nparams->size = size;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_MPIPE_OP_CHECK_MMIO_OFFSET);\r\n}
