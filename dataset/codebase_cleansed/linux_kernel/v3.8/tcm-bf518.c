static int __init tcm_init(void)\r\n{\r\nprintk(KERN_INFO "%s(): registering device resources\n", __func__);\r\ni2c_register_board_info(0, bfin_i2c_board_info,\r\nARRAY_SIZE(bfin_i2c_board_info));\r\nplatform_add_devices(tcm_devices, ARRAY_SIZE(tcm_devices));\r\nspi_register_board_info(bfin_spi_board_info, ARRAY_SIZE(bfin_spi_board_info));\r\nreturn 0;\r\n}\r\nvoid __init native_machine_early_platform_add_devices(void)\r\n{\r\nprintk(KERN_INFO "register early platform devices\n");\r\nearly_platform_add_devices(tcm_early_devices,\r\nARRAY_SIZE(tcm_early_devices));\r\n}\r\nvoid native_machine_restart(char *cmd)\r\n{\r\nif ((bfin_read_SYSCR() & 0x7) == 0x3)\r\nbfin_reset_boot_spi_cs(P_DEFAULT_BOOT_SPI_CS);\r\n}\r\nint bfin_get_ether_addr(char *addr)\r\n{\r\nreturn 1;\r\n}
