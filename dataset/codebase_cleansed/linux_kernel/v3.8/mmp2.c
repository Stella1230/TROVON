void mmp2_clear_pmic_int(void)\r\n{\r\nvoid __iomem *mfpr_pmic;\r\nunsigned long data;\r\nmfpr_pmic = APB_VIRT_BASE + 0x1e000 + 0x2c4;\r\ndata = __raw_readl(mfpr_pmic);\r\n__raw_writel(data | (1 << 6), mfpr_pmic);\r\n__raw_writel(data, mfpr_pmic);\r\n}\r\nvoid __init mmp2_init_irq(void)\r\n{\r\nmmp2_init_icu();\r\n}\r\nstatic int __init mmp2_init(void)\r\n{\r\nif (cpu_is_mmp2()) {\r\n#ifdef CONFIG_CACHE_TAUROS2\r\ntauros2_init(0);\r\n#endif\r\nmfp_init_base(MFPR_VIRT_BASE);\r\nmfp_init_addr(mmp2_addr_map);\r\npxa_init_dma(IRQ_MMP2_DMA_RIQ, 16);\r\nmmp2_clk_init();\r\n}\r\nreturn 0;\r\n}\r\nstatic void __init mmp2_timer_init(void)\r\n{\r\nunsigned long clk_rst;\r\n__raw_writel(APBC_APBCLK | APBC_RST, APBC_TIMERS);\r\nclk_rst = APBC_APBCLK | APBC_FNCLK | APBC_FNCLKSEL(1);\r\n__raw_writel(clk_rst, APBC_TIMERS);\r\ntimer_init(IRQ_MMP2_TIMER1);\r\n}
