int main(int argc, char *argv[])\r\n{\r\nu_long start = CHIPMEM_START, end = CHIPMEM_END, p;\r\nint found = 0;\r\nstruct savekmsg *m = NULL;\r\nif (argc >= 2)\r\nend = strtoul(argv[1], NULL, 0);\r\nprintf("Searching for SAVEKMSG magic...\n");\r\nfor (p = start; p <= end-sizeof(struct savekmsg); p += 4) {\r\nm = (struct savekmsg *)p;\r\nif ((m->magic1 == SAVEKMSG_MAGIC1) && (m->magic2 == SAVEKMSG_MAGIC2) &&\r\n(m->magicptr == p)) {\r\nfound = 1;\r\nbreak;\r\n}\r\n}\r\nif (!found)\r\nprintf("Not found\n");\r\nelse {\r\nprintf("Found %ld bytes at 0x%08lx\n", m->size, (u_long)&m->data);\r\nputs(">>>>>>>>>>>>>>>>>>>>");\r\nfflush(stdout);\r\nwrite(1, &m->data, m->size);\r\nfflush(stdout);\r\nputs("<<<<<<<<<<<<<<<<<<<<");\r\n}\r\nreturn(0);\r\n}
