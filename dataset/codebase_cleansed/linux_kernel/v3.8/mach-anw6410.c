static void __init anw6410_lcd_mode_set(void)\r\n{\r\nu32 tmp;\r\ntmp = __raw_readl(S3C64XX_SPCON);\r\ntmp &= ~S3C64XX_SPCON_LCD_SEL_MASK;\r\ntmp |= S3C64XX_SPCON_LCD_SEL_RGB;\r\n__raw_writel(tmp, S3C64XX_SPCON);\r\ntmp = __raw_readl(S3C64XX_MODEM_MIFPCON);\r\ntmp &= ~MIFPCON_LCD_BYPASS;\r\n__raw_writel(tmp, S3C64XX_MODEM_MIFPCON);\r\n}\r\nstatic void anw6410_lcd_power_set(struct plat_lcd_data *pd,\r\nunsigned int power)\r\n{\r\nif (power) {\r\nanw6410_extdev_status |= (ANW6410_EN_LCD << 16);\r\n__raw_writel(anw6410_extdev_status, ANW6410_VA_EXTDEV);\r\ngpio_direction_output(S3C64XX_GPF(1), 1);\r\ngpio_direction_output(S3C64XX_GPF(4), 1);\r\n} else {\r\nanw6410_extdev_status &= ~(ANW6410_EN_LCD << 16);\r\n__raw_writel(anw6410_extdev_status, ANW6410_VA_EXTDEV);\r\ngpio_direction_output(S3C64XX_GPF(1), 0);\r\ngpio_direction_output(S3C64XX_GPF(4), 0);\r\n}\r\n}\r\nstatic void __init anw6410_dm9000_enable(void)\r\n{\r\nanw6410_extdev_status |= (ANW6410_EN_DM9000 << 16);\r\n__raw_writel(anw6410_extdev_status, ANW6410_VA_EXTDEV);\r\n}\r\nstatic void __init anw6410_map_io(void)\r\n{\r\ns3c64xx_init_io(anw6410_iodesc, ARRAY_SIZE(anw6410_iodesc));\r\ns3c24xx_init_clocks(12000000);\r\ns3c24xx_init_uarts(anw6410_uartcfgs, ARRAY_SIZE(anw6410_uartcfgs));\r\nanw6410_lcd_mode_set();\r\n}\r\nstatic void __init anw6410_machine_init(void)\r\n{\r\ns3c_fb_set_platdata(&anw6410_lcd_pdata);\r\ngpio_request(S3C64XX_GPF(1), "panel power");\r\ngpio_request(S3C64XX_GPF(4), "LCD backlight");\r\nanw6410_dm9000_enable();\r\nplatform_add_devices(anw6410_devices, ARRAY_SIZE(anw6410_devices));\r\n}
