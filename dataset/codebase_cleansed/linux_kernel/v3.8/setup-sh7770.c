static int __init sh7770_devices_setup(void)\r\n{\r\nreturn platform_add_devices(sh7770_devices,\r\nARRAY_SIZE(sh7770_devices));\r\n}\r\nvoid __init plat_early_device_setup(void)\r\n{\r\nearly_platform_add_devices(sh7770_early_devices,\r\nARRAY_SIZE(sh7770_early_devices));\r\n}\r\nvoid __init plat_irq_setup(void)\r\n{\r\n__raw_writel(0xff000000, INTC_INTMSK0);\r\n__raw_writel(0xc0000000, INTC_INTMSK1);\r\n__raw_writel(0xfffefffe, INTC_INTMSK2);\r\n__raw_writel(__raw_readl(INTC_ICR0) & ~0x00c00000, INTC_ICR0);\r\n__raw_writel(__raw_readl(INTC_ICR0) | 0x00200000, INTC_ICR0);\r\nregister_intc_controller(&intc_desc);\r\n}\r\nvoid __init plat_irq_setup_pins(int mode)\r\n{\r\nswitch (mode) {\r\ncase IRQ_MODE_IRQ:\r\n__raw_writel(__raw_readl(INTC_ICR0) | 0x00c00000, INTC_ICR0);\r\nregister_intc_controller(&intc_irq_desc);\r\nbreak;\r\ncase IRQ_MODE_IRL7654:\r\n__raw_writel(0x40000000, INTC_INTMSKCLR1);\r\n__raw_writel(0x0000fffe, INTC_INTMSKCLR2);\r\nbreak;\r\ncase IRQ_MODE_IRL3210:\r\n__raw_writel(0x80000000, INTC_INTMSKCLR1);\r\n__raw_writel(0xfffe0000, INTC_INTMSKCLR2);\r\nbreak;\r\ncase IRQ_MODE_IRL7654_MASK:\r\n__raw_writel(0x40000000, INTC_INTMSKCLR1);\r\nregister_intc_controller(&intc_irl7654_desc);\r\nbreak;\r\ncase IRQ_MODE_IRL3210_MASK:\r\n__raw_writel(0x80000000, INTC_INTMSKCLR1);\r\nregister_intc_controller(&intc_irl3210_desc);\r\nbreak;\r\ndefault:\r\nBUG();\r\n}\r\n}
