int s3c_irq_wake(struct irq_data *data, unsigned int state)\r\n{\r\nunsigned long irqbit = 1 << (data->irq - IRQ_EINT0);\r\nif (!(s3c_irqwake_intallow & irqbit))\r\nreturn -ENOENT;\r\nprintk(KERN_INFO "wake %s for irq %d\n",\r\nstate ? "enabled" : "disabled", data->irq);\r\nif (!state)\r\ns3c_irqwake_intmask |= irqbit;\r\nelse\r\ns3c_irqwake_intmask &= ~irqbit;\r\nreturn 0;\r\n}\r\nint s3c24xx_irq_suspend(void)\r\n{\r\nunsigned int i;\r\nfor (i = 0; i < ARRAY_SIZE(save_extint); i++)\r\nsave_extint[i] = __raw_readl(S3C24XX_EXTINT0 + (i*4));\r\nfor (i = 0; i < ARRAY_SIZE(save_eintflt); i++)\r\nsave_eintflt[i] = __raw_readl(S3C24XX_EINFLT0 + (i*4));\r\ns3c_pm_do_save(irq_save, ARRAY_SIZE(irq_save));\r\nsave_eintmask = __raw_readl(S3C24XX_EINTMASK);\r\nreturn 0;\r\n}\r\nvoid s3c24xx_irq_resume(void)\r\n{\r\nunsigned int i;\r\nfor (i = 0; i < ARRAY_SIZE(save_extint); i++)\r\n__raw_writel(save_extint[i], S3C24XX_EXTINT0 + (i*4));\r\nfor (i = 0; i < ARRAY_SIZE(save_eintflt); i++)\r\n__raw_writel(save_eintflt[i], S3C24XX_EINFLT0 + (i*4));\r\ns3c_pm_do_restore(irq_save, ARRAY_SIZE(irq_save));\r\n__raw_writel(save_eintmask, S3C24XX_EINTMASK);\r\n}
