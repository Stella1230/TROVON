static void __init palmtx_nor_init(void)\r\n{\r\nplatform_device_register(&palmtx_flash);\r\n}\r\nstatic inline void palmtx_nor_init(void) {}\r\nstatic void __init palmtx_kpc_init(void)\r\n{\r\npxa_set_keypad_info(&palmtx_keypad_platform_data);\r\n}\r\nstatic inline void palmtx_kpc_init(void) {}\r\nstatic void __init palmtx_keys_init(void)\r\n{\r\nplatform_device_register(&palmtx_pxa_keys);\r\n}\r\nstatic inline void palmtx_keys_init(void) {}\r\nstatic void palmtx_nand_cmd_ctl(struct mtd_info *mtd, int cmd,\r\nunsigned int ctrl)\r\n{\r\nstruct nand_chip *this = mtd->priv;\r\nchar __iomem *nandaddr = this->IO_ADDR_W;\r\nif (cmd == NAND_CMD_NONE)\r\nreturn;\r\nif (ctrl & NAND_CLE)\r\nwriteb(cmd, PALMTX_NAND_CLE_VIRT);\r\nelse if (ctrl & NAND_ALE)\r\nwriteb(cmd, PALMTX_NAND_ALE_VIRT);\r\nelse\r\nwriteb(cmd, nandaddr);\r\n}\r\nstatic void __init palmtx_nand_init(void)\r\n{\r\nplatform_device_register(&palmtx_nand);\r\n}\r\nstatic inline void palmtx_nand_init(void) {}\r\nstatic void __init palmtx_map_io(void)\r\n{\r\npxa27x_map_io();\r\niotable_init(palmtx_io_desc, ARRAY_SIZE(palmtx_io_desc));\r\n}\r\nstatic void __init palmtx_init(void)\r\n{\r\npxa2xx_mfp_config(ARRAY_AND_SIZE(palmtx_pin_config));\r\npxa_set_ffuart_info(NULL);\r\npxa_set_btuart_info(NULL);\r\npxa_set_stuart_info(NULL);\r\npalm27x_mmc_init(GPIO_NR_PALMTX_SD_DETECT_N, GPIO_NR_PALMTX_SD_READONLY,\r\nGPIO_NR_PALMTX_SD_POWER, 0);\r\npalm27x_pm_init(PALMTX_STR_BASE);\r\npalm27x_lcd_init(-1, &palm_320x480_lcd_mode);\r\npalm27x_udc_init(GPIO_NR_PALMTX_USB_DETECT_N,\r\nGPIO_NR_PALMTX_USB_PULLUP, 1);\r\npalm27x_irda_init(GPIO_NR_PALMTX_IR_DISABLE);\r\npalm27x_ac97_init(PALMTX_BAT_MIN_VOLTAGE, PALMTX_BAT_MAX_VOLTAGE,\r\nGPIO_NR_PALMTX_EARPHONE_DETECT, 95);\r\npalm27x_pwm_init(GPIO_NR_PALMTX_BL_POWER, GPIO_NR_PALMTX_LCD_POWER);\r\npalm27x_power_init(GPIO_NR_PALMTX_POWER_DETECT, -1);\r\npalm27x_pmic_init();\r\npalmtx_kpc_init();\r\npalmtx_keys_init();\r\npalmtx_nor_init();\r\npalmtx_nand_init();\r\n}
