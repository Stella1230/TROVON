notrace void arch_local_irq_disable(void)\r\n{\r\npreempt_disable();\r\n__asm__ __volatile__(\r\n"arch_local_irq_disable"\r\n:\r\n:\r\n: "memory");\r\npreempt_enable();\r\n}\r\nnotrace unsigned long arch_local_irq_save(void)\r\n{\r\nunsigned long flags;\r\npreempt_disable();\r\nasm volatile("arch_local_irq_save\t%0"\r\n: "=r" (flags)\r\n:\r\n: "memory");\r\npreempt_enable();\r\nreturn flags;\r\n}\r\nnotrace void arch_local_irq_restore(unsigned long flags)\r\n{\r\nunsigned long __tmp1;\r\n#ifdef CONFIG_MIPS_MT_SMTC\r\nif (unlikely(!(flags & 0x0400)))\r\nsmtc_ipi_replay();\r\n#endif\r\npreempt_disable();\r\n__asm__ __volatile__(\r\n"arch_local_irq_restore\t%0"\r\n: "=r" (__tmp1)\r\n: "0" (flags)\r\n: "memory");\r\npreempt_enable();\r\n}\r\nnotrace void __arch_local_irq_restore(unsigned long flags)\r\n{\r\nunsigned long __tmp1;\r\npreempt_disable();\r\n__asm__ __volatile__(\r\n"arch_local_irq_restore\t%0"\r\n: "=r" (__tmp1)\r\n: "0" (flags)\r\n: "memory");\r\npreempt_enable();\r\n}
