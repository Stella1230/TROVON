static int s3c2412_cpu_suspend(unsigned long arg)\r\n{\r\nunsigned long tmp;\r\ntmp = __raw_readl(S3C2412_PWRCFG);\r\ntmp |= S3C2412_PWRCFG_STANDBYWFI_SLEEP;\r\n__raw_writel(tmp, S3C2412_PWRCFG);\r\ns3c2412_sleep_enter();\r\npanic("sleep resumed to originator?");\r\n}\r\nstatic void s3c2412_pm_prepare(void)\r\n{\r\n}\r\nstatic int s3c2412_pm_add(struct device *dev, struct subsys_interface *sif)\r\n{\r\npm_cpu_prep = s3c2412_pm_prepare;\r\npm_cpu_sleep = s3c2412_cpu_suspend;\r\nreturn 0;\r\n}\r\nstatic __init int s3c2412_pm_init(void)\r\n{\r\nreturn subsys_interface_register(&s3c2412_pm_interface);\r\n}\r\nstatic int s3c2412_pm_suspend(void)\r\n{\r\ns3c_pm_do_save(s3c2412_sleep, ARRAY_SIZE(s3c2412_sleep));\r\nreturn 0;\r\n}\r\nstatic void s3c2412_pm_resume(void)\r\n{\r\nunsigned long tmp;\r\ntmp = __raw_readl(S3C2412_PWRCFG);\r\ntmp &= ~S3C2412_PWRCFG_STANDBYWFI_MASK;\r\ntmp |= S3C2412_PWRCFG_STANDBYWFI_IDLE;\r\n__raw_writel(tmp, S3C2412_PWRCFG);\r\ns3c_pm_do_restore(s3c2412_sleep, ARRAY_SIZE(s3c2412_sleep));\r\n}
