static int hvc_tile_put_chars(uint32_t vt, const char *buf, int count)\r\n{\r\nreturn hv_console_write((HV_VirtAddr)buf, count);\r\n}\r\nstatic int hvc_tile_get_chars(uint32_t vt, char *buf, int count)\r\n{\r\nint i, c;\r\nfor (i = 0; i < count; ++i) {\r\nc = hv_console_read_if_ready();\r\nif (c < 0)\r\nbreak;\r\nbuf[i] = c;\r\n}\r\nreturn i;\r\n}\r\nstatic int __init hvc_tile_console_init(void)\r\n{\r\nextern void disable_early_printk(void);\r\nhvc_instantiate(0, 0, &hvc_tile_get_put_ops);\r\nadd_preferred_console("hvc", 0, NULL);\r\ndisable_early_printk();\r\nreturn 0;\r\n}\r\nstatic int __init hvc_tile_init(void)\r\n{\r\nstruct hvc_struct *s;\r\ns = hvc_alloc(0, 0, &hvc_tile_get_put_ops, 128);\r\nreturn IS_ERR(s) ? PTR_ERR(s) : 0;\r\n}
