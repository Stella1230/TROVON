static int __init net2272_init(void)\r\n{\r\n#if defined(CONFIG_USB_NET2272) || defined(CONFIG_USB_NET2272_MODULE)\r\nint ret;\r\nret = gpio_request(GPIO_PG14, "net2272");\r\nif (ret)\r\nreturn ret;\r\ngpio_direction_output(GPIO_PG14, 0);\r\nmdelay(2);\r\ngpio_set_value(GPIO_PG14, 1);\r\n#endif\r\nreturn 0;\r\n}\r\nstatic int __init cm_bf537e_init(void)\r\n{\r\nprintk(KERN_INFO "%s(): registering device resources\n", __func__);\r\nplatform_add_devices(cm_bf537e_devices, ARRAY_SIZE(cm_bf537e_devices));\r\n#if defined(CONFIG_SPI_BFIN5XX) || defined(CONFIG_SPI_BFIN5XX_MODULE)\r\nspi_register_board_info(bfin_spi_board_info, ARRAY_SIZE(bfin_spi_board_info));\r\n#endif\r\n#if defined(CONFIG_PATA_PLATFORM) || defined(CONFIG_PATA_PLATFORM_MODULE)\r\nirq_set_status_flags(PATA_INT, IRQ_NOAUTOEN);\r\n#endif\r\nif (net2272_init())\r\npr_warning("unable to configure net2272; it probably won't work\n");\r\nreturn 0;\r\n}\r\nvoid __init native_machine_early_platform_add_devices(void)\r\n{\r\nprintk(KERN_INFO "register early platform devices\n");\r\nearly_platform_add_devices(cm_bf537e_early_devices,\r\nARRAY_SIZE(cm_bf537e_early_devices));\r\n}\r\nint bfin_get_ether_addr(char *addr)\r\n{\r\nreturn 1;\r\n}
