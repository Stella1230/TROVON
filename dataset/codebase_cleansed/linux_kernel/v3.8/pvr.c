int cpu_has_pvr(void)\r\n{\r\nunsigned long flags;\r\nunsigned pvr0;\r\nlocal_save_flags(flags);\r\nif (!(flags & PVR_MSR_BIT))\r\nreturn 0;\r\nget_single_pvr(0, pvr0);\r\npr_debug("%s: pvr0 is 0x%08x\n", __func__, pvr0);\r\nif (pvr0 & PVR0_PVR_FULL_MASK)\r\nreturn 1;\r\nreturn 2;\r\n}\r\nvoid get_pvr(struct pvr_s *p)\r\n{\r\nget_single_pvr(0, p->pvr[0]);\r\nget_single_pvr(1, p->pvr[1]);\r\nget_single_pvr(2, p->pvr[2]);\r\nget_single_pvr(3, p->pvr[3]);\r\nget_single_pvr(4, p->pvr[4]);\r\nget_single_pvr(5, p->pvr[5]);\r\nget_single_pvr(6, p->pvr[6]);\r\nget_single_pvr(7, p->pvr[7]);\r\nget_single_pvr(8, p->pvr[8]);\r\nget_single_pvr(9, p->pvr[9]);\r\nget_single_pvr(10, p->pvr[10]);\r\nget_single_pvr(11, p->pvr[11]);\r\n}
