void __init omap3xxx_powerdomains_init(void)\r\n{\r\nunsigned int rev;\r\nif (!cpu_is_omap34xx())\r\nreturn;\r\npwrdm_register_platform_funcs(&omap3_pwrdm_operations);\r\nrev = omap_rev();\r\nif (rev == AM35XX_REV_ES1_0 || rev == AM35XX_REV_ES1_1) {\r\npwrdm_register_pwrdms(powerdomains_am35x);\r\n} else {\r\npwrdm_register_pwrdms(powerdomains_omap3430_common);\r\nswitch (rev) {\r\ncase OMAP3430_REV_ES1_0:\r\npwrdm_register_pwrdms(powerdomains_omap3430es1);\r\nbreak;\r\ncase OMAP3430_REV_ES2_0:\r\ncase OMAP3430_REV_ES2_1:\r\ncase OMAP3430_REV_ES3_0:\r\ncase OMAP3630_REV_ES1_0:\r\npwrdm_register_pwrdms(powerdomains_omap3430es2_es3_0);\r\nbreak;\r\ncase OMAP3430_REV_ES3_1:\r\ncase OMAP3430_REV_ES3_1_2:\r\ncase OMAP3630_REV_ES1_1:\r\ncase OMAP3630_REV_ES1_2:\r\npwrdm_register_pwrdms(powerdomains_omap3430es3_1plus);\r\nbreak;\r\ndefault:\r\nWARN(1, "OMAP3 powerdomain init: unknown chip type\n");\r\n}\r\n}\r\npwrdm_complete_init();\r\n}
