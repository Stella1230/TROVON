static int db120_pci_plat_dev_init(struct pci_dev *dev)\r\n{\r\nswitch (PCI_SLOT(dev->devfn)) {\r\ncase 0:\r\ndev->dev.platform_data = &db120_ath9k_data;\r\nbreak;\r\n}\r\nreturn 0;\r\n}\r\nstatic void __init db120_pci_init(u8 *eeprom)\r\n{\r\nmemcpy(db120_ath9k_data.eeprom_data, eeprom,\r\nsizeof(db120_ath9k_data.eeprom_data));\r\nath79_pci_set_plat_dev_init(db120_pci_plat_dev_init);\r\nath79_register_pci();\r\n}\r\nstatic inline void db120_pci_init(void) {}\r\nstatic void __init db120_setup(void)\r\n{\r\nu8 *art = (u8 *) KSEG1ADDR(0x1fff0000);\r\nath79_register_leds_gpio(-1, ARRAY_SIZE(db120_leds_gpio),\r\ndb120_leds_gpio);\r\nath79_register_gpio_keys_polled(-1, DB120_KEYS_POLL_INTERVAL,\r\nARRAY_SIZE(db120_gpio_keys),\r\ndb120_gpio_keys);\r\nath79_register_spi(&db120_spi_data, db120_spi_info,\r\nARRAY_SIZE(db120_spi_info));\r\nath79_register_usb();\r\nath79_register_wmac(art + DB120_WMAC_CALDATA_OFFSET);\r\ndb120_pci_init(art + DB120_PCIE_CALDATA_OFFSET);\r\n}
