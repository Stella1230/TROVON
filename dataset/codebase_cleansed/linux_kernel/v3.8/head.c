void __init reserve_ebda_region(void)\r\n{\r\nunsigned int lowmem, ebda_addr;\r\nif (paravirt_enabled())\r\nreturn;\r\nlowmem = *(unsigned short *)__va(BIOS_LOWMEM_KILOBYTES);\r\nlowmem <<= 10;\r\nebda_addr = get_bios_ebda();\r\nif ((lowmem - ebda_addr) <= 0x10000)\r\nlowmem = ebda_addr;\r\nif ((ebda_addr == 0) && (lowmem >= 0x9f000))\r\nlowmem = 0x9f000;\r\nif ((lowmem == 0) || (lowmem >= 0x100000))\r\nlowmem = 0x9f000;\r\nmemblock_reserve(lowmem, 0x100000 - lowmem);\r\n}
