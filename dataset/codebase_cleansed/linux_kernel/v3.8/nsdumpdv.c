static acpi_status\r\nacpi_ns_dump_one_device(acpi_handle obj_handle,\r\nu32 level, void *context, void **return_value)\r\n{\r\nstruct acpi_device_info *info;\r\nacpi_status status;\r\nu32 i;\r\nACPI_FUNCTION_NAME(ns_dump_one_device);\r\nstatus =\r\nacpi_ns_dump_one_object(obj_handle, level, context, return_value);\r\nstatus = acpi_get_object_info(obj_handle, &info);\r\nif (ACPI_SUCCESS(status)) {\r\nfor (i = 0; i < level; i++) {\r\nACPI_DEBUG_PRINT_RAW((ACPI_DB_TABLES, " "));\r\n}\r\nACPI_DEBUG_PRINT_RAW((ACPI_DB_TABLES,\r\n" HID: %s, ADR: %8.8X%8.8X, Status: %X\n",\r\ninfo->hardware_id.string,\r\nACPI_FORMAT_UINT64(info->address),\r\ninfo->current_status));\r\nACPI_FREE(info);\r\n}\r\nreturn (status);\r\n}\r\nvoid acpi_ns_dump_root_devices(void)\r\n{\r\nacpi_handle sys_bus_handle;\r\nacpi_status status;\r\nACPI_FUNCTION_NAME(ns_dump_root_devices);\r\nif (!(ACPI_LV_TABLES & acpi_dbg_level)) {\r\nreturn;\r\n}\r\nstatus = acpi_get_handle(NULL, METHOD_NAME__SB_, &sys_bus_handle);\r\nif (ACPI_FAILURE(status)) {\r\nreturn;\r\n}\r\nACPI_DEBUG_PRINT((ACPI_DB_TABLES,\r\n"Display of all devices in the namespace:\n"));\r\nstatus = acpi_ns_walk_namespace(ACPI_TYPE_DEVICE, sys_bus_handle,\r\nACPI_UINT32_MAX, ACPI_NS_WALK_NO_UNLOCK,\r\nacpi_ns_dump_one_device, NULL, NULL,\r\nNULL);\r\n}
