static int __init jive_mtdset(char *options)\r\n{\r\nstruct s3c2410_nand_set *nand = &jive_nand_sets[0];\r\nunsigned long set;\r\nif (options == NULL || options[0] == '\0')\r\nreturn 0;\r\nif (strict_strtoul(options, 10, &set)) {\r\nprintk(KERN_ERR "failed to parse mtdset=%s\n", options);\r\nreturn 0;\r\n}\r\nswitch (set) {\r\ncase 1:\r\nnand->nr_partitions = ARRAY_SIZE(jive_imageB_nand_part);\r\nnand->partitions = jive_imageB_nand_part;\r\ncase 0:\r\nbreak;\r\ndefault:\r\nprintk(KERN_ERR "Unknown mtd set %ld specified,"\r\n"using default.", set);\r\n}\r\nreturn 0;\r\n}\r\nstatic void jive_lcm_reset(unsigned int set)\r\n{\r\nprintk(KERN_DEBUG "%s(%d)\n", __func__, set);\r\ngpio_set_value(S3C2410_GPG(13), set);\r\n}\r\nstatic int jive_pm_suspend(void)\r\n{\r\n__raw_writel(0x2BED, S3C2412_INFORM0);\r\n__raw_writel(virt_to_phys(s3c_cpu_resume), S3C2412_INFORM1);\r\nreturn 0;\r\n}\r\nstatic void jive_pm_resume(void)\r\n{\r\n__raw_writel(0x0, S3C2412_INFORM0);\r\n}\r\nstatic void __init jive_map_io(void)\r\n{\r\ns3c24xx_init_io(jive_iodesc, ARRAY_SIZE(jive_iodesc));\r\ns3c24xx_init_clocks(12000000);\r\ns3c24xx_init_uarts(jive_uartcfgs, ARRAY_SIZE(jive_uartcfgs));\r\n}\r\nstatic void jive_power_off(void)\r\n{\r\nprintk(KERN_INFO "powering system down...\n");\r\ngpio_request_one(S3C2410_GPC(5), GPIOF_OUT_INIT_HIGH, NULL);\r\ngpio_free(S3C2410_GPC(5));\r\n}\r\nstatic void __init jive_machine_init(void)\r\n{\r\nregister_syscore_ops(&jive_pm_syscore_ops);\r\n__raw_writel(S3C2412_SLPCON_IN(0) |\r\nS3C2412_SLPCON_PULL(1) |\r\nS3C2412_SLPCON_HIGH(2) |\r\nS3C2412_SLPCON_PULL(3) |\r\nS3C2412_SLPCON_PULL(4) |\r\nS3C2412_SLPCON_PULL(5) |\r\nS3C2412_SLPCON_PULL(6) |\r\nS3C2412_SLPCON_HIGH(7) |\r\nS3C2412_SLPCON_PULL(8) |\r\nS3C2412_SLPCON_PULL(9) |\r\nS3C2412_SLPCON_PULL(10), S3C2412_GPBSLPCON);\r\n__raw_writel(S3C2412_SLPCON_PULL(0) |\r\nS3C2412_SLPCON_PULL(1) |\r\nS3C2412_SLPCON_PULL(2) |\r\nS3C2412_SLPCON_PULL(3) |\r\nS3C2412_SLPCON_PULL(4) |\r\nS3C2412_SLPCON_PULL(5) |\r\nS3C2412_SLPCON_LOW(6) |\r\nS3C2412_SLPCON_PULL(6) |\r\nS3C2412_SLPCON_PULL(7) |\r\nS3C2412_SLPCON_PULL(8) |\r\nS3C2412_SLPCON_PULL(9) |\r\nS3C2412_SLPCON_PULL(10) |\r\nS3C2412_SLPCON_PULL(11) |\r\nS3C2412_SLPCON_PULL(12) |\r\nS3C2412_SLPCON_PULL(13) |\r\nS3C2412_SLPCON_PULL(14) |\r\nS3C2412_SLPCON_PULL(15), S3C2412_GPCSLPCON);\r\n__raw_writel(S3C2412_SLPCON_ALL_PULL, S3C2412_GPDSLPCON);\r\n__raw_writel(S3C2412_SLPCON_LOW(0) |\r\nS3C2412_SLPCON_LOW(1) |\r\nS3C2412_SLPCON_LOW(2) |\r\nS3C2412_SLPCON_EINT(3) |\r\nS3C2412_SLPCON_EINT(4) |\r\nS3C2412_SLPCON_EINT(5) |\r\nS3C2412_SLPCON_EINT(6) |\r\nS3C2412_SLPCON_EINT(7), S3C2412_GPFSLPCON);\r\n__raw_writel(S3C2412_SLPCON_IN(0) |\r\nS3C2412_SLPCON_IN(1) |\r\nS3C2412_SLPCON_IN(2) |\r\nS3C2412_SLPCON_IN(3) |\r\nS3C2412_SLPCON_IN(4) |\r\nS3C2412_SLPCON_IN(5) |\r\nS3C2412_SLPCON_IN(6) |\r\nS3C2412_SLPCON_IN(7) |\r\nS3C2412_SLPCON_PULL(8) |\r\nS3C2412_SLPCON_PULL(9) |\r\nS3C2412_SLPCON_IN(10) |\r\nS3C2412_SLPCON_PULL(11) |\r\nS3C2412_SLPCON_PULL(12) |\r\nS3C2412_SLPCON_PULL(13) |\r\nS3C2412_SLPCON_IN(14) |\r\nS3C2412_SLPCON_PULL(15), S3C2412_GPGSLPCON);\r\n__raw_writel(S3C2412_SLPCON_PULL(0) |\r\nS3C2412_SLPCON_PULL(1) |\r\nS3C2412_SLPCON_PULL(2) |\r\nS3C2412_SLPCON_PULL(3) |\r\nS3C2412_SLPCON_PULL(4) |\r\nS3C2412_SLPCON_PULL(5) |\r\nS3C2412_SLPCON_PULL(6) |\r\nS3C2412_SLPCON_IN(7) |\r\nS3C2412_SLPCON_IN(8) |\r\nS3C2412_SLPCON_PULL(9) |\r\nS3C2412_SLPCON_IN(10), S3C2412_GPHSLPCON);\r\ns3c_pm_init();\r\ns3c_nand_set_platdata(&jive_nand_info);\r\ngpio_request(S3C2410_GPG(13), "lcm reset");\r\ngpio_direction_output(S3C2410_GPG(13), 0);\r\ngpio_request(S3C2410_GPB(7), "jive spi");\r\ngpio_direction_output(S3C2410_GPB(7), 1);\r\ngpio_request_one(S3C2410_GPB(6), GPIOF_OUT_INIT_LOW, NULL);\r\ngpio_free(S3C2410_GPB(6));\r\ngpio_request_one(S3C2410_GPG(8), GPIOF_OUT_INIT_HIGH, NULL);\r\ngpio_free(S3C2410_GPG(8));\r\ngpio_request(S3C2410_GPH(10), "jive wm8750 spi");\r\ngpio_direction_output(S3C2410_GPH(10), 1);\r\ns3c2410_modify_misccr(S3C2410_MISCCR_USBHOST |\r\nS3C2410_MISCCR_USBSUSPND0 |\r\nS3C2410_MISCCR_USBSUSPND1, 0x0);\r\ns3c24xx_udc_set_platdata(&jive_udc_cfg);\r\ns3c24xx_fb_set_platdata(&jive_lcd_config);\r\nspi_register_board_info(jive_spi_devs, ARRAY_SIZE(jive_spi_devs));\r\ns3c_i2c0_set_platdata(&jive_i2c_cfg);\r\ni2c_register_board_info(0, jive_i2c_devs, ARRAY_SIZE(jive_i2c_devs));\r\npm_power_off = jive_power_off;\r\nplatform_add_devices(jive_devices, ARRAY_SIZE(jive_devices));\r\n}
