static void mpc85xx_irq_mask(int cpu)\r\n{\r\n}\r\nstatic void mpc85xx_irq_unmask(int cpu)\r\n{\r\n}\r\nstatic void mpc85xx_cpu_die(int cpu)\r\n{\r\nu32 tmp;\r\ntmp = (mfspr(SPRN_HID0) & ~(HID0_DOZE|HID0_SLEEP)) | HID0_NAP;\r\nmtspr(SPRN_HID0, tmp);\r\ntmp = mfmsr();\r\ntmp |= MSR_WE;\r\nasm volatile(\r\n"msync\n"\r\n"mtmsr %0\n"\r\n"isync\n"\r\n:\r\n: "r" (tmp));\r\n}\r\nstatic void mpc85xx_cpu_up_prepare(int cpu)\r\n{\r\n}\r\nstatic void mpc85xx_freeze_time_base(bool freeze)\r\n{\r\nuint32_t mask;\r\nmask = CCSR_GUTS_DEVDISR_TB0 | CCSR_GUTS_DEVDISR_TB1;\r\nif (freeze)\r\nsetbits32(&guts->devdisr, mask);\r\nelse\r\nclrbits32(&guts->devdisr, mask);\r\nin_be32(&guts->devdisr);\r\n}\r\nint __init mpc85xx_setup_pmc(void)\r\n{\r\nstruct device_node *np;\r\nnp = of_find_matching_node(NULL, mpc85xx_smp_guts_ids);\r\nif (np) {\r\nguts = of_iomap(np, 0);\r\nof_node_put(np);\r\nif (!guts) {\r\npr_err("Could not map guts node address\n");\r\nreturn -ENOMEM;\r\n}\r\n}\r\nqoriq_pm_ops = &mpc85xx_pm_ops;\r\nreturn 0;\r\n}
