void camif_hw_reset(struct camif_dev *camif)\r\n{\r\nu32 cfg;\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CISRCFMT);\r\ncfg |= CISRCFMT_ITU601_8BIT;\r\ncamif_write(camif, S3C_CAMIF_REG_CISRCFMT, cfg);\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CIGCTRL);\r\ncfg |= CIGCTRL_SWRST;\r\nif (camif->variant->ip_revision == S3C6410_CAMIF_IP_REV)\r\ncfg |= CIGCTRL_IRQ_LEVEL;\r\ncamif_write(camif, S3C_CAMIF_REG_CIGCTRL, cfg);\r\nudelay(10);\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CIGCTRL);\r\ncfg &= ~CIGCTRL_SWRST;\r\ncamif_write(camif, S3C_CAMIF_REG_CIGCTRL, cfg);\r\nudelay(10);\r\n}\r\nvoid camif_hw_clear_pending_irq(struct camif_vp *vp)\r\n{\r\nu32 cfg = camif_read(vp->camif, S3C_CAMIF_REG_CIGCTRL);\r\ncfg |= CIGCTRL_IRQ_CLR(vp->id);\r\ncamif_write(vp->camif, S3C_CAMIF_REG_CIGCTRL, cfg);\r\n}\r\nvoid camif_hw_set_test_pattern(struct camif_dev *camif, unsigned int pattern)\r\n{\r\nu32 cfg = camif_read(camif, S3C_CAMIF_REG_CIGCTRL);\r\ncfg &= ~CIGCTRL_TESTPATTERN_MASK;\r\ncfg |= (pattern << 27);\r\ncamif_write(camif, S3C_CAMIF_REG_CIGCTRL, cfg);\r\n}\r\nvoid camif_hw_set_effect(struct camif_dev *camif, unsigned int effect,\r\nunsigned int cr, unsigned int cb)\r\n{\r\nstatic const struct v4l2_control colorfx[] = {\r\n{ V4L2_COLORFX_NONE, CIIMGEFF_FIN_BYPASS },\r\n{ V4L2_COLORFX_BW, CIIMGEFF_FIN_ARBITRARY },\r\n{ V4L2_COLORFX_SEPIA, CIIMGEFF_FIN_ARBITRARY },\r\n{ V4L2_COLORFX_NEGATIVE, CIIMGEFF_FIN_NEGATIVE },\r\n{ V4L2_COLORFX_ART_FREEZE, CIIMGEFF_FIN_ARTFREEZE },\r\n{ V4L2_COLORFX_EMBOSS, CIIMGEFF_FIN_EMBOSSING },\r\n{ V4L2_COLORFX_SILHOUETTE, CIIMGEFF_FIN_SILHOUETTE },\r\n{ V4L2_COLORFX_SET_CBCR, CIIMGEFF_FIN_ARBITRARY },\r\n};\r\nunsigned int i, cfg;\r\nfor (i = 0; i < ARRAY_SIZE(colorfx); i++)\r\nif (colorfx[i].id == effect)\r\nbreak;\r\nif (i == ARRAY_SIZE(colorfx))\r\nreturn;\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CIIMGEFF(camif->vp->offset));\r\ncfg &= ~CIIMGEFF_FIN_MASK;\r\ncfg |= colorfx[i].value;\r\nif (camif->variant->ip_revision >= S3C6400_CAMIF_IP_REV) {\r\nif (effect == V4L2_COLORFX_NONE)\r\ncfg &= ~CIIMGEFF_IE_ENABLE_MASK;\r\nelse\r\ncfg |= CIIMGEFF_IE_ENABLE_MASK;\r\n}\r\ncfg &= ~CIIMGEFF_PAT_CBCR_MASK;\r\ncfg |= cr | (cb << 13);\r\ncamif_write(camif, S3C_CAMIF_REG_CIIMGEFF(camif->vp->offset), cfg);\r\n}\r\nvoid camif_hw_set_source_format(struct camif_dev *camif)\r\n{\r\nstruct v4l2_mbus_framefmt *mf = &camif->mbus_fmt;\r\nint i;\r\nu32 cfg;\r\nfor (i = ARRAY_SIZE(src_pixfmt_map) - 1; i >= 0; i--) {\r\nif (src_pixfmt_map[i][0] == mf->code)\r\nbreak;\r\n}\r\nif (i < 0) {\r\ni = 0;\r\ndev_err(camif->dev,\r\n"Unsupported pixel code, falling back to %#08x\n",\r\nsrc_pixfmt_map[i][0]);\r\n}\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CISRCFMT);\r\ncfg &= ~(CISRCFMT_ORDER422_MASK | CISRCFMT_SIZE_CAM_MASK);\r\ncfg |= (mf->width << 16) | mf->height;\r\ncfg |= src_pixfmt_map[i][1];\r\ncamif_write(camif, S3C_CAMIF_REG_CISRCFMT, cfg);\r\n}\r\nvoid camif_hw_set_camera_crop(struct camif_dev *camif)\r\n{\r\nstruct v4l2_mbus_framefmt *mf = &camif->mbus_fmt;\r\nstruct v4l2_rect *crop = &camif->camif_crop;\r\nu32 hoff2, voff2;\r\nu32 cfg;\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CIWDOFST);\r\ncfg &= ~(CIWDOFST_OFST_MASK | CIWDOFST_WINOFSEN);\r\ncfg |= (crop->left << 16) | crop->top;\r\nif (crop->left != 0 || crop->top != 0)\r\ncfg |= CIWDOFST_WINOFSEN;\r\ncamif_write(camif, S3C_CAMIF_REG_CIWDOFST, cfg);\r\nif (camif->variant->ip_revision == S3C6410_CAMIF_IP_REV) {\r\nhoff2 = mf->width - crop->width - crop->left;\r\nvoff2 = mf->height - crop->height - crop->top;\r\ncfg = (hoff2 << 16) | voff2;\r\ncamif_write(camif, S3C_CAMIF_REG_CIWDOFST2, cfg);\r\n}\r\n}\r\nvoid camif_hw_clear_fifo_overflow(struct camif_vp *vp)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\nu32 cfg;\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CIWDOFST);\r\nif (vp->id == 0)\r\ncfg |= (CIWDOFST_CLROVCOFIY | CIWDOFST_CLROVCOFICB |\r\nCIWDOFST_CLROVCOFICR);\r\nelse\r\ncfg |= ( CIWDOFST_CLROVPRFICB |\r\nCIWDOFST_CLROVPRFICR);\r\ncamif_write(camif, S3C_CAMIF_REG_CIWDOFST, cfg);\r\n}\r\nvoid camif_hw_set_camera_bus(struct camif_dev *camif)\r\n{\r\nunsigned int flags = camif->pdata.sensor.flags;\r\nu32 cfg = camif_read(camif, S3C_CAMIF_REG_CIGCTRL);\r\ncfg &= ~(CIGCTRL_INVPOLPCLK | CIGCTRL_INVPOLVSYNC |\r\nCIGCTRL_INVPOLHREF | CIGCTRL_INVPOLFIELD);\r\nif (flags & V4L2_MBUS_PCLK_SAMPLE_FALLING)\r\ncfg |= CIGCTRL_INVPOLPCLK;\r\nif (flags & V4L2_MBUS_VSYNC_ACTIVE_LOW)\r\ncfg |= CIGCTRL_INVPOLVSYNC;\r\nif (flags & V4L2_MBUS_HSYNC_ACTIVE_HIGH)\r\ncfg |= CIGCTRL_INVPOLHREF;\r\nif (camif->variant->ip_revision == S3C6410_CAMIF_IP_REV) {\r\nif (flags & V4L2_MBUS_FIELD_EVEN_LOW)\r\ncfg |= CIGCTRL_INVPOLFIELD;\r\ncfg |= CIGCTRL_FIELDMODE;\r\n}\r\npr_debug("Setting CIGCTRL to: %#x\n", cfg);\r\ncamif_write(camif, S3C_CAMIF_REG_CIGCTRL, cfg);\r\n}\r\nvoid camif_hw_set_output_addr(struct camif_vp *vp,\r\nstruct camif_addr *paddr, int i)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\ncamif_write(camif, S3C_CAMIF_REG_CIYSA(vp->id, i), paddr->y);\r\nif (camif->variant->ip_revision == S3C6410_CAMIF_IP_REV\r\n|| vp->id == VP_CODEC) {\r\ncamif_write(camif, S3C_CAMIF_REG_CICBSA(vp->id, i),\r\npaddr->cb);\r\ncamif_write(camif, S3C_CAMIF_REG_CICRSA(vp->id, i),\r\npaddr->cr);\r\n}\r\npr_debug("dst_buf[%d]: %pad, cb: %pad, cr: %pad\n",\r\ni, &paddr->y, &paddr->cb, &paddr->cr);\r\n}\r\nstatic void camif_hw_set_out_dma_size(struct camif_vp *vp)\r\n{\r\nstruct camif_frame *frame = &vp->out_frame;\r\nu32 cfg;\r\ncfg = camif_read(vp->camif, S3C_CAMIF_REG_CITRGFMT(vp->id, vp->offset));\r\ncfg &= ~CITRGFMT_TARGETSIZE_MASK;\r\ncfg |= (frame->f_width << 16) | frame->f_height;\r\ncamif_write(vp->camif, S3C_CAMIF_REG_CITRGFMT(vp->id, vp->offset), cfg);\r\n}\r\nstatic void camif_get_dma_burst(u32 width, u32 ybpp, u32 *mburst, u32 *rburst)\r\n{\r\nunsigned int nwords = width * ybpp / 4;\r\nunsigned int div, rem;\r\nif (WARN_ON(width < 8 || (width * ybpp) & 7))\r\nreturn;\r\nfor (div = 16; div >= 2; div /= 2) {\r\nif (nwords < div)\r\ncontinue;\r\nrem = nwords & (div - 1);\r\nif (rem == 0) {\r\n*mburst = div;\r\n*rburst = div;\r\nbreak;\r\n}\r\nif (rem == div / 2 || rem == div / 4) {\r\n*mburst = div;\r\n*rburst = rem;\r\nbreak;\r\n}\r\n}\r\n}\r\nvoid camif_hw_set_output_dma(struct camif_vp *vp)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\nstruct camif_frame *frame = &vp->out_frame;\r\nconst struct camif_fmt *fmt = vp->out_fmt;\r\nunsigned int ymburst = 0, yrburst = 0;\r\nu32 cfg;\r\ncamif_hw_set_out_dma_size(vp);\r\nif (camif->variant->ip_revision == S3C6410_CAMIF_IP_REV) {\r\nstruct camif_dma_offset *offset = &frame->dma_offset;\r\ncfg = S3C_CISS_OFFS_INITIAL(offset->initial);\r\ncfg |= S3C_CISS_OFFS_LINE(offset->line);\r\ncamif_write(camif, S3C_CAMIF_REG_CISSY(vp->id), cfg);\r\ncamif_write(camif, S3C_CAMIF_REG_CISSCB(vp->id), cfg);\r\ncamif_write(camif, S3C_CAMIF_REG_CISSCR(vp->id), cfg);\r\n}\r\ncamif_get_dma_burst(frame->rect.width, fmt->ybpp, &ymburst, &yrburst);\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CICTRL(vp->id, vp->offset));\r\ncfg &= ~CICTRL_BURST_MASK;\r\ncfg |= CICTRL_YBURST1(ymburst) | CICTRL_YBURST2(yrburst);\r\ncfg |= CICTRL_CBURST1(ymburst / 2) | CICTRL_CBURST2(yrburst / 2);\r\ncamif_write(camif, S3C_CAMIF_REG_CICTRL(vp->id, vp->offset), cfg);\r\npr_debug("ymburst: %u, yrburst: %u\n", ymburst, yrburst);\r\n}\r\nvoid camif_hw_set_input_path(struct camif_vp *vp)\r\n{\r\nu32 cfg = camif_read(vp->camif, S3C_CAMIF_REG_MSCTRL(vp->id));\r\ncfg &= ~MSCTRL_SEL_DMA_CAM;\r\ncamif_write(vp->camif, S3C_CAMIF_REG_MSCTRL(vp->id), cfg);\r\n}\r\nvoid camif_hw_set_target_format(struct camif_vp *vp)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\nstruct camif_frame *frame = &vp->out_frame;\r\nu32 cfg;\r\npr_debug("fw: %d, fh: %d color: %d\n", frame->f_width,\r\nframe->f_height, vp->out_fmt->color);\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CITRGFMT(vp->id, vp->offset));\r\ncfg &= ~CITRGFMT_TARGETSIZE_MASK;\r\nif (camif->variant->ip_revision == S3C244X_CAMIF_IP_REV) {\r\ncfg |= CITRGFMT_IN422;\r\ncfg &= ~CITRGFMT_OUT422;\r\nif (vp->out_fmt->color == IMG_FMT_YCBCR422P)\r\ncfg |= CITRGFMT_OUT422;\r\n} else {\r\ncfg &= ~CITRGFMT_OUTFORMAT_MASK;\r\nswitch (vp->out_fmt->color) {\r\ncase IMG_FMT_RGB565...IMG_FMT_XRGB8888:\r\ncfg |= CITRGFMT_OUTFORMAT_RGB;\r\nbreak;\r\ncase IMG_FMT_YCBCR420...IMG_FMT_YCRCB420:\r\ncfg |= CITRGFMT_OUTFORMAT_YCBCR420;\r\nbreak;\r\ncase IMG_FMT_YCBCR422P:\r\ncfg |= CITRGFMT_OUTFORMAT_YCBCR422;\r\nbreak;\r\ncase IMG_FMT_YCBYCR422...IMG_FMT_CRYCBY422:\r\ncfg |= CITRGFMT_OUTFORMAT_YCBCR422I;\r\nbreak;\r\n}\r\n}\r\nif (vp->rotation == 90 || vp->rotation == 270)\r\ncfg |= (frame->f_height << 16) | frame->f_width;\r\nelse\r\ncfg |= (frame->f_width << 16) | frame->f_height;\r\ncamif_write(camif, S3C_CAMIF_REG_CITRGFMT(vp->id, vp->offset), cfg);\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CITAREA(vp->id, vp->offset));\r\ncfg &= ~CITAREA_MASK;\r\ncfg |= (frame->f_width * frame->f_height);\r\ncamif_write(camif, S3C_CAMIF_REG_CITAREA(vp->id, vp->offset), cfg);\r\n}\r\nvoid camif_hw_set_flip(struct camif_vp *vp)\r\n{\r\nu32 cfg = camif_read(vp->camif,\r\nS3C_CAMIF_REG_CITRGFMT(vp->id, vp->offset));\r\ncfg &= ~CITRGFMT_FLIP_MASK;\r\nif (vp->hflip)\r\ncfg |= CITRGFMT_FLIP_Y_MIRROR;\r\nif (vp->vflip)\r\ncfg |= CITRGFMT_FLIP_X_MIRROR;\r\ncamif_write(vp->camif, S3C_CAMIF_REG_CITRGFMT(vp->id, vp->offset), cfg);\r\n}\r\nstatic void camif_hw_set_prescaler(struct camif_vp *vp)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\nstruct camif_scaler *sc = &vp->scaler;\r\nu32 cfg, shfactor, addr;\r\naddr = S3C_CAMIF_REG_CISCPRERATIO(vp->id, vp->offset);\r\nshfactor = 10 - (sc->h_shift + sc->v_shift);\r\ncfg = shfactor << 28;\r\ncfg |= (sc->pre_h_ratio << 16) | sc->pre_v_ratio;\r\ncamif_write(camif, addr, cfg);\r\ncfg = (sc->pre_dst_width << 16) | sc->pre_dst_height;\r\ncamif_write(camif, S3C_CAMIF_REG_CISCPREDST(vp->id, vp->offset), cfg);\r\n}\r\nstatic void camif_s3c244x_hw_set_scaler(struct camif_vp *vp)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\nstruct camif_scaler *scaler = &vp->scaler;\r\nunsigned int color = vp->out_fmt->color;\r\nu32 cfg;\r\ncamif_hw_set_prescaler(vp);\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CISCCTRL(vp->id, vp->offset));\r\ncfg &= ~(CISCCTRL_SCALEUP_MASK | CISCCTRL_SCALERBYPASS |\r\nCISCCTRL_MAIN_RATIO_MASK | CIPRSCCTRL_RGB_FORMAT_24BIT);\r\nif (scaler->enable) {\r\nif (scaler->scaleup_h) {\r\nif (vp->id == VP_CODEC)\r\ncfg |= CISCCTRL_SCALEUP_H;\r\nelse\r\ncfg |= CIPRSCCTRL_SCALEUP_H;\r\n}\r\nif (scaler->scaleup_v) {\r\nif (vp->id == VP_CODEC)\r\ncfg |= CISCCTRL_SCALEUP_V;\r\nelse\r\ncfg |= CIPRSCCTRL_SCALEUP_V;\r\n}\r\n} else {\r\nif (vp->id == VP_CODEC)\r\ncfg |= CISCCTRL_SCALERBYPASS;\r\n}\r\ncfg |= ((scaler->main_h_ratio & 0x1ff) << 16);\r\ncfg |= scaler->main_v_ratio & 0x1ff;\r\nif (vp->id == VP_PREVIEW) {\r\nif (color == IMG_FMT_XRGB8888)\r\ncfg |= CIPRSCCTRL_RGB_FORMAT_24BIT;\r\ncfg |= CIPRSCCTRL_SAMPLE;\r\n}\r\ncamif_write(camif, S3C_CAMIF_REG_CISCCTRL(vp->id, vp->offset), cfg);\r\npr_debug("main: h_ratio: %#x, v_ratio: %#x",\r\nscaler->main_h_ratio, scaler->main_v_ratio);\r\n}\r\nstatic void camif_s3c64xx_hw_set_scaler(struct camif_vp *vp)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\nstruct camif_scaler *scaler = &vp->scaler;\r\nunsigned int color = vp->out_fmt->color;\r\nu32 cfg;\r\ncamif_hw_set_prescaler(vp);\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CISCCTRL(vp->id, vp->offset));\r\ncfg &= ~(CISCCTRL_CSCR2Y_WIDE | CISCCTRL_CSCY2R_WIDE\r\n| CISCCTRL_SCALEUP_H | CISCCTRL_SCALEUP_V\r\n| CISCCTRL_SCALERBYPASS | CISCCTRL_ONE2ONE\r\n| CISCCTRL_INRGB_FMT_MASK | CISCCTRL_OUTRGB_FMT_MASK\r\n| CISCCTRL_INTERLACE | CISCCTRL_EXTRGB_EXTENSION\r\n| CISCCTRL_MAIN_RATIO_MASK);\r\ncfg |= (CISCCTRL_CSCR2Y_WIDE | CISCCTRL_CSCY2R_WIDE);\r\nif (!scaler->enable) {\r\ncfg |= CISCCTRL_SCALERBYPASS;\r\n} else {\r\nif (scaler->scaleup_h)\r\ncfg |= CISCCTRL_SCALEUP_H;\r\nif (scaler->scaleup_v)\r\ncfg |= CISCCTRL_SCALEUP_V;\r\nif (scaler->copy)\r\ncfg |= CISCCTRL_ONE2ONE;\r\n}\r\nswitch (color) {\r\ncase IMG_FMT_RGB666:\r\ncfg |= CISCCTRL_OUTRGB_FMT_RGB666;\r\nbreak;\r\ncase IMG_FMT_XRGB8888:\r\ncfg |= CISCCTRL_OUTRGB_FMT_RGB888;\r\nbreak;\r\n}\r\ncfg |= (scaler->main_h_ratio & 0x1ff) << 16;\r\ncfg |= scaler->main_v_ratio & 0x1ff;\r\ncamif_write(camif, S3C_CAMIF_REG_CISCCTRL(vp->id, vp->offset), cfg);\r\npr_debug("main: h_ratio: %#x, v_ratio: %#x",\r\nscaler->main_h_ratio, scaler->main_v_ratio);\r\n}\r\nvoid camif_hw_set_scaler(struct camif_vp *vp)\r\n{\r\nunsigned int ip_rev = vp->camif->variant->ip_revision;\r\nif (ip_rev == S3C244X_CAMIF_IP_REV)\r\ncamif_s3c244x_hw_set_scaler(vp);\r\nelse\r\ncamif_s3c64xx_hw_set_scaler(vp);\r\n}\r\nvoid camif_hw_enable_scaler(struct camif_vp *vp, bool on)\r\n{\r\nu32 addr = S3C_CAMIF_REG_CISCCTRL(vp->id, vp->offset);\r\nu32 cfg;\r\ncfg = camif_read(vp->camif, addr);\r\nif (on)\r\ncfg |= CISCCTRL_SCALERSTART;\r\nelse\r\ncfg &= ~CISCCTRL_SCALERSTART;\r\ncamif_write(vp->camif, addr, cfg);\r\n}\r\nvoid camif_hw_set_lastirq(struct camif_vp *vp, int enable)\r\n{\r\nu32 addr = S3C_CAMIF_REG_CICTRL(vp->id, vp->offset);\r\nu32 cfg;\r\ncfg = camif_read(vp->camif, addr);\r\nif (enable)\r\ncfg |= CICTRL_LASTIRQ_ENABLE;\r\nelse\r\ncfg &= ~CICTRL_LASTIRQ_ENABLE;\r\ncamif_write(vp->camif, addr, cfg);\r\n}\r\nvoid camif_hw_enable_capture(struct camif_vp *vp)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\nu32 cfg;\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CIIMGCPT(vp->offset));\r\ncamif->stream_count++;\r\nif (camif->variant->ip_revision == S3C6410_CAMIF_IP_REV)\r\ncfg |= CIIMGCPT_CPT_FREN_ENABLE(vp->id);\r\nif (vp->scaler.enable)\r\ncfg |= CIIMGCPT_IMGCPTEN_SC(vp->id);\r\nif (camif->stream_count == 1)\r\ncfg |= CIIMGCPT_IMGCPTEN;\r\ncamif_write(camif, S3C_CAMIF_REG_CIIMGCPT(vp->offset), cfg);\r\npr_debug("CIIMGCPT: %#x, camif->stream_count: %d\n",\r\ncfg, camif->stream_count);\r\n}\r\nvoid camif_hw_disable_capture(struct camif_vp *vp)\r\n{\r\nstruct camif_dev *camif = vp->camif;\r\nu32 cfg;\r\ncfg = camif_read(camif, S3C_CAMIF_REG_CIIMGCPT(vp->offset));\r\ncfg &= ~CIIMGCPT_IMGCPTEN_SC(vp->id);\r\nif (WARN_ON(--(camif->stream_count) < 0))\r\ncamif->stream_count = 0;\r\nif (camif->stream_count == 0)\r\ncfg &= ~CIIMGCPT_IMGCPTEN;\r\npr_debug("CIIMGCPT: %#x, camif->stream_count: %d\n",\r\ncfg, camif->stream_count);\r\ncamif_write(camif, S3C_CAMIF_REG_CIIMGCPT(vp->offset), cfg);\r\n}\r\nvoid camif_hw_dump_regs(struct camif_dev *camif, const char *label)\r\n{\r\nstruct {\r\nu32 offset;\r\nconst char * const name;\r\n} registers[] = {\r\n{ S3C_CAMIF_REG_CISRCFMT, "CISRCFMT" },\r\n{ S3C_CAMIF_REG_CIWDOFST, "CIWDOFST" },\r\n{ S3C_CAMIF_REG_CIGCTRL, "CIGCTRL" },\r\n{ S3C_CAMIF_REG_CIWDOFST2, "CIWDOFST2" },\r\n{ S3C_CAMIF_REG_CIYSA(0, 0), "CICOYSA0" },\r\n{ S3C_CAMIF_REG_CICBSA(0, 0), "CICOCBSA0" },\r\n{ S3C_CAMIF_REG_CICRSA(0, 0), "CICOCRSA0" },\r\n{ S3C_CAMIF_REG_CIYSA(0, 1), "CICOYSA1" },\r\n{ S3C_CAMIF_REG_CICBSA(0, 1), "CICOCBSA1" },\r\n{ S3C_CAMIF_REG_CICRSA(0, 1), "CICOCRSA1" },\r\n{ S3C_CAMIF_REG_CIYSA(0, 2), "CICOYSA2" },\r\n{ S3C_CAMIF_REG_CICBSA(0, 2), "CICOCBSA2" },\r\n{ S3C_CAMIF_REG_CICRSA(0, 2), "CICOCRSA2" },\r\n{ S3C_CAMIF_REG_CIYSA(0, 3), "CICOYSA3" },\r\n{ S3C_CAMIF_REG_CICBSA(0, 3), "CICOCBSA3" },\r\n{ S3C_CAMIF_REG_CICRSA(0, 3), "CICOCRSA3" },\r\n{ S3C_CAMIF_REG_CIYSA(1, 0), "CIPRYSA0" },\r\n{ S3C_CAMIF_REG_CIYSA(1, 1), "CIPRYSA1" },\r\n{ S3C_CAMIF_REG_CIYSA(1, 2), "CIPRYSA2" },\r\n{ S3C_CAMIF_REG_CIYSA(1, 3), "CIPRYSA3" },\r\n{ S3C_CAMIF_REG_CITRGFMT(0, 0), "CICOTRGFMT" },\r\n{ S3C_CAMIF_REG_CITRGFMT(1, 0), "CIPRTRGFMT" },\r\n{ S3C_CAMIF_REG_CICTRL(0, 0), "CICOCTRL" },\r\n{ S3C_CAMIF_REG_CICTRL(1, 0), "CIPRCTRL" },\r\n{ S3C_CAMIF_REG_CISCPREDST(0, 0), "CICOSCPREDST" },\r\n{ S3C_CAMIF_REG_CISCPREDST(1, 0), "CIPRSCPREDST" },\r\n{ S3C_CAMIF_REG_CISCPRERATIO(0, 0), "CICOSCPRERATIO" },\r\n{ S3C_CAMIF_REG_CISCPRERATIO(1, 0), "CIPRSCPRERATIO" },\r\n{ S3C_CAMIF_REG_CISCCTRL(0, 0), "CICOSCCTRL" },\r\n{ S3C_CAMIF_REG_CISCCTRL(1, 0), "CIPRSCCTRL" },\r\n{ S3C_CAMIF_REG_CITAREA(0, 0), "CICOTAREA" },\r\n{ S3C_CAMIF_REG_CITAREA(1, 0), "CIPRTAREA" },\r\n{ S3C_CAMIF_REG_CISTATUS(0, 0), "CICOSTATUS" },\r\n{ S3C_CAMIF_REG_CISTATUS(1, 0), "CIPRSTATUS" },\r\n{ S3C_CAMIF_REG_CIIMGCPT(0), "CIIMGCPT" },\r\n};\r\nu32 i;\r\npr_info("--- %s ---\n", label);\r\nfor (i = 0; i < ARRAY_SIZE(registers); i++) {\r\nu32 cfg = readl(camif->io_base + registers[i].offset);\r\ndev_info(camif->dev, "%s:\t0x%08x\n", registers[i].name, cfg);\r\n}\r\n}
