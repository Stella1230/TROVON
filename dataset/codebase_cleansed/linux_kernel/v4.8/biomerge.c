bool xen_biovec_phys_mergeable(const struct bio_vec *vec1,\r\nconst struct bio_vec *vec2)\r\n{\r\n#if XEN_PAGE_SIZE == PAGE_SIZE\r\nunsigned long bfn1 = pfn_to_bfn(page_to_pfn(vec1->bv_page));\r\nunsigned long bfn2 = pfn_to_bfn(page_to_pfn(vec2->bv_page));\r\nreturn __BIOVEC_PHYS_MERGEABLE(vec1, vec2) &&\r\n((bfn1 == bfn2) || ((bfn1+1) == bfn2));\r\n#else\r\nreturn 0;\r\n#endif\r\n}
