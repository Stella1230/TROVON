static int axp20x_rsb_probe(struct sunxi_rsb_device *rdev)\r\n{\r\nstruct axp20x_dev *axp20x;\r\nint ret;\r\naxp20x = devm_kzalloc(&rdev->dev, sizeof(*axp20x), GFP_KERNEL);\r\nif (!axp20x)\r\nreturn -ENOMEM;\r\naxp20x->dev = &rdev->dev;\r\naxp20x->irq = rdev->irq;\r\ndev_set_drvdata(&rdev->dev, axp20x);\r\nret = axp20x_match_device(axp20x);\r\nif (ret)\r\nreturn ret;\r\naxp20x->regmap = devm_regmap_init_sunxi_rsb(rdev, axp20x->regmap_cfg);\r\nif (IS_ERR(axp20x->regmap)) {\r\nret = PTR_ERR(axp20x->regmap);\r\ndev_err(&rdev->dev, "regmap init failed: %d\n", ret);\r\nreturn ret;\r\n}\r\nreturn axp20x_device_probe(axp20x);\r\n}\r\nstatic int axp20x_rsb_remove(struct sunxi_rsb_device *rdev)\r\n{\r\nstruct axp20x_dev *axp20x = sunxi_rsb_device_get_drvdata(rdev);\r\nreturn axp20x_device_remove(axp20x);\r\n}
