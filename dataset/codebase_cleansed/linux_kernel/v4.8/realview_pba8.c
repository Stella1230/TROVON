static void __init realview_pba8_map_io(void)\r\n{\r\niotable_init(realview_pba8_io_desc, ARRAY_SIZE(realview_pba8_io_desc));\r\n}\r\nstatic void __init gic_init_irq(void)\r\n{\r\ngic_init(0, IRQ_PBA8_GIC_START,\r\n__io_address(REALVIEW_PBA8_GIC_DIST_BASE),\r\n__io_address(REALVIEW_PBA8_GIC_CPU_BASE));\r\n}\r\nstatic void __init realview_pba8_timer_init(void)\r\n{\r\ntimer0_va_base = __io_address(REALVIEW_PBA8_TIMER0_1_BASE);\r\ntimer1_va_base = __io_address(REALVIEW_PBA8_TIMER0_1_BASE) + 0x20;\r\ntimer2_va_base = __io_address(REALVIEW_PBA8_TIMER2_3_BASE);\r\ntimer3_va_base = __io_address(REALVIEW_PBA8_TIMER2_3_BASE) + 0x20;\r\nrealview_clk_init(__io_address(REALVIEW_SYS_BASE), false);\r\nrealview_timer_init(IRQ_PBA8_TIMER0_1);\r\n}\r\nstatic void realview_pba8_restart(enum reboot_mode mode, const char *cmd)\r\n{\r\nvoid __iomem *reset_ctrl = __io_address(REALVIEW_SYS_RESETCTL);\r\nvoid __iomem *lock_ctrl = __io_address(REALVIEW_SYS_LOCK);\r\n__raw_writel(REALVIEW_SYS_LOCK_VAL, lock_ctrl);\r\n__raw_writel(0x0000, reset_ctrl);\r\n__raw_writel(0x0004, reset_ctrl);\r\ndsb();\r\n}\r\nstatic void __init realview_pba8_init(void)\r\n{\r\nint i;\r\nrealview_flash_register(realview_pba8_flash_resource,\r\nARRAY_SIZE(realview_pba8_flash_resource));\r\nrealview_eth_register(NULL, realview_pba8_smsc911x_resources);\r\nplatform_device_register(&realview_i2c_device);\r\nplatform_device_register(&realview_cf_device);\r\nplatform_device_register(&realview_leds_device);\r\nrealview_usb_register(realview_pba8_isp1761_resources);\r\nplatform_device_register(&pmu_device);\r\nfor (i = 0; i < ARRAY_SIZE(amba_devs); i++) {\r\nstruct amba_device *d = amba_devs[i];\r\namba_device_register(d, &iomem_resource);\r\n}\r\n}
