static int __init pb_keys_init(void)\r\n{\r\nstruct gpio_keys_button *gb = gpio_button;\r\nint i, num, good = 0;\r\nnum = sizeof(gpio_button) / sizeof(struct gpio_keys_button);\r\nfor (i = 0; i < num; i++) {\r\ngb[i].gpio = get_gpio_by_name(gb[i].desc);\r\npr_debug("info[%2d]: name = %s, gpio = %d\n", i, gb[i].desc,\r\ngb[i].gpio);\r\nif (gb[i].gpio < 0)\r\ncontinue;\r\nif (i != good)\r\ngb[good] = gb[i];\r\ngood++;\r\n}\r\nif (good) {\r\ngpio_keys.nbuttons = good;\r\nreturn platform_device_register(&pb_device);\r\n}\r\nreturn 0;\r\n}
