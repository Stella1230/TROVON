static ssize_t partition_id_show(struct kobject *kobj,\r\nstruct kobj_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%ld\n", sn_partition_id);\r\n}\r\nstatic ssize_t coherence_id_show(struct kobject *kobj,\r\nstruct kobj_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%ld\n", uv_partition_coherence_id());\r\n}\r\nstatic int __init sgi_uv_sysfs_init(void)\r\n{\r\nunsigned long ret;\r\nif (!is_uv_system())\r\nreturn -ENODEV;\r\nif (!sgi_uv_kobj)\r\nsgi_uv_kobj = kobject_create_and_add("sgi_uv", firmware_kobj);\r\nif (!sgi_uv_kobj) {\r\nprintk(KERN_WARNING "kobject_create_and_add sgi_uv failed\n");\r\nreturn -EINVAL;\r\n}\r\nret = sysfs_create_file(sgi_uv_kobj, &partition_id_attr.attr);\r\nif (ret) {\r\nprintk(KERN_WARNING "sysfs_create_file partition_id failed\n");\r\nreturn ret;\r\n}\r\nret = sysfs_create_file(sgi_uv_kobj, &coherence_id_attr.attr);\r\nif (ret) {\r\nprintk(KERN_WARNING "sysfs_create_file coherence_id failed\n");\r\nreturn ret;\r\n}\r\nreturn 0;\r\n}
