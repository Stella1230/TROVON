static int empeg_startup(struct usb_serial *serial)\r\n{\r\nint r;\r\nif (serial->dev->actconfig->desc.bConfigurationValue != 1) {\r\ndev_err(&serial->dev->dev, "active config #%d != 1 ??\n",\r\nserial->dev->actconfig->desc.bConfigurationValue);\r\nreturn -ENODEV;\r\n}\r\nr = usb_reset_configuration(serial->dev);\r\nreturn r;\r\n}\r\nstatic void empeg_init_termios(struct tty_struct *tty)\r\n{\r\nstruct ktermios *termios = &tty->termios;\r\ntermios->c_iflag\r\n&= ~(IGNBRK\r\n| BRKINT\r\n| PARMRK\r\n| ISTRIP\r\n| INLCR\r\n| IGNCR\r\n| ICRNL\r\n| IXON);\r\ntermios->c_oflag\r\n&= ~OPOST;\r\ntermios->c_lflag\r\n&= ~(ECHO\r\n| ECHONL\r\n| ICANON\r\n| ISIG\r\n| IEXTEN);\r\ntermios->c_cflag\r\n&= ~(CSIZE\r\n| PARENB\r\n| CBAUD);\r\ntermios->c_cflag\r\n|= CS8;\r\ntty_encode_baud_rate(tty, 115200, 115200);\r\n}
