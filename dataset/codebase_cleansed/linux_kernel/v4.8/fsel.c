int\r\nfsel(u32 *frD, void *frA, u32 *frB, u32 *frC)\r\n{\r\nFP_DECL_D(A);\r\nFP_DECL_EX;\r\n#ifdef DEBUG\r\nprintk("%s: %p %p %p %p\n", __func__, frD, frA, frB, frC);\r\n#endif\r\nFP_UNPACK_DP(A, frA);\r\n#ifdef DEBUG\r\nprintk("A: %ld %lu %lu %ld (%ld)\n", A_s, A_f1, A_f0, A_e, A_c);\r\nprintk("B: %08x %08x\n", frB[0], frB[1]);\r\nprintk("C: %08x %08x\n", frC[0], frC[1]);\r\n#endif\r\nif (A_c == FP_CLS_NAN || (A_c != FP_CLS_ZERO && A_s)) {\r\nfrD[0] = frB[0];\r\nfrD[1] = frB[1];\r\n} else {\r\nfrD[0] = frC[0];\r\nfrD[1] = frC[1];\r\n}\r\n#ifdef DEBUG\r\nprintk("D: %08x.%08x\n", frD[0], frD[1]);\r\n#endif\r\nreturn 0;\r\n}
