void cx25821_set_gpiopin_direction(struct cx25821_dev *dev,\r\nint pin_number, int pin_logic_value)\r\n{\r\nint bit = pin_number;\r\nu32 gpio_oe_reg = GPIO_LO_OE;\r\nu32 gpio_register = 0;\r\nu32 value = 0;\r\nif (pin_number >= 47)\r\nreturn;\r\nif (pin_number > 31) {\r\nbit = pin_number - 31;\r\ngpio_oe_reg = GPIO_HI_OE;\r\n}\r\ngpio_register = cx_read(gpio_oe_reg);\r\nif (pin_logic_value == 1)\r\nvalue = gpio_register | Set_GPIO_Bit(bit);\r\nelse\r\nvalue = gpio_register & Clear_GPIO_Bit(bit);\r\ncx_write(gpio_oe_reg, value);\r\n}\r\nstatic void cx25821_set_gpiopin_logicvalue(struct cx25821_dev *dev,\r\nint pin_number, int pin_logic_value)\r\n{\r\nint bit = pin_number;\r\nu32 gpio_reg = GPIO_LO;\r\nu32 value = 0;\r\nif (pin_number >= 47)\r\nreturn;\r\ncx25821_set_gpiopin_direction(dev, pin_number, 0);\r\nif (pin_number > 31) {\r\nbit = pin_number - 31;\r\ngpio_reg = GPIO_HI;\r\n}\r\nvalue = cx_read(gpio_reg);\r\nif (pin_logic_value == 0)\r\nvalue &= Clear_GPIO_Bit(bit);\r\nelse\r\nvalue |= Set_GPIO_Bit(bit);\r\ncx_write(gpio_reg, value);\r\n}\r\nvoid cx25821_gpio_init(struct cx25821_dev *dev)\r\n{\r\nif (dev == NULL)\r\nreturn;\r\nswitch (dev->board) {\r\ncase CX25821_BOARD_CONEXANT_ATHENA10:\r\ndefault:\r\ncx25821_set_gpiopin_logicvalue(dev, 5, 1);\r\nmdelay(20);\r\nbreak;\r\n}\r\n}
