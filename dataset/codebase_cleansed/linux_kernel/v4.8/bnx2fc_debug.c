void BNX2FC_IO_DBG(const struct bnx2fc_cmd *io_req, const char *fmt, ...)\r\n{\r\nstruct va_format vaf;\r\nva_list args;\r\nif (likely(!(bnx2fc_debug_level & LOG_IO)))\r\nreturn;\r\nva_start(args, fmt);\r\nvaf.fmt = fmt;\r\nvaf.va = &args;\r\nif (io_req && io_req->port && io_req->port->lport &&\r\nio_req->port->lport->host)\r\nshost_printk(KERN_INFO, io_req->port->lport->host,\r\nPFX "xid:0x%x %pV",\r\nio_req->xid, &vaf);\r\nelse\r\npr_info("NULL %pV", &vaf);\r\nva_end(args);\r\n}\r\nvoid BNX2FC_TGT_DBG(const struct bnx2fc_rport *tgt, const char *fmt, ...)\r\n{\r\nstruct va_format vaf;\r\nva_list args;\r\nif (likely(!(bnx2fc_debug_level & LOG_TGT)))\r\nreturn;\r\nva_start(args, fmt);\r\nvaf.fmt = fmt;\r\nvaf.va = &args;\r\nif (tgt && tgt->port && tgt->port->lport && tgt->port->lport->host &&\r\ntgt->rport)\r\nshost_printk(KERN_INFO, tgt->port->lport->host,\r\nPFX "port:%x %pV",\r\ntgt->rport->port_id, &vaf);\r\nelse\r\npr_info("NULL %pV", &vaf);\r\nva_end(args);\r\n}\r\nvoid BNX2FC_HBA_DBG(const struct fc_lport *lport, const char *fmt, ...)\r\n{\r\nstruct va_format vaf;\r\nva_list args;\r\nif (likely(!(bnx2fc_debug_level & LOG_HBA)))\r\nreturn;\r\nva_start(args, fmt);\r\nvaf.fmt = fmt;\r\nvaf.va = &args;\r\nif (lport && lport->host)\r\nshost_printk(KERN_INFO, lport->host, PFX "%pV", &vaf);\r\nelse\r\npr_info("NULL %pV", &vaf);\r\nva_end(args);\r\n}
