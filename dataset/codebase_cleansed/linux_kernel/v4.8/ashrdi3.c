long long __ashrdi3(long long u, word_type b)\r\n{\r\nDWunion uu, w;\r\nword_type bm;\r\nif (b == 0)\r\nreturn u;\r\nuu.ll = u;\r\nbm = 32 - b;\r\nif (bm <= 0) {\r\nw.s.high =\r\nuu.s.high >> 31;\r\nw.s.low = uu.s.high >> -bm;\r\n} else {\r\nconst unsigned int carries = (unsigned int) uu.s.high << bm;\r\nw.s.high = uu.s.high >> b;\r\nw.s.low = ((unsigned int) uu.s.low >> b) | carries;\r\n}\r\nreturn w.ll;\r\n}
