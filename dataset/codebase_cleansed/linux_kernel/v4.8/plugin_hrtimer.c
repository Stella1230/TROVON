static int timer_expire_handler(struct trace_seq *s,\r\nstruct pevent_record *record,\r\nstruct event_format *event, void *context)\r\n{\r\ntrace_seq_printf(s, "hrtimer=");\r\nif (pevent_print_num_field(s, "0x%llx", event, "timer",\r\nrecord, 0) == -1)\r\npevent_print_num_field(s, "0x%llx", event, "hrtimer",\r\nrecord, 1);\r\ntrace_seq_printf(s, " now=");\r\npevent_print_num_field(s, "%llu", event, "now", record, 1);\r\npevent_print_func_field(s, " function=%s", event, "function",\r\nrecord, 0);\r\nreturn 0;\r\n}\r\nstatic int timer_start_handler(struct trace_seq *s,\r\nstruct pevent_record *record,\r\nstruct event_format *event, void *context)\r\n{\r\ntrace_seq_printf(s, "hrtimer=");\r\nif (pevent_print_num_field(s, "0x%llx", event, "timer",\r\nrecord, 0) == -1)\r\npevent_print_num_field(s, "0x%llx", event, "hrtimer",\r\nrecord, 1);\r\npevent_print_func_field(s, " function=%s", event, "function",\r\nrecord, 0);\r\ntrace_seq_printf(s, " expires=");\r\npevent_print_num_field(s, "%llu", event, "expires", record, 1);\r\ntrace_seq_printf(s, " softexpires=");\r\npevent_print_num_field(s, "%llu", event, "softexpires", record, 1);\r\nreturn 0;\r\n}\r\nint PEVENT_PLUGIN_LOADER(struct pevent *pevent)\r\n{\r\npevent_register_event_handler(pevent, -1,\r\n"timer", "hrtimer_expire_entry",\r\ntimer_expire_handler, NULL);\r\npevent_register_event_handler(pevent, -1, "timer", "hrtimer_start",\r\ntimer_start_handler, NULL);\r\nreturn 0;\r\n}\r\nvoid PEVENT_PLUGIN_UNLOADER(struct pevent *pevent)\r\n{\r\npevent_unregister_event_handler(pevent, -1,\r\n"timer", "hrtimer_expire_entry",\r\ntimer_expire_handler, NULL);\r\npevent_unregister_event_handler(pevent, -1, "timer", "hrtimer_start",\r\ntimer_start_handler, NULL);\r\n}
