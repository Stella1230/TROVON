static int axp20x_i2c_probe(struct i2c_client *i2c,\r\nconst struct i2c_device_id *id)\r\n{\r\nstruct axp20x_dev *axp20x;\r\nint ret;\r\naxp20x = devm_kzalloc(&i2c->dev, sizeof(*axp20x), GFP_KERNEL);\r\nif (!axp20x)\r\nreturn -ENOMEM;\r\naxp20x->dev = &i2c->dev;\r\naxp20x->irq = i2c->irq;\r\ndev_set_drvdata(axp20x->dev, axp20x);\r\nret = axp20x_match_device(axp20x);\r\nif (ret)\r\nreturn ret;\r\naxp20x->regmap = devm_regmap_init_i2c(i2c, axp20x->regmap_cfg);\r\nif (IS_ERR(axp20x->regmap)) {\r\nret = PTR_ERR(axp20x->regmap);\r\ndev_err(&i2c->dev, "regmap init failed: %d\n", ret);\r\nreturn ret;\r\n}\r\nreturn axp20x_device_probe(axp20x);\r\n}\r\nstatic int axp20x_i2c_remove(struct i2c_client *i2c)\r\n{\r\nstruct axp20x_dev *axp20x = i2c_get_clientdata(i2c);\r\nreturn axp20x_device_remove(axp20x);\r\n}
