static void _print_addr(void *data, unsigned long address, int reliable)\r\n{\r\npr_info(" [<%08lx>]", address);\r\npr_cont(" %s", reliable ? "" : "? ");\r\nprint_symbol("%s", address);\r\npr_cont("\n");\r\n}\r\nvoid show_stack(struct task_struct *task, unsigned long *stack)\r\n{\r\nunsigned long *sp = stack;\r\nstruct pt_regs *segv_regs = current->thread.segv_regs;\r\nint i;\r\nif (!segv_regs && os_is_signal_stack()) {\r\npr_err("Received SIGSEGV in SIGSEGV handler,"\r\n" aborting stack trace!\n");\r\nreturn;\r\n}\r\nif (!stack)\r\nsp = get_stack_pointer(task, segv_regs);\r\npr_info("Stack:\n");\r\nstack = sp;\r\nfor (i = 0; i < 3 * STACKSLOTS_PER_LINE; i++) {\r\nif (kstack_end(stack))\r\nbreak;\r\nif (i && ((i % STACKSLOTS_PER_LINE) == 0))\r\npr_cont("\n");\r\npr_cont(" %08lx", *stack++);\r\n}\r\npr_cont("\n");\r\npr_info("Call Trace:\n");\r\ndump_trace(current, &stackops, NULL);\r\npr_info("\n");\r\n}
