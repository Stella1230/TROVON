void __init s3c_fb_set_platdata(struct s3c_fb_platdata *pd)\r\n{\r\ns3c_set_platdata(pd, sizeof(struct s3c_fb_platdata),\r\n&s3c_device_fb);\r\n}\r\nvoid __init s3c_hwmon_set_platdata(struct s3c_hwmon_pdata *pd)\r\n{\r\ns3c_set_platdata(pd, sizeof(struct s3c_hwmon_pdata),\r\n&s3c_device_hwmon);\r\n}\r\nvoid s3c_sdhci0_set_platdata(struct s3c_sdhci_platdata *pd)\r\n{\r\ns3c_sdhci_set_platdata(pd, &s3c_hsmmc0_def_platdata);\r\n}\r\nvoid s3c_sdhci1_set_platdata(struct s3c_sdhci_platdata *pd)\r\n{\r\ns3c_sdhci_set_platdata(pd, &s3c_hsmmc1_def_platdata);\r\n}\r\nvoid s3c_sdhci2_set_platdata(struct s3c_sdhci_platdata *pd)\r\n{\r\ns3c_sdhci_set_platdata(pd, &s3c_hsmmc2_def_platdata);\r\n}\r\nvoid s3c_sdhci3_set_platdata(struct s3c_sdhci_platdata *pd)\r\n{\r\ns3c_sdhci_set_platdata(pd, &s3c_hsmmc3_def_platdata);\r\n}\r\nvoid __init s3c_i2c0_set_platdata(struct s3c2410_platform_i2c *pd)\r\n{\r\nstruct s3c2410_platform_i2c *npd;\r\nif (!pd) {\r\npd = &default_i2c_data;\r\npd->bus_num = 0;\r\n}\r\nnpd = s3c_set_platdata(pd, sizeof(struct s3c2410_platform_i2c),\r\n&s3c_device_i2c0);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = s3c_i2c0_cfg_gpio;\r\n}\r\nvoid __init s3c_i2c1_set_platdata(struct s3c2410_platform_i2c *pd)\r\n{\r\nstruct s3c2410_platform_i2c *npd;\r\nif (!pd) {\r\npd = &default_i2c_data;\r\npd->bus_num = 1;\r\n}\r\nnpd = s3c_set_platdata(pd, sizeof(struct s3c2410_platform_i2c),\r\n&s3c_device_i2c1);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = s3c_i2c1_cfg_gpio;\r\n}\r\nvoid __init s3c_i2c2_set_platdata(struct s3c2410_platform_i2c *pd)\r\n{\r\nstruct s3c2410_platform_i2c *npd;\r\nif (!pd) {\r\npd = &default_i2c_data;\r\npd->bus_num = 2;\r\n}\r\nnpd = s3c_set_platdata(pd, sizeof(struct s3c2410_platform_i2c),\r\n&s3c_device_i2c2);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = s3c_i2c2_cfg_gpio;\r\n}\r\nvoid __init s3c_i2c3_set_platdata(struct s3c2410_platform_i2c *pd)\r\n{\r\nstruct s3c2410_platform_i2c *npd;\r\nif (!pd) {\r\npd = &default_i2c_data;\r\npd->bus_num = 3;\r\n}\r\nnpd = s3c_set_platdata(pd, sizeof(struct s3c2410_platform_i2c),\r\n&s3c_device_i2c3);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = s3c_i2c3_cfg_gpio;\r\n}\r\nvoid __init s3c_i2c4_set_platdata(struct s3c2410_platform_i2c *pd)\r\n{\r\nstruct s3c2410_platform_i2c *npd;\r\nif (!pd) {\r\npd = &default_i2c_data;\r\npd->bus_num = 4;\r\n}\r\nnpd = s3c_set_platdata(pd, sizeof(struct s3c2410_platform_i2c),\r\n&s3c_device_i2c4);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = s3c_i2c4_cfg_gpio;\r\n}\r\nvoid __init s3c_i2c5_set_platdata(struct s3c2410_platform_i2c *pd)\r\n{\r\nstruct s3c2410_platform_i2c *npd;\r\nif (!pd) {\r\npd = &default_i2c_data;\r\npd->bus_num = 5;\r\n}\r\nnpd = s3c_set_platdata(pd, sizeof(struct s3c2410_platform_i2c),\r\n&s3c_device_i2c5);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = s3c_i2c5_cfg_gpio;\r\n}\r\nvoid __init s3c_i2c6_set_platdata(struct s3c2410_platform_i2c *pd)\r\n{\r\nstruct s3c2410_platform_i2c *npd;\r\nif (!pd) {\r\npd = &default_i2c_data;\r\npd->bus_num = 6;\r\n}\r\nnpd = s3c_set_platdata(pd, sizeof(struct s3c2410_platform_i2c),\r\n&s3c_device_i2c6);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = s3c_i2c6_cfg_gpio;\r\n}\r\nvoid __init s3c_i2c7_set_platdata(struct s3c2410_platform_i2c *pd)\r\n{\r\nstruct s3c2410_platform_i2c *npd;\r\nif (!pd) {\r\npd = &default_i2c_data;\r\npd->bus_num = 7;\r\n}\r\nnpd = s3c_set_platdata(pd, sizeof(struct s3c2410_platform_i2c),\r\n&s3c_device_i2c7);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = s3c_i2c7_cfg_gpio;\r\n}\r\nvoid __init s3c_ide_set_platdata(struct s3c_ide_platdata *pdata)\r\n{\r\ns3c_set_platdata(pdata, sizeof(struct s3c_ide_platdata),\r\n&s3c_device_cfcon);\r\n}\r\nvoid __init samsung_keypad_set_platdata(struct samsung_keypad_platdata *pd)\r\n{\r\nstruct samsung_keypad_platdata *npd;\r\nnpd = s3c_set_platdata(pd, sizeof(struct samsung_keypad_platdata),\r\n&samsung_device_keypad);\r\nif (!npd->cfg_gpio)\r\nnpd->cfg_gpio = samsung_keypad_cfg_gpio;\r\n}\r\nvoid __init s3c24xx_fb_set_platdata(struct s3c2410fb_mach_info *pd)\r\n{\r\nstruct s3c2410fb_mach_info *npd;\r\nnpd = s3c_set_platdata(pd, sizeof(*npd), &s3c_device_lcd);\r\nif (npd) {\r\nnpd->displays = kmemdup(pd->displays,\r\nsizeof(struct s3c2410fb_display) * npd->num_displays,\r\nGFP_KERNEL);\r\nif (!npd->displays)\r\nprintk(KERN_ERR "no memory for LCD display data\n");\r\n} else {\r\nprintk(KERN_ERR "no memory for LCD platform data\n");\r\n}\r\n}\r\nstatic int __init s3c_nand_copy_set(struct s3c2410_nand_set *set)\r\n{\r\nvoid *ptr;\r\nint size;\r\nsize = sizeof(struct mtd_partition) * set->nr_partitions;\r\nif (size) {\r\nptr = kmemdup(set->partitions, size, GFP_KERNEL);\r\nset->partitions = ptr;\r\nif (!ptr)\r\nreturn -ENOMEM;\r\n}\r\nif (set->nr_map && set->nr_chips) {\r\nsize = sizeof(int) * set->nr_chips;\r\nptr = kmemdup(set->nr_map, size, GFP_KERNEL);\r\nset->nr_map = ptr;\r\nif (!ptr)\r\nreturn -ENOMEM;\r\n}\r\nreturn 0;\r\n}\r\nvoid __init s3c_nand_set_platdata(struct s3c2410_platform_nand *nand)\r\n{\r\nstruct s3c2410_platform_nand *npd;\r\nint size;\r\nint ret;\r\nnpd = s3c_set_platdata(nand, sizeof(struct s3c2410_platform_nand),\r\n&s3c_device_nand);\r\nif (!npd)\r\nreturn;\r\nsize = sizeof(struct s3c2410_nand_set) * npd->nr_sets;\r\nif (size) {\r\nstruct s3c2410_nand_set *from = npd->sets;\r\nstruct s3c2410_nand_set *to;\r\nint i;\r\nto = kmemdup(from, size, GFP_KERNEL);\r\nnpd->sets = to;\r\nif (!to) {\r\nprintk(KERN_ERR "%s: no memory for sets\n", __func__);\r\nreturn;\r\n}\r\nfor (i = 0; i < npd->nr_sets; i++) {\r\nret = s3c_nand_copy_set(to);\r\nif (ret) {\r\nprintk(KERN_ERR "%s: failed to copy set %d\n",\r\n__func__, i);\r\nreturn;\r\n}\r\nto++;\r\n}\r\n}\r\n}\r\nvoid __init s3c64xx_onenand1_set_platdata(struct onenand_platform_data *pdata)\r\n{\r\ns3c_set_platdata(pdata, sizeof(struct onenand_platform_data),\r\n&s3c64xx_device_onenand1);\r\n}\r\nvoid __init samsung_pwm_set_platdata(struct samsung_pwm_variant *pd)\r\n{\r\nsamsung_device_pwm.dev.platform_data = pd;\r\n}\r\nvoid __init s3c24xx_mci_set_platdata(struct s3c24xx_mci_pdata *pdata)\r\n{\r\ns3c_set_platdata(pdata, sizeof(struct s3c24xx_mci_pdata),\r\n&s3c_device_sdi);\r\n}\r\nvoid __init s3c24xx_ts_set_platdata(struct s3c2410_ts_mach_info *hard_s3c2410ts_info)\r\n{\r\ns3c_set_platdata(hard_s3c2410ts_info,\r\nsizeof(struct s3c2410_ts_mach_info), &s3c_device_ts);\r\n}\r\nvoid __init s3c64xx_ts_set_platdata(struct s3c2410_ts_mach_info *pd)\r\n{\r\nif (!pd)\r\npd = &default_ts_data;\r\ns3c_set_platdata(pd, sizeof(struct s3c2410_ts_mach_info),\r\n&s3c_device_adc);\r\n}\r\nvoid __init s3c_ohci_set_platdata(struct s3c2410_hcd_info *info)\r\n{\r\ns3c_set_platdata(info, sizeof(struct s3c2410_hcd_info),\r\n&s3c_device_ohci);\r\n}\r\nvoid __init s3c24xx_udc_set_platdata(struct s3c2410_udc_mach_info *pd)\r\n{\r\ns3c_set_platdata(pd, sizeof(*pd), &s3c_device_usbgadget);\r\n}\r\nvoid __init dwc2_hsotg_set_platdata(struct dwc2_hsotg_plat *pd)\r\n{\r\nstruct dwc2_hsotg_plat *npd;\r\nnpd = s3c_set_platdata(pd, sizeof(struct dwc2_hsotg_plat),\r\n&s3c_device_usb_hsotg);\r\nif (!npd->phy_init)\r\nnpd->phy_init = s5p_usb_phy_init;\r\nif (!npd->phy_exit)\r\nnpd->phy_exit = s5p_usb_phy_exit;\r\n}\r\nvoid __init s3c24xx_hsudc_set_platdata(struct s3c24xx_hsudc_platdata *pd)\r\n{\r\ns3c_set_platdata(pd, sizeof(*pd), &s3c_device_usb_hsudc);\r\n}\r\nvoid __init s3c64xx_spi0_set_platdata(int (*cfg_gpio)(void), int src_clk_nr,\r\nint num_cs)\r\n{\r\nstruct s3c64xx_spi_info pd;\r\nif (!num_cs || src_clk_nr < 0) {\r\npr_err("%s: Invalid SPI configuration\n", __func__);\r\nreturn;\r\n}\r\npd.num_cs = num_cs;\r\npd.src_clk_nr = src_clk_nr;\r\npd.cfg_gpio = (cfg_gpio) ? cfg_gpio : s3c64xx_spi0_cfg_gpio;\r\npd.dma_tx = (void *)DMACH_SPI0_TX;\r\npd.dma_rx = (void *)DMACH_SPI0_RX;\r\n#if defined(CONFIG_PL330_DMA)\r\npd.filter = pl330_filter;\r\n#elif defined(CONFIG_S3C64XX_PL080)\r\npd.filter = pl08x_filter_id;\r\n#elif defined(CONFIG_S3C24XX_DMAC)\r\npd.filter = s3c24xx_dma_filter;\r\n#endif\r\ns3c_set_platdata(&pd, sizeof(pd), &s3c64xx_device_spi0);\r\n}\r\nvoid __init s3c64xx_spi1_set_platdata(int (*cfg_gpio)(void), int src_clk_nr,\r\nint num_cs)\r\n{\r\nstruct s3c64xx_spi_info pd;\r\nif (!num_cs || src_clk_nr < 0) {\r\npr_err("%s: Invalid SPI configuration\n", __func__);\r\nreturn;\r\n}\r\npd.num_cs = num_cs;\r\npd.src_clk_nr = src_clk_nr;\r\npd.cfg_gpio = (cfg_gpio) ? cfg_gpio : s3c64xx_spi1_cfg_gpio;\r\npd.dma_tx = (void *)DMACH_SPI1_TX;\r\npd.dma_rx = (void *)DMACH_SPI1_RX;\r\n#if defined(CONFIG_PL330_DMA)\r\npd.filter = pl330_filter;\r\n#elif defined(CONFIG_S3C64XX_PL080)\r\npd.filter = pl08x_filter_id;\r\n#endif\r\ns3c_set_platdata(&pd, sizeof(pd), &s3c64xx_device_spi1);\r\n}\r\nvoid __init s3c64xx_spi2_set_platdata(int (*cfg_gpio)(void), int src_clk_nr,\r\nint num_cs)\r\n{\r\nstruct s3c64xx_spi_info pd;\r\nif (!num_cs || src_clk_nr < 0) {\r\npr_err("%s: Invalid SPI configuration\n", __func__);\r\nreturn;\r\n}\r\npd.num_cs = num_cs;\r\npd.src_clk_nr = src_clk_nr;\r\npd.cfg_gpio = (cfg_gpio) ? cfg_gpio : s3c64xx_spi2_cfg_gpio;\r\npd.dma_tx = (void *)DMACH_SPI2_TX;\r\npd.dma_rx = (void *)DMACH_SPI2_RX;\r\n#if defined(CONFIG_PL330_DMA)\r\npd.filter = pl330_filter;\r\n#elif defined(CONFIG_S3C64XX_PL080)\r\npd.filter = pl08x_filter_id;\r\n#endif\r\ns3c_set_platdata(&pd, sizeof(pd), &s3c64xx_device_spi2);\r\n}
