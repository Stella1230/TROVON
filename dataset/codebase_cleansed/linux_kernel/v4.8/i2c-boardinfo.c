int i2c_register_board_info(int busnum, struct i2c_board_info const *info, unsigned len)\r\n{\r\nint status;\r\ndown_write(&__i2c_board_lock);\r\nif (busnum >= __i2c_first_dynamic_bus_num)\r\n__i2c_first_dynamic_bus_num = busnum + 1;\r\nfor (status = 0; len; len--, info++) {\r\nstruct i2c_devinfo *devinfo;\r\ndevinfo = kzalloc(sizeof(*devinfo), GFP_KERNEL);\r\nif (!devinfo) {\r\npr_debug("i2c-core: can't register boardinfo!\n");\r\nstatus = -ENOMEM;\r\nbreak;\r\n}\r\ndevinfo->busnum = busnum;\r\ndevinfo->board_info = *info;\r\nlist_add_tail(&devinfo->list, &__i2c_board_list);\r\n}\r\nup_write(&__i2c_board_lock);\r\nreturn status;\r\n}
