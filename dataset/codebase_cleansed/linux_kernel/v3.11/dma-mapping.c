static void *arm64_swiotlb_alloc_coherent(struct device *dev, size_t size,\r\ndma_addr_t *dma_handle, gfp_t flags,\r\nstruct dma_attrs *attrs)\r\n{\r\nif (IS_ENABLED(CONFIG_ZONE_DMA32) &&\r\ndev->coherent_dma_mask <= DMA_BIT_MASK(32))\r\nflags |= GFP_DMA32;\r\nreturn swiotlb_alloc_coherent(dev, size, dma_handle, flags);\r\n}\r\nstatic void arm64_swiotlb_free_coherent(struct device *dev, size_t size,\r\nvoid *vaddr, dma_addr_t dma_handle,\r\nstruct dma_attrs *attrs)\r\n{\r\nswiotlb_free_coherent(dev, size, vaddr, dma_handle);\r\n}\r\nvoid __init arm64_swiotlb_init(void)\r\n{\r\ndma_ops = &arm64_swiotlb_dma_ops;\r\nswiotlb_init(1);\r\n}\r\nstatic int __init dma_debug_do_init(void)\r\n{\r\ndma_debug_init(PREALLOC_DMA_DEBUG_ENTRIES);\r\nreturn 0;\r\n}
