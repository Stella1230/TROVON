static void __init sheevaplug_init(void)\r\n{\r\nkirkwood_init();\r\nif (machine_is_esata_sheevaplug())\r\nkirkwood_mpp_conf(sheeva_esata_mpp_config);\r\nelse\r\nkirkwood_mpp_conf(sheevaplug_mpp_config);\r\nkirkwood_uart0_init();\r\nkirkwood_nand_init(ARRAY_AND_SIZE(sheevaplug_nand_parts), 25);\r\nif (gpio_request(29, "USB Power Enable") != 0 ||\r\ngpio_direction_output(29, 1) != 0)\r\npr_err("can't set up GPIO 29 (USB Power Enable)\n");\r\nkirkwood_ehci_init();\r\nkirkwood_ge00_init(&sheevaplug_ge00_data);\r\nif (machine_is_esata_sheevaplug())\r\nkirkwood_sata_init(&sheeva_esata_sata_data);\r\nif (machine_is_esata_sheevaplug())\r\nkirkwood_sdio_init(&sheeva_esata_mvsdio_data);\r\nelse\r\nkirkwood_sdio_init(&sheevaplug_mvsdio_data);\r\nplatform_device_register(&sheevaplug_leds);\r\n}
