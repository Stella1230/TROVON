void __init gtwx5715_pci_preinit(void)\r\n{\r\nirq_set_irq_type(IXP4XX_GPIO_IRQ(INTA), IRQ_TYPE_LEVEL_LOW);\r\nirq_set_irq_type(IXP4XX_GPIO_IRQ(INTB), IRQ_TYPE_LEVEL_LOW);\r\nixp4xx_pci_preinit();\r\n}\r\nstatic int __init gtwx5715_map_irq(const struct pci_dev *dev, u8 slot, u8 pin)\r\n{\r\nint rc = -1;\r\nif ((slot == SLOT0_DEVID && pin == 1) ||\r\n(slot == SLOT1_DEVID && pin == 2))\r\nrc = IXP4XX_GPIO_IRQ(INTA);\r\nelse if ((slot == SLOT0_DEVID && pin == 2) ||\r\n(slot == SLOT1_DEVID && pin == 1))\r\nrc = IXP4XX_GPIO_IRQ(INTB);\r\nprintk(KERN_INFO "%s: Mapped slot %d pin %d to IRQ %d\n",\r\n__func__, slot, pin, rc);\r\nreturn rc;\r\n}\r\nint __init gtwx5715_pci_init(void)\r\n{\r\nif (machine_is_gtwx5715())\r\npci_common_init(&gtwx5715_pci);\r\nreturn 0;\r\n}
