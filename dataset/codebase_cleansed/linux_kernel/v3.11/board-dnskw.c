static void __init dnskw_gpio_register(unsigned gpio, char *name, int def)\r\n{\r\nif (gpio_request(gpio, name) == 0 &&\r\ngpio_direction_output(gpio, 0) == 0) {\r\ngpio_set_value(gpio, def);\r\nif (gpio_export(gpio, 0) != 0)\r\npr_err("dnskw: Failed to export GPIO %s\n", name);\r\n} else\r\npr_err("dnskw: Failed to register %s\n", name);\r\n}\r\nvoid __init dnskw_init(void)\r\n{\r\nkirkwood_ge00_init(&dnskw_ge00_data);\r\ndnskw_gpio_register(37, "dnskw:power:recover", 1);\r\n}
