static int ca0110_parse_auto_config(struct hda_codec *codec)\r\n{\r\nstruct hda_gen_spec *spec = codec->spec;\r\nint err;\r\nerr = snd_hda_parse_pin_defcfg(codec, &spec->autocfg, NULL, 0);\r\nif (err < 0)\r\nreturn err;\r\nerr = snd_hda_gen_parse_auto_config(codec, &spec->autocfg);\r\nif (err < 0)\r\nreturn err;\r\nreturn 0;\r\n}\r\nstatic int patch_ca0110(struct hda_codec *codec)\r\n{\r\nstruct hda_gen_spec *spec;\r\nint err;\r\nspec = kzalloc(sizeof(*spec), GFP_KERNEL);\r\nif (!spec)\r\nreturn -ENOMEM;\r\nsnd_hda_gen_spec_init(spec);\r\ncodec->spec = spec;\r\nspec->multi_cap_vol = 1;\r\ncodec->bus->needs_damn_long_delay = 1;\r\nerr = ca0110_parse_auto_config(codec);\r\nif (err < 0)\r\ngoto error;\r\ncodec->patch_ops = ca0110_patch_ops;\r\nreturn 0;\r\nerror:\r\nsnd_hda_gen_free(codec);\r\nreturn err;\r\n}\r\nstatic int __init patch_ca0110_init(void)\r\n{\r\nreturn snd_hda_add_codec_preset(&ca0110_list);\r\n}\r\nstatic void __exit patch_ca0110_exit(void)\r\n{\r\nsnd_hda_delete_codec_preset(&ca0110_list);\r\n}
