u64 perf_reg_value(struct pt_regs *regs, int idx)\r\n{\r\nif (WARN_ON_ONCE(idx >= ARRAY_SIZE(pt_regs_offset)))\r\nreturn 0;\r\nreturn regs_get_register(regs, pt_regs_offset[idx]);\r\n}\r\nint perf_reg_validate(u64 mask)\r\n{\r\nif (!mask || mask & REG_RESERVED)\r\nreturn -EINVAL;\r\nreturn 0;\r\n}\r\nu64 perf_reg_abi(struct task_struct *task)\r\n{\r\nreturn PERF_SAMPLE_REGS_ABI_32;\r\n}\r\nint perf_reg_validate(u64 mask)\r\n{\r\nif (!mask || mask & REG_RESERVED)\r\nreturn -EINVAL;\r\nif (mask & REG_NOSUPPORT)\r\nreturn -EINVAL;\r\nreturn 0;\r\n}\r\nu64 perf_reg_abi(struct task_struct *task)\r\n{\r\nif (test_tsk_thread_flag(task, TIF_IA32))\r\nreturn PERF_SAMPLE_REGS_ABI_32;\r\nelse\r\nreturn PERF_SAMPLE_REGS_ABI_64;\r\n}
