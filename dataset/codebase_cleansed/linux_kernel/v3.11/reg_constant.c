static void fld_const(FPU_REG const * c, int adj, u_char tag)\r\n{\r\nFPU_REG *st_new_ptr;\r\nif (STACK_OVERFLOW) {\r\nFPU_stack_overflow();\r\nreturn;\r\n}\r\npush();\r\nreg_copy(c, st_new_ptr);\r\nst_new_ptr->sigl += adj;\r\nFPU_settag0(tag);\r\nclear_C1();\r\n}\r\nstatic void fld1(int rc)\r\n{\r\nfld_const(&CONST_1, 0, TAG_Valid);\r\n}\r\nstatic void fldl2t(int rc)\r\n{\r\nfld_const(&CONST_L2T, (rc == RC_UP) ? 1 : 0, TAG_Valid);\r\n}\r\nstatic void fldl2e(int rc)\r\n{\r\nfld_const(&CONST_L2E, DOWN_OR_CHOP(rc) ? -1 : 0, TAG_Valid);\r\n}\r\nstatic void fldpi(int rc)\r\n{\r\nfld_const(&CONST_PI, DOWN_OR_CHOP(rc) ? -1 : 0, TAG_Valid);\r\n}\r\nstatic void fldlg2(int rc)\r\n{\r\nfld_const(&CONST_LG2, DOWN_OR_CHOP(rc) ? -1 : 0, TAG_Valid);\r\n}\r\nstatic void fldln2(int rc)\r\n{\r\nfld_const(&CONST_LN2, DOWN_OR_CHOP(rc) ? -1 : 0, TAG_Valid);\r\n}\r\nstatic void fldz(int rc)\r\n{\r\nfld_const(&CONST_Z, 0, TAG_Zero);\r\n}\r\nvoid fconst(void)\r\n{\r\n(constants_table[FPU_rm]) (control_word & CW_RC);\r\n}
