asmlinkage void dbginterrupt_c(struct frame *fp)\r\n{\r\nextern void dump(struct pt_regs *fp);\r\nprintk(KERN_DEBUG "%s(%d): BUS ERROR TRAP\n", __FILE__, __LINE__);\r\ndump((struct pt_regs *) fp);\r\nasm("halt");\r\n}\r\nvoid __init trap_init(void)\r\n{\r\nint i;\r\nfor (i = 3; (i <= 23); i++)\r\n_ramvec[i] = trap;\r\nfor (i = 33; (i <= 63); i++)\r\n_ramvec[i] = trap;\r\nfor (i = 24; (i <= 31); i++)\r\n_ramvec[i] = inthandler;\r\nfor (i = 64; (i < 255); i++)\r\n_ramvec[i] = inthandler;\r\n_ramvec[255] = 0;\r\n_ramvec[2] = buserr;\r\n_ramvec[32] = system_call;\r\n#ifdef TRAP_DBG_INTERRUPT\r\n_ramvec[12] = dbginterrupt;\r\n#endif\r\n}
