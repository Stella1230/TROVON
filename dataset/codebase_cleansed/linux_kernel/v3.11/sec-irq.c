int sec_irq_init(struct sec_pmic_dev *sec_pmic)\r\n{\r\nint ret = 0;\r\nint type = sec_pmic->device_type;\r\nif (!sec_pmic->irq) {\r\ndev_warn(sec_pmic->dev,\r\n"No interrupt specified, no interrupts\n");\r\nsec_pmic->irq_base = 0;\r\nreturn 0;\r\n}\r\nswitch (type) {\r\ncase S5M8763X:\r\nret = regmap_add_irq_chip(sec_pmic->regmap, sec_pmic->irq,\r\nIRQF_TRIGGER_FALLING | IRQF_ONESHOT,\r\nsec_pmic->irq_base, &s5m8763_irq_chip,\r\n&sec_pmic->irq_data);\r\nbreak;\r\ncase S5M8767X:\r\nret = regmap_add_irq_chip(sec_pmic->regmap, sec_pmic->irq,\r\nIRQF_TRIGGER_FALLING | IRQF_ONESHOT,\r\nsec_pmic->irq_base, &s5m8767_irq_chip,\r\n&sec_pmic->irq_data);\r\nbreak;\r\ncase S2MPS11X:\r\nret = regmap_add_irq_chip(sec_pmic->regmap, sec_pmic->irq,\r\nIRQF_TRIGGER_FALLING | IRQF_ONESHOT,\r\nsec_pmic->irq_base, &s2mps11_irq_chip,\r\n&sec_pmic->irq_data);\r\nbreak;\r\ndefault:\r\ndev_err(sec_pmic->dev, "Unknown device type %d\n",\r\nsec_pmic->device_type);\r\nreturn -EINVAL;\r\n}\r\nif (ret != 0) {\r\ndev_err(sec_pmic->dev, "Failed to register IRQ chip: %d\n", ret);\r\nreturn ret;\r\n}\r\nreturn 0;\r\n}\r\nvoid sec_irq_exit(struct sec_pmic_dev *sec_pmic)\r\n{\r\nregmap_del_irq_chip(sec_pmic->irq, sec_pmic->irq_data);\r\n}
