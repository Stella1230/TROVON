static int adt7310_spi_read_word(struct device *dev, u8 reg)\r\n{\r\nstruct spi_device *spi = to_spi_device(dev);\r\nint ret;\r\nret = spi_w8r16(spi, AD7310_COMMAND(reg) | ADT7310_CMD_READ);\r\nif (ret < 0)\r\nreturn ret;\r\nreturn be16_to_cpu((__force __be16)ret);\r\n}\r\nstatic int adt7310_spi_write_word(struct device *dev, u8 reg, u16 data)\r\n{\r\nstruct spi_device *spi = to_spi_device(dev);\r\nu8 buf[3];\r\nbuf[0] = AD7310_COMMAND(reg);\r\nput_unaligned_be16(data, &buf[1]);\r\nreturn spi_write(spi, buf, sizeof(buf));\r\n}\r\nstatic int adt7310_spi_read_byte(struct device *dev, u8 reg)\r\n{\r\nstruct spi_device *spi = to_spi_device(dev);\r\nreturn spi_w8r8(spi, AD7310_COMMAND(reg) | ADT7310_CMD_READ);\r\n}\r\nstatic int adt7310_spi_write_byte(struct device *dev, u8 reg,\r\nu8 data)\r\n{\r\nstruct spi_device *spi = to_spi_device(dev);\r\nu8 buf[2];\r\nbuf[0] = AD7310_COMMAND(reg);\r\nbuf[1] = data;\r\nreturn spi_write(spi, buf, sizeof(buf));\r\n}\r\nstatic int adt7310_spi_probe(struct spi_device *spi)\r\n{\r\nreturn adt7x10_probe(&spi->dev, spi_get_device_id(spi)->name, spi->irq,\r\n&adt7310_spi_ops);\r\n}\r\nstatic int adt7310_spi_remove(struct spi_device *spi)\r\n{\r\nreturn adt7x10_remove(&spi->dev, spi->irq);\r\n}
