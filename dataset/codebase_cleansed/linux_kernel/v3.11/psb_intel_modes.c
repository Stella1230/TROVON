bool psb_intel_ddc_probe(struct i2c_adapter *adapter)\r\n{\r\nu8 out_buf[] = { 0x0, 0x0 };\r\nu8 buf[2];\r\nint ret;\r\nstruct i2c_msg msgs[] = {\r\n{\r\n.addr = 0x50,\r\n.flags = 0,\r\n.len = 1,\r\n.buf = out_buf,\r\n},\r\n{\r\n.addr = 0x50,\r\n.flags = I2C_M_RD,\r\n.len = 1,\r\n.buf = buf,\r\n}\r\n};\r\nret = i2c_transfer(adapter, msgs, 2);\r\nif (ret == 2)\r\nreturn true;\r\nreturn false;\r\n}\r\nint psb_intel_ddc_get_modes(struct drm_connector *connector,\r\nstruct i2c_adapter *adapter)\r\n{\r\nstruct edid *edid;\r\nint ret = 0;\r\nedid = drm_get_edid(connector, adapter);\r\nif (edid) {\r\ndrm_mode_connector_update_edid_property(connector, edid);\r\nret = drm_add_edid_modes(connector, edid);\r\nkfree(edid);\r\n}\r\nreturn ret;\r\n}
