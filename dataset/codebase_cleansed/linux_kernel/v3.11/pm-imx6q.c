static int imx6q_suspend_finish(unsigned long val)\r\n{\r\ncpu_do_idle();\r\nreturn 0;\r\n}\r\nstatic int imx6q_pm_enter(suspend_state_t state)\r\n{\r\nswitch (state) {\r\ncase PM_SUSPEND_MEM:\r\nimx6q_set_lpm(STOP_POWER_OFF);\r\nimx_gpc_pre_suspend();\r\nimx_anatop_pre_suspend();\r\nimx_set_cpu_jump(0, v7_cpu_resume);\r\ncpu_suspend(0, imx6q_suspend_finish);\r\nimx_smp_prepare();\r\nimx_anatop_post_resume();\r\nimx_gpc_post_resume();\r\nimx6q_set_lpm(WAIT_CLOCKED);\r\nbreak;\r\ndefault:\r\nreturn -EINVAL;\r\n}\r\nreturn 0;\r\n}\r\nvoid __init imx6q_pm_init(void)\r\n{\r\nsuspend_set_ops(&imx6q_pm_ops);\r\n}
