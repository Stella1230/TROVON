static u16\r\ndcb_xpiod_table(struct nouveau_bios *bios, u8 *ver, u8 *hdr, u8 *cnt, u8 *len)\r\n{\r\nu16 data = dcb_gpio_table(bios, ver, hdr, cnt, len);\r\nif (data && *ver >= 0x40 && *hdr >= 0x06) {\r\nu16 xpio = nv_ro16(bios, data + 0x04);\r\nif (xpio) {\r\n*ver = nv_ro08(bios, data + 0x00);\r\n*hdr = nv_ro08(bios, data + 0x01);\r\n*cnt = nv_ro08(bios, data + 0x02);\r\n*len = nv_ro08(bios, data + 0x03);\r\nreturn xpio;\r\n}\r\n}\r\nreturn 0x0000;\r\n}\r\nu16\r\ndcb_xpio_table(struct nouveau_bios *bios, u8 idx,\r\nu8 *ver, u8 *hdr, u8 *cnt, u8 *len)\r\n{\r\nu16 data = dcb_xpiod_table(bios, ver, hdr, cnt, len);\r\nif (data && idx < *cnt) {\r\nu16 xpio = nv_ro16(bios, data + *hdr + (idx * *len));\r\nif (xpio) {\r\n*ver = nv_ro08(bios, data + 0x00);\r\n*hdr = nv_ro08(bios, data + 0x01);\r\n*cnt = nv_ro08(bios, data + 0x02);\r\n*len = nv_ro08(bios, data + 0x03);\r\nreturn xpio;\r\n}\r\n}\r\nreturn 0x0000;\r\n}\r\nu16\r\ndcb_xpio_parse(struct nouveau_bios *bios, u8 idx,\r\nu8 *ver, u8 *hdr, u8 *cnt, u8 *len,\r\nstruct nvbios_xpio *info)\r\n{\r\nu16 data = dcb_xpio_table(bios, idx, ver, hdr, cnt, len);\r\nif (data && *len >= 6) {\r\ninfo->type = nv_ro08(bios, data + 0x04);\r\ninfo->addr = nv_ro08(bios, data + 0x05);\r\ninfo->flags = nv_ro08(bios, data + 0x06);\r\n}\r\nreturn 0x0000;\r\n}
