pgd_t *pgd_alloc(struct mm_struct *mm)\r\n{\r\npgd_t *new_pgd;\r\nif (PGD_SIZE == PAGE_SIZE)\r\nnew_pgd = (pgd_t *)get_zeroed_page(GFP_KERNEL);\r\nelse\r\nnew_pgd = kzalloc(PGD_SIZE, GFP_KERNEL);\r\nif (!new_pgd)\r\nreturn NULL;\r\nreturn new_pgd;\r\n}\r\nvoid pgd_free(struct mm_struct *mm, pgd_t *pgd)\r\n{\r\nif (PGD_SIZE == PAGE_SIZE)\r\nfree_page((unsigned long)pgd);\r\nelse\r\nkfree(pgd);\r\n}
