int\r\nsgl_to_sgl_fcnvuf(\r\nunsigned int *srcptr,\r\nunsigned int *nullptr,\r\nsgl_floating_point *dstptr,\r\nunsigned int *status)\r\n{\r\nregister unsigned int src, result = 0;\r\nregister int dst_exponent;\r\nsrc = *srcptr;\r\nif (src == 0) {\r\nSgl_setzero(result);\r\n*dstptr = result;\r\nreturn(NOEXCEPTION);\r\n}\r\ndst_exponent = 16;\r\nFind_ms_one_bit(src,dst_exponent);\r\nsrc <<= dst_exponent+1;\r\nSgl_set_mantissa(result, src >> SGL_EXP_LENGTH);\r\nSgl_set_exponent(result, 30+SGL_BIAS - dst_exponent);\r\nif (Suint_isinexact_to_sgl(src)) {\r\nswitch (Rounding_mode()) {\r\ncase ROUNDPLUS:\r\nSgl_increment(result);\r\nbreak;\r\ncase ROUNDMINUS:\r\nbreak;\r\ncase ROUNDNEAREST:\r\nSgl_roundnearest_from_suint(src,result);\r\nbreak;\r\n}\r\nif (Is_inexacttrap_enabled()) {\r\n*dstptr = result;\r\nreturn(INEXACTEXCEPTION);\r\n}\r\nelse Set_inexactflag();\r\n}\r\n*dstptr = result;\r\nreturn(NOEXCEPTION);\r\n}\r\nint\r\nsgl_to_dbl_fcnvuf(\r\nunsigned int *srcptr,\r\nunsigned int *nullptr,\r\ndbl_floating_point *dstptr,\r\nunsigned int *status)\r\n{\r\nregister int dst_exponent;\r\nregister unsigned int src, resultp1 = 0, resultp2 = 0;\r\nsrc = *srcptr;\r\nif (src == 0) {\r\nDbl_setzero(resultp1,resultp2);\r\nDbl_copytoptr(resultp1,resultp2,dstptr);\r\nreturn(NOEXCEPTION);\r\n}\r\ndst_exponent = 16;\r\nFind_ms_one_bit(src,dst_exponent);\r\nsrc <<= dst_exponent+1;\r\nDbl_set_mantissap1(resultp1, src >> DBL_EXP_LENGTH);\r\nDbl_set_mantissap2(resultp2, src << (32-DBL_EXP_LENGTH));\r\nDbl_set_exponent(resultp1, (30+DBL_BIAS) - dst_exponent);\r\nDbl_copytoptr(resultp1,resultp2,dstptr);\r\nreturn(NOEXCEPTION);\r\n}\r\nint\r\ndbl_to_sgl_fcnvuf(\r\ndbl_unsigned *srcptr,\r\nunsigned int *nullptr,\r\nsgl_floating_point *dstptr,\r\nunsigned int *status)\r\n{\r\nint dst_exponent;\r\nunsigned int srcp1, srcp2, result = 0;\r\nDuint_copyfromptr(srcptr,srcp1,srcp2);\r\nif (srcp1 == 0 && srcp2 == 0) {\r\nSgl_setzero(result);\r\n*dstptr = result;\r\nreturn(NOEXCEPTION);\r\n}\r\ndst_exponent = 16;\r\nif (srcp1 == 0) {\r\nFind_ms_one_bit(srcp2,dst_exponent);\r\nsrcp1 = srcp2 << dst_exponent+1;\r\nsrcp2 = 0;\r\ndst_exponent += 32;\r\n}\r\nelse {\r\nFind_ms_one_bit(srcp1,dst_exponent);\r\nif (dst_exponent >= 0) {\r\nVariable_shift_double(srcp1,srcp2,(31-dst_exponent),\r\nsrcp1);\r\nsrcp2 <<= dst_exponent+1;\r\n}\r\n}\r\nSgl_set_mantissa(result, srcp1 >> SGL_EXP_LENGTH);\r\nSgl_set_exponent(result, (62+SGL_BIAS) - dst_exponent);\r\nif (Duint_isinexact_to_sgl(srcp1,srcp2)) {\r\nswitch (Rounding_mode()) {\r\ncase ROUNDPLUS:\r\nSgl_increment(result);\r\nbreak;\r\ncase ROUNDMINUS:\r\nbreak;\r\ncase ROUNDNEAREST:\r\nSgl_roundnearest_from_duint(srcp1,srcp2,result);\r\nbreak;\r\n}\r\nif (Is_inexacttrap_enabled()) {\r\n*dstptr = result;\r\nreturn(INEXACTEXCEPTION);\r\n}\r\nelse Set_inexactflag();\r\n}\r\n*dstptr = result;\r\nreturn(NOEXCEPTION);\r\n}\r\nint\r\ndbl_to_dbl_fcnvuf(\r\ndbl_unsigned *srcptr,\r\nunsigned int *nullptr,\r\ndbl_floating_point *dstptr,\r\nunsigned int *status)\r\n{\r\nregister int dst_exponent;\r\nregister unsigned int srcp1, srcp2, resultp1 = 0, resultp2 = 0;\r\nDuint_copyfromptr(srcptr,srcp1,srcp2);\r\nif (srcp1 == 0 && srcp2 ==0) {\r\nDbl_setzero(resultp1,resultp2);\r\nDbl_copytoptr(resultp1,resultp2,dstptr);\r\nreturn(NOEXCEPTION);\r\n}\r\ndst_exponent = 16;\r\nif (srcp1 == 0) {\r\nFind_ms_one_bit(srcp2,dst_exponent);\r\nsrcp1 = srcp2 << dst_exponent+1;\r\nsrcp2 = 0;\r\ndst_exponent += 32;\r\n}\r\nelse {\r\nFind_ms_one_bit(srcp1,dst_exponent);\r\nif (dst_exponent >= 0) {\r\nVariable_shift_double(srcp1,srcp2,(31-dst_exponent),\r\nsrcp1);\r\nsrcp2 <<= dst_exponent+1;\r\n}\r\n}\r\nDbl_set_mantissap1(resultp1, srcp1 >> DBL_EXP_LENGTH);\r\nShiftdouble(srcp1,srcp2,DBL_EXP_LENGTH,resultp2);\r\nDbl_set_exponent(resultp1, (62+DBL_BIAS) - dst_exponent);\r\nif (Duint_isinexact_to_dbl(srcp2)) {\r\nswitch (Rounding_mode()) {\r\ncase ROUNDPLUS:\r\nDbl_increment(resultp1,resultp2);\r\nbreak;\r\ncase ROUNDMINUS:\r\nbreak;\r\ncase ROUNDNEAREST:\r\nDbl_roundnearest_from_duint(srcp2,resultp1,\r\nresultp2);\r\nbreak;\r\n}\r\nif (Is_inexacttrap_enabled()) {\r\nDbl_copytoptr(resultp1,resultp2,dstptr);\r\nreturn(INEXACTEXCEPTION);\r\n}\r\nelse Set_inexactflag();\r\n}\r\nDbl_copytoptr(resultp1,resultp2,dstptr);\r\nreturn(NOEXCEPTION);\r\n}
