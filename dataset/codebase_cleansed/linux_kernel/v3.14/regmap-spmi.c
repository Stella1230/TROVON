static int regmap_spmi_read(void *context,\r\nconst void *reg, size_t reg_size,\r\nvoid *val, size_t val_size)\r\n{\r\nBUG_ON(reg_size != 2);\r\nreturn spmi_ext_register_readl(context, *(u16 *)reg,\r\nval, val_size);\r\n}\r\nstatic int regmap_spmi_gather_write(void *context,\r\nconst void *reg, size_t reg_size,\r\nconst void *val, size_t val_size)\r\n{\r\nBUG_ON(reg_size != 2);\r\nreturn spmi_ext_register_writel(context, *(u16 *)reg, val, val_size);\r\n}\r\nstatic int regmap_spmi_write(void *context, const void *data,\r\nsize_t count)\r\n{\r\nBUG_ON(count < 2);\r\nreturn regmap_spmi_gather_write(context, data, 2, data + 2, count - 2);\r\n}\r\nstruct regmap *regmap_init_spmi(struct spmi_device *sdev,\r\nconst struct regmap_config *config)\r\n{\r\nreturn regmap_init(&sdev->dev, &regmap_spmi, sdev, config);\r\n}\r\nstruct regmap *devm_regmap_init_spmi(struct spmi_device *sdev,\r\nconst struct regmap_config *config)\r\n{\r\nreturn devm_regmap_init(&sdev->dev, &regmap_spmi, sdev, config);\r\n}
