void __init sgihpc_init(void)\r\n{\r\nhpc3c0 = (struct hpc3_regs *)\r\nioremap(HPC3_CHIP0_BASE, sizeof(struct hpc3_regs));\r\nhpc3c1 = (struct hpc3_regs *)\r\nioremap(HPC3_CHIP1_BASE, sizeof(struct hpc3_regs));\r\nsgioc = (struct sgioc_regs *)hpc3c0->pbus_extregs[6];\r\nhpc3c0->pbus_piocfg[6][0] |= HPC3_PIOCFG_DS16;\r\nif (ip22_is_fullhouse()) {\r\nsgint = (struct sgint_regs *)hpc3c0->pbus_extregs[4];\r\nsystem_type = "SGI Indigo2";\r\n} else {\r\nsgint = &sgioc->int3;\r\nsystem_type = "SGI Indy";\r\n}\r\nsgi_ioc_reset = (SGIOC_RESET_PPORT | SGIOC_RESET_KBDMOUSE |\r\nSGIOC_RESET_EISA | SGIOC_RESET_ISDN |\r\nSGIOC_RESET_LC0OFF);\r\nsgi_ioc_write = (SGIOC_WRITE_EASEL | SGIOC_WRITE_NTHRESH |\r\nSGIOC_WRITE_TPSPEED | SGIOC_WRITE_EPSEL |\r\nSGIOC_WRITE_U0AMODE | SGIOC_WRITE_U1AMODE);\r\nsgioc->reset = sgi_ioc_reset;\r\nsgioc->write = sgi_ioc_write;\r\n}
