static const char *board_type_str(void)\r\n{\r\nswitch (BCSR_WHOAMI_BOARD(bcsr_read(BCSR_WHOAMI))) {\r\ncase BCSR_WHOAMI_PB1200_DDR1:\r\ncase BCSR_WHOAMI_PB1200_DDR2:\r\nreturn "PB1200";\r\ncase BCSR_WHOAMI_DB1200:\r\nreturn "DB1200";\r\ncase BCSR_WHOAMI_DB1300:\r\nreturn "DB1300";\r\ncase BCSR_WHOAMI_DB1550:\r\nreturn "DB1550";\r\ncase BCSR_WHOAMI_PB1550_SDR:\r\ncase BCSR_WHOAMI_PB1550_DDR:\r\nreturn "PB1550";\r\ndefault:\r\nreturn "(unknown)";\r\n}\r\n}\r\nconst char *get_system_type(void)\r\n{\r\nreturn board_type_str();\r\n}\r\nvoid __init board_setup(void)\r\n{\r\nint ret;\r\nswitch (alchemy_get_cputype()) {\r\ncase ALCHEMY_CPU_AU1550:\r\nret = db1550_board_setup();\r\nbreak;\r\ncase ALCHEMY_CPU_AU1200:\r\nret = db1200_board_setup();\r\nbreak;\r\ncase ALCHEMY_CPU_AU1300:\r\nret = db1300_board_setup();\r\nbreak;\r\ndefault:\r\npr_err("unsupported CPU on board\n");\r\nret = -ENODEV;\r\n}\r\nif (ret)\r\npanic("cannot initialize board support");\r\n}\r\nint __init db1235_arch_init(void)\r\n{\r\nint id = BCSR_WHOAMI_BOARD(bcsr_read(BCSR_WHOAMI));\r\nif (id == BCSR_WHOAMI_DB1550)\r\nreturn db1550_pci_setup(0);\r\nelse if ((id == BCSR_WHOAMI_PB1550_SDR) ||\r\n(id == BCSR_WHOAMI_PB1550_DDR))\r\nreturn db1550_pci_setup(1);\r\nreturn 0;\r\n}\r\nint __init db1235_dev_init(void)\r\n{\r\nswitch (BCSR_WHOAMI_BOARD(bcsr_read(BCSR_WHOAMI))) {\r\ncase BCSR_WHOAMI_PB1200_DDR1:\r\ncase BCSR_WHOAMI_PB1200_DDR2:\r\ncase BCSR_WHOAMI_DB1200:\r\nreturn db1200_dev_setup();\r\ncase BCSR_WHOAMI_DB1300:\r\nreturn db1300_dev_setup();\r\ncase BCSR_WHOAMI_DB1550:\r\ncase BCSR_WHOAMI_PB1550_SDR:\r\ncase BCSR_WHOAMI_PB1550_DDR:\r\nreturn db1550_dev_setup();\r\n}\r\nreturn 0;\r\n}
