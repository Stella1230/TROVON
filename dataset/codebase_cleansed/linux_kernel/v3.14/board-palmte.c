static void __init palmte_misc_gpio_setup(void)\r\n{\r\nif (gpio_request(PALMTE_PINTDAV_GPIO, "TSC2102 PINTDAV") < 0) {\r\nprintk(KERN_ERR "Could not reserve PINTDAV GPIO!\n");\r\nreturn;\r\n}\r\ngpio_direction_input(PALMTE_PINTDAV_GPIO);\r\nif (gpio_request(PALMTE_USB_OR_DC_GPIO, "USB/DC-IN") < 0) {\r\nprintk(KERN_ERR "Could not reserve cable signal GPIO!\n");\r\nreturn;\r\n}\r\ngpio_direction_input(PALMTE_USB_OR_DC_GPIO);\r\n}\r\nstatic void __init omap_palmte_init(void)\r\n{\r\nomap_cfg_reg(UART1_TX);\r\nomap_cfg_reg(UART1_RTS);\r\nomap_cfg_reg(UART2_TX);\r\nomap_cfg_reg(UART2_RTS);\r\nomap_cfg_reg(UART3_TX);\r\nomap_cfg_reg(UART3_RX);\r\nplatform_add_devices(palmte_devices, ARRAY_SIZE(palmte_devices));\r\npalmte_spi_info[0].irq = gpio_to_irq(PALMTE_PINTDAV_GPIO);\r\nspi_register_board_info(palmte_spi_info, ARRAY_SIZE(palmte_spi_info));\r\npalmte_misc_gpio_setup();\r\nomap_serial_init();\r\nomap1_usb_init(&palmte_usb_config);\r\nomap_register_i2c_bus(1, 100, NULL, 0);\r\nomapfb_set_lcd_config(&palmte_lcd_config);\r\n}
