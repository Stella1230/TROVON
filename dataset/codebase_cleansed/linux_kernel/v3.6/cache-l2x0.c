static int __init ux500_l2x0_unlock(void)\r\n{\r\nint i;\r\nfor (i = 0; i < 8; i++) {\r\nwritel_relaxed(0x0, l2x0_base + L2X0_LOCKDOWN_WAY_D_BASE +\r\ni * L2X0_LOCKDOWN_STRIDE);\r\nwritel_relaxed(0x0, l2x0_base + L2X0_LOCKDOWN_WAY_I_BASE +\r\ni * L2X0_LOCKDOWN_STRIDE);\r\n}\r\nreturn 0;\r\n}\r\nstatic int __init ux500_l2x0_init(void)\r\n{\r\nu32 aux_val = 0x3e000000;\r\nif (cpu_is_u8500_family())\r\nl2x0_base = __io_address(U8500_L2CC_BASE);\r\nelse\r\nux500_unknown_soc();\r\nux500_l2x0_unlock();\r\nif (cpu_is_u9540())\r\naux_val |= (0x4 << L2X0_AUX_CTRL_WAY_SIZE_SHIFT);\r\nelse\r\naux_val |= (0x3 << L2X0_AUX_CTRL_WAY_SIZE_SHIFT);\r\nif (of_have_populated_dt())\r\nl2x0_of_init(aux_val, 0xc0000fff);\r\nelse\r\nl2x0_init(l2x0_base, aux_val, 0xc0000fff);\r\nouter_cache.disable = NULL;\r\nreturn 0;\r\n}
