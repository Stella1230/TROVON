static int __init pci_eisa_init(struct pci_dev *pdev,\r\nconst struct pci_device_id *ent)\r\n{\r\nint rc;\r\nif ((rc = pci_enable_device (pdev))) {\r\nprintk (KERN_ERR "pci_eisa : Could not enable device %s\n",\r\npci_name(pdev));\r\nreturn rc;\r\n}\r\npci_eisa_root.dev = &pdev->dev;\r\npci_eisa_root.res = pdev->bus->resource[0];\r\npci_eisa_root.bus_base_addr = pdev->bus->resource[0]->start;\r\npci_eisa_root.slots = EISA_MAX_SLOTS;\r\npci_eisa_root.dma_mask = pdev->dma_mask;\r\ndev_set_drvdata(pci_eisa_root.dev, &pci_eisa_root);\r\nif (eisa_root_register (&pci_eisa_root)) {\r\nprintk (KERN_ERR "pci_eisa : Could not register EISA root\n");\r\nreturn -1;\r\n}\r\nreturn 0;\r\n}\r\nstatic int __init pci_eisa_init_module (void)\r\n{\r\nreturn pci_register_driver (&pci_eisa_driver);\r\n}
