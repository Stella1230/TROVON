int __init debug_card_init(u32 addr, unsigned gpio)\r\n{\r\nint status;\r\nsmc91x_resources[0].start = addr + 0x300;\r\nsmc91x_resources[0].end = addr + 0x30f;\r\nsmc91x_resources[1].start = gpio_to_irq(gpio);\r\nsmc91x_resources[1].end = gpio_to_irq(gpio);\r\nstatus = gpio_request(gpio, "SMC91x irq");\r\nif (status < 0) {\r\nprintk(KERN_ERR "GPIO%d unavailable for smc91x IRQ\n", gpio);\r\nreturn status;\r\n}\r\ngpio_direction_input(gpio);\r\nled_resources[0].start = addr;\r\nled_resources[0].end = addr + SZ_4K - 1;\r\nreturn platform_add_devices(debug_devices, ARRAY_SIZE(debug_devices));\r\n}
