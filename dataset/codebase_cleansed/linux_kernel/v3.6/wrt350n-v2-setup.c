static void __init wrt350n_v2_init(void)\r\n{\r\norion5x_init();\r\norion5x_mpp_conf(wrt350n_v2_mpp_modes);\r\norion5x_ehci0_init();\r\norion5x_eth_init(&wrt350n_v2_eth_data);\r\norion5x_eth_switch_init(&wrt350n_v2_switch_plat_data, NO_IRQ);\r\norion5x_uart0_init();\r\norion5x_setup_dev_boot_win(WRT350N_V2_NOR_BOOT_BASE,\r\nWRT350N_V2_NOR_BOOT_SIZE);\r\nplatform_device_register(&wrt350n_v2_nor_flash);\r\nplatform_device_register(&wrt350n_v2_leds);\r\nplatform_device_register(&wrt350n_v2_button_device);\r\n}\r\nstatic int __init wrt350n_v2_pci_map_irq(const struct pci_dev *dev, u8 slot,\r\nu8 pin)\r\n{\r\nint irq;\r\nirq = orion5x_pci_map_irq(dev, slot, pin);\r\nif (irq != -1)\r\nreturn irq;\r\nif (slot == 7)\r\nreturn gpio_to_irq(4);\r\nreturn -1;\r\n}\r\nstatic int __init wrt350n_v2_pci_init(void)\r\n{\r\nif (machine_is_wrt350n_v2())\r\npci_common_init(&wrt350n_v2_pci);\r\nreturn 0;\r\n}
