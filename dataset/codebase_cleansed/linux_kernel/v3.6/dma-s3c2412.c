static void s3c2412_dma_direction(struct s3c2410_dma_chan *chan,\r\nstruct s3c24xx_dma_map *map,\r\nenum dma_data_direction dir)\r\n{\r\nunsigned long chsel;\r\nif (dir == DMA_FROM_DEVICE)\r\nchsel = map->channels_rx[0];\r\nelse\r\nchsel = map->channels[0];\r\nchsel &= ~DMA_CH_VALID;\r\nchsel |= S3C2412_DMAREQSEL_HW;\r\nwritel(chsel, chan->regs + S3C2412_DMA_DMAREQSEL);\r\n}\r\nstatic void s3c2412_dma_select(struct s3c2410_dma_chan *chan,\r\nstruct s3c24xx_dma_map *map)\r\n{\r\ns3c2412_dma_direction(chan, map, chan->source);\r\n}\r\nstatic int __init s3c2412_dma_add(struct device *dev,\r\nstruct subsys_interface *sif)\r\n{\r\ns3c2410_dma_init();\r\nreturn s3c24xx_dma_init_map(&s3c2412_dma_sel);\r\n}\r\nstatic int __init s3c2412_dma_init(void)\r\n{\r\nreturn subsys_interface_register(&s3c2412_dma_interface);\r\n}
