void __init emev2_map_io(void)\r\n{\r\niotable_init(emev2_io_desc, ARRAY_SIZE(emev2_io_desc));\r\n}\r\nvoid __init emev2_add_standard_devices(void)\r\n{\r\nemev2_clock_init();\r\nplatform_add_devices(emev2_early_devices,\r\nARRAY_SIZE(emev2_early_devices));\r\nplatform_add_devices(emev2_late_devices,\r\nARRAY_SIZE(emev2_late_devices));\r\n}\r\nvoid __init emev2_init_delay(void)\r\n{\r\nshmobile_setup_delay(533, 1, 3);\r\n}\r\nvoid __init emev2_add_early_devices(void)\r\n{\r\nemev2_init_delay();\r\nearly_platform_add_devices(emev2_early_devices,\r\nARRAY_SIZE(emev2_early_devices));\r\nshmobile_setup_console();\r\n}\r\nvoid __init emev2_init_irq(void)\r\n{\r\nvoid __iomem *gic_dist_base;\r\nvoid __iomem *gic_cpu_base;\r\ngic_dist_base = ioremap(0xe0028000, PAGE_SIZE);\r\ngic_cpu_base = ioremap(0xe0020000, PAGE_SIZE);\r\nBUG_ON(!gic_dist_base || !gic_cpu_base);\r\ngic_init(0, 29, gic_dist_base, gic_cpu_base);\r\n}\r\nvoid __init emev2_add_standard_devices_dt(void)\r\n{\r\nof_platform_populate(NULL, of_default_bus_match_table,\r\nemev2_auxdata_lookup, NULL);\r\n}\r\nvoid __init emev2_init_irq_dt(void)\r\n{\r\nof_irq_init(emev2_dt_irq_match);\r\n}
