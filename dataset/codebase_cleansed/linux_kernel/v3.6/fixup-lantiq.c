int pcibios_plat_dev_init(struct pci_dev *dev)\r\n{\r\nif (ltq_pci_plat_arch_init)\r\nreturn ltq_pci_plat_arch_init(dev);\r\nif (ltq_pci_plat_dev_init)\r\nreturn ltq_pci_plat_dev_init(dev);\r\nreturn 0;\r\n}\r\nint __init pcibios_map_irq(const struct pci_dev *dev, u8 slot, u8 pin)\r\n{\r\nstruct of_irq dev_irq;\r\nint irq;\r\nif (of_irq_map_pci(dev, &dev_irq)) {\r\ndev_err(&dev->dev, "trying to map irq for unknown slot:%d pin:%d\n",\r\nslot, pin);\r\nreturn 0;\r\n}\r\nirq = irq_create_of_mapping(dev_irq.controller, dev_irq.specifier,\r\ndev_irq.size);\r\ndev_info(&dev->dev, "SLOT:%d PIN:%d IRQ:%d\n", slot, pin, irq);\r\nreturn irq;\r\n}
