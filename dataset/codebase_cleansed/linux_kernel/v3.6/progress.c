void ui_progress__update(u64 curr, u64 total, const char *title)\r\n{\r\nint bar, y;\r\nif (use_browser <= 0)\r\nreturn;\r\nif (total == 0)\r\nreturn;\r\nui__refresh_dimensions(true);\r\npthread_mutex_lock(&ui__lock);\r\ny = SLtt_Screen_Rows / 2 - 2;\r\nSLsmg_set_color(0);\r\nSLsmg_draw_box(y, 0, 3, SLtt_Screen_Cols);\r\nSLsmg_gotorc(y++, 1);\r\nSLsmg_write_string((char *)title);\r\nSLsmg_set_color(HE_COLORSET_SELECTED);\r\nbar = ((SLtt_Screen_Cols - 2) * curr) / total;\r\nSLsmg_fill_region(y, 1, 1, bar, ' ');\r\nSLsmg_refresh();\r\npthread_mutex_unlock(&ui__lock);\r\n}
