static int mx31_read_cpu_rev(void)\r\n{\r\nu32 i, srev;\r\nsrev = __raw_readl(MX31_IO_ADDRESS(MX31_IIM_BASE_ADDR + MXC_IIMSREV));\r\nsrev &= 0xff;\r\nfor (i = 0; i < ARRAY_SIZE(mx31_cpu_type); i++)\r\nif (srev == mx31_cpu_type[i].srev) {\r\nimx_print_silicon_rev(mx31_cpu_type[i].name,\r\nmx31_cpu_type[i].rev);\r\nreturn mx31_cpu_type[i].rev;\r\n}\r\nimx_print_silicon_rev("i.MX31", IMX_CHIP_REVISION_UNKNOWN);\r\nreturn IMX_CHIP_REVISION_UNKNOWN;\r\n}\r\nint mx31_revision(void)\r\n{\r\nif (mx31_cpu_rev == -1)\r\nmx31_cpu_rev = mx31_read_cpu_rev();\r\nreturn mx31_cpu_rev;\r\n}
