static unsigned long clk_pllv1_recalc_rate(struct clk_hw *hw,\r\nunsigned long parent_rate)\r\n{\r\nstruct clk_pllv1 *pll = to_clk_pllv1(hw);\r\nreturn mxc_decode_pll(readl(pll->base), parent_rate);\r\n}\r\nstruct clk *imx_clk_pllv1(const char *name, const char *parent,\r\nvoid __iomem *base)\r\n{\r\nstruct clk_pllv1 *pll;\r\nstruct clk *clk;\r\nstruct clk_init_data init;\r\npll = kmalloc(sizeof(*pll), GFP_KERNEL);\r\nif (!pll)\r\nreturn ERR_PTR(-ENOMEM);\r\npll->base = base;\r\ninit.name = name;\r\ninit.ops = &clk_pllv1_ops;\r\ninit.flags = 0;\r\ninit.parent_names = &parent;\r\ninit.num_parents = 1;\r\npll->hw.init = &init;\r\nclk = clk_register(NULL, &pll->hw);\r\nif (IS_ERR(clk))\r\nkfree(pll);\r\nreturn clk;\r\n}
