void dss_init_hdmi_ip_ops(struct hdmi_ip_data *ip_data)\r\n{\r\nif (cpu_is_omap44xx())\r\nip_data->ops = &omap4_hdmi_functions;\r\n}\r\nint dss_feat_get_num_mgrs(void)\r\n{\r\nreturn omap_current_dss_features->num_mgrs;\r\n}\r\nint dss_feat_get_num_ovls(void)\r\n{\r\nreturn omap_current_dss_features->num_ovls;\r\n}\r\nunsigned long dss_feat_get_param_min(enum dss_range_param param)\r\n{\r\nreturn omap_current_dss_features->dss_params[param].min;\r\n}\r\nunsigned long dss_feat_get_param_max(enum dss_range_param param)\r\n{\r\nreturn omap_current_dss_features->dss_params[param].max;\r\n}\r\nenum omap_display_type dss_feat_get_supported_displays(enum omap_channel channel)\r\n{\r\nreturn omap_current_dss_features->supported_displays[channel];\r\n}\r\nenum omap_color_mode dss_feat_get_supported_color_modes(enum omap_plane plane)\r\n{\r\nreturn omap_current_dss_features->supported_color_modes[plane];\r\n}\r\nenum omap_overlay_caps dss_feat_get_overlay_caps(enum omap_plane plane)\r\n{\r\nreturn omap_current_dss_features->overlay_caps[plane];\r\n}\r\nbool dss_feat_color_mode_supported(enum omap_plane plane,\r\nenum omap_color_mode color_mode)\r\n{\r\nreturn omap_current_dss_features->supported_color_modes[plane] &\r\ncolor_mode;\r\n}\r\nconst char *dss_feat_get_clk_source_name(enum omap_dss_clk_source id)\r\n{\r\nreturn omap_current_dss_features->clksrc_names[id];\r\n}\r\nu32 dss_feat_get_buffer_size_unit(void)\r\n{\r\nreturn omap_current_dss_features->buffer_size_unit;\r\n}\r\nu32 dss_feat_get_burst_size_unit(void)\r\n{\r\nreturn omap_current_dss_features->burst_size_unit;\r\n}\r\nbool dss_has_feature(enum dss_feat_id id)\r\n{\r\nint i;\r\nconst enum dss_feat_id *features = omap_current_dss_features->features;\r\nconst int num_features = omap_current_dss_features->num_features;\r\nfor (i = 0; i < num_features; i++) {\r\nif (features[i] == id)\r\nreturn true;\r\n}\r\nreturn false;\r\n}\r\nvoid dss_feat_get_reg_field(enum dss_feat_reg_field id, u8 *start, u8 *end)\r\n{\r\nif (id >= omap_current_dss_features->num_reg_fields)\r\nBUG();\r\n*start = omap_current_dss_features->reg_fields[id].start;\r\n*end = omap_current_dss_features->reg_fields[id].end;\r\n}\r\nbool dss_feat_rotation_type_supported(enum omap_dss_rotation_type rot_type)\r\n{\r\nreturn omap_current_dss_features->supported_rotation_types & rot_type;\r\n}\r\nvoid dss_features_init(void)\r\n{\r\nif (cpu_is_omap24xx())\r\nomap_current_dss_features = &omap2_dss_features;\r\nelse if (cpu_is_omap3630())\r\nomap_current_dss_features = &omap3630_dss_features;\r\nelse if (cpu_is_omap34xx())\r\nomap_current_dss_features = &omap3430_dss_features;\r\nelse if (omap_rev() == OMAP4430_REV_ES1_0)\r\nomap_current_dss_features = &omap4430_es1_0_dss_features;\r\nelse if (omap_rev() == OMAP4430_REV_ES2_0 ||\r\nomap_rev() == OMAP4430_REV_ES2_1 ||\r\nomap_rev() == OMAP4430_REV_ES2_2)\r\nomap_current_dss_features = &omap4430_es2_0_1_2_dss_features;\r\nelse if (cpu_is_omap44xx())\r\nomap_current_dss_features = &omap4_dss_features;\r\nelse\r\nDSSWARN("Unsupported OMAP version");\r\n}
