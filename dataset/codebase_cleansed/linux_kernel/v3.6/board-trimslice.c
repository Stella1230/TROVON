static void trimslice_i2c_init(void)\r\n{\r\nplatform_device_register(&tegra_i2c_device1);\r\nplatform_device_register(&tegra_i2c_device2);\r\nplatform_device_register(&tegra_i2c_device3);\r\ni2c_register_board_info(2, trimslice_i2c3_board_info,\r\nARRAY_SIZE(trimslice_i2c3_board_info));\r\n}\r\nstatic void trimslice_usb_init(void)\r\n{\r\nstruct tegra_ehci_platform_data *pdata;\r\npdata = tegra_ehci1_device.dev.platform_data;\r\npdata->vbus_gpio = TRIMSLICE_GPIO_USB1_MODE;\r\ntegra_ehci2_ulpi_phy_config.reset_gpio = TEGRA_GPIO_PV0;\r\nplatform_device_register(&tegra_ehci3_device);\r\nplatform_device_register(&tegra_ehci2_device);\r\nplatform_device_register(&tegra_ehci1_device);\r\n}\r\nstatic void __init tegra_trimslice_fixup(struct tag *tags, char **cmdline,\r\nstruct meminfo *mi)\r\n{\r\nmi->nr_banks = 2;\r\nmi->bank[0].start = PHYS_OFFSET;\r\nmi->bank[0].size = 448 * SZ_1M;\r\nmi->bank[1].start = SZ_512M;\r\nmi->bank[1].size = SZ_512M;\r\n}\r\nstatic int __init tegra_trimslice_pci_init(void)\r\n{\r\nif (!machine_is_trimslice())\r\nreturn 0;\r\nreturn tegra_pcie_init(true, true);\r\n}\r\nstatic void __init tegra_trimslice_init(void)\r\n{\r\ntegra_clk_init_from_table(trimslice_clk_init_table);\r\ntrimslice_pinmux_init();\r\ntegra_sdhci_device1.dev.platform_data = &sdhci_pdata1;\r\ntegra_sdhci_device4.dev.platform_data = &sdhci_pdata4;\r\nplatform_add_devices(trimslice_devices, ARRAY_SIZE(trimslice_devices));\r\ntrimslice_i2c_init();\r\ntrimslice_usb_init();\r\n}
