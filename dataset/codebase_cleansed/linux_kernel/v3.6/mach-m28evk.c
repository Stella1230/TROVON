static int __init m28evk_fec_get_mac(void)\r\n{\r\nint i;\r\nu32 val;\r\nconst u32 *ocotp = mxs_get_ocotp();\r\nif (!ocotp)\r\nreturn -ETIMEDOUT;\r\nfor (i = 0; i < 2; i++) {\r\nval = ocotp[i];\r\nmx28_fec_pdata[i].mac[0] = 0xC0;\r\nmx28_fec_pdata[i].mac[1] = 0xE5;\r\nmx28_fec_pdata[i].mac[2] = 0x4E;\r\nmx28_fec_pdata[i].mac[3] = (val >> 16) & 0xff;\r\nmx28_fec_pdata[i].mac[4] = (val >> 8) & 0xff;\r\nmx28_fec_pdata[i].mac[5] = (val >> 0) & 0xff;\r\n}\r\nreturn 0;\r\n}\r\nstatic void __init m28evk_init(void)\r\n{\r\nmx28_soc_init();\r\nmxs_iomux_setup_multiple_pads(m28evk_pads, ARRAY_SIZE(m28evk_pads));\r\nmx28_add_duart();\r\nmx28_add_auart0();\r\nmx28_add_auart3();\r\nif (!m28evk_fec_get_mac()) {\r\nmx28_add_fec(0, &mx28_fec_pdata[0]);\r\nmx28_add_fec(1, &mx28_fec_pdata[1]);\r\n}\r\nmx28_add_flexcan(0, NULL);\r\nmx28_add_flexcan(1, NULL);\r\nmx28_add_mxsfb(&m28evk_mxsfb_pdata);\r\nmx28_add_mxs_mmc(0, &m28evk_mmc_pdata[0]);\r\nmx28_add_mxs_mmc(1, &m28evk_mmc_pdata[1]);\r\ngpio_led_register_device(0, &m28evk_led_data);\r\nmx28_add_mxs_i2c(0);\r\ni2c_register_board_info(0, m28_stk5v3_i2c_boardinfo,\r\nARRAY_SIZE(m28_stk5v3_i2c_boardinfo));\r\n}\r\nstatic void __init m28evk_timer_init(void)\r\n{\r\nmx28_clocks_init();\r\n}
