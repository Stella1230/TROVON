int mxs_iomux_setup_pad(iomux_cfg_t pad)\r\n{\r\nu32 reg, ofs, bp, bm;\r\nvoid __iomem *iomux_base = MXS_IO_ADDRESS(MXS_PINCTRL_BASE_ADDR);\r\nofs = 0x100;\r\nofs += PAD_BANK(pad) * 0x20 + PAD_PIN(pad) / 16 * 0x10;\r\nbp = PAD_PIN(pad) % 16 * 2;\r\nbm = 0x3 << bp;\r\nreg = __raw_readl(iomux_base + ofs);\r\nreg &= ~bm;\r\nreg |= PAD_MUXSEL(pad) << bp;\r\n__raw_writel(reg, iomux_base + ofs);\r\nofs = cpu_is_mx23() ? 0x200 : 0x300;\r\nofs += PAD_BANK(pad) * 0x40 + PAD_PIN(pad) / 8 * 0x10;\r\nif (PAD_MA_VALID(pad)) {\r\nbp = PAD_PIN(pad) % 8 * 4;\r\nbm = 0x3 << bp;\r\nreg = __raw_readl(iomux_base + ofs);\r\nreg &= ~bm;\r\nreg |= PAD_MA(pad) << bp;\r\n__raw_writel(reg, iomux_base + ofs);\r\n}\r\nif (PAD_VOL_VALID(pad)) {\r\nbp = PAD_PIN(pad) % 8 * 4 + 2;\r\nif (PAD_VOL(pad))\r\n__mxs_setl(1 << bp, iomux_base + ofs);\r\nelse\r\n__mxs_clrl(1 << bp, iomux_base + ofs);\r\n}\r\nif (PAD_PULL_VALID(pad)) {\r\nofs = cpu_is_mx23() ? 0x400 : 0x600;\r\nofs += PAD_BANK(pad) * 0x10;\r\nbp = PAD_PIN(pad);\r\nif (PAD_PULL(pad))\r\n__mxs_setl(1 << bp, iomux_base + ofs);\r\nelse\r\n__mxs_clrl(1 << bp, iomux_base + ofs);\r\n}\r\nreturn 0;\r\n}\r\nint mxs_iomux_setup_multiple_pads(const iomux_cfg_t *pad_list, unsigned count)\r\n{\r\nconst iomux_cfg_t *p = pad_list;\r\nint i;\r\nint ret;\r\nfor (i = 0; i < count; i++) {\r\nret = mxs_iomux_setup_pad(*p);\r\nif (ret)\r\nreturn ret;\r\np++;\r\n}\r\nreturn 0;\r\n}
