static int __init pdc_probe(struct platform_device *pdev)\r\n{\r\nstruct clk *pclk, *hclk;\r\npclk = clk_get(&pdev->dev, "pclk");\r\nif (IS_ERR(pclk)) {\r\ndev_err(&pdev->dev, "no pclk defined\n");\r\nreturn PTR_ERR(pclk);\r\n}\r\nhclk = clk_get(&pdev->dev, "hclk");\r\nif (IS_ERR(hclk)) {\r\ndev_err(&pdev->dev, "no hclk defined\n");\r\nclk_put(pclk);\r\nreturn PTR_ERR(hclk);\r\n}\r\nclk_enable(pclk);\r\nclk_enable(hclk);\r\ndev_info(&pdev->dev, "Atmel Peripheral DMA Controller enabled\n");\r\nreturn 0;\r\n}\r\nstatic int __init pdc_init(void)\r\n{\r\nreturn platform_driver_probe(&pdc_driver, pdc_probe);\r\n}
