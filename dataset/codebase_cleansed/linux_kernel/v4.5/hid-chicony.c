static int ch_input_mapping(struct hid_device *hdev, struct hid_input *hi,\r\nstruct hid_field *field, struct hid_usage *usage,\r\nunsigned long **bit, int *max)\r\n{\r\nif ((usage->hid & HID_USAGE_PAGE) != HID_UP_MSVENDOR)\r\nreturn 0;\r\nset_bit(EV_REP, hi->input->evbit);\r\nswitch (usage->hid & HID_USAGE) {\r\ncase 0xff01: ch_map_key_clear(BTN_1); break;\r\ncase 0xff02: ch_map_key_clear(BTN_2); break;\r\ncase 0xff03: ch_map_key_clear(BTN_3); break;\r\ncase 0xff04: ch_map_key_clear(BTN_4); break;\r\ncase 0xff05: ch_map_key_clear(BTN_5); break;\r\ncase 0xff06: ch_map_key_clear(BTN_6); break;\r\ncase 0xff07: ch_map_key_clear(BTN_7); break;\r\ncase 0xff08: ch_map_key_clear(BTN_8); break;\r\ncase 0xff09: ch_map_key_clear(BTN_9); break;\r\ncase 0xff0a: ch_map_key_clear(BTN_A); break;\r\ncase 0xff0b: ch_map_key_clear(BTN_B); break;\r\ncase 0x00f1: ch_map_key_clear(KEY_WLAN); break;\r\ncase 0x00f2: ch_map_key_clear(KEY_BRIGHTNESSDOWN); break;\r\ncase 0x00f3: ch_map_key_clear(KEY_BRIGHTNESSUP); break;\r\ncase 0x00f4: ch_map_key_clear(KEY_DISPLAY_OFF); break;\r\ncase 0x00f7: ch_map_key_clear(KEY_CAMERA); break;\r\ncase 0x00f8: ch_map_key_clear(KEY_PROG1); break;\r\ndefault:\r\nreturn 0;\r\n}\r\nreturn 1;\r\n}\r\nstatic __u8 *ch_switch12_report_fixup(struct hid_device *hdev, __u8 *rdesc,\r\nunsigned int *rsize)\r\n{\r\nstruct usb_interface *intf = to_usb_interface(hdev->dev.parent);\r\nif (intf->cur_altsetting->desc.bInterfaceNumber == 1) {\r\nswitch (hdev->product) {\r\ncase USB_DEVICE_ID_CHICONY_ACER_SWITCH12:\r\nif (*rsize >= 128 && rdesc[64] == 0xff && rdesc[65] == 0x7f\r\n&& rdesc[69] == 0xff && rdesc[70] == 0x7f) {\r\nhid_info(hdev, "Fixing up report descriptor\n");\r\nrdesc[65] = rdesc[70] = 0x2f;\r\n}\r\nbreak;\r\n}\r\n}\r\nreturn rdesc;\r\n}
