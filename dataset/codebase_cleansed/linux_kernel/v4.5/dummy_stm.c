static ssize_t\r\ndummy_stm_packet(struct stm_data *stm_data, unsigned int master,\r\nunsigned int channel, unsigned int packet, unsigned int flags,\r\nunsigned int size, const unsigned char *payload)\r\n{\r\n#ifdef DEBUG\r\nu64 pl = 0;\r\nif (payload)\r\npl = *(u64 *)payload;\r\nif (size < 8)\r\npl &= (1ull << (size * 8)) - 1;\r\ntrace_printk("[%u:%u] [pkt: %x/%x] (%llx)\n", master, channel,\r\npacket, size, pl);\r\n#endif\r\nreturn size;\r\n}\r\nstatic int dummy_stm_init(void)\r\n{\r\nreturn stm_register_device(NULL, &dummy_stm, THIS_MODULE);\r\n}\r\nstatic void dummy_stm_exit(void)\r\n{\r\nstm_unregister_device(&dummy_stm);\r\n}
