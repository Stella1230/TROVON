int vlan_gvrp_request_join(const struct net_device *dev)\r\n{\r\nconst struct vlan_dev_priv *vlan = vlan_dev_priv(dev);\r\n__be16 vlan_id = htons(vlan->vlan_id);\r\nif (vlan->vlan_proto != htons(ETH_P_8021Q))\r\nreturn 0;\r\nreturn garp_request_join(vlan->real_dev, &vlan_gvrp_app,\r\n&vlan_id, sizeof(vlan_id), GVRP_ATTR_VID);\r\n}\r\nvoid vlan_gvrp_request_leave(const struct net_device *dev)\r\n{\r\nconst struct vlan_dev_priv *vlan = vlan_dev_priv(dev);\r\n__be16 vlan_id = htons(vlan->vlan_id);\r\nif (vlan->vlan_proto != htons(ETH_P_8021Q))\r\nreturn;\r\ngarp_request_leave(vlan->real_dev, &vlan_gvrp_app,\r\n&vlan_id, sizeof(vlan_id), GVRP_ATTR_VID);\r\n}\r\nint vlan_gvrp_init_applicant(struct net_device *dev)\r\n{\r\nreturn garp_init_applicant(dev, &vlan_gvrp_app);\r\n}\r\nvoid vlan_gvrp_uninit_applicant(struct net_device *dev)\r\n{\r\ngarp_uninit_applicant(dev, &vlan_gvrp_app);\r\n}\r\nint __init vlan_gvrp_init(void)\r\n{\r\nreturn garp_register_application(&vlan_gvrp_app);\r\n}\r\nvoid vlan_gvrp_uninit(void)\r\n{\r\ngarp_unregister_application(&vlan_gvrp_app);\r\n}
