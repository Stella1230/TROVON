const struct font_desc *find_font(const char *name)\r\n{\r\nunsigned int i;\r\nfor (i = 0; i < num_fonts; i++)\r\nif (!strcmp(fonts[i]->name, name))\r\nreturn fonts[i];\r\nreturn NULL;\r\n}\r\nconst struct font_desc *get_default_font(int xres, int yres, u32 font_w,\r\nu32 font_h)\r\n{\r\nint i, c, cc;\r\nconst struct font_desc *f, *g;\r\ng = NULL;\r\ncc = -10000;\r\nfor(i=0; i<num_fonts; i++) {\r\nf = fonts[i];\r\nc = f->pref;\r\n#if defined(__mc68000__)\r\n#ifdef CONFIG_FONT_PEARL_8x8\r\nif (MACH_IS_AMIGA && f->idx == PEARL8x8_IDX)\r\nc = 100;\r\n#endif\r\n#ifdef CONFIG_FONT_6x11\r\nif (MACH_IS_MAC && xres < 640 && f->idx == VGA6x11_IDX)\r\nc = 100;\r\n#endif\r\n#endif\r\nif ((yres < 400) == (f->height <= 8))\r\nc += 1000;\r\nif ((font_w & (1 << (f->width - 1))) &&\r\n(font_h & (1 << (f->height - 1))))\r\nc += 1000;\r\nif (c > cc) {\r\ncc = c;\r\ng = f;\r\n}\r\n}\r\nreturn g;\r\n}
