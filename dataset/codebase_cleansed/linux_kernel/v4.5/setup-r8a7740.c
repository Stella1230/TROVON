static void __init r8a7740_map_io(void)\r\n{\r\ndebug_ll_io_init();\r\niotable_init(r8a7740_io_desc, ARRAY_SIZE(r8a7740_io_desc));\r\n}\r\nstatic void __init r8a7740_meram_workaround(void)\r\n{\r\nvoid __iomem *reg;\r\nreg = ioremap_nocache(MEBUFCNTR, 4);\r\nif (reg) {\r\niowrite32(0x01600164, reg);\r\niounmap(reg);\r\n}\r\n}\r\nstatic void __init r8a7740_init_irq_of(void)\r\n{\r\nvoid __iomem *intc_prio_base = ioremap_nocache(0xe6900010, 0x10);\r\nvoid __iomem *intc_msk_base = ioremap_nocache(0xe6900040, 0x10);\r\nvoid __iomem *pfc_inta_ctrl = ioremap_nocache(0xe605807c, 0x4);\r\nirqchip_init();\r\niowrite32(0x0, pfc_inta_ctrl);\r\niowrite32(0x0, intc_prio_base + 0x0);\r\niowrite32(0x0, intc_prio_base + 0x4);\r\niowrite32(0x0, intc_prio_base + 0x8);\r\niowrite32(0x0, intc_prio_base + 0xc);\r\niowrite8(0xff, intc_msk_base + 0x0);\r\niowrite8(0xff, intc_msk_base + 0x4);\r\niowrite8(0xff, intc_msk_base + 0x8);\r\niowrite8(0xff, intc_msk_base + 0xc);\r\niounmap(intc_prio_base);\r\niounmap(intc_msk_base);\r\niounmap(pfc_inta_ctrl);\r\n}\r\nstatic void __init r8a7740_generic_init(void)\r\n{\r\nr8a7740_meram_workaround();\r\n#ifdef CONFIG_CACHE_L2X0\r\nl2x0_init(IOMEM(0xf0002000), 0x00400000, 0xc20f0fff);\r\n#endif\r\nof_platform_populate(NULL, of_default_bus_match_table, NULL, NULL);\r\n}
