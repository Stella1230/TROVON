static ssize_t dio_show_id(struct device *dev, struct device_attribute *attr, char *buf)\r\n{\r\nstruct dio_dev *d;\r\nd = to_dio_dev(dev);\r\nreturn sprintf(buf, "0x%02x\n", (d->id & 0xff));\r\n}\r\nstatic ssize_t dio_show_ipl(struct device *dev, struct device_attribute *attr, char *buf)\r\n{\r\nstruct dio_dev *d;\r\nd = to_dio_dev(dev);\r\nreturn sprintf(buf, "0x%02x\n", d->ipl);\r\n}\r\nstatic ssize_t dio_show_secid(struct device *dev, struct device_attribute *attr, char *buf)\r\n{\r\nstruct dio_dev *d;\r\nd = to_dio_dev(dev);\r\nreturn sprintf(buf, "0x%02x\n", ((d->id >> 8)& 0xff));\r\n}\r\nstatic ssize_t dio_show_name(struct device *dev, struct device_attribute *attr, char *buf)\r\n{\r\nstruct dio_dev *d;\r\nd = to_dio_dev(dev);\r\nreturn sprintf(buf, "%s\n", d->name);\r\n}\r\nstatic ssize_t dio_show_resource(struct device *dev, struct device_attribute *attr, char *buf)\r\n{\r\nstruct dio_dev *d = to_dio_dev(dev);\r\nreturn sprintf(buf, "0x%08lx 0x%08lx 0x%08lx\n",\r\n(unsigned long)dio_resource_start(d),\r\n(unsigned long)dio_resource_end(d),\r\ndio_resource_flags(d));\r\n}\r\nint dio_create_sysfs_dev_files(struct dio_dev *d)\r\n{\r\nstruct device *dev = &d->dev;\r\nint error;\r\nif ((error = device_create_file(dev, &dev_attr_id)) ||\r\n(error = device_create_file(dev, &dev_attr_ipl)) ||\r\n(error = device_create_file(dev, &dev_attr_secid)) ||\r\n(error = device_create_file(dev, &dev_attr_name)) ||\r\n(error = device_create_file(dev, &dev_attr_resource)))\r\nreturn error;\r\nreturn 0;\r\n}
