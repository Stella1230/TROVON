void flexcop_determine_revision(struct flexcop_device *fc)\r\n{\r\nflexcop_ibi_value v = fc->read_ibi_reg(fc,misc_204);\r\nswitch (v.misc_204.Rev_N_sig_revision_hi) {\r\ncase 0x2:\r\ndeb_info("found a FlexCopII.\n");\r\nfc->rev = FLEXCOP_II;\r\nbreak;\r\ncase 0x3:\r\ndeb_info("found a FlexCopIIb.\n");\r\nfc->rev = FLEXCOP_IIB;\r\nbreak;\r\ncase 0x0:\r\ndeb_info("found a FlexCopIII.\n");\r\nfc->rev = FLEXCOP_III;\r\nbreak;\r\ndefault:\r\nerr("unknown FlexCop Revision: %x. Please report this to "\r\n"linux-dvb@linuxtv.org.",\r\nv.misc_204.Rev_N_sig_revision_hi);\r\nbreak;\r\n}\r\nif ((fc->has_32_hw_pid_filter = v.misc_204.Rev_N_sig_caps))\r\ndeb_info("this FlexCop has "\r\n"the additional 32 hardware pid filter.\n");\r\nelse\r\ndeb_info("this FlexCop has "\r\n"the 6 basic main hardware pid filter.\n");\r\n}\r\nvoid flexcop_device_name(struct flexcop_device *fc,\r\nconst char *prefix, const char *suffix)\r\n{\r\ninfo("%s '%s' at the '%s' bus controlled by a '%s' %s",\r\nprefix, flexcop_device_names[fc->dev_type],\r\nflexcop_bus_names[fc->bus_type],\r\nflexcop_revision_names[fc->rev], suffix);\r\n}\r\nvoid flexcop_dump_reg(struct flexcop_device *fc,\r\nflexcop_ibi_register reg, int num)\r\n{\r\nflexcop_ibi_value v;\r\nint i;\r\nfor (i = 0; i < num; i++) {\r\nv = fc->read_ibi_reg(fc, reg+4*i);\r\ndeb_rdump("0x%03x: %08x, ", reg+4*i, v.raw);\r\n}\r\ndeb_rdump("\n");\r\n}
