void user_disable_single_step(struct task_struct *child)\r\n{\r\nunsigned char exr;\r\nexr = h8300_get_reg(child, PT_EXR);\r\nexr &= ~EXR_TRACE;\r\nh8300_put_reg(child, PT_EXR, exr);\r\n}\r\nvoid user_enable_single_step(struct task_struct *child)\r\n{\r\nunsigned char exr;\r\nexr = h8300_get_reg(child, PT_EXR);\r\nexr |= EXR_TRACE;\r\nh8300_put_reg(child, PT_EXR, exr);\r\n}\r\nasmlinkage void trace_trap(unsigned long bp)\r\n{\r\n(void)bp;\r\nforce_sig(SIGTRAP, current);\r\n}
