void __init spear6xx_map_io(void)\r\n{\r\niotable_init(spear6xx_io_desc, ARRAY_SIZE(spear6xx_io_desc));\r\n}\r\nvoid __init spear6xx_timer_init(void)\r\n{\r\nchar pclk_name[] = "pll3_clk";\r\nstruct clk *gpt_clk, *pclk;\r\nspear6xx_clk_init(MISC_BASE);\r\ngpt_clk = clk_get_sys("gpt0", NULL);\r\nif (IS_ERR(gpt_clk)) {\r\npr_err("%s:couldn't get clk for gpt\n", __func__);\r\nBUG();\r\n}\r\npclk = clk_get(NULL, pclk_name);\r\nif (IS_ERR(pclk)) {\r\npr_err("%s:couldn't get %s as parent for gpt\n",\r\n__func__, pclk_name);\r\nBUG();\r\n}\r\nclk_set_parent(gpt_clk, pclk);\r\nclk_put(gpt_clk);\r\nclk_put(pclk);\r\nspear_setup_of_timer();\r\n}\r\nstatic void __init spear600_dt_init(void)\r\n{\r\nof_platform_populate(NULL, of_default_bus_match_table,\r\nspear6xx_auxdata_lookup, NULL);\r\n}
