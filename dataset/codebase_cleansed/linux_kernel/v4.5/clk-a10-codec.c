static void __init sun4i_codec_clk_setup(struct device_node *node)\r\n{\r\nstruct clk *clk;\r\nconst char *clk_name = node->name, *parent_name;\r\nvoid __iomem *reg;\r\nreg = of_io_request_and_map(node, 0, of_node_full_name(node));\r\nif (IS_ERR(reg))\r\nreturn;\r\nof_property_read_string(node, "clock-output-names", &clk_name);\r\nparent_name = of_clk_get_parent_name(node, 0);\r\nclk = clk_register_gate(NULL, clk_name, parent_name,\r\nCLK_SET_RATE_PARENT, reg,\r\nSUN4I_CODEC_GATE, 0, NULL);\r\nif (!IS_ERR(clk))\r\nof_clk_add_provider(node, of_clk_src_simple_get, clk);\r\n}
