static int init_display(struct fbtft_par *par)\r\n{\r\npar->fbtftops.reset(par);\r\nmdelay(150);\r\nwrite_reg(par, 0xB9, 0xFF, 0x83, 0x53);\r\nwrite_reg(par, 0xB0, 0x3C, 0x01);\r\nwrite_reg(par, 0xB6, 0x94, 0x6C, 0x50);\r\nwrite_reg(par, 0xB1, 0x00, 0x01, 0x1B, 0x03, 0x01, 0x08, 0x77, 0x89);\r\nwrite_reg(par, 0x3A, 0x05);\r\nwrite_reg(par, 0x36, 0xC0);\r\nwrite_reg(par, 0x11);\r\nmdelay(150);\r\nwrite_reg(par, 0x29);\r\nwrite_reg(par, 0x2D,\r\n0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30,\r\n32, 34, 36, 38, 40, 42, 44, 46, 48, 50, 52, 54, 56, 58, 60, 62,\r\n0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\r\n16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31,\r\n32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\r\n48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,\r\n0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30,\r\n32, 34, 36, 38, 40, 42, 44, 46, 48, 50, 52, 54, 56, 58, 60, 62);\r\nreturn 0;\r\n}\r\nstatic void set_addr_win(struct fbtft_par *par, int xs, int ys, int xe, int ye)\r\n{\r\nwrite_reg(par, 0x2a, xs >> 8, xs & 0xff, xe >> 8, xe & 0xff);\r\nwrite_reg(par, 0x2b, ys >> 8, ys & 0xff, ye >> 8, ye & 0xff);\r\nwrite_reg(par, 0x2c);\r\n}\r\nstatic int set_var(struct fbtft_par *par)\r\n{\r\nswitch (par->info->var.rotate) {\r\ncase 0:\r\nwrite_reg(par, 0x36, mx | my | (par->bgr << 3));\r\nbreak;\r\ncase 270:\r\nwrite_reg(par, 0x36, my | mv | (par->bgr << 3));\r\nbreak;\r\ncase 180:\r\nwrite_reg(par, 0x36, par->bgr << 3);\r\nbreak;\r\ncase 90:\r\nwrite_reg(par, 0x36, mx | mv | (par->bgr << 3));\r\nbreak;\r\n}\r\nreturn 0;\r\n}\r\nstatic int set_gamma(struct fbtft_par *par, unsigned long *curves)\r\n{\r\nwrite_reg(par, 0xE0,\r\ncurves[0], curves[1], curves[2], curves[3],\r\ncurves[4], curves[5], curves[6], curves[7],\r\ncurves[8], curves[9], curves[10], curves[11],\r\ncurves[12], curves[13], curves[14], curves[15],\r\ncurves[16], curves[17], curves[18]);\r\nreturn 0;\r\n}
