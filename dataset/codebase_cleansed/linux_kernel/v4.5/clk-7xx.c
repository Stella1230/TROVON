int __init dra7xx_dt_clk_init(void)\r\n{\r\nint rc;\r\nstruct clk *dpll_ck, *hdcp_ck;\r\nti_dt_clocks_register(dra7xx_clks);\r\nomap2_clk_disable_autoidle_all();\r\ndpll_ck = clk_get_sys(NULL, "dpll_gmac_ck");\r\nrc = clk_set_rate(dpll_ck, DRA7_DPLL_GMAC_DEFFREQ);\r\nif (rc)\r\npr_err("%s: failed to configure GMAC DPLL!\n", __func__);\r\ndpll_ck = clk_get_sys(NULL, "dpll_usb_ck");\r\nrc = clk_set_rate(dpll_ck, DRA7_DPLL_USB_DEFFREQ);\r\nif (rc)\r\npr_err("%s: failed to configure USB DPLL!\n", __func__);\r\ndpll_ck = clk_get_sys(NULL, "dpll_usb_m2_ck");\r\nrc = clk_set_rate(dpll_ck, DRA7_DPLL_USB_DEFFREQ/2);\r\nif (rc)\r\npr_err("%s: failed to set USB_DPLL M2 OUT\n", __func__);\r\nhdcp_ck = clk_get_sys(NULL, "dss_deshdcp_clk");\r\nrc = clk_prepare_enable(hdcp_ck);\r\nif (rc)\r\npr_err("%s: failed to set dss_deshdcp_clk\n", __func__);\r\nreturn rc;\r\n}
