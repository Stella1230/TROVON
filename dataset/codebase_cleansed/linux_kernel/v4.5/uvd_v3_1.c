bool uvd_v3_1_semaphore_emit(struct radeon_device *rdev,\r\nstruct radeon_ring *ring,\r\nstruct radeon_semaphore *semaphore,\r\nbool emit_wait)\r\n{\r\nuint64_t addr = semaphore->gpu_addr;\r\nradeon_ring_write(ring, PACKET0(UVD_SEMA_ADDR_LOW, 0));\r\nradeon_ring_write(ring, (addr >> 3) & 0x000FFFFF);\r\nradeon_ring_write(ring, PACKET0(UVD_SEMA_ADDR_HIGH, 0));\r\nradeon_ring_write(ring, (addr >> 23) & 0x000FFFFF);\r\nradeon_ring_write(ring, PACKET0(UVD_SEMA_CMD, 0));\r\nradeon_ring_write(ring, 0x80 | (emit_wait ? 1 : 0));\r\nreturn true;\r\n}
