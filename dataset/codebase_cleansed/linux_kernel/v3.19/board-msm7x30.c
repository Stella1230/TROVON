static void __init msm7x30_fixup(struct tag *tag, char **cmdline)\r\n{\r\nfor (; tag->hdr.size; tag = tag_next(tag))\r\nif (tag->hdr.tag == ATAG_MEM && tag->u.mem.start == 0x200000) {\r\ntag->u.mem.start = 0;\r\ntag->u.mem.size += SZ_2M;\r\n}\r\n}\r\nstatic void __init msm7x30_reserve(void)\r\n{\r\nmemblock_remove(0x0, SZ_2M);\r\n}\r\nstatic int hsusb_link_clk_reset(struct clk *link_clk, bool assert)\r\n{\r\nint ret;\r\nif (assert) {\r\nret = clk_reset(link_clk, CLK_RESET_ASSERT);\r\nif (ret)\r\npr_err("usb hs_clk assert failed\n");\r\n} else {\r\nret = clk_reset(link_clk, CLK_RESET_DEASSERT);\r\nif (ret)\r\npr_err("usb hs_clk deassert failed\n");\r\n}\r\nreturn ret;\r\n}\r\nstatic int hsusb_phy_clk_reset(struct clk *phy_clk)\r\n{\r\nint ret;\r\nret = clk_reset(phy_clk, CLK_RESET_ASSERT);\r\nif (ret) {\r\npr_err("usb phy clk assert failed\n");\r\nreturn ret;\r\n}\r\nusleep_range(10000, 12000);\r\nret = clk_reset(phy_clk, CLK_RESET_DEASSERT);\r\nif (ret)\r\npr_err("usb phy clk deassert failed\n");\r\nreturn ret;\r\n}\r\nstatic void __init msm7x30_init_irq(void)\r\n{\r\nmsm_init_irq();\r\n}\r\nstatic void __init msm7x30_init(void)\r\n{\r\nmsm_device_otg.dev.platform_data = &msm_otg_pdata;\r\nmsm_device_hsusb.dev.parent = &msm_device_otg.dev;\r\nmsm_device_hsusb_host.dev.parent = &msm_device_otg.dev;\r\nplatform_add_devices(devices, ARRAY_SIZE(devices));\r\n}\r\nstatic void __init msm7x30_map_io(void)\r\n{\r\nmsm_map_msm7x30_io();\r\n}\r\nstatic void __init msm7x30_init_late(void)\r\n{\r\nsmd_debugfs_init();\r\n}
