static int tipc_ib_addr2str(struct tipc_media_addr *a, char *str_buf,\r\nint str_size)\r\n{\r\nif (str_size < 60)\r\nreturn 1;\r\nsprintf(str_buf, "%20phC", a->value);\r\nreturn 0;\r\n}\r\nstatic int tipc_ib_addr2msg(char *msg, struct tipc_media_addr *addr)\r\n{\r\nmemset(msg, 0, TIPC_MEDIA_ADDR_SIZE);\r\nmemcpy(msg, addr->value, INFINIBAND_ALEN);\r\nreturn 0;\r\n}\r\nstatic int tipc_ib_raw2addr(struct tipc_bearer *b,\r\nstruct tipc_media_addr *addr,\r\nchar *msg)\r\n{\r\nmemset(addr, 0, sizeof(*addr));\r\nmemcpy(addr->value, msg, INFINIBAND_ALEN);\r\naddr->media_id = TIPC_MEDIA_TYPE_IB;\r\naddr->broadcast = !memcmp(msg, b->bcast_addr.value,\r\nINFINIBAND_ALEN);\r\nreturn 0;\r\n}\r\nstatic int tipc_ib_msg2addr(struct tipc_bearer *b,\r\nstruct tipc_media_addr *addr,\r\nchar *msg)\r\n{\r\nreturn tipc_ib_raw2addr(b, addr, msg);\r\n}
