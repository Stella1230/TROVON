static int __init i2o_config_init(void)\r\n{\r\nprintk(KERN_INFO OSM_DESCRIPTION " v" OSM_VERSION "\n");\r\nif (i2o_driver_register(&i2o_config_driver)) {\r\nosm_err("handler register failed.\n");\r\nreturn -EBUSY;\r\n}\r\n#ifdef CONFIG_I2O_CONFIG_OLD_IOCTL\r\nif (i2o_config_old_init()) {\r\nosm_err("old config handler initialization failed\n");\r\ni2o_driver_unregister(&i2o_config_driver);\r\nreturn -EBUSY;\r\n}\r\n#endif\r\nreturn 0;\r\n}\r\nstatic void i2o_config_exit(void)\r\n{\r\n#ifdef CONFIG_I2O_CONFIG_OLD_IOCTL\r\ni2o_config_old_exit();\r\n#endif\r\ni2o_driver_unregister(&i2o_config_driver);\r\n}
