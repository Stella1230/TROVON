void __init at91_sysirq_mask_rtc(u32 rtc_base)\r\n{\r\nvoid __iomem *base;\r\nbase = ioremap(rtc_base, 64);\r\nif (!base)\r\nreturn;\r\nwritel_relaxed(AT91_RTC_IRQ_MASK, base + AT91_RTC_IDR);\r\n(void)readl_relaxed(base + AT91_RTC_IMR);\r\niounmap(base);\r\n}\r\nvoid __init at91_sysirq_mask_rtt(u32 rtt_base)\r\n{\r\nvoid __iomem *base;\r\nvoid __iomem *reg;\r\nu32 mode;\r\nbase = ioremap(rtt_base, 16);\r\nif (!base)\r\nreturn;\r\nreg = base + AT91_RTT_MR;\r\nmode = readl_relaxed(reg);\r\nif (mode & (AT91_RTT_ALMIEN | AT91_RTT_RTTINCIEN)) {\r\npr_info("AT91: Disabling rtt irq\n");\r\nmode &= ~(AT91_RTT_ALMIEN | AT91_RTT_RTTINCIEN);\r\nwritel_relaxed(mode, reg);\r\n(void)readl_relaxed(reg);\r\n}\r\niounmap(base);\r\n}
