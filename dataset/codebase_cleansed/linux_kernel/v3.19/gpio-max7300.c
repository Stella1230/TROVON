static int max7300_i2c_write(struct device *dev, unsigned int reg,\r\nunsigned int val)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nreturn i2c_smbus_write_byte_data(client, reg, val);\r\n}\r\nstatic int max7300_i2c_read(struct device *dev, unsigned int reg)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nreturn i2c_smbus_read_byte_data(client, reg);\r\n}\r\nstatic int max7300_probe(struct i2c_client *client,\r\nconst struct i2c_device_id *id)\r\n{\r\nstruct max7301 *ts;\r\nint ret;\r\nif (!i2c_check_functionality(client->adapter,\r\nI2C_FUNC_SMBUS_BYTE_DATA))\r\nreturn -EIO;\r\nts = devm_kzalloc(&client->dev, sizeof(struct max7301), GFP_KERNEL);\r\nif (!ts)\r\nreturn -ENOMEM;\r\nts->read = max7300_i2c_read;\r\nts->write = max7300_i2c_write;\r\nts->dev = &client->dev;\r\nret = __max730x_probe(ts);\r\nreturn ret;\r\n}\r\nstatic int max7300_remove(struct i2c_client *client)\r\n{\r\nreturn __max730x_remove(&client->dev);\r\n}\r\nstatic int __init max7300_init(void)\r\n{\r\nreturn i2c_add_driver(&max7300_driver);\r\n}\r\nstatic void __exit max7300_exit(void)\r\n{\r\ni2c_del_driver(&max7300_driver);\r\n}
