void show_regs(struct pt_regs *regs)\r\n{\r\nshow_regs_print_info(KERN_EMERG);\r\nprintk(KERN_EMERG "restart_r0: \t0x%08lx syscall_nr: %ld\n",\r\nregs->restart_r0, regs->syscall_nr);\r\nprintk(KERN_EMERG "preds: \t\t0x%08lx\n", regs->preds);\r\nprintk(KERN_EMERG "lc0: \t0x%08lx sa0: 0x%08lx m0: 0x%08lx\n",\r\nregs->lc0, regs->sa0, regs->m0);\r\nprintk(KERN_EMERG "lc1: \t0x%08lx sa1: 0x%08lx m1: 0x%08lx\n",\r\nregs->lc1, regs->sa1, regs->m1);\r\nprintk(KERN_EMERG "gp: \t0x%08lx ugp: 0x%08lx usr: 0x%08lx\n",\r\nregs->gp, regs->ugp, regs->usr);\r\nprintk(KERN_EMERG "cs0: \t0x%08lx cs1: 0x%08lx\n",\r\nregs->cs0, regs->cs1);\r\nprintk(KERN_EMERG "r0: \t0x%08lx %08lx %08lx %08lx\n", regs->r00,\r\nregs->r01,\r\nregs->r02,\r\nregs->r03);\r\nprintk(KERN_EMERG "r4: \t0x%08lx %08lx %08lx %08lx\n", regs->r04,\r\nregs->r05,\r\nregs->r06,\r\nregs->r07);\r\nprintk(KERN_EMERG "r8: \t0x%08lx %08lx %08lx %08lx\n", regs->r08,\r\nregs->r09,\r\nregs->r10,\r\nregs->r11);\r\nprintk(KERN_EMERG "r12: \t0x%08lx %08lx %08lx %08lx\n", regs->r12,\r\nregs->r13,\r\nregs->r14,\r\nregs->r15);\r\nprintk(KERN_EMERG "r16: \t0x%08lx %08lx %08lx %08lx\n", regs->r16,\r\nregs->r17,\r\nregs->r18,\r\nregs->r19);\r\nprintk(KERN_EMERG "r20: \t0x%08lx %08lx %08lx %08lx\n", regs->r20,\r\nregs->r21,\r\nregs->r22,\r\nregs->r23);\r\nprintk(KERN_EMERG "r24: \t0x%08lx %08lx %08lx %08lx\n", regs->r24,\r\nregs->r25,\r\nregs->r26,\r\nregs->r27);\r\nprintk(KERN_EMERG "r28: \t0x%08lx %08lx %08lx %08lx\n", regs->r28,\r\nregs->r29,\r\nregs->r30,\r\nregs->r31);\r\nprintk(KERN_EMERG "elr: \t0x%08lx cause: 0x%08lx user_mode: %d\n",\r\npt_elr(regs), pt_cause(regs), user_mode(regs));\r\nprintk(KERN_EMERG "psp: \t0x%08lx badva: 0x%08lx int_enabled: %d\n",\r\npt_psp(regs), pt_badva(regs), ints_enabled(regs));\r\n}\r\nvoid dummy_handler(struct pt_regs *regs)\r\n{\r\nunsigned int elr = pt_elr(regs);\r\nprintk(KERN_ERR "Unimplemented handler; ELR=0x%08x\n", elr);\r\n}\r\nvoid arch_do_IRQ(struct pt_regs *regs)\r\n{\r\nint irq = pt_cause(regs);\r\nstruct pt_regs *old_regs = set_irq_regs(regs);\r\nirq_enter();\r\ngeneric_handle_irq(irq);\r\nirq_exit();\r\nset_irq_regs(old_regs);\r\n}
