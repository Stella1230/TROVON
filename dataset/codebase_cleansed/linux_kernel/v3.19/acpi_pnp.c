static bool matching_id(char *idstr, char *list_id)\r\n{\r\nint i;\r\nif (memcmp(idstr, list_id, 3))\r\nreturn false;\r\nfor (i = 3; i < 7; i++) {\r\nchar c = toupper(idstr[i]);\r\nif (!isxdigit(c)\r\n|| (list_id[i] != 'X' && c != toupper(list_id[i])))\r\nreturn false;\r\n}\r\nreturn true;\r\n}\r\nstatic bool acpi_pnp_match(char *idstr, const struct acpi_device_id **matchid)\r\n{\r\nconst struct acpi_device_id *devid;\r\nfor (devid = acpi_pnp_device_ids; devid->id[0]; devid++)\r\nif (matching_id(idstr, (char *)devid->id)) {\r\nif (matchid)\r\n*matchid = devid;\r\nreturn true;\r\n}\r\nreturn false;\r\n}\r\nstatic int acpi_pnp_attach(struct acpi_device *adev,\r\nconst struct acpi_device_id *id)\r\n{\r\nreturn 1;\r\n}\r\nstatic int is_cmos_rtc_device(struct acpi_device *adev)\r\n{\r\nstruct acpi_device_id ids[] = {\r\n{ "PNP0B00" },\r\n{ "PNP0B01" },\r\n{ "PNP0B02" },\r\n{""},\r\n};\r\nreturn !acpi_match_device_ids(adev, ids);\r\n}\r\nbool acpi_is_pnp_device(struct acpi_device *adev)\r\n{\r\nreturn adev->handler == &acpi_pnp_handler || is_cmos_rtc_device(adev);\r\n}\r\nvoid __init acpi_pnp_init(void)\r\n{\r\nacpi_scan_add_handler(&acpi_pnp_handler);\r\n}
