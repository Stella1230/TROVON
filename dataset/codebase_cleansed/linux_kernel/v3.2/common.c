void __init dove_map_io(void)\r\n{\r\niotable_init(dove_io_desc, ARRAY_SIZE(dove_io_desc));\r\n}\r\nvoid __init dove_ehci0_init(void)\r\n{\r\norion_ehci_init(&dove_mbus_dram_info,\r\nDOVE_USB0_PHYS_BASE, IRQ_DOVE_USB0);\r\n}\r\nvoid __init dove_ehci1_init(void)\r\n{\r\norion_ehci_1_init(&dove_mbus_dram_info,\r\nDOVE_USB1_PHYS_BASE, IRQ_DOVE_USB1);\r\n}\r\nvoid __init dove_ge00_init(struct mv643xx_eth_platform_data *eth_data)\r\n{\r\norion_ge00_init(eth_data, &dove_mbus_dram_info,\r\nDOVE_GE00_PHYS_BASE, IRQ_DOVE_GE00_SUM,\r\n0, get_tclk());\r\n}\r\nvoid __init dove_rtc_init(void)\r\n{\r\norion_rtc_init(DOVE_RTC_PHYS_BASE, IRQ_DOVE_RTC);\r\n}\r\nvoid __init dove_sata_init(struct mv_sata_platform_data *sata_data)\r\n{\r\norion_sata_init(sata_data, &dove_mbus_dram_info,\r\nDOVE_SATA_PHYS_BASE, IRQ_DOVE_SATA);\r\n}\r\nvoid __init dove_uart0_init(void)\r\n{\r\norion_uart0_init(DOVE_UART0_VIRT_BASE, DOVE_UART0_PHYS_BASE,\r\nIRQ_DOVE_UART_0, get_tclk());\r\n}\r\nvoid __init dove_uart1_init(void)\r\n{\r\norion_uart1_init(DOVE_UART1_VIRT_BASE, DOVE_UART1_PHYS_BASE,\r\nIRQ_DOVE_UART_1, get_tclk());\r\n}\r\nvoid __init dove_uart2_init(void)\r\n{\r\norion_uart2_init(DOVE_UART2_VIRT_BASE, DOVE_UART2_PHYS_BASE,\r\nIRQ_DOVE_UART_2, get_tclk());\r\n}\r\nvoid __init dove_uart3_init(void)\r\n{\r\norion_uart3_init(DOVE_UART3_VIRT_BASE, DOVE_UART3_PHYS_BASE,\r\nIRQ_DOVE_UART_3, get_tclk());\r\n}\r\nvoid __init dove_spi0_init(void)\r\n{\r\norion_spi_init(DOVE_SPI0_PHYS_BASE, get_tclk());\r\n}\r\nvoid __init dove_spi1_init(void)\r\n{\r\norion_spi_1_init(DOVE_SPI1_PHYS_BASE, get_tclk());\r\n}\r\nvoid __init dove_i2c_init(void)\r\n{\r\norion_i2c_init(DOVE_I2C_PHYS_BASE, IRQ_DOVE_I2C, 10);\r\n}\r\nvoid __init dove_init_early(void)\r\n{\r\norion_time_set_base(TIMER_VIRT_BASE);\r\n}\r\nstatic int get_tclk(void)\r\n{\r\nreturn 166666667;\r\n}\r\nstatic void dove_timer_init(void)\r\n{\r\norion_time_init(BRIDGE_VIRT_BASE, BRIDGE_INT_TIMER1_CLR,\r\nIRQ_DOVE_BRIDGE, get_tclk());\r\n}\r\nvoid __init dove_xor0_init(void)\r\n{\r\norion_xor0_init(&dove_mbus_dram_info,\r\nDOVE_XOR0_PHYS_BASE, DOVE_XOR0_HIGH_PHYS_BASE,\r\nIRQ_DOVE_XOR_00, IRQ_DOVE_XOR_01);\r\n}\r\nvoid __init dove_xor1_init(void)\r\n{\r\norion_xor1_init(DOVE_XOR1_PHYS_BASE, DOVE_XOR1_HIGH_PHYS_BASE,\r\nIRQ_DOVE_XOR_10, IRQ_DOVE_XOR_11);\r\n}\r\nvoid __init dove_sdio0_init(void)\r\n{\r\nplatform_device_register(&dove_sdio0);\r\n}\r\nvoid __init dove_sdio1_init(void)\r\n{\r\nplatform_device_register(&dove_sdio1);\r\n}\r\nvoid __init dove_init(void)\r\n{\r\nint tclk;\r\ntclk = get_tclk();\r\nprintk(KERN_INFO "Dove 88AP510 SoC, ");\r\nprintk(KERN_INFO "TCLK = %dMHz\n", (tclk + 499999) / 1000000);\r\n#ifdef CONFIG_CACHE_TAUROS2\r\ntauros2_init();\r\n#endif\r\ndove_setup_cpu_mbus();\r\ndove_rtc_init();\r\ndove_xor0_init();\r\ndove_xor1_init();\r\n}
