static int s5pv210_spi_cfg_gpio(struct platform_device *pdev)\r\n{\r\nunsigned int base;\r\nswitch (pdev->id) {\r\ncase 0:\r\nbase = S5PV210_GPB(0);\r\nbreak;\r\ncase 1:\r\nbase = S5PV210_GPB(4);\r\nbreak;\r\ndefault:\r\ndev_err(&pdev->dev, "Invalid SPI Controller number!");\r\nreturn -EINVAL;\r\n}\r\ns3c_gpio_cfgall_range(base, 3,\r\nS3C_GPIO_SFN(2), S3C_GPIO_PULL_UP);\r\nreturn 0;\r\n}\r\nvoid __init s5pv210_spi_set_info(int cntrlr, int src_clk_nr, int num_cs)\r\n{\r\nstruct s3c64xx_spi_info *pd;\r\nif (!num_cs || src_clk_nr < 0\r\n|| src_clk_nr > S5PV210_SPI_SRCCLK_SCLK) {\r\nprintk(KERN_ERR "%s: Invalid SPI configuration\n", __func__);\r\nreturn;\r\n}\r\nswitch (cntrlr) {\r\ncase 0:\r\npd = &s5pv210_spi0_pdata;\r\nbreak;\r\ncase 1:\r\npd = &s5pv210_spi1_pdata;\r\nbreak;\r\ndefault:\r\nprintk(KERN_ERR "%s: Invalid SPI controller(%d)\n",\r\n__func__, cntrlr);\r\nreturn;\r\n}\r\npd->num_cs = num_cs;\r\npd->src_clk_nr = src_clk_nr;\r\npd->src_clk_name = spi_src_clks[src_clk_nr];\r\n}
