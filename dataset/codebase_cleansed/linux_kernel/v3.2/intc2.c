static void intc2_irq_gpio_mask(struct irq_data *d)\r\n{\r\nu32 imr;\r\nimr = readl(MCF_MBAR2 + MCFSIM2_GPIOINTENABLE);\r\nimr &= ~(0x1 << (d->irq - MCFINTC2_GPIOIRQ0));\r\nwritel(imr, MCF_MBAR2 + MCFSIM2_GPIOINTENABLE);\r\n}\r\nstatic void intc2_irq_gpio_unmask(struct irq_data *d)\r\n{\r\nu32 imr;\r\nimr = readl(MCF_MBAR2 + MCFSIM2_GPIOINTENABLE);\r\nimr |= (0x1 << (d->irq - MCFINTC2_GPIOIRQ0));\r\nwritel(imr, MCF_MBAR2 + MCFSIM2_GPIOINTENABLE);\r\n}\r\nstatic void intc2_irq_gpio_ack(struct irq_data *d)\r\n{\r\nwritel(0x1 << (d->irq - MCFINTC2_GPIOIRQ0), MCF_MBAR2 + MCFSIM2_GPIOINTCLEAR);\r\n}\r\nstatic int __init mcf_intc2_init(void)\r\n{\r\nint irq;\r\nfor (irq = MCFINTC2_GPIOIRQ0; (irq <= MCFINTC2_GPIOIRQ7); irq++) {\r\nirq_set_chip(irq, &intc2_irq_gpio_chip);\r\nirq_set_handler(irq, handle_edge_irq);\r\n}\r\nreturn 0;\r\n}
