static int __init shx3_devices_setup(void)\r\n{\r\nreturn platform_add_devices(shx3_early_devices,\r\nARRAY_SIZE(shx3_early_devices));\r\n}\r\nvoid __init plat_early_device_setup(void)\r\n{\r\nearly_platform_add_devices(shx3_early_devices,\r\nARRAY_SIZE(shx3_early_devices));\r\n}\r\nvoid __init plat_irq_setup_pins(int mode)\r\n{\r\nint ret = 0;\r\nswitch (mode) {\r\ncase IRQ_MODE_IRQ:\r\nret |= gpio_request(GPIO_FN_IRQ3, intc_desc_irq.name);\r\nret |= gpio_request(GPIO_FN_IRQ2, intc_desc_irq.name);\r\nret |= gpio_request(GPIO_FN_IRQ1, intc_desc_irq.name);\r\nret |= gpio_request(GPIO_FN_IRQ0, intc_desc_irq.name);\r\nif (unlikely(ret)) {\r\npr_err("Failed to set IRQ mode\n");\r\nreturn;\r\n}\r\nregister_intc_controller(&intc_desc_irq);\r\nbreak;\r\ncase IRQ_MODE_IRL3210:\r\nret |= gpio_request(GPIO_FN_IRL3, intc_desc_irl.name);\r\nret |= gpio_request(GPIO_FN_IRL2, intc_desc_irl.name);\r\nret |= gpio_request(GPIO_FN_IRL1, intc_desc_irl.name);\r\nret |= gpio_request(GPIO_FN_IRL0, intc_desc_irl.name);\r\nif (unlikely(ret)) {\r\npr_err("Failed to set IRL mode\n");\r\nreturn;\r\n}\r\nregister_intc_controller(&intc_desc_irl);\r\nbreak;\r\ndefault:\r\nBUG();\r\n}\r\n}\r\nvoid __init plat_irq_setup(void)\r\n{\r\nreserve_intc_vectors(vectors_irq, ARRAY_SIZE(vectors_irq));\r\nreserve_intc_vectors(vectors_irl, ARRAY_SIZE(vectors_irl));\r\nregister_intc_controller(&intc_desc);\r\n}\r\nvoid __init plat_mem_setup(void)\r\n{\r\nunsigned int nid = 1;\r\nsetup_bootmem_node(nid++, 0x145f0000, 0x14610000);\r\n#if 0\r\nsetup_bootmem_node(nid++, 0x14df0000, 0x14e10000);\r\nsetup_bootmem_node(nid++, 0x155f0000, 0x15610000);\r\nsetup_bootmem_node(nid++, 0x15df0000, 0x15e10000);\r\n#endif\r\nsetup_bootmem_node(nid++, 0x16000000, 0x16020000);\r\n}
