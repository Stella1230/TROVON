int mca_register_driver(struct mca_driver *mca_drv)\r\n{\r\nint r;\r\nif (MCA_bus) {\r\nmca_drv->driver.bus = &mca_bus_type;\r\nif ((r = driver_register(&mca_drv->driver)) < 0)\r\nreturn r;\r\nmca_drv->integrated_id = 0;\r\n}\r\nreturn 0;\r\n}\r\nint mca_register_driver_integrated(struct mca_driver *mca_driver,\r\nint integrated_id)\r\n{\r\nint r = mca_register_driver(mca_driver);\r\nif (!r)\r\nmca_driver->integrated_id = integrated_id;\r\nreturn r;\r\n}\r\nvoid mca_unregister_driver(struct mca_driver *mca_drv)\r\n{\r\nif (MCA_bus)\r\ndriver_unregister(&mca_drv->driver);\r\n}
