static int __init zcrypt_init(void)\r\n{\r\nint rc;\r\nrc = ap_module_init();\r\nif (rc)\r\ngoto out;\r\nrc = zcrypt_api_init();\r\nif (rc)\r\ngoto out_ap;\r\nrc = zcrypt_pcica_init();\r\nif (rc)\r\ngoto out_api;\r\nrc = zcrypt_pcicc_init();\r\nif (rc)\r\ngoto out_pcica;\r\nrc = zcrypt_pcixcc_init();\r\nif (rc)\r\ngoto out_pcicc;\r\nrc = zcrypt_cex2a_init();\r\nif (rc)\r\ngoto out_pcixcc;\r\nreturn 0;\r\nout_pcixcc:\r\nzcrypt_pcixcc_exit();\r\nout_pcicc:\r\nzcrypt_pcicc_exit();\r\nout_pcica:\r\nzcrypt_pcica_exit();\r\nout_api:\r\nzcrypt_api_exit();\r\nout_ap:\r\nap_module_exit();\r\nout:\r\nreturn rc;\r\n}\r\nstatic void __exit zcrypt_exit(void)\r\n{\r\nzcrypt_cex2a_exit();\r\nzcrypt_pcixcc_exit();\r\nzcrypt_pcicc_exit();\r\nzcrypt_pcica_exit();\r\nzcrypt_api_exit();\r\nap_module_exit();\r\n}
