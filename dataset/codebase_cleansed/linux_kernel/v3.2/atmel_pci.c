static int __devinit atmel_pci_probe(struct pci_dev *pdev,\r\nconst struct pci_device_id *pent)\r\n{\r\nstruct net_device *dev;\r\nif (pci_enable_device(pdev))\r\nreturn -ENODEV;\r\npci_set_master(pdev);\r\ndev = init_atmel_card(pdev->irq, pdev->resource[1].start,\r\nATMEL_FW_TYPE_506,\r\n&pdev->dev, NULL, NULL);\r\nif (!dev)\r\nreturn -ENODEV;\r\npci_set_drvdata(pdev, dev);\r\nreturn 0;\r\n}\r\nstatic void __devexit atmel_pci_remove(struct pci_dev *pdev)\r\n{\r\nstop_atmel_card(pci_get_drvdata(pdev));\r\n}\r\nstatic int __init atmel_init_module(void)\r\n{\r\nreturn pci_register_driver(&atmel_driver);\r\n}\r\nstatic void __exit atmel_cleanup_module(void)\r\n{\r\npci_unregister_driver(&atmel_driver);\r\n}
