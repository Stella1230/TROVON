int __init msp_eth_setup(void)\r\n{\r\nint i, ret = 0;\r\nmsp_gpio_pin_mode(MSP_GPIO_OUTPUT, MSP_ETHERNET_GPIO0);\r\nmsp_gpio_pin_hi(MSP_ETHERNET_GPIO0);\r\n#ifdef CONFIG_MSP_HAS_TSMAC\r\nmsp_gpio_pin_mode(MSP_GPIO_OUTPUT, MSP_ETHERNET_GPIO1);\r\nmsp_gpio_pin_hi(MSP_ETHERNET_GPIO1);\r\nmsp_gpio_pin_mode(MSP_GPIO_OUTPUT, MSP_ETHERNET_GPIO2);\r\nmsp_gpio_pin_hi(MSP_ETHERNET_GPIO2);\r\n#endif\r\nfor (i = 0; i < ARRAY_SIZE(msp_eth_devs); i++) {\r\nret = platform_device_register(&msp_eth_devs[i]);\r\nprintk(KERN_INFO "device: %d, return value = %d\n", i, ret);\r\nif (ret) {\r\nplatform_device_unregister(&msp_eth_devs[i]);\r\nbreak;\r\n}\r\n}\r\nif (ret)\r\nprintk(KERN_WARNING "Could not initialize "\r\n"MSPETH device structures.\n");\r\nreturn ret;\r\n}
