static int cma3000_i2c_set(struct device *dev,\r\nu8 reg, u8 val, char *msg)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nint ret;\r\nret = i2c_smbus_write_byte_data(client, reg, val);\r\nif (ret < 0)\r\ndev_err(&client->dev,\r\n"%s failed (%s, %d)\n", __func__, msg, ret);\r\nreturn ret;\r\n}\r\nstatic int cma3000_i2c_read(struct device *dev, u8 reg, char *msg)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nint ret;\r\nret = i2c_smbus_read_byte_data(client, reg);\r\nif (ret < 0)\r\ndev_err(&client->dev,\r\n"%s failed (%s, %d)\n", __func__, msg, ret);\r\nreturn ret;\r\n}\r\nstatic int __devinit cma3000_i2c_probe(struct i2c_client *client,\r\nconst struct i2c_device_id *id)\r\n{\r\nstruct cma3000_accl_data *data;\r\ndata = cma3000_init(&client->dev, client->irq, &cma3000_i2c_bops);\r\nif (IS_ERR(data))\r\nreturn PTR_ERR(data);\r\ni2c_set_clientdata(client, data);\r\nreturn 0;\r\n}\r\nstatic int __devexit cma3000_i2c_remove(struct i2c_client *client)\r\n{\r\nstruct cma3000_accl_data *data = i2c_get_clientdata(client);\r\ncma3000_exit(data);\r\nreturn 0;\r\n}\r\nstatic int cma3000_i2c_suspend(struct device *dev)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nstruct cma3000_accl_data *data = i2c_get_clientdata(client);\r\ncma3000_suspend(data);\r\nreturn 0;\r\n}\r\nstatic int cma3000_i2c_resume(struct device *dev)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nstruct cma3000_accl_data *data = i2c_get_clientdata(client);\r\ncma3000_resume(data);\r\nreturn 0;\r\n}\r\nstatic int __init cma3000_i2c_init(void)\r\n{\r\nreturn i2c_add_driver(&cma3000_i2c_driver);\r\n}\r\nstatic void __exit cma3000_i2c_exit(void)\r\n{\r\ni2c_del_driver(&cma3000_i2c_driver);\r\n}
