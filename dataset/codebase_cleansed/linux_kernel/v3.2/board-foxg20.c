static void __init foxg20_init_early(void)\r\n{\r\nat91_initialize(18432000);\r\nat91_register_uart(0, 0, 0);\r\nat91_register_uart(AT91SAM9260_ID_US0, 1,\r\nATMEL_UART_CTS\r\n| ATMEL_UART_RTS\r\n| ATMEL_UART_DTR\r\n| ATMEL_UART_DSR\r\n| ATMEL_UART_DCD\r\n| ATMEL_UART_RI);\r\nat91_register_uart(AT91SAM9260_ID_US1, 2,\r\nATMEL_UART_CTS\r\n| ATMEL_UART_RTS);\r\nat91_register_uart(AT91SAM9260_ID_US2, 3, 0);\r\nat91_register_uart(AT91SAM9260_ID_US3, 4,\r\nATMEL_UART_CTS\r\n| ATMEL_UART_RTS);\r\nat91_register_uart(AT91SAM9260_ID_US4, 5, 0);\r\nat91_register_uart(AT91SAM9260_ID_US5, 6, 0);\r\nat91_set_serial_console(0);\r\nat91_set_A_periph(AT91_PIN_PB14, 1);\r\n}\r\nstatic void __init foxg20_add_device_buttons(void)\r\n{\r\nat91_set_gpio_input(AT91_PIN_PC4, 1);\r\nat91_set_deglitch(AT91_PIN_PC4, 1);\r\nplatform_device_register(&foxg20_button_device);\r\n}\r\nstatic void __init foxg20_add_device_buttons(void) {}\r\nstatic void __init at91_add_device_w1(void)\r\n{\r\nat91_set_GPIO_periph(w1_gpio_pdata.pin, 1);\r\nat91_set_multi_drive(w1_gpio_pdata.pin, 1);\r\nplatform_device_register(&w1_device);\r\n}\r\nstatic void __init foxg20_board_init(void)\r\n{\r\nat91_add_device_serial();\r\nat91_add_device_usbh(&foxg20_usbh_data);\r\nat91_add_device_udc(&foxg20_udc_data);\r\nat91_add_device_spi(foxg20_spi_devices, ARRAY_SIZE(foxg20_spi_devices));\r\nat91_add_device_eth(&foxg20_macb_data);\r\nat91_add_device_mmc(0, &foxg20_mmc_data);\r\nat91_add_device_i2c(foxg20_i2c_devices, ARRAY_SIZE(foxg20_i2c_devices));\r\nat91_gpio_leds(foxg20_leds, ARRAY_SIZE(foxg20_leds));\r\nfoxg20_add_device_buttons();\r\n#if defined(CONFIG_W1_MASTER_GPIO) || defined(CONFIG_W1_MASTER_GPIO_MODULE)\r\nat91_add_device_w1();\r\n#endif\r\n}
