void\r\nsgl_denormalize(unsigned int *sgl_opnd, boolean *inexactflag, int rmode)\r\n{\r\nunsigned int opnd;\r\nint sign, exponent;\r\nboolean guardbit = FALSE, stickybit, inexact;\r\nopnd = *sgl_opnd;\r\nstickybit = *inexactflag;\r\nexponent = Sgl_exponent(opnd) - SGL_WRAP;\r\nsign = Sgl_sign(opnd);\r\nSgl_denormalize(opnd,exponent,guardbit,stickybit,inexact);\r\nif (inexact) {\r\nswitch (rmode) {\r\ncase ROUNDPLUS:\r\nif (sign == 0) {\r\nSgl_increment(opnd);\r\n}\r\nbreak;\r\ncase ROUNDMINUS:\r\nif (sign != 0) {\r\nSgl_increment(opnd);\r\n}\r\nbreak;\r\ncase ROUNDNEAREST:\r\nif (guardbit && (stickybit ||\r\nSgl_isone_lowmantissa(opnd))) {\r\nSgl_increment(opnd);\r\n}\r\nbreak;\r\n}\r\n}\r\nSgl_set_sign(opnd,sign);\r\n*sgl_opnd = opnd;\r\n*inexactflag = inexact;\r\nreturn;\r\n}\r\nvoid\r\ndbl_denormalize(unsigned int *dbl_opndp1,\r\nunsigned int * dbl_opndp2,\r\nboolean *inexactflag,\r\nint rmode)\r\n{\r\nunsigned int opndp1, opndp2;\r\nint sign, exponent;\r\nboolean guardbit = FALSE, stickybit, inexact;\r\nopndp1 = *dbl_opndp1;\r\nopndp2 = *dbl_opndp2;\r\nstickybit = *inexactflag;\r\nexponent = Dbl_exponent(opndp1) - DBL_WRAP;\r\nsign = Dbl_sign(opndp1);\r\nDbl_denormalize(opndp1,opndp2,exponent,guardbit,stickybit,inexact);\r\nif (inexact) {\r\nswitch (rmode) {\r\ncase ROUNDPLUS:\r\nif (sign == 0) {\r\nDbl_increment(opndp1,opndp2);\r\n}\r\nbreak;\r\ncase ROUNDMINUS:\r\nif (sign != 0) {\r\nDbl_increment(opndp1,opndp2);\r\n}\r\nbreak;\r\ncase ROUNDNEAREST:\r\nif (guardbit && (stickybit ||\r\nDbl_isone_lowmantissap2(opndp2))) {\r\nDbl_increment(opndp1,opndp2);\r\n}\r\nbreak;\r\n}\r\n}\r\nDbl_set_sign(opndp1,sign);\r\n*dbl_opndp1 = opndp1;\r\n*dbl_opndp2 = opndp2;\r\n*inexactflag = inexact;\r\nreturn;\r\n}
