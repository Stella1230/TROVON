void foo(void)\r\n{\r\nOFFSET(IA32_SIGCONTEXT_ax, sigcontext, ax);\r\nOFFSET(IA32_SIGCONTEXT_bx, sigcontext, bx);\r\nOFFSET(IA32_SIGCONTEXT_cx, sigcontext, cx);\r\nOFFSET(IA32_SIGCONTEXT_dx, sigcontext, dx);\r\nOFFSET(IA32_SIGCONTEXT_si, sigcontext, si);\r\nOFFSET(IA32_SIGCONTEXT_di, sigcontext, di);\r\nOFFSET(IA32_SIGCONTEXT_bp, sigcontext, bp);\r\nOFFSET(IA32_SIGCONTEXT_sp, sigcontext, sp);\r\nOFFSET(IA32_SIGCONTEXT_ip, sigcontext, ip);\r\nBLANK();\r\nOFFSET(CPUINFO_x86, cpuinfo_x86, x86);\r\nOFFSET(CPUINFO_x86_vendor, cpuinfo_x86, x86_vendor);\r\nOFFSET(CPUINFO_x86_model, cpuinfo_x86, x86_model);\r\nOFFSET(CPUINFO_x86_mask, cpuinfo_x86, x86_mask);\r\nOFFSET(CPUINFO_hard_math, cpuinfo_x86, hard_math);\r\nOFFSET(CPUINFO_cpuid_level, cpuinfo_x86, cpuid_level);\r\nOFFSET(CPUINFO_x86_capability, cpuinfo_x86, x86_capability);\r\nOFFSET(CPUINFO_x86_vendor_id, cpuinfo_x86, x86_vendor_id);\r\nBLANK();\r\nOFFSET(TI_sysenter_return, thread_info, sysenter_return);\r\nOFFSET(TI_cpu, thread_info, cpu);\r\nBLANK();\r\nOFFSET(PT_EBX, pt_regs, bx);\r\nOFFSET(PT_ECX, pt_regs, cx);\r\nOFFSET(PT_EDX, pt_regs, dx);\r\nOFFSET(PT_ESI, pt_regs, si);\r\nOFFSET(PT_EDI, pt_regs, di);\r\nOFFSET(PT_EBP, pt_regs, bp);\r\nOFFSET(PT_EAX, pt_regs, ax);\r\nOFFSET(PT_DS, pt_regs, ds);\r\nOFFSET(PT_ES, pt_regs, es);\r\nOFFSET(PT_FS, pt_regs, fs);\r\nOFFSET(PT_GS, pt_regs, gs);\r\nOFFSET(PT_ORIG_EAX, pt_regs, orig_ax);\r\nOFFSET(PT_EIP, pt_regs, ip);\r\nOFFSET(PT_CS, pt_regs, cs);\r\nOFFSET(PT_EFLAGS, pt_regs, flags);\r\nOFFSET(PT_OLDESP, pt_regs, sp);\r\nOFFSET(PT_OLDSS, pt_regs, ss);\r\nBLANK();\r\nOFFSET(IA32_RT_SIGFRAME_sigcontext, rt_sigframe, uc.uc_mcontext);\r\nBLANK();\r\nDEFINE(TSS_sysenter_sp0, offsetof(struct tss_struct, x86_tss.sp0) -\r\nsizeof(struct tss_struct));\r\n#if defined(CONFIG_LGUEST) || defined(CONFIG_LGUEST_GUEST) || defined(CONFIG_LGUEST_MODULE)\r\nBLANK();\r\nOFFSET(LGUEST_DATA_irq_enabled, lguest_data, irq_enabled);\r\nOFFSET(LGUEST_DATA_irq_pending, lguest_data, irq_pending);\r\nBLANK();\r\nOFFSET(LGUEST_PAGES_host_gdt_desc, lguest_pages, state.host_gdt_desc);\r\nOFFSET(LGUEST_PAGES_host_idt_desc, lguest_pages, state.host_idt_desc);\r\nOFFSET(LGUEST_PAGES_host_cr3, lguest_pages, state.host_cr3);\r\nOFFSET(LGUEST_PAGES_host_sp, lguest_pages, state.host_sp);\r\nOFFSET(LGUEST_PAGES_guest_gdt_desc, lguest_pages,state.guest_gdt_desc);\r\nOFFSET(LGUEST_PAGES_guest_idt_desc, lguest_pages,state.guest_idt_desc);\r\nOFFSET(LGUEST_PAGES_guest_gdt, lguest_pages, state.guest_gdt);\r\nOFFSET(LGUEST_PAGES_regs_trapnum, lguest_pages, regs.trapnum);\r\nOFFSET(LGUEST_PAGES_regs_errcode, lguest_pages, regs.errcode);\r\nOFFSET(LGUEST_PAGES_regs, lguest_pages, regs);\r\n#endif\r\n}
