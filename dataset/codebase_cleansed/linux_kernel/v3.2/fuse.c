static inline u32 fuse_readl(unsigned long offset)\r\n{\r\nreturn readl(IO_TO_VIRT(TEGRA_FUSE_BASE + offset));\r\n}\r\nstatic inline void fuse_writel(u32 value, unsigned long offset)\r\n{\r\nwritel(value, IO_TO_VIRT(TEGRA_FUSE_BASE + offset));\r\n}\r\nvoid tegra_init_fuse(void)\r\n{\r\nu32 reg = readl(IO_TO_VIRT(TEGRA_CLK_RESET_BASE + 0x48));\r\nreg |= 1 << 28;\r\nwritel(reg, IO_TO_VIRT(TEGRA_CLK_RESET_BASE + 0x48));\r\npr_info("Tegra SKU: %d CPU Process: %d Core Process: %d\n",\r\ntegra_sku_id(), tegra_cpu_process_id(),\r\ntegra_core_process_id());\r\n}\r\nunsigned long long tegra_chip_uid(void)\r\n{\r\nunsigned long long lo, hi;\r\nlo = fuse_readl(FUSE_UID_LOW);\r\nhi = fuse_readl(FUSE_UID_HIGH);\r\nreturn (hi << 32ull) | lo;\r\n}\r\nint tegra_sku_id(void)\r\n{\r\nint sku_id;\r\nu32 reg = fuse_readl(FUSE_SKU_INFO);\r\nsku_id = reg & 0xFF;\r\nreturn sku_id;\r\n}\r\nint tegra_cpu_process_id(void)\r\n{\r\nint cpu_process_id;\r\nu32 reg = fuse_readl(FUSE_SPARE_BIT);\r\ncpu_process_id = (reg >> 6) & 3;\r\nreturn cpu_process_id;\r\n}\r\nint tegra_core_process_id(void)\r\n{\r\nint core_process_id;\r\nu32 reg = fuse_readl(FUSE_SPARE_BIT);\r\ncore_process_id = (reg >> 12) & 3;\r\nreturn core_process_id;\r\n}
