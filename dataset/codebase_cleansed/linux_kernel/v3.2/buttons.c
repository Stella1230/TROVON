static __init int cobalt_add_buttons(void)\r\n{\r\nstruct platform_device *pd;\r\nint error;\r\npd = platform_device_alloc("Cobalt buttons", -1);\r\nif (!pd)\r\nreturn -ENOMEM;\r\nerror = platform_device_add_resources(pd, &cobalt_buttons_resource, 1);\r\nif (error)\r\ngoto err_free_device;\r\nerror = platform_device_add(pd);\r\nif (error)\r\ngoto err_free_device;\r\nreturn 0;\r\nerr_free_device:\r\nplatform_device_put(pd);\r\nreturn error;\r\n}
