void __init stamp9g20_init_early(void)\r\n{\r\nat91_initialize(18432000);\r\nat91_register_uart(0, 0, 0);\r\nat91_set_serial_console(0);\r\n}\r\nstatic void __init stamp9g20evb_init_early(void)\r\n{\r\nstamp9g20_init_early();\r\nat91_register_uart(AT91SAM9260_ID_US0, 1, ATMEL_UART_CTS | ATMEL_UART_RTS\r\n| ATMEL_UART_DTR | ATMEL_UART_DSR\r\n| ATMEL_UART_DCD | ATMEL_UART_RI);\r\n}\r\nstatic void __init portuxg20_init_early(void)\r\n{\r\nstamp9g20_init_early();\r\nat91_register_uart(AT91SAM9260_ID_US0, 1, ATMEL_UART_CTS | ATMEL_UART_RTS\r\n| ATMEL_UART_DTR | ATMEL_UART_DSR\r\n| ATMEL_UART_DCD | ATMEL_UART_RI);\r\nat91_register_uart(AT91SAM9260_ID_US1, 2, ATMEL_UART_CTS | ATMEL_UART_RTS);\r\nat91_register_uart(AT91SAM9260_ID_US2, 3, ATMEL_UART_CTS | ATMEL_UART_RTS);\r\nat91_register_uart(AT91SAM9260_ID_US4, 5, 0);\r\nat91_register_uart(AT91SAM9260_ID_US5, 6, 0);\r\n}\r\nstatic void __init add_device_nand(void)\r\n{\r\nsam9_smc_configure(3, &nand_smc_config);\r\nat91_add_device_nand(&nand_data);\r\n}\r\nvoid add_w1(void)\r\n{\r\nat91_set_GPIO_periph(w1_gpio_pdata.pin, 1);\r\nat91_set_multi_drive(w1_gpio_pdata.pin, 1);\r\nplatform_device_register(&w1_device);\r\n}\r\nvoid __init stamp9g20_board_init(void)\r\n{\r\nat91_add_device_serial();\r\nadd_device_nand();\r\n#if defined(CONFIG_MMC_ATMELMCI) || defined(CONFIG_MMC_ATMELMCI_MODULE)\r\nat91_add_device_mci(0, &mmc_data);\r\n#else\r\nat91_add_device_mmc(0, &mmc_data);\r\n#endif\r\nadd_w1();\r\n}\r\nstatic void __init portuxg20_board_init(void)\r\n{\r\nstamp9g20_board_init();\r\nat91_add_device_usbh(&usbh_data);\r\nat91_add_device_udc(&portuxg20_udc_data);\r\nat91_add_device_eth(&macb_data);\r\nat91_add_device_i2c(NULL, 0);\r\nat91_add_device_spi(portuxg20_spi_devices, ARRAY_SIZE(portuxg20_spi_devices));\r\nat91_gpio_leds(portuxg20_leds, ARRAY_SIZE(portuxg20_leds));\r\n}\r\nstatic void __init stamp9g20evb_board_init(void)\r\n{\r\nstamp9g20_board_init();\r\nat91_add_device_usbh(&usbh_data);\r\nat91_add_device_udc(&stamp9g20evb_udc_data);\r\nat91_add_device_eth(&macb_data);\r\nat91_add_device_i2c(NULL, 0);\r\nat91_gpio_leds(stamp9g20evb_leds, ARRAY_SIZE(stamp9g20evb_leds));\r\n}
