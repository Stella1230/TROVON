void isc_register(unsigned int isc)\r\n{\r\nif (isc > MAX_ISC) {\r\nWARN_ON(1);\r\nreturn;\r\n}\r\nspin_lock(&isc_ref_lock);\r\nif (isc_refs[isc] == 0)\r\nctl_set_bit(6, 31 - isc);\r\nisc_refs[isc]++;\r\nspin_unlock(&isc_ref_lock);\r\n}\r\nvoid isc_unregister(unsigned int isc)\r\n{\r\nspin_lock(&isc_ref_lock);\r\nif (isc > MAX_ISC || isc_refs[isc] == 0) {\r\nWARN_ON(1);\r\ngoto out_unlock;\r\n}\r\nif (isc_refs[isc] == 1)\r\nctl_clear_bit(6, 31 - isc);\r\nisc_refs[isc]--;\r\nout_unlock:\r\nspin_unlock(&isc_ref_lock);\r\n}
