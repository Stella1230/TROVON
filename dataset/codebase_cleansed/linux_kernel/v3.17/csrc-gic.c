static cycle_t gic_hpt_read(struct clocksource *cs)\r\n{\r\nreturn gic_read_count();\r\n}\r\nvoid __init gic_clocksource_init(unsigned int frequency)\r\n{\r\nunsigned int config, bits;\r\nGICREAD(GIC_REG(SHARED, GIC_SH_CONFIG), config);\r\nbits = 32 + ((config & GIC_SH_CONFIG_COUNTBITS_MSK) >>\r\n(GIC_SH_CONFIG_COUNTBITS_SHF - 2));\r\ngic_clocksource.mask = CLOCKSOURCE_MASK(bits);\r\ngic_clocksource.rating = 200 + frequency / 10000000;\r\nclocksource_register_hz(&gic_clocksource, frequency);\r\n}
