static int show_softirqs(struct seq_file *p, void *v)\r\n{\r\nint i, j;\r\nseq_puts(p, " ");\r\nfor_each_possible_cpu(i)\r\nseq_printf(p, "CPU%-8d", i);\r\nseq_putc(p, '\n');\r\nfor (i = 0; i < NR_SOFTIRQS; i++) {\r\nseq_printf(p, "%12s:", softirq_to_name[i]);\r\nfor_each_possible_cpu(j)\r\nseq_printf(p, " %10u", kstat_softirqs_cpu(i, j));\r\nseq_putc(p, '\n');\r\n}\r\nreturn 0;\r\n}\r\nstatic int softirqs_open(struct inode *inode, struct file *file)\r\n{\r\nreturn single_open(file, show_softirqs, NULL);\r\n}\r\nstatic int __init proc_softirqs_init(void)\r\n{\r\nproc_create("softirqs", 0, NULL, &proc_softirqs_operations);\r\nreturn 0;\r\n}
