static void *lzo_create(void)\r\n{\r\nreturn kzalloc(LZO1X_MEM_COMPRESS, GFP_KERNEL);\r\n}\r\nstatic void lzo_destroy(void *private)\r\n{\r\nkfree(private);\r\n}\r\nstatic int lzo_compress(const unsigned char *src, unsigned char *dst,\r\nsize_t *dst_len, void *private)\r\n{\r\nint ret = lzo1x_1_compress(src, PAGE_SIZE, dst, dst_len, private);\r\nreturn ret == LZO_E_OK ? 0 : ret;\r\n}\r\nstatic int lzo_decompress(const unsigned char *src, size_t src_len,\r\nunsigned char *dst)\r\n{\r\nsize_t dst_len = PAGE_SIZE;\r\nint ret = lzo1x_decompress_safe(src, src_len, dst, &dst_len);\r\nreturn ret == LZO_E_OK ? 0 : ret;\r\n}
