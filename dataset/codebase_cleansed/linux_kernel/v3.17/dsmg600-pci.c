void __init dsmg600_pci_preinit(void)\r\n{\r\nirq_set_irq_type(IXP4XX_GPIO_IRQ(INTA), IRQ_TYPE_LEVEL_LOW);\r\nirq_set_irq_type(IXP4XX_GPIO_IRQ(INTB), IRQ_TYPE_LEVEL_LOW);\r\nirq_set_irq_type(IXP4XX_GPIO_IRQ(INTC), IRQ_TYPE_LEVEL_LOW);\r\nirq_set_irq_type(IXP4XX_GPIO_IRQ(INTD), IRQ_TYPE_LEVEL_LOW);\r\nirq_set_irq_type(IXP4XX_GPIO_IRQ(INTE), IRQ_TYPE_LEVEL_LOW);\r\nirq_set_irq_type(IXP4XX_GPIO_IRQ(INTF), IRQ_TYPE_LEVEL_LOW);\r\nixp4xx_pci_preinit();\r\n}\r\nstatic int __init dsmg600_map_irq(const struct pci_dev *dev, u8 slot, u8 pin)\r\n{\r\nstatic int pci_irq_table[MAX_DEV][IRQ_LINES] = {\r\n{ IXP4XX_GPIO_IRQ(INTE), -1, -1 },\r\n{ IXP4XX_GPIO_IRQ(INTA), -1, -1 },\r\n{ IXP4XX_GPIO_IRQ(INTB), IXP4XX_GPIO_IRQ(INTC),\r\nIXP4XX_GPIO_IRQ(INTD) },\r\n{ IXP4XX_GPIO_IRQ(INTF), -1, -1 },\r\n};\r\nif (slot >= 1 && slot <= MAX_DEV && pin >= 1 && pin <= IRQ_LINES)\r\nreturn pci_irq_table[slot - 1][pin - 1];\r\nreturn -1;\r\n}\r\nint __init dsmg600_pci_init(void)\r\n{\r\nif (machine_is_dsmg600())\r\npci_common_init(&dsmg600_pci);\r\nreturn 0;\r\n}
