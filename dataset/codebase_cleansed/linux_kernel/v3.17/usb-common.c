const char *usb_otg_state_string(enum usb_otg_state state)\r\n{\r\nstatic const char *const names[] = {\r\n[OTG_STATE_A_IDLE] = "a_idle",\r\n[OTG_STATE_A_WAIT_VRISE] = "a_wait_vrise",\r\n[OTG_STATE_A_WAIT_BCON] = "a_wait_bcon",\r\n[OTG_STATE_A_HOST] = "a_host",\r\n[OTG_STATE_A_SUSPEND] = "a_suspend",\r\n[OTG_STATE_A_PERIPHERAL] = "a_peripheral",\r\n[OTG_STATE_A_WAIT_VFALL] = "a_wait_vfall",\r\n[OTG_STATE_A_VBUS_ERR] = "a_vbus_err",\r\n[OTG_STATE_B_IDLE] = "b_idle",\r\n[OTG_STATE_B_SRP_INIT] = "b_srp_init",\r\n[OTG_STATE_B_PERIPHERAL] = "b_peripheral",\r\n[OTG_STATE_B_WAIT_ACON] = "b_wait_acon",\r\n[OTG_STATE_B_HOST] = "b_host",\r\n};\r\nif (state < 0 || state >= ARRAY_SIZE(names))\r\nreturn "UNDEFINED";\r\nreturn names[state];\r\n}\r\nconst char *usb_speed_string(enum usb_device_speed speed)\r\n{\r\nif (speed < 0 || speed >= ARRAY_SIZE(speed_names))\r\nspeed = USB_SPEED_UNKNOWN;\r\nreturn speed_names[speed];\r\n}\r\nconst char *usb_state_string(enum usb_device_state state)\r\n{\r\nstatic const char *const names[] = {\r\n[USB_STATE_NOTATTACHED] = "not attached",\r\n[USB_STATE_ATTACHED] = "attached",\r\n[USB_STATE_POWERED] = "powered",\r\n[USB_STATE_RECONNECTING] = "reconnecting",\r\n[USB_STATE_UNAUTHENTICATED] = "unauthenticated",\r\n[USB_STATE_DEFAULT] = "default",\r\n[USB_STATE_ADDRESS] = "addressed",\r\n[USB_STATE_CONFIGURED] = "configured",\r\n[USB_STATE_SUSPENDED] = "suspended",\r\n};\r\nif (state < 0 || state >= ARRAY_SIZE(names))\r\nreturn "UNKNOWN";\r\nreturn names[state];\r\n}\r\nenum usb_dr_mode of_usb_get_dr_mode(struct device_node *np)\r\n{\r\nconst char *dr_mode;\r\nint err, i;\r\nerr = of_property_read_string(np, "dr_mode", &dr_mode);\r\nif (err < 0)\r\nreturn USB_DR_MODE_UNKNOWN;\r\nfor (i = 0; i < ARRAY_SIZE(usb_dr_modes); i++)\r\nif (!strcmp(dr_mode, usb_dr_modes[i]))\r\nreturn i;\r\nreturn USB_DR_MODE_UNKNOWN;\r\n}\r\nenum usb_device_speed of_usb_get_maximum_speed(struct device_node *np)\r\n{\r\nconst char *maximum_speed;\r\nint err;\r\nint i;\r\nerr = of_property_read_string(np, "maximum-speed", &maximum_speed);\r\nif (err < 0)\r\nreturn USB_SPEED_UNKNOWN;\r\nfor (i = 0; i < ARRAY_SIZE(speed_names); i++)\r\nif (strcmp(maximum_speed, speed_names[i]) == 0)\r\nreturn i;\r\nreturn USB_SPEED_UNKNOWN;\r\n}
