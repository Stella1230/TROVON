int gxio_trio_alloc_asids(gxio_trio_context_t *context, unsigned int count,\r\nunsigned int first, unsigned int flags)\r\n{\r\nstruct alloc_asids_param temp;\r\nstruct alloc_asids_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_ALLOC_ASIDS);\r\n}\r\nint gxio_trio_alloc_memory_maps(gxio_trio_context_t *context,\r\nunsigned int count, unsigned int first,\r\nunsigned int flags)\r\n{\r\nstruct alloc_memory_maps_param temp;\r\nstruct alloc_memory_maps_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_ALLOC_MEMORY_MAPS);\r\n}\r\nint gxio_trio_alloc_scatter_queues(gxio_trio_context_t *context,\r\nunsigned int count, unsigned int first,\r\nunsigned int flags)\r\n{\r\nstruct alloc_scatter_queues_param temp;\r\nstruct alloc_scatter_queues_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_TRIO_OP_ALLOC_SCATTER_QUEUES);\r\n}\r\nint gxio_trio_alloc_pio_regions(gxio_trio_context_t *context,\r\nunsigned int count, unsigned int first,\r\nunsigned int flags)\r\n{\r\nstruct alloc_pio_regions_param temp;\r\nstruct alloc_pio_regions_param *params = &temp;\r\nparams->count = count;\r\nparams->first = first;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_ALLOC_PIO_REGIONS);\r\n}\r\nint gxio_trio_init_pio_region_aux(gxio_trio_context_t *context,\r\nunsigned int pio_region, unsigned int mac,\r\nuint32_t bus_address_hi, unsigned int flags)\r\n{\r\nstruct init_pio_region_aux_param temp;\r\nstruct init_pio_region_aux_param *params = &temp;\r\nparams->pio_region = pio_region;\r\nparams->mac = mac;\r\nparams->bus_address_hi = bus_address_hi;\r\nparams->flags = flags;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_INIT_PIO_REGION_AUX);\r\n}\r\nint gxio_trio_init_memory_map_mmu_aux(gxio_trio_context_t *context,\r\nunsigned int map, unsigned long va,\r\nuint64_t size, unsigned int asid,\r\nunsigned int mac, uint64_t bus_address,\r\nunsigned int node,\r\nunsigned int order_mode)\r\n{\r\nstruct init_memory_map_mmu_aux_param temp;\r\nstruct init_memory_map_mmu_aux_param *params = &temp;\r\nparams->map = map;\r\nparams->va = va;\r\nparams->size = size;\r\nparams->asid = asid;\r\nparams->mac = mac;\r\nparams->bus_address = bus_address;\r\nparams->node = node;\r\nparams->order_mode = order_mode;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params),\r\nGXIO_TRIO_OP_INIT_MEMORY_MAP_MMU_AUX);\r\n}\r\nint gxio_trio_get_port_property(gxio_trio_context_t *context,\r\nstruct pcie_trio_ports_property *trio_ports)\r\n{\r\nint __result;\r\nstruct get_port_property_param temp;\r\nstruct get_port_property_param *params = &temp;\r\n__result =\r\nhv_dev_pread(context->fd, 0, (HV_VirtAddr) params, sizeof(*params),\r\nGXIO_TRIO_OP_GET_PORT_PROPERTY);\r\n*trio_ports = params->trio_ports;\r\nreturn __result;\r\n}\r\nint gxio_trio_config_legacy_intr(gxio_trio_context_t *context, int inter_x,\r\nint inter_y, int inter_ipi, int inter_event,\r\nunsigned int mac, unsigned int intx)\r\n{\r\nstruct config_legacy_intr_param temp;\r\nstruct config_legacy_intr_param *params = &temp;\r\nparams->interrupt.kernel.x = inter_x;\r\nparams->interrupt.kernel.y = inter_y;\r\nparams->interrupt.kernel.ipi = inter_ipi;\r\nparams->interrupt.kernel.event = inter_event;\r\nparams->mac = mac;\r\nparams->intx = intx;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_CONFIG_LEGACY_INTR);\r\n}\r\nint gxio_trio_config_msi_intr(gxio_trio_context_t *context, int inter_x,\r\nint inter_y, int inter_ipi, int inter_event,\r\nunsigned int mac, unsigned int mem_map,\r\nuint64_t mem_map_base, uint64_t mem_map_limit,\r\nunsigned int asid)\r\n{\r\nstruct config_msi_intr_param temp;\r\nstruct config_msi_intr_param *params = &temp;\r\nparams->interrupt.kernel.x = inter_x;\r\nparams->interrupt.kernel.y = inter_y;\r\nparams->interrupt.kernel.ipi = inter_ipi;\r\nparams->interrupt.kernel.event = inter_event;\r\nparams->mac = mac;\r\nparams->mem_map = mem_map;\r\nparams->mem_map_base = mem_map_base;\r\nparams->mem_map_limit = mem_map_limit;\r\nparams->asid = asid;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_CONFIG_MSI_INTR);\r\n}\r\nint gxio_trio_set_mps_mrs(gxio_trio_context_t *context, uint16_t mps,\r\nuint16_t mrs, unsigned int mac)\r\n{\r\nstruct set_mps_mrs_param temp;\r\nstruct set_mps_mrs_param *params = &temp;\r\nparams->mps = mps;\r\nparams->mrs = mrs;\r\nparams->mac = mac;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_SET_MPS_MRS);\r\n}\r\nint gxio_trio_force_rc_link_up(gxio_trio_context_t *context, unsigned int mac)\r\n{\r\nstruct force_rc_link_up_param temp;\r\nstruct force_rc_link_up_param *params = &temp;\r\nparams->mac = mac;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_FORCE_RC_LINK_UP);\r\n}\r\nint gxio_trio_force_ep_link_up(gxio_trio_context_t *context, unsigned int mac)\r\n{\r\nstruct force_ep_link_up_param temp;\r\nstruct force_ep_link_up_param *params = &temp;\r\nparams->mac = mac;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_FORCE_EP_LINK_UP);\r\n}\r\nint gxio_trio_get_mmio_base(gxio_trio_context_t *context, HV_PTE *base)\r\n{\r\nint __result;\r\nstruct get_mmio_base_param temp;\r\nstruct get_mmio_base_param *params = &temp;\r\n__result =\r\nhv_dev_pread(context->fd, 0, (HV_VirtAddr) params, sizeof(*params),\r\nGXIO_TRIO_OP_GET_MMIO_BASE);\r\n*base = params->base;\r\nreturn __result;\r\n}\r\nint gxio_trio_check_mmio_offset(gxio_trio_context_t *context,\r\nunsigned long offset, unsigned long size)\r\n{\r\nstruct check_mmio_offset_param temp;\r\nstruct check_mmio_offset_param *params = &temp;\r\nparams->offset = offset;\r\nparams->size = size;\r\nreturn hv_dev_pwrite(context->fd, 0, (HV_VirtAddr) params,\r\nsizeof(*params), GXIO_TRIO_OP_CHECK_MMIO_OFFSET);\r\n}
