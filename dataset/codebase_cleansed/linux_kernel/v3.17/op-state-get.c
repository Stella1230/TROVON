int wimax_gnl_doit_state_get(struct sk_buff *skb, struct genl_info *info)\r\n{\r\nint result, ifindex;\r\nstruct wimax_dev *wimax_dev;\r\nd_fnstart(3, NULL, "(skb %p info %p)\n", skb, info);\r\nresult = -ENODEV;\r\nif (info->attrs[WIMAX_GNL_STGET_IFIDX] == NULL) {\r\nprintk(KERN_ERR "WIMAX_GNL_OP_STATE_GET: can't find IFIDX "\r\n"attribute\n");\r\ngoto error_no_wimax_dev;\r\n}\r\nifindex = nla_get_u32(info->attrs[WIMAX_GNL_STGET_IFIDX]);\r\nwimax_dev = wimax_dev_get_by_genl_info(info, ifindex);\r\nif (wimax_dev == NULL)\r\ngoto error_no_wimax_dev;\r\nresult = wimax_state_get(wimax_dev);\r\ndev_put(wimax_dev->net_dev);\r\nerror_no_wimax_dev:\r\nd_fnend(3, NULL, "(skb %p info %p) = %d\n", skb, info, result);\r\nreturn result;\r\n}
