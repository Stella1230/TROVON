int drm_get_usb_dev(struct usb_interface *interface,\r\nconst struct usb_device_id *id,\r\nstruct drm_driver *driver)\r\n{\r\nstruct drm_device *dev;\r\nint ret;\r\nDRM_DEBUG("\n");\r\ndev = drm_dev_alloc(driver, &interface->dev);\r\nif (!dev)\r\nreturn -ENOMEM;\r\ndev->usbdev = interface_to_usbdev(interface);\r\nusb_set_intfdata(interface, dev);\r\nret = drm_dev_register(dev, 0);\r\nif (ret)\r\ngoto err_free;\r\nDRM_INFO("Initialized %s %d.%d.%d %s on minor %d\n",\r\ndriver->name, driver->major, driver->minor, driver->patchlevel,\r\ndriver->date, dev->primary->index);\r\nreturn 0;\r\nerr_free:\r\ndrm_dev_unref(dev);\r\nreturn ret;\r\n}\r\nstatic int drm_usb_set_busid(struct drm_device *dev,\r\nstruct drm_master *master)\r\n{\r\nreturn 0;\r\n}\r\nint drm_usb_init(struct drm_driver *driver, struct usb_driver *udriver)\r\n{\r\nint res;\r\nDRM_DEBUG("\n");\r\ndriver->bus = &drm_usb_bus;\r\nres = usb_register(udriver);\r\nreturn res;\r\n}\r\nvoid drm_usb_exit(struct drm_driver *driver,\r\nstruct usb_driver *udriver)\r\n{\r\nusb_deregister(udriver);\r\n}
