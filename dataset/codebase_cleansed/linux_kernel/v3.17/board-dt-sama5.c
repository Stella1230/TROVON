static void __init sama5_dt_timer_init(void)\r\n{\r\n#if defined(CONFIG_COMMON_CLK)\r\nof_clk_init(NULL);\r\n#endif\r\nat91sam926x_pit_init();\r\n}\r\nstatic void __init at91_dt_init_irq(void)\r\n{\r\nof_irq_init(irq_of_match);\r\n}\r\nstatic int ksz9021rn_phy_fixup(struct phy_device *phy)\r\n{\r\nint value;\r\nvalue = MICREL_KSZ9021_RGMII_CLK_CTRL_PAD_SCEW | 0x8000;\r\nphy_write(phy, MICREL_KSZ9021_EXTREG_CTRL, value);\r\nvalue = 0xF2F4;\r\nphy_write(phy, MICREL_KSZ9021_EXTREG_DATA_WRITE, value);\r\nvalue = MICREL_KSZ9021_RGMII_RX_DATA_PAD_SCEW | 0x8000;\r\nphy_write(phy, MICREL_KSZ9021_EXTREG_CTRL, value);\r\nvalue = 0x2222;\r\nphy_write(phy, MICREL_KSZ9021_EXTREG_DATA_WRITE, value);\r\nreturn 0;\r\n}\r\nstatic void __init sama5_dt_device_init(void)\r\n{\r\nif (of_machine_is_compatible("atmel,sama5d3xcm") &&\r\nIS_ENABLED(CONFIG_PHYLIB))\r\nphy_register_fixup_for_uid(PHY_ID_KSZ9021, MICREL_PHY_ID_MASK,\r\nksz9021rn_phy_fixup);\r\nof_platform_populate(NULL, of_default_bus_match_table, NULL, NULL);\r\n}
