void gdm_set_endian(struct gdm_endian *ed, u8 dev_endian)\r\n{\r\nu8 a[2] = {0x12, 0x34};\r\nu8 b[2] = {0, };\r\nu16 c = 0x1234;\r\nif (dev_endian == ENDIANNESS_BIG)\r\ned->dev_ed = ENDIANNESS_BIG;\r\nelse\r\ned->dev_ed = ENDIANNESS_LITTLE;\r\nmemcpy(b, &c, 2);\r\nif (a[0] != b[0])\r\ned->host_ed = ENDIANNESS_LITTLE;\r\nelse\r\ned->host_ed = ENDIANNESS_BIG;\r\n}\r\nu16 gdm_cpu_to_dev16(struct gdm_endian *ed, u16 x)\r\n{\r\nif (ed->dev_ed == ed->host_ed)\r\nreturn x;\r\nreturn Endian16_Swap(x);\r\n}\r\nu16 gdm_dev16_to_cpu(struct gdm_endian *ed, u16 x)\r\n{\r\nif (ed->dev_ed == ed->host_ed)\r\nreturn x;\r\nreturn Endian16_Swap(x);\r\n}\r\nu32 gdm_cpu_to_dev32(struct gdm_endian *ed, u32 x)\r\n{\r\nif (ed->dev_ed == ed->host_ed)\r\nreturn x;\r\nreturn Endian32_Swap(x);\r\n}\r\nu32 gdm_dev32_to_cpu(struct gdm_endian *ed, u32 x)\r\n{\r\nif (ed->dev_ed == ed->host_ed)\r\nreturn x;\r\nreturn Endian32_Swap(x);\r\n}
