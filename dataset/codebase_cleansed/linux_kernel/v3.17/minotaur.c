static int __init minotaur_init(void)\r\n{\r\nprintk(KERN_INFO "%s(): registering device resources\n", __func__);\r\nplatform_add_devices(minotaur_devices, ARRAY_SIZE(minotaur_devices));\r\n#if IS_ENABLED(CONFIG_SPI_BFIN5XX)\r\nspi_register_board_info(bfin_spi_board_info,\r\nARRAY_SIZE(bfin_spi_board_info));\r\n#endif\r\nreturn 0;\r\n}\r\nvoid __init native_machine_early_platform_add_devices(void)\r\n{\r\nprintk(KERN_INFO "register early platform devices\n");\r\nearly_platform_add_devices(minotaur_early_devices,\r\nARRAY_SIZE(minotaur_early_devices));\r\n}\r\nvoid native_machine_restart(char *cmd)\r\n{\r\nif ((bfin_read_SYSCR() & 0x7) == 0x3)\r\nbfin_reset_boot_spi_cs(P_DEFAULT_BOOT_SPI_CS);\r\n}
