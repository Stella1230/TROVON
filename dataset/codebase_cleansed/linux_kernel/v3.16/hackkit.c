static void __init hackkit_map_io(void)\r\n{\r\nsa1100_map_io();\r\niotable_init(hackkit_io_desc, ARRAY_SIZE(hackkit_io_desc));\r\nsa1100_register_uart_fns(&hackkit_port_fns);\r\nsa1100_register_uart(0, 1);\r\nsa1100_register_uart(1, 2);\r\nsa1100_register_uart(2, 3);\r\nSer1SDCR0 |= SDCR0_SUS;\r\n}\r\nstatic void hackkit_uart_pm(struct uart_port *port, u_int state, u_int oldstate)\r\n{\r\n}\r\nstatic void hackkit_set_mctrl(struct uart_port *port, u_int mctrl)\r\n{\r\n#if 0\r\nif (port->mapbase == _Ser1UTCR0) {\r\nu_int set = 0, clear = 0;\r\nif (mctrl & TIOCM_RTS)\r\nset |= PT_CTRL2_RS1_RTS;\r\nelse\r\nclear |= PT_CTRL2_RS1_RTS;\r\nif (mctrl & TIOCM_DTR)\r\nset |= PT_CTRL2_RS1_DTR;\r\nelse\r\nclear |= PT_CTRL2_RS1_DTR;\r\nPTCTRL2_clear(clear);\r\nPTCTRL2_set(set);\r\n}\r\n#endif\r\n}\r\nstatic u_int hackkit_get_mctrl(struct uart_port *port)\r\n{\r\nu_int ret = 0;\r\n#if 0\r\nu_int irqsr = PT_IRQSR;\r\nirqsr = PT_IRQSR;\r\n#endif\r\nret = TIOCM_CD | TIOCM_CTS | TIOCM_DSR;\r\nreturn ret;\r\n}\r\nstatic void __init hackkit_init(void)\r\n{\r\nsa11x0_register_mtd(&hackkit_flash_data, &hackkit_flash_resource, 1);\r\nplatform_device_register(&hackkit_leds);\r\n}
