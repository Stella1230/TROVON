static void __init palmz72_kpc_init(void)\r\n{\r\npxa_set_keypad_info(&palmz72_keypad_platform_data);\r\n}\r\nstatic inline void palmz72_kpc_init(void) {}\r\nstatic void __init palmz72_leds_init(void)\r\n{\r\nplatform_device_register(&palmz72_leds);\r\n}\r\nstatic inline void palmz72_leds_init(void) {}\r\nstatic int palmz72_pm_suspend(void)\r\n{\r\npalmz72_resume_info.resume_addr = (u32) cpu_resume;\r\nstore_ptr = *PALMZ72_SAVE_DWORD;\r\nPSPR = virt_to_phys(&palmz72_resume_info);\r\nreturn 0;\r\n}\r\nstatic void palmz72_pm_resume(void)\r\n{\r\n*PALMZ72_SAVE_DWORD = store_ptr;\r\n}\r\nstatic int __init palmz72_pm_init(void)\r\n{\r\nif (machine_is_palmz72()) {\r\nregister_syscore_ops(&palmz72_pm_syscore_ops);\r\nreturn 0;\r\n}\r\nreturn -ENODEV;\r\n}\r\nstatic int palmz72_camera_power(struct device *dev, int power)\r\n{\r\ngpio_set_value(GPIO_NR_PALMZ72_CAM_PWDN, !power);\r\nmdelay(50);\r\nreturn 0;\r\n}\r\nstatic int palmz72_camera_reset(struct device *dev)\r\n{\r\ngpio_set_value(GPIO_NR_PALMZ72_CAM_RESET, 1);\r\nmdelay(50);\r\ngpio_set_value(GPIO_NR_PALMZ72_CAM_RESET, 0);\r\nmdelay(50);\r\nreturn 0;\r\n}\r\nstatic inline void __init palmz72_cam_gpio_init(void)\r\n{\r\nint ret;\r\nret = gpio_request_array(ARRAY_AND_SIZE(palmz72_camera_gpios));\r\nif (!ret)\r\ngpio_free_array(ARRAY_AND_SIZE(palmz72_camera_gpios));\r\nelse\r\nprintk(KERN_ERR "Camera GPIO init failed!\n");\r\nreturn;\r\n}\r\nstatic void __init palmz72_camera_init(void)\r\n{\r\npalmz72_cam_gpio_init();\r\npxa_set_camera_info(&palmz72_pxacamera_platform_data);\r\nplatform_device_register(&palmz72_i2c_bus_device);\r\nplatform_device_register(&palmz72_camera);\r\n}\r\nstatic inline void palmz72_camera_init(void) {}\r\nstatic void __init palmz72_init(void)\r\n{\r\npxa2xx_mfp_config(ARRAY_AND_SIZE(palmz72_pin_config));\r\npxa_set_ffuart_info(NULL);\r\npxa_set_btuart_info(NULL);\r\npxa_set_stuart_info(NULL);\r\npalm27x_mmc_init(GPIO_NR_PALMZ72_SD_DETECT_N, GPIO_NR_PALMZ72_SD_RO,\r\nGPIO_NR_PALMZ72_SD_POWER_N, 1);\r\npalm27x_lcd_init(-1, &palm_320x320_lcd_mode);\r\npalm27x_udc_init(GPIO_NR_PALMZ72_USB_DETECT_N,\r\nGPIO_NR_PALMZ72_USB_PULLUP, 0);\r\npalm27x_irda_init(GPIO_NR_PALMZ72_IR_DISABLE);\r\npalm27x_ac97_init(PALMZ72_BAT_MIN_VOLTAGE, PALMZ72_BAT_MAX_VOLTAGE,\r\n-1, 113);\r\npalm27x_pwm_init(-1, -1);\r\npalm27x_power_init(-1, -1);\r\npalm27x_pmic_init();\r\npalmz72_kpc_init();\r\npalmz72_leds_init();\r\npalmz72_camera_init();\r\n}
