acpi_status\r\nacpi_ut_create_pkg_state_and_push(void *internal_object,\r\nvoid *external_object,\r\nu16 index,\r\nunion acpi_generic_state **state_list)\r\n{\r\nunion acpi_generic_state *state;\r\nACPI_FUNCTION_ENTRY();\r\nstate =\r\nacpi_ut_create_pkg_state(internal_object, external_object, index);\r\nif (!state) {\r\nreturn (AE_NO_MEMORY);\r\n}\r\nacpi_ut_push_generic_state(state_list, state);\r\nreturn (AE_OK);\r\n}\r\nvoid\r\nacpi_ut_push_generic_state(union acpi_generic_state **list_head,\r\nunion acpi_generic_state *state)\r\n{\r\nACPI_FUNCTION_ENTRY();\r\nstate->common.next = *list_head;\r\n*list_head = state;\r\nreturn;\r\n}\r\nunion acpi_generic_state *acpi_ut_pop_generic_state(union acpi_generic_state\r\n**list_head)\r\n{\r\nunion acpi_generic_state *state;\r\nACPI_FUNCTION_ENTRY();\r\nstate = *list_head;\r\nif (state) {\r\n*list_head = state->common.next;\r\n}\r\nreturn (state);\r\n}\r\nunion acpi_generic_state *acpi_ut_create_generic_state(void)\r\n{\r\nunion acpi_generic_state *state;\r\nACPI_FUNCTION_ENTRY();\r\nstate = acpi_os_acquire_object(acpi_gbl_state_cache);\r\nif (state) {\r\nstate->common.descriptor_type = ACPI_DESC_TYPE_STATE;\r\n}\r\nreturn (state);\r\n}\r\nstruct acpi_thread_state *acpi_ut_create_thread_state(void)\r\n{\r\nunion acpi_generic_state *state;\r\nACPI_FUNCTION_ENTRY();\r\nstate = acpi_ut_create_generic_state();\r\nif (!state) {\r\nreturn (NULL);\r\n}\r\nstate->common.descriptor_type = ACPI_DESC_TYPE_STATE_THREAD;\r\nstate->thread.thread_id = acpi_os_get_thread_id();\r\nif (!state->thread.thread_id) {\r\nACPI_ERROR((AE_INFO, "Invalid zero ID from AcpiOsGetThreadId"));\r\nstate->thread.thread_id = (acpi_thread_id) 1;\r\n}\r\nreturn ((struct acpi_thread_state *)state);\r\n}\r\nunion acpi_generic_state *acpi_ut_create_update_state(union acpi_operand_object\r\n*object, u16 action)\r\n{\r\nunion acpi_generic_state *state;\r\nACPI_FUNCTION_ENTRY();\r\nstate = acpi_ut_create_generic_state();\r\nif (!state) {\r\nreturn (NULL);\r\n}\r\nstate->common.descriptor_type = ACPI_DESC_TYPE_STATE_UPDATE;\r\nstate->update.object = object;\r\nstate->update.value = action;\r\nreturn (state);\r\n}\r\nunion acpi_generic_state *acpi_ut_create_pkg_state(void *internal_object,\r\nvoid *external_object,\r\nu16 index)\r\n{\r\nunion acpi_generic_state *state;\r\nACPI_FUNCTION_ENTRY();\r\nstate = acpi_ut_create_generic_state();\r\nif (!state) {\r\nreturn (NULL);\r\n}\r\nstate->common.descriptor_type = ACPI_DESC_TYPE_STATE_PACKAGE;\r\nstate->pkg.source_object = (union acpi_operand_object *)internal_object;\r\nstate->pkg.dest_object = external_object;\r\nstate->pkg.index = index;\r\nstate->pkg.num_packages = 1;\r\nreturn (state);\r\n}\r\nunion acpi_generic_state *acpi_ut_create_control_state(void)\r\n{\r\nunion acpi_generic_state *state;\r\nACPI_FUNCTION_ENTRY();\r\nstate = acpi_ut_create_generic_state();\r\nif (!state) {\r\nreturn (NULL);\r\n}\r\nstate->common.descriptor_type = ACPI_DESC_TYPE_STATE_CONTROL;\r\nstate->common.state = ACPI_CONTROL_CONDITIONAL_EXECUTING;\r\nreturn (state);\r\n}\r\nvoid acpi_ut_delete_generic_state(union acpi_generic_state *state)\r\n{\r\nACPI_FUNCTION_ENTRY();\r\nif (state) {\r\n(void)acpi_os_release_object(acpi_gbl_state_cache, state);\r\n}\r\nreturn;\r\n}
