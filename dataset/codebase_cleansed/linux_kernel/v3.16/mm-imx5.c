void __init mx51_map_io(void)\r\n{\r\niotable_init(mx51_io_desc, ARRAY_SIZE(mx51_io_desc));\r\n}\r\nvoid __init mx53_map_io(void)\r\n{\r\niotable_init(mx53_io_desc, ARRAY_SIZE(mx53_io_desc));\r\n}\r\nstatic void __init imx51_ipu_mipi_setup(void)\r\n{\r\nvoid __iomem *hsc_addr;\r\nhsc_addr = MX51_IO_ADDRESS(MX51_MIPI_HSC_BASE_ADDR);\r\n__raw_writel(0xf00, hsc_addr);\r\n__raw_writel(__raw_readl(hsc_addr + 0x800) | 0x30ff,\r\nhsc_addr + 0x800);\r\n}\r\nvoid __init imx51_init_early(void)\r\n{\r\nimx51_ipu_mipi_setup();\r\nmxc_set_cpu_type(MXC_CPU_MX51);\r\nmxc_iomux_v3_init(MX51_IO_ADDRESS(MX51_IOMUXC_BASE_ADDR));\r\nimx_src_init();\r\n}\r\nvoid __init imx53_init_early(void)\r\n{\r\nmxc_set_cpu_type(MXC_CPU_MX53);\r\nimx_src_init();\r\n}\r\nvoid __init mx51_init_irq(void)\r\n{\r\ntzic_init_irq(MX51_IO_ADDRESS(MX51_TZIC_BASE_ADDR));\r\n}\r\nvoid __init mx53_init_irq(void)\r\n{\r\nstruct device_node *np;\r\nvoid __iomem *base;\r\nnp = of_find_compatible_node(NULL, NULL, "fsl,imx53-tzic");\r\nbase = of_iomap(np, 0);\r\nWARN_ON(!base);\r\ntzic_init_irq(base);\r\n}\r\nvoid __init imx51_soc_init(void)\r\n{\r\nmxc_arch_reset_init(MX51_IO_ADDRESS(MX51_WDOG1_BASE_ADDR));\r\nmxc_device_init();\r\nmxc_register_gpio("imx35-gpio", 0, MX51_GPIO1_BASE_ADDR, SZ_16K, MX51_INT_GPIO1_LOW, MX51_INT_GPIO1_HIGH);\r\nmxc_register_gpio("imx35-gpio", 1, MX51_GPIO2_BASE_ADDR, SZ_16K, MX51_INT_GPIO2_LOW, MX51_INT_GPIO2_HIGH);\r\nmxc_register_gpio("imx35-gpio", 2, MX51_GPIO3_BASE_ADDR, SZ_16K, MX51_INT_GPIO3_LOW, MX51_INT_GPIO3_HIGH);\r\nmxc_register_gpio("imx35-gpio", 3, MX51_GPIO4_BASE_ADDR, SZ_16K, MX51_INT_GPIO4_LOW, MX51_INT_GPIO4_HIGH);\r\npinctrl_provide_dummies();\r\nimx_add_imx_sdma("imx35-sdma", MX51_SDMA_BASE_ADDR, MX51_INT_SDMA, &imx51_sdma_pdata);\r\nimx_set_aips(MX51_IO_ADDRESS(MX51_AIPS1_BASE_ADDR));\r\nimx_set_aips(MX51_IO_ADDRESS(MX51_AIPS2_BASE_ADDR));\r\nplatform_device_register_simple("imx31-audmux", 0, imx51_audmux_res,\r\nARRAY_SIZE(imx51_audmux_res));\r\n}\r\nvoid __init imx51_init_late(void)\r\n{\r\nmx51_neon_fixup();\r\nimx5_pm_init();\r\n}\r\nvoid __init imx53_init_late(void)\r\n{\r\nimx5_pm_init();\r\n}
