static int __init bcm47xx_buttons_copy(const struct gpio_keys_button *buttons,\r\nsize_t nbuttons)\r\n{\r\nsize_t size = nbuttons * sizeof(*buttons);\r\nbcm47xx_button_pdata.buttons = kmalloc(size, GFP_KERNEL);\r\nif (!bcm47xx_button_pdata.buttons)\r\nreturn -ENOMEM;\r\nmemcpy(bcm47xx_button_pdata.buttons, buttons, size);\r\nbcm47xx_button_pdata.nbuttons = nbuttons;\r\nreturn 0;\r\n}\r\nint __init bcm47xx_buttons_register(void)\r\n{\r\nenum bcm47xx_board board = bcm47xx_board_get();\r\nint err;\r\nswitch (board) {\r\ncase BCM47XX_BOARD_ASUS_RTN12:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_rtn12);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_RTN16:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_rtn16);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_RTN66U:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_rtn66u);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL300G:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl300g);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL320GE:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl320ge);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL330GE:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl330ge);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL500GD:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl500gd);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL500GPV1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl500gpv1);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL500GPV2:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl500gpv2);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL500W:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl500w);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL520GC:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl520gc);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL520GU:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl520gu);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WL700GE:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wl700ge);\r\nbreak;\r\ncase BCM47XX_BOARD_ASUS_WLHDD:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_asus_wlhdd);\r\nbreak;\r\ncase BCM47XX_BOARD_BELKIN_F7D3301:\r\ncase BCM47XX_BOARD_BELKIN_F7D3302:\r\ncase BCM47XX_BOARD_BELKIN_F7D4301:\r\ncase BCM47XX_BOARD_BELKIN_F7D4302:\r\ncase BCM47XX_BOARD_BELKIN_F7D4401:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_belkin_f7d4301);\r\nbreak;\r\ncase BCM47XX_BOARD_BUFFALO_WHR2_A54G54:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_buffalo_whr2_a54g54);\r\nbreak;\r\ncase BCM47XX_BOARD_BUFFALO_WHR_G125:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_buffalo_whr_g125);\r\nbreak;\r\ncase BCM47XX_BOARD_BUFFALO_WHR_G54S:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_buffalo_whr_g54s);\r\nbreak;\r\ncase BCM47XX_BOARD_BUFFALO_WHR_HP_G54:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_buffalo_whr_hp_g54);\r\nbreak;\r\ncase BCM47XX_BOARD_BUFFALO_WZR_G300N:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_buffalo_wzr_g300n);\r\nbreak;\r\ncase BCM47XX_BOARD_BUFFALO_WZR_RS_G54:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_buffalo_wzr_rs_g54);\r\nbreak;\r\ncase BCM47XX_BOARD_BUFFALO_WZR_RS_G54HP:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_buffalo_wzr_rs_g54hp);\r\nbreak;\r\ncase BCM47XX_BOARD_DELL_TM2300:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_dell_tm2300);\r\nbreak;\r\ncase BCM47XX_BOARD_DLINK_DIR130:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_dlink_dir130);\r\nbreak;\r\ncase BCM47XX_BOARD_DLINK_DIR330:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_dlink_dir330);\r\nbreak;\r\ncase BCM47XX_BOARD_HUAWEI_E970:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_huawei_e970);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_E1000V1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_e1000v1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_E1000V21:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_e1000v21);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_E2000V1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_e2000v1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_E3000V1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_e3000v1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_E3200V1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_e3200v1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_E4200V1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_e4200v1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT150NV1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt150nv1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT150NV11:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt150nv11);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT160NV1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt160nv1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT160NV3:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt160nv3);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT300NV11:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt300nv11);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT310NV1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt310nv1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT54G:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt54gsv1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT54G3GV2:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt54g3gv2);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT610NV1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt610nv1);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRT610NV2:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrt610nv2);\r\nbreak;\r\ncase BCM47XX_BOARD_LINKSYS_WRTSL54GS:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_linksys_wrtsl54gs);\r\nbreak;\r\ncase BCM47XX_BOARD_MOTOROLA_WE800G:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_motorola_we800g);\r\nbreak;\r\ncase BCM47XX_BOARD_MOTOROLA_WR850GP:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_motorola_wr850gp);\r\nbreak;\r\ncase BCM47XX_BOARD_MOTOROLA_WR850GV2V3:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_motorola_wr850gv2v3);\r\nbreak;\r\ncase BCM47XX_BOARD_NETGEAR_WNDR3400V1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_netgear_wndr3400v1);\r\nbreak;\r\ncase BCM47XX_BOARD_NETGEAR_WNDR3700V3:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_netgear_wndr3700v3);\r\nbreak;\r\ncase BCM47XX_BOARD_NETGEAR_WNDR4500V1:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_netgear_wndr4500v1);\r\nbreak;\r\ncase BCM47XX_BOARD_NETGEAR_WNR834BV2:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_netgear_wnr834bv2);\r\nbreak;\r\ncase BCM47XX_BOARD_SIMPLETECH_SIMPLESHARE:\r\nerr = bcm47xx_copy_bdata(bcm47xx_buttons_simpletech_simpleshare);\r\nbreak;\r\ndefault:\r\npr_debug("No buttons configuration found for this device\n");\r\nreturn -ENOTSUPP;\r\n}\r\nif (err)\r\nreturn -ENOMEM;\r\nerr = platform_device_register(&bcm47xx_buttons_gpio_keys);\r\nif (err) {\r\npr_err("Failed to register platform device: %d\n", err);\r\nreturn err;\r\n}\r\nreturn 0;\r\n}
