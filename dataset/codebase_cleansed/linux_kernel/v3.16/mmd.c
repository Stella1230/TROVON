CFG_RANGE_SPEC_STRCT*\r\nmmd_check_comp( CFG_RANGES_STRCT *actp, CFG_SUP_RANGE_STRCT *supp )\r\n{\r\nCFG_RANGE_SPEC_BYTE_STRCT *actq = (CFG_RANGE_SPEC_BYTE_STRCT*)actp->var_rec;\r\nCFG_RANGE_SPEC_BYTE_STRCT *supq = (CFG_RANGE_SPEC_BYTE_STRCT*)&(supp->variant);\r\nhcf_16 i;\r\nint act_endian;\r\nint sup_endian;\r\nact_endian = actp->role == COMP_ROLE_ACT;\r\nsup_endian = supp->bottom < 0x0100;\r\n#if HCF_ASSERT\r\nMMDASSERT( supp->len == 6, supp->len )\r\nMMDASSERT( actp->len >= 6 && actp->len%3 == 0, actp->len )\r\nif ( act_endian ) {\r\nMMDASSERT( actp->role == COMP_ROLE_ACT, actp->role )\r\nMMDASSERT( 1 <= actp->id && actp->id <= 99, actp->id )\r\n} else {\r\nMMDASSERT( actp->role == CNV_END_SHORT(COMP_ROLE_ACT), actp->role )\r\nMMDASSERT( 1 <= CNV_END_SHORT(actp->id) && CNV_END_SHORT(actp->id) <= 99, actp->id )\r\n}\r\nif ( sup_endian ) {\r\nMMDASSERT( supp->role == COMP_ROLE_SUPL, supp->role )\r\nMMDASSERT( 1 <= supp->id && supp->id <= 99, supp->id )\r\nMMDASSERT( 1 <= supp->variant && supp->variant <= 99, supp->variant )\r\nMMDASSERT( 1 <= supp->bottom && supp->bottom <= 99, supp->bottom )\r\nMMDASSERT( 1 <= supp->top && supp->top <= 99, supp->top )\r\nMMDASSERT( supp->bottom <= supp->top, supp->bottom << 8 | supp->top )\r\n} else {\r\nMMDASSERT( supp->role == CNV_END_SHORT(COMP_ROLE_SUPL), supp->role )\r\nMMDASSERT( 1 <= CNV_END_SHORT(supp->id) && CNV_END_SHORT(supp->id) <= 99, supp->id )\r\nMMDASSERT( 1 <= CNV_END_SHORT(supp->variant) && CNV_END_SHORT(supp->variant) <= 99, supp->variant )\r\nMMDASSERT( 1 <= CNV_END_SHORT(supp->bottom) && CNV_END_SHORT(supp->bottom) <=99, supp->bottom )\r\nMMDASSERT( 1 <= CNV_END_SHORT(supp->top) && CNV_END_SHORT(supp->top) <=99, supp->top )\r\nMMDASSERT( CNV_END_SHORT(supp->bottom) <= CNV_END_SHORT(supp->top), supp->bottom << 8 | supp->top )\r\n}\r\n#endif\r\n#if HCF_BIG_ENDIAN == 0\r\nact_endian = !act_endian;\r\nsup_endian = !sup_endian;\r\n#endif\r\nfor ( i = actp->len ; i > 3; actq++, i -= 3 ) {\r\nMMDASSERT( actq->variant[act_endian] <= 99, i<<8 | actq->variant[act_endian] )\r\nMMDASSERT( actq->bottom[act_endian] <= 99 , i<<8 | actq->bottom[act_endian] )\r\nMMDASSERT( actq->top[act_endian] <= 99 , i<<8 | actq->top[act_endian] )\r\nMMDASSERT( actq->bottom[act_endian] <= actq->top[act_endian], i<<8 | actq->bottom[act_endian] )\r\nif ( actq->variant[act_endian] == supq->variant[sup_endian] &&\r\nactq->bottom[act_endian] <= supq->top[sup_endian] &&\r\nactq->top[act_endian] >= supq->bottom[sup_endian]\r\n) break;\r\n}\r\nif ( i <= 3 || supp->len != 6 ) {\r\nactq = NULL;\r\n}\r\n#if HCF_ASSERT\r\nif ( actq == NULL ) {\r\nfor ( i = 0; i <= supp->len; i += 2 ) {\r\nMMDASSERT( DO_ASSERT, MERGE_2( ((hcf_16*)supp)[i], ((hcf_16*)supp)[i+1] ) );\r\n}\r\nfor ( i = 0; i <= actp->len; i += 2 ) {\r\nMMDASSERT( DO_ASSERT, MERGE_2( ((hcf_16*)actp)[i], ((hcf_16*)actp)[i+1] ) );\r\n}\r\n}\r\n#endif\r\nreturn (CFG_RANGE_SPEC_STRCT*)actq;\r\n}
