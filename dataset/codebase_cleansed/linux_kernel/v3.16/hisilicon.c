static void __init hi3620_map_io(void)\r\n{\r\ndebug_ll_io_init();\r\niotable_init(hi3620_io_desc, ARRAY_SIZE(hi3620_io_desc));\r\n}\r\nstatic void hi3xxx_restart(enum reboot_mode mode, const char *cmd)\r\n{\r\nstruct device_node *np;\r\nvoid __iomem *base;\r\nint offset;\r\nnp = of_find_compatible_node(NULL, NULL, "hisilicon,sysctrl");\r\nif (!np) {\r\npr_err("failed to find hisilicon,sysctrl node\n");\r\nreturn;\r\n}\r\nbase = of_iomap(np, 0);\r\nif (!base) {\r\npr_err("failed to map address in hisilicon,sysctrl node\n");\r\nreturn;\r\n}\r\nif (of_property_read_u32(np, "reboot-offset", &offset) < 0) {\r\npr_err("failed to find reboot-offset property\n");\r\nreturn;\r\n}\r\nwritel_relaxed(0xdeadbeef, base + offset);\r\nwhile (1)\r\ncpu_do_idle();\r\n}
