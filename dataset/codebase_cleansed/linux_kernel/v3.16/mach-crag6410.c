static void crag6410_lcd_power_set(struct plat_lcd_data *pd, unsigned int power)\r\n{\r\npr_debug("%s: setting power %d\n", __func__, power);\r\nif (power) {\r\ngpio_set_value(S3C64XX_GPB(0), 1);\r\nmsleep(1);\r\ns3c_gpio_cfgpin(S3C64XX_GPF(14), S3C_GPIO_SFN(2));\r\n} else {\r\ngpio_direction_output(S3C64XX_GPF(14), 0);\r\ngpio_set_value(S3C64XX_GPB(0), 0);\r\n}\r\n}\r\nstatic void __init crag6410_map_io(void)\r\n{\r\ns3c64xx_init_io(NULL, 0);\r\ns3c64xx_set_xtal_freq(12000000);\r\ns3c24xx_init_uarts(crag6410_uartcfgs, ARRAY_SIZE(crag6410_uartcfgs));\r\nsamsung_set_timer_source(SAMSUNG_PWM3, SAMSUNG_PWM4);\r\n}\r\nstatic void crag6410_cfg_sdhci0(struct platform_device *dev, int width)\r\n{\r\ns3c_gpio_cfgrange_nopull(S3C64XX_GPG(0), 2 + width, S3C_GPIO_SFN(2));\r\ns3c_gpio_setpull(S3C64XX_GPG(6), S3C_GPIO_PULL_DOWN);\r\n}\r\nstatic void __init crag6410_machine_init(void)\r\n{\r\ns3c_gpio_setpull(S3C64XX_GPM(0), S3C_GPIO_PULL_UP);\r\ns3c_gpio_setpull(S3C64XX_GPN(0), S3C_GPIO_PULL_UP);\r\ngpio_request(S3C64XX_GPB(0), "LCD power");\r\ngpio_direction_output(S3C64XX_GPB(0), 0);\r\ngpio_request(S3C64XX_GPF(14), "LCD PWM");\r\ngpio_direction_output(S3C64XX_GPF(14), 0);\r\ngpio_request(S3C64XX_GPB(1), "SD power");\r\ngpio_direction_output(S3C64XX_GPB(1), 0);\r\ngpio_request(S3C64XX_GPF(10), "nRESETSEL");\r\ngpio_direction_output(S3C64XX_GPF(10), 1);\r\ns3c_sdhci0_set_platdata(&crag6410_hsmmc0_pdata);\r\ns3c_sdhci2_set_platdata(&crag6410_hsmmc2_pdata);\r\ns3c_i2c0_set_platdata(&i2c0_pdata);\r\ns3c_i2c1_set_platdata(&i2c1_pdata);\r\ns3c_fb_set_platdata(&crag6410_lcd_pdata);\r\ns3c_hsotg_set_platdata(&crag6410_hsotg_pdata);\r\ni2c_register_board_info(0, i2c_devs0, ARRAY_SIZE(i2c_devs0));\r\ni2c_register_board_info(1, i2c_devs1, ARRAY_SIZE(i2c_devs1));\r\nsamsung_keypad_set_platdata(&crag6410_keypad_data);\r\ns3c64xx_spi0_set_platdata(NULL, 0, 2);\r\nplatform_add_devices(crag6410_devices, ARRAY_SIZE(crag6410_devices));\r\ngpio_led_register_device(-1, &gpio_leds_pdata);\r\nregulator_has_full_constraints();\r\ns3c64xx_pm_init();\r\n}
