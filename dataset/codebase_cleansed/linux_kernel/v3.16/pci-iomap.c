void __iomem *pci_iomap(struct pci_dev *dev, int bar, unsigned long maxlen)\r\n{\r\nresource_size_t start = pci_resource_start(dev, bar);\r\nresource_size_t len = pci_resource_len(dev, bar);\r\nunsigned long flags = pci_resource_flags(dev, bar);\r\nif (!len || !start)\r\nreturn NULL;\r\nif ((flags & IORESOURCE_IO) || (flags & IORESOURCE_MEM)) {\r\nif (flags & IORESOURCE_CACHEABLE && !(flags & IORESOURCE_IO))\r\nreturn ioremap(start, len);\r\nelse\r\nreturn ioremap_nocache(start, len);\r\n}\r\nreturn NULL;\r\n}
