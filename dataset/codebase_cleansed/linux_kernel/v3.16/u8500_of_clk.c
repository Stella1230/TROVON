static struct clk *ux500_twocell_get(struct of_phandle_args *clkspec,\r\nvoid *data)\r\n{\r\nstruct clk **clk_data = data;\r\nunsigned int base, bit;\r\nif (clkspec->args_count != 2)\r\nreturn ERR_PTR(-EINVAL);\r\nbase = clkspec->args[0];\r\nbit = clkspec->args[1];\r\nif (base != 1 && base != 2 && base != 3 && base != 5 && base != 6) {\r\npr_err("%s: invalid PRCC base %d\n", __func__, base);\r\nreturn ERR_PTR(-EINVAL);\r\n}\r\nreturn PRCC_SHOW(clk_data, base, bit);\r\n}\r\nvoid u8500_of_clk_init(u32 clkrst1_base, u32 clkrst2_base, u32 clkrst3_base,\r\nu32 clkrst5_base, u32 clkrst6_base)\r\n{\r\nstruct prcmu_fw_version *fw_version;\r\nstruct device_node *np = NULL;\r\nstruct device_node *child = NULL;\r\nconst char *sgaclk_parent = NULL;\r\nstruct clk *clk, *rtc_clk, *twd_clk;\r\nif (of_have_populated_dt())\r\nnp = of_find_matching_node(NULL, u8500_clk_of_match);\r\nif (!np) {\r\npr_err("Either DT or U8500 Clock node not found\n");\r\nreturn;\r\n}\r\nclk = clk_reg_prcmu_gate("soc0_pll", NULL, PRCMU_PLLSOC0,\r\nCLK_IS_ROOT|CLK_IGNORE_UNUSED);\r\nprcmu_clk[PRCMU_PLLSOC0] = clk;\r\nclk = clk_reg_prcmu_gate("soc1_pll", NULL, PRCMU_PLLSOC1,\r\nCLK_IS_ROOT|CLK_IGNORE_UNUSED);\r\nprcmu_clk[PRCMU_PLLSOC1] = clk;\r\nclk = clk_reg_prcmu_gate("ddr_pll", NULL, PRCMU_PLLDDR,\r\nCLK_IS_ROOT|CLK_IGNORE_UNUSED);\r\nprcmu_clk[PRCMU_PLLDDR] = clk;\r\nrtc_clk = clk_register_fixed_rate(NULL, "rtc32k", "NULL",\r\nCLK_IS_ROOT|CLK_IGNORE_UNUSED,\r\n32768);\r\nfw_version = prcmu_get_fw_version();\r\nif (fw_version != NULL) {\r\nswitch (fw_version->project) {\r\ncase PRCMU_FW_PROJECT_U8500_C2:\r\ncase PRCMU_FW_PROJECT_U8520:\r\ncase PRCMU_FW_PROJECT_U8420:\r\nsgaclk_parent = "soc0_pll";\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nif (sgaclk_parent)\r\nclk = clk_reg_prcmu_gate("sgclk", sgaclk_parent,\r\nPRCMU_SGACLK, 0);\r\nelse\r\nclk = clk_reg_prcmu_gate("sgclk", NULL,\r\nPRCMU_SGACLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_SGACLK] = clk;\r\nclk = clk_reg_prcmu_gate("uartclk", NULL, PRCMU_UARTCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_UARTCLK] = clk;\r\nclk = clk_reg_prcmu_gate("msp02clk", NULL, PRCMU_MSP02CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_MSP02CLK] = clk;\r\nclk = clk_reg_prcmu_gate("msp1clk", NULL, PRCMU_MSP1CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_MSP1CLK] = clk;\r\nclk = clk_reg_prcmu_gate("i2cclk", NULL, PRCMU_I2CCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_I2CCLK] = clk;\r\nclk = clk_reg_prcmu_gate("slimclk", NULL, PRCMU_SLIMCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_SLIMCLK] = clk;\r\nclk = clk_reg_prcmu_gate("per1clk", NULL, PRCMU_PER1CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_PER1CLK] = clk;\r\nclk = clk_reg_prcmu_gate("per2clk", NULL, PRCMU_PER2CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_PER2CLK] = clk;\r\nclk = clk_reg_prcmu_gate("per3clk", NULL, PRCMU_PER3CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_PER3CLK] = clk;\r\nclk = clk_reg_prcmu_gate("per5clk", NULL, PRCMU_PER5CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_PER5CLK] = clk;\r\nclk = clk_reg_prcmu_gate("per6clk", NULL, PRCMU_PER6CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_PER6CLK] = clk;\r\nclk = clk_reg_prcmu_gate("per7clk", NULL, PRCMU_PER7CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_PER7CLK] = clk;\r\nclk = clk_reg_prcmu_scalable("lcdclk", NULL, PRCMU_LCDCLK, 0,\r\nCLK_IS_ROOT|CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_LCDCLK] = clk;\r\nclk = clk_reg_prcmu_opp_gate("bmlclk", NULL, PRCMU_BMLCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_BMLCLK] = clk;\r\nclk = clk_reg_prcmu_scalable("hsitxclk", NULL, PRCMU_HSITXCLK, 0,\r\nCLK_IS_ROOT|CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_HSITXCLK] = clk;\r\nclk = clk_reg_prcmu_scalable("hsirxclk", NULL, PRCMU_HSIRXCLK, 0,\r\nCLK_IS_ROOT|CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_HSIRXCLK] = clk;\r\nclk = clk_reg_prcmu_scalable("hdmiclk", NULL, PRCMU_HDMICLK, 0,\r\nCLK_IS_ROOT|CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_HDMICLK] = clk;\r\nclk = clk_reg_prcmu_gate("apeatclk", NULL, PRCMU_APEATCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_APEATCLK] = clk;\r\nclk = clk_reg_prcmu_gate("apetraceclk", NULL, PRCMU_APETRACECLK,\r\nCLK_IS_ROOT);\r\nprcmu_clk[PRCMU_APETRACECLK] = clk;\r\nclk = clk_reg_prcmu_gate("mcdeclk", NULL, PRCMU_MCDECLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_MCDECLK] = clk;\r\nclk = clk_reg_prcmu_opp_gate("ipi2cclk", NULL, PRCMU_IPI2CCLK,\r\nCLK_IS_ROOT);\r\nprcmu_clk[PRCMU_IPI2CCLK] = clk;\r\nclk = clk_reg_prcmu_gate("dsialtclk", NULL, PRCMU_DSIALTCLK,\r\nCLK_IS_ROOT);\r\nprcmu_clk[PRCMU_DSIALTCLK] = clk;\r\nclk = clk_reg_prcmu_gate("dmaclk", NULL, PRCMU_DMACLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_DMACLK] = clk;\r\nclk = clk_reg_prcmu_gate("b2r2clk", NULL, PRCMU_B2R2CLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_B2R2CLK] = clk;\r\nclk = clk_reg_prcmu_scalable("tvclk", NULL, PRCMU_TVCLK, 0,\r\nCLK_IS_ROOT|CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_TVCLK] = clk;\r\nclk = clk_reg_prcmu_gate("sspclk", NULL, PRCMU_SSPCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_SSPCLK] = clk;\r\nclk = clk_reg_prcmu_gate("rngclk", NULL, PRCMU_RNGCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_RNGCLK] = clk;\r\nclk = clk_reg_prcmu_gate("uiccclk", NULL, PRCMU_UICCCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_UICCCLK] = clk;\r\nclk = clk_reg_prcmu_gate("timclk", NULL, PRCMU_TIMCLK, CLK_IS_ROOT);\r\nprcmu_clk[PRCMU_TIMCLK] = clk;\r\nclk = clk_reg_prcmu_opp_volt_scalable("sdmmcclk", NULL, PRCMU_SDMMCCLK,\r\n100000000,\r\nCLK_IS_ROOT|CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_SDMMCCLK] = clk;\r\nclk = clk_reg_prcmu_scalable("dsi_pll", "hdmiclk",\r\nPRCMU_PLLDSI, 0, CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_PLLDSI] = clk;\r\nclk = clk_reg_prcmu_scalable("dsi0clk", "dsi_pll",\r\nPRCMU_DSI0CLK, 0, CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_DSI0CLK] = clk;\r\nclk = clk_reg_prcmu_scalable("dsi1clk", "dsi_pll",\r\nPRCMU_DSI1CLK, 0, CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_DSI1CLK] = clk;\r\nclk = clk_reg_prcmu_scalable("dsi0escclk", "tvclk",\r\nPRCMU_DSI0ESCCLK, 0, CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_DSI0ESCCLK] = clk;\r\nclk = clk_reg_prcmu_scalable("dsi1escclk", "tvclk",\r\nPRCMU_DSI1ESCCLK, 0, CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_DSI1ESCCLK] = clk;\r\nclk = clk_reg_prcmu_scalable("dsi2escclk", "tvclk",\r\nPRCMU_DSI2ESCCLK, 0, CLK_SET_RATE_GATE);\r\nprcmu_clk[PRCMU_DSI2ESCCLK] = clk;\r\nclk = clk_reg_prcmu_scalable_rate("armss", NULL,\r\nPRCMU_ARMSS, 0, CLK_IS_ROOT|CLK_IGNORE_UNUSED);\r\nprcmu_clk[PRCMU_ARMSS] = clk;\r\ntwd_clk = clk_register_fixed_factor(NULL, "smp_twd", "armss",\r\nCLK_IGNORE_UNUSED, 1, 2);\r\nclk = clk_reg_prcc_pclk("p1_pclk0", "per1clk", clkrst1_base,\r\nBIT(0), 0);\r\nPRCC_PCLK_STORE(clk, 1, 0);\r\nclk = clk_reg_prcc_pclk("p1_pclk1", "per1clk", clkrst1_base,\r\nBIT(1), 0);\r\nPRCC_PCLK_STORE(clk, 1, 1);\r\nclk = clk_reg_prcc_pclk("p1_pclk2", "per1clk", clkrst1_base,\r\nBIT(2), 0);\r\nPRCC_PCLK_STORE(clk, 1, 2);\r\nclk = clk_reg_prcc_pclk("p1_pclk3", "per1clk", clkrst1_base,\r\nBIT(3), 0);\r\nPRCC_PCLK_STORE(clk, 1, 3);\r\nclk = clk_reg_prcc_pclk("p1_pclk4", "per1clk", clkrst1_base,\r\nBIT(4), 0);\r\nPRCC_PCLK_STORE(clk, 1, 4);\r\nclk = clk_reg_prcc_pclk("p1_pclk5", "per1clk", clkrst1_base,\r\nBIT(5), 0);\r\nPRCC_PCLK_STORE(clk, 1, 5);\r\nclk = clk_reg_prcc_pclk("p1_pclk6", "per1clk", clkrst1_base,\r\nBIT(6), 0);\r\nPRCC_PCLK_STORE(clk, 1, 6);\r\nclk = clk_reg_prcc_pclk("p1_pclk7", "per1clk", clkrst1_base,\r\nBIT(7), 0);\r\nPRCC_PCLK_STORE(clk, 1, 7);\r\nclk = clk_reg_prcc_pclk("p1_pclk8", "per1clk", clkrst1_base,\r\nBIT(8), 0);\r\nPRCC_PCLK_STORE(clk, 1, 8);\r\nclk = clk_reg_prcc_pclk("p1_pclk9", "per1clk", clkrst1_base,\r\nBIT(9), 0);\r\nPRCC_PCLK_STORE(clk, 1, 9);\r\nclk = clk_reg_prcc_pclk("p1_pclk10", "per1clk", clkrst1_base,\r\nBIT(10), 0);\r\nPRCC_PCLK_STORE(clk, 1, 10);\r\nclk = clk_reg_prcc_pclk("p1_pclk11", "per1clk", clkrst1_base,\r\nBIT(11), 0);\r\nPRCC_PCLK_STORE(clk, 1, 11);\r\nclk = clk_reg_prcc_pclk("p2_pclk0", "per2clk", clkrst2_base,\r\nBIT(0), 0);\r\nPRCC_PCLK_STORE(clk, 2, 0);\r\nclk = clk_reg_prcc_pclk("p2_pclk1", "per2clk", clkrst2_base,\r\nBIT(1), 0);\r\nPRCC_PCLK_STORE(clk, 2, 1);\r\nclk = clk_reg_prcc_pclk("p2_pclk2", "per2clk", clkrst2_base,\r\nBIT(2), 0);\r\nPRCC_PCLK_STORE(clk, 2, 2);\r\nclk = clk_reg_prcc_pclk("p2_pclk3", "per2clk", clkrst2_base,\r\nBIT(3), 0);\r\nPRCC_PCLK_STORE(clk, 2, 3);\r\nclk = clk_reg_prcc_pclk("p2_pclk4", "per2clk", clkrst2_base,\r\nBIT(4), 0);\r\nPRCC_PCLK_STORE(clk, 2, 4);\r\nclk = clk_reg_prcc_pclk("p2_pclk5", "per2clk", clkrst2_base,\r\nBIT(5), 0);\r\nPRCC_PCLK_STORE(clk, 2, 5);\r\nclk = clk_reg_prcc_pclk("p2_pclk6", "per2clk", clkrst2_base,\r\nBIT(6), 0);\r\nPRCC_PCLK_STORE(clk, 2, 6);\r\nclk = clk_reg_prcc_pclk("p2_pclk7", "per2clk", clkrst2_base,\r\nBIT(7), 0);\r\nPRCC_PCLK_STORE(clk, 2, 7);\r\nclk = clk_reg_prcc_pclk("p2_pclk8", "per2clk", clkrst2_base,\r\nBIT(8), 0);\r\nPRCC_PCLK_STORE(clk, 2, 8);\r\nclk = clk_reg_prcc_pclk("p2_pclk9", "per2clk", clkrst2_base,\r\nBIT(9), 0);\r\nPRCC_PCLK_STORE(clk, 2, 9);\r\nclk = clk_reg_prcc_pclk("p2_pclk10", "per2clk", clkrst2_base,\r\nBIT(10), 0);\r\nPRCC_PCLK_STORE(clk, 2, 10);\r\nclk = clk_reg_prcc_pclk("p2_pclk11", "per2clk", clkrst2_base,\r\nBIT(11), 0);\r\nPRCC_PCLK_STORE(clk, 2, 11);\r\nclk = clk_reg_prcc_pclk("p2_pclk12", "per2clk", clkrst2_base,\r\nBIT(12), 0);\r\nPRCC_PCLK_STORE(clk, 2, 12);\r\nclk = clk_reg_prcc_pclk("p3_pclk0", "per3clk", clkrst3_base,\r\nBIT(0), 0);\r\nPRCC_PCLK_STORE(clk, 3, 0);\r\nclk = clk_reg_prcc_pclk("p3_pclk1", "per3clk", clkrst3_base,\r\nBIT(1), 0);\r\nPRCC_PCLK_STORE(clk, 3, 1);\r\nclk = clk_reg_prcc_pclk("p3_pclk2", "per3clk", clkrst3_base,\r\nBIT(2), 0);\r\nPRCC_PCLK_STORE(clk, 3, 2);\r\nclk = clk_reg_prcc_pclk("p3_pclk3", "per3clk", clkrst3_base,\r\nBIT(3), 0);\r\nPRCC_PCLK_STORE(clk, 3, 3);\r\nclk = clk_reg_prcc_pclk("p3_pclk4", "per3clk", clkrst3_base,\r\nBIT(4), 0);\r\nPRCC_PCLK_STORE(clk, 3, 4);\r\nclk = clk_reg_prcc_pclk("p3_pclk5", "per3clk", clkrst3_base,\r\nBIT(5), 0);\r\nPRCC_PCLK_STORE(clk, 3, 5);\r\nclk = clk_reg_prcc_pclk("p3_pclk6", "per3clk", clkrst3_base,\r\nBIT(6), 0);\r\nPRCC_PCLK_STORE(clk, 3, 6);\r\nclk = clk_reg_prcc_pclk("p3_pclk7", "per3clk", clkrst3_base,\r\nBIT(7), 0);\r\nPRCC_PCLK_STORE(clk, 3, 7);\r\nclk = clk_reg_prcc_pclk("p3_pclk8", "per3clk", clkrst3_base,\r\nBIT(8), 0);\r\nPRCC_PCLK_STORE(clk, 3, 8);\r\nclk = clk_reg_prcc_pclk("p5_pclk0", "per5clk", clkrst5_base,\r\nBIT(0), 0);\r\nPRCC_PCLK_STORE(clk, 5, 0);\r\nclk = clk_reg_prcc_pclk("p5_pclk1", "per5clk", clkrst5_base,\r\nBIT(1), 0);\r\nPRCC_PCLK_STORE(clk, 5, 1);\r\nclk = clk_reg_prcc_pclk("p6_pclk0", "per6clk", clkrst6_base,\r\nBIT(0), 0);\r\nPRCC_PCLK_STORE(clk, 6, 0);\r\nclk = clk_reg_prcc_pclk("p6_pclk1", "per6clk", clkrst6_base,\r\nBIT(1), 0);\r\nPRCC_PCLK_STORE(clk, 6, 1);\r\nclk = clk_reg_prcc_pclk("p6_pclk2", "per6clk", clkrst6_base,\r\nBIT(2), 0);\r\nPRCC_PCLK_STORE(clk, 6, 2);\r\nclk = clk_reg_prcc_pclk("p6_pclk3", "per6clk", clkrst6_base,\r\nBIT(3), 0);\r\nPRCC_PCLK_STORE(clk, 6, 3);\r\nclk = clk_reg_prcc_pclk("p6_pclk4", "per6clk", clkrst6_base,\r\nBIT(4), 0);\r\nPRCC_PCLK_STORE(clk, 6, 4);\r\nclk = clk_reg_prcc_pclk("p6_pclk5", "per6clk", clkrst6_base,\r\nBIT(5), 0);\r\nPRCC_PCLK_STORE(clk, 6, 5);\r\nclk = clk_reg_prcc_pclk("p6_pclk6", "per6clk", clkrst6_base,\r\nBIT(6), 0);\r\nPRCC_PCLK_STORE(clk, 6, 6);\r\nclk = clk_reg_prcc_pclk("p6_pclk7", "per6clk", clkrst6_base,\r\nBIT(7), 0);\r\nPRCC_PCLK_STORE(clk, 6, 7);\r\nclk = clk_reg_prcc_kclk("p1_uart0_kclk", "uartclk",\r\nclkrst1_base, BIT(0), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 0);\r\nclk = clk_reg_prcc_kclk("p1_uart1_kclk", "uartclk",\r\nclkrst1_base, BIT(1), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 1);\r\nclk = clk_reg_prcc_kclk("p1_i2c1_kclk", "i2cclk",\r\nclkrst1_base, BIT(2), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 2);\r\nclk = clk_reg_prcc_kclk("p1_msp0_kclk", "msp02clk",\r\nclkrst1_base, BIT(3), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 3);\r\nclk = clk_reg_prcc_kclk("p1_msp1_kclk", "msp1clk",\r\nclkrst1_base, BIT(4), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 4);\r\nclk = clk_reg_prcc_kclk("p1_sdi0_kclk", "sdmmcclk",\r\nclkrst1_base, BIT(5), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 5);\r\nclk = clk_reg_prcc_kclk("p1_i2c2_kclk", "i2cclk",\r\nclkrst1_base, BIT(6), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 6);\r\nclk = clk_reg_prcc_kclk("p1_slimbus0_kclk", "slimclk",\r\nclkrst1_base, BIT(8), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 8);\r\nclk = clk_reg_prcc_kclk("p1_i2c4_kclk", "i2cclk",\r\nclkrst1_base, BIT(9), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 9);\r\nclk = clk_reg_prcc_kclk("p1_msp3_kclk", "msp1clk",\r\nclkrst1_base, BIT(10), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 1, 10);\r\nclk = clk_reg_prcc_kclk("p2_i2c3_kclk", "i2cclk",\r\nclkrst2_base, BIT(0), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 2, 0);\r\nclk = clk_reg_prcc_kclk("p2_sdi4_kclk", "sdmmcclk",\r\nclkrst2_base, BIT(2), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 2, 2);\r\nclk = clk_reg_prcc_kclk("p2_msp2_kclk", "msp02clk",\r\nclkrst2_base, BIT(3), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 2, 3);\r\nclk = clk_reg_prcc_kclk("p2_sdi1_kclk", "sdmmcclk",\r\nclkrst2_base, BIT(4), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 2, 4);\r\nclk = clk_reg_prcc_kclk("p2_sdi3_kclk", "sdmmcclk",\r\nclkrst2_base, BIT(5), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 2, 5);\r\nclk = clk_reg_prcc_kclk("p2_ssirx_kclk", "hsirxclk",\r\nclkrst2_base, BIT(6),\r\nCLK_SET_RATE_GATE|CLK_SET_RATE_PARENT);\r\nPRCC_KCLK_STORE(clk, 2, 6);\r\nclk = clk_reg_prcc_kclk("p2_ssitx_kclk", "hsitxclk",\r\nclkrst2_base, BIT(7),\r\nCLK_SET_RATE_GATE|CLK_SET_RATE_PARENT);\r\nPRCC_KCLK_STORE(clk, 2, 7);\r\nclk = clk_reg_prcc_kclk("p3_ssp0_kclk", "sspclk",\r\nclkrst3_base, BIT(1), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 3, 1);\r\nclk = clk_reg_prcc_kclk("p3_ssp1_kclk", "sspclk",\r\nclkrst3_base, BIT(2), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 3, 2);\r\nclk = clk_reg_prcc_kclk("p3_i2c0_kclk", "i2cclk",\r\nclkrst3_base, BIT(3), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 3, 3);\r\nclk = clk_reg_prcc_kclk("p3_sdi2_kclk", "sdmmcclk",\r\nclkrst3_base, BIT(4), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 3, 4);\r\nclk = clk_reg_prcc_kclk("p3_ske_kclk", "rtc32k",\r\nclkrst3_base, BIT(5), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 3, 5);\r\nclk = clk_reg_prcc_kclk("p3_uart2_kclk", "uartclk",\r\nclkrst3_base, BIT(6), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 3, 6);\r\nclk = clk_reg_prcc_kclk("p3_sdi5_kclk", "sdmmcclk",\r\nclkrst3_base, BIT(7), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 3, 7);\r\nclk = clk_reg_prcc_kclk("p3_rng_kclk", "rngclk",\r\nclkrst6_base, BIT(0), CLK_SET_RATE_GATE);\r\nPRCC_KCLK_STORE(clk, 6, 0);\r\nfor_each_child_of_node(np, child) {\r\nstatic struct clk_onecell_data clk_data;\r\nif (!of_node_cmp(child->name, "prcmu-clock")) {\r\nclk_data.clks = prcmu_clk;\r\nclk_data.clk_num = ARRAY_SIZE(prcmu_clk);\r\nof_clk_add_provider(child, of_clk_src_onecell_get, &clk_data);\r\n}\r\nif (!of_node_cmp(child->name, "prcc-periph-clock"))\r\nof_clk_add_provider(child, ux500_twocell_get, prcc_pclk);\r\nif (!of_node_cmp(child->name, "prcc-kernel-clock"))\r\nof_clk_add_provider(child, ux500_twocell_get, prcc_kclk);\r\nif (!of_node_cmp(child->name, "rtc32k-clock"))\r\nof_clk_add_provider(child, of_clk_src_simple_get, rtc_clk);\r\nif (!of_node_cmp(child->name, "smp-twd-clock"))\r\nof_clk_add_provider(child, of_clk_src_simple_get, twd_clk);\r\n}\r\n}
