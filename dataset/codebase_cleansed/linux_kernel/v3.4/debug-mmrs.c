static int debug_cclk_get(void *data, u64 *val)\r\n{\r\n*val = get_cclk();\r\nreturn 0;\r\n}\r\nstatic int debug_sclk_get(void *data, u64 *val)\r\n{\r\n*val = get_sclk();\r\nreturn 0;\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_can(struct dentry *parent, unsigned long base, int num)\r\n{\r\nstatic struct dentry *am, *mb;\r\nint i, j;\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, CAN, num);\r\nif (!am) {\r\nam = debugfs_create_dir("am", parent);\r\nmb = debugfs_create_dir("mb", parent);\r\n}\r\n__CAN(MC1, mc1);\r\n__CAN(MD1, md1);\r\n__CAN(TRS1, trs1);\r\n__CAN(TRR1, trr1);\r\n__CAN(TA1, ta1);\r\n__CAN(AA1, aa1);\r\n__CAN(RMP1, rmp1);\r\n__CAN(RML1, rml1);\r\n__CAN(MBTIF1, mbtif1);\r\n__CAN(MBRIF1, mbrif1);\r\n__CAN(MBIM1, mbim1);\r\n__CAN(RFH1, rfh1);\r\n__CAN(OPSS1, opss1);\r\n__CAN(MC2, mc2);\r\n__CAN(MD2, md2);\r\n__CAN(TRS2, trs2);\r\n__CAN(TRR2, trr2);\r\n__CAN(TA2, ta2);\r\n__CAN(AA2, aa2);\r\n__CAN(RMP2, rmp2);\r\n__CAN(RML2, rml2);\r\n__CAN(MBTIF2, mbtif2);\r\n__CAN(MBRIF2, mbrif2);\r\n__CAN(MBIM2, mbim2);\r\n__CAN(RFH2, rfh2);\r\n__CAN(OPSS2, opss2);\r\n__CAN(CLOCK, clock);\r\n__CAN(TIMING, timing);\r\n__CAN(DEBUG, debug);\r\n__CAN(STATUS, status);\r\n__CAN(CEC, cec);\r\n__CAN(GIS, gis);\r\n__CAN(GIM, gim);\r\n__CAN(GIF, gif);\r\n__CAN(CONTROL, control);\r\n__CAN(INTR, intr);\r\n__CAN(VERSION, version);\r\n__CAN(MBTD, mbtd);\r\n__CAN(EWR, ewr);\r\n__CAN(ESR, esr);\r\n__CAN(UCCNT, uccnt);\r\n__CAN(UCRC, ucrc);\r\n__CAN(UCCNF, uccnf);\r\n__CAN(VERSION2, version2);\r\nfor (i = 0; i < 32; ++i) {\r\nsprintf(_buf, "AM%02iL", i);\r\ndebugfs_create_x16(buf, S_IRUSR|S_IWUSR, am,\r\n(u16 *)(base + CAN_OFF(msk[i].aml)));\r\nsprintf(_buf, "AM%02iH", i);\r\ndebugfs_create_x16(buf, S_IRUSR|S_IWUSR, am,\r\n(u16 *)(base + CAN_OFF(msk[i].amh)));\r\nfor (j = 0; j < 3; ++j) {\r\nsprintf(_buf, "MB%02i_DATA%i", i, j);\r\ndebugfs_create_x16(buf, S_IRUSR|S_IWUSR, mb,\r\n(u16 *)(base + CAN_OFF(chl[i].data[j*2])));\r\n}\r\nsprintf(_buf, "MB%02i_LENGTH", i);\r\ndebugfs_create_x16(buf, S_IRUSR|S_IWUSR, mb,\r\n(u16 *)(base + CAN_OFF(chl[i].dlc)));\r\nsprintf(_buf, "MB%02i_TIMESTAMP", i);\r\ndebugfs_create_x16(buf, S_IRUSR|S_IWUSR, mb,\r\n(u16 *)(base + CAN_OFF(chl[i].tsv)));\r\nsprintf(_buf, "MB%02i_ID0", i);\r\ndebugfs_create_x16(buf, S_IRUSR|S_IWUSR, mb,\r\n(u16 *)(base + CAN_OFF(chl[i].id0)));\r\nsprintf(_buf, "MB%02i_ID1", i);\r\ndebugfs_create_x16(buf, S_IRUSR|S_IWUSR, mb,\r\n(u16 *)(base + CAN_OFF(chl[i].id1)));\r\n}\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_dma(struct dentry *parent, unsigned long base, int num, char mdma, const char *pfx)\r\n{\r\nchar buf[32], *_buf;\r\nif (mdma)\r\n_buf = buf + sprintf(buf, "%s_%c%i_", pfx, mdma, num);\r\nelse\r\n_buf = buf + sprintf(buf, "%s%i_", pfx, num);\r\n__DMA(NEXT_DESC_PTR, next_desc_ptr);\r\n__DMA(START_ADDR, start_addr);\r\n__DMA(CONFIG, config);\r\n__DMA(X_COUNT, x_count);\r\n__DMA(X_MODIFY, x_modify);\r\n__DMA(Y_COUNT, y_count);\r\n__DMA(Y_MODIFY, y_modify);\r\n__DMA(CURR_DESC_PTR, curr_desc_ptr);\r\n__DMA(CURR_ADDR, curr_addr);\r\n__DMA(IRQ_STATUS, irq_status);\r\nif (strcmp(pfx, "IMDMA") != 0)\r\n__DMA(PERIPHERAL_MAP, peripheral_map);\r\n__DMA(CURR_X_COUNT, curr_x_count);\r\n__DMA(CURR_Y_COUNT, curr_y_count);\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_eppi(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, EPPI, num);\r\n__EPPI(STATUS, status);\r\n__EPPI(HCOUNT, hcount);\r\n__EPPI(HDELAY, hdelay);\r\n__EPPI(VCOUNT, vcount);\r\n__EPPI(VDELAY, vdelay);\r\n__EPPI(FRAME, frame);\r\n__EPPI(LINE, line);\r\n__EPPI(CLKDIV, clkdiv);\r\n__EPPI(CONTROL, control);\r\n__EPPI(FS1W_HBL, fs1w_hbl);\r\n__EPPI(FS1P_AVPL, fs1p_avpl);\r\n__EPPI(FS2W_LVB, fs2w_lvb);\r\n__EPPI(FS2P_LAVF, fs2p_lavf);\r\n__EPPI(CLIP, clip);\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_gptimer(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, TIMER, num);\r\n__GPTIMER(CONFIG, config);\r\n__GPTIMER(COUNTER, counter);\r\n__GPTIMER(PERIOD, period);\r\n__GPTIMER(WIDTH, width);\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_gptimer_group(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf;\r\nif (num == -1) {\r\n_buf = buf + sprintf(buf, "TIMER_");\r\n__GPTIMER_GROUP(ENABLE, enable);\r\n__GPTIMER_GROUP(DISABLE, disable);\r\n__GPTIMER_GROUP(STATUS, status);\r\n} else {\r\n_buf = buf + sprintf(buf, "TIMER_ENABLE%i", num);\r\nd(buf, 16, base + GPTIMER_GROUP_OFF(enable));\r\n_buf = buf + sprintf(buf, "TIMER_DISABLE%i", num);\r\nd(buf, 16, base + GPTIMER_GROUP_OFF(disable));\r\n_buf = buf + sprintf(buf, "TIMER_STATUS%i", num);\r\nd(buf, 32, base + GPTIMER_GROUP_OFF(status));\r\n}\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_hmdma(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, HMDMA, num);\r\n__HMDMA(CONTROL, control);\r\n__HMDMA(ECINIT, ecinit);\r\n__HMDMA(BCINIT, bcinit);\r\n__HMDMA(ECURGENT, ecurgent);\r\n__HMDMA(ECOVERFLOW, ecoverflow);\r\n__HMDMA(ECOUNT, ecount);\r\n__HMDMA(BCOUNT, bcount);\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_pint(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, PINT, num);\r\n__PINT(MASK_SET, mask_set);\r\n__PINT(MASK_CLEAR, mask_clear);\r\n__PINT(REQUEST, request);\r\n__PINT(ASSIGN, assign);\r\n__PINT(EDGE_SET, edge_set);\r\n__PINT(EDGE_CLEAR, edge_clear);\r\n__PINT(INVERT_SET, invert_set);\r\n__PINT(INVERT_CLEAR, invert_clear);\r\n__PINT(PINSTATE, pinstate);\r\n__PINT(LATCH, latch);\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_port(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf;\r\n#ifdef __ADSPBF54x__\r\n_buf = REGS_STR_PFX_C(buf, PORT, num);\r\n__PORT(FER, port_fer);\r\n__PORT(SET, data_set);\r\n__PORT(CLEAR, data_clear);\r\n__PORT(DIR_SET, dir_set);\r\n__PORT(DIR_CLEAR, dir_clear);\r\n__PORT(INEN, inen);\r\n__PORT(MUX, port_mux);\r\n#else\r\n_buf = buf + sprintf(buf, "PORT%cIO_", num);\r\n__PORT(CLEAR, data_clear);\r\n__PORT(SET, data_set);\r\n__PORT(TOGGLE, toggle);\r\n__PORT(MASKA, maska);\r\n__PORT(MASKA_CLEAR, maska_clear);\r\n__PORT(MASKA_SET, maska_set);\r\n__PORT(MASKA_TOGGLE, maska_toggle);\r\n__PORT(MASKB, maskb);\r\n__PORT(MASKB_CLEAR, maskb_clear);\r\n__PORT(MASKB_SET, maskb_set);\r\n__PORT(MASKB_TOGGLE, maskb_toggle);\r\n__PORT(DIR, dir);\r\n__PORT(POLAR, polar);\r\n__PORT(EDGE, edge);\r\n__PORT(BOTH, both);\r\n__PORT(INEN, inen);\r\n#endif\r\n_buf[-1] = '\0';\r\nd(buf, 16, base + REGS_OFF(gpio, data));\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_ppi(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, PPI, num);\r\n__PPI(CONTROL, control);\r\n__PPI(STATUS, status);\r\n__PPI(COUNT, count);\r\n__PPI(DELAY, delay);\r\n__PPI(FRAME, frame);\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_spi(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, SPI, num);\r\n__SPI(CTL, ctl);\r\n__SPI(FLG, flg);\r\n__SPI(STAT, stat);\r\n__SPI(TDBR, tdbr);\r\n__SPI(RDBR, rdbr);\r\n__SPI(BAUD, baud);\r\n__SPI(SHADOW, shadow);\r\n}\r\nstatic inline int sport_width(void *mmr)\r\n{\r\nunsigned long lmmr = (unsigned long)mmr;\r\nif ((lmmr & 0xff) == 0x10)\r\nlmmr -= 0xc;\r\nelse\r\nlmmr += 0xc;\r\nreturn (bfin_read16(lmmr) & 0x1f) + 1;\r\n}\r\nstatic int sport_set(void *mmr, u64 val)\r\n{\r\nunsigned long flags;\r\nlocal_irq_save(flags);\r\nif (sport_width(mmr) <= 16)\r\nbfin_write16(mmr, val);\r\nelse\r\nbfin_write32(mmr, val);\r\nlocal_irq_restore(flags);\r\nreturn 0;\r\n}\r\nstatic int sport_get(void *mmr, u64 *val)\r\n{\r\nunsigned long flags;\r\nlocal_irq_save(flags);\r\nif (sport_width(mmr) <= 16)\r\n*val = bfin_read16(mmr);\r\nelse\r\n*val = bfin_read32(mmr);\r\nlocal_irq_restore(flags);\r\nreturn 0;\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_sport(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, SPORT, num);\r\n__SPORT(CHNL, 16);\r\n__SPORT(MCMC1, 16);\r\n__SPORT(MCMC2, 16);\r\n__SPORT(MRCS0, 32);\r\n__SPORT(MRCS1, 32);\r\n__SPORT(MRCS2, 32);\r\n__SPORT(MRCS3, 32);\r\n__SPORT(MTCS0, 32);\r\n__SPORT(MTCS1, 32);\r\n__SPORT(MTCS2, 32);\r\n__SPORT(MTCS3, 32);\r\n__SPORT(RCLKDIV, 16);\r\n__SPORT(RCR1, 16);\r\n__SPORT(RCR2, 16);\r\n__SPORT(RFSDIV, 16);\r\n__SPORT_RW(RX);\r\n__SPORT(STAT, 16);\r\n__SPORT(TCLKDIV, 16);\r\n__SPORT(TCR1, 16);\r\n__SPORT(TCR2, 16);\r\n__SPORT(TFSDIV, 16);\r\n__SPORT_WO(TX);\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_twi(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, TWI, num);\r\n__TWI(CLKDIV, clkdiv);\r\n__TWI(CONTROL, control);\r\n__TWI(SLAVE_CTL, slave_ctl);\r\n__TWI(SLAVE_STAT, slave_stat);\r\n__TWI(SLAVE_ADDR, slave_addr);\r\n__TWI(MASTER_CTL, master_ctl);\r\n__TWI(MASTER_STAT, master_stat);\r\n__TWI(MASTER_ADDR, master_addr);\r\n__TWI(INT_STAT, int_stat);\r\n__TWI(INT_MASK, int_mask);\r\n__TWI(FIFO_CTL, fifo_ctl);\r\n__TWI(FIFO_STAT, fifo_stat);\r\n__TWI(XMT_DATA8, xmt_data8);\r\n__TWI(XMT_DATA16, xmt_data16);\r\n__TWI(RCV_DATA8, rcv_data8);\r\n__TWI(RCV_DATA16, rcv_data16);\r\n}\r\nstatic void __init __maybe_unused\r\nbfin_debug_mmrs_uart(struct dentry *parent, unsigned long base, int num)\r\n{\r\nchar buf[32], *_buf = REGS_STR_PFX(buf, UART, num);\r\n#ifdef BFIN_UART_BF54X_STYLE\r\n__UART(DLL, dll);\r\n__UART(DLH, dlh);\r\n__UART(GCTL, gctl);\r\n__UART(LCR, lcr);\r\n__UART(MCR, mcr);\r\n__UART(LSR, lsr);\r\n__UART(MSR, msr);\r\n__UART(SCR, scr);\r\n__UART(IER_SET, ier_set);\r\n__UART(IER_CLEAR, ier_clear);\r\n__UART(THR, thr);\r\n__UART(RBR, rbr);\r\n#else\r\n__UART(DLL, dll);\r\n__UART(THR, thr);\r\n__UART(RBR, rbr);\r\n__UART(DLH, dlh);\r\n__UART(IER, ier);\r\n__UART(IIR, iir);\r\n__UART(LCR, lcr);\r\n__UART(MCR, mcr);\r\n__UART(LSR, lsr);\r\n__UART(MSR, msr);\r\n__UART(SCR, scr);\r\n__UART(GCTL, gctl);\r\n#endif\r\n}\r\nstatic int __init bfin_debug_mmrs_init(void)\r\n{\r\nstruct dentry *top, *parent;\r\npr_info("debug-mmrs: setting up Blackfin MMR debugfs\n");\r\ntop = debugfs_create_dir("blackfin", NULL);\r\nif (top == NULL)\r\nreturn -1;\r\nparent = debugfs_create_dir("core_regs", top);\r\ndebugfs_create_file("cclk", S_IRUSR, parent, NULL, &fops_debug_cclk);\r\ndebugfs_create_file("sclk", S_IRUSR, parent, NULL, &fops_debug_sclk);\r\ndebugfs_create_x32("last_seqstat", S_IRUSR, parent, &last_seqstat);\r\nD_SYSREG(cycles);\r\nD_SYSREG(cycles2);\r\nD_SYSREG(emudat);\r\nD_SYSREG(seqstat);\r\nD_SYSREG(syscfg);\r\nparent = debugfs_create_dir("ctimer", top);\r\nD32(TCNTL);\r\nD32(TCOUNT);\r\nD32(TPERIOD);\r\nD32(TSCALE);\r\nparent = debugfs_create_dir("cec", top);\r\nD32(EVT0);\r\nD32(EVT1);\r\nD32(EVT2);\r\nD32(EVT3);\r\nD32(EVT4);\r\nD32(EVT5);\r\nD32(EVT6);\r\nD32(EVT7);\r\nD32(EVT8);\r\nD32(EVT9);\r\nD32(EVT10);\r\nD32(EVT11);\r\nD32(EVT12);\r\nD32(EVT13);\r\nD32(EVT14);\r\nD32(EVT15);\r\nD32(EVT_OVERRIDE);\r\nD32(IMASK);\r\nD32(IPEND);\r\nD32(ILAT);\r\nD32(IPRIO);\r\nparent = debugfs_create_dir("debug", top);\r\nD32(DBGSTAT);\r\nD32(DSPID);\r\nparent = debugfs_create_dir("mmu", top);\r\nD32(SRAM_BASE_ADDRESS);\r\nD32(DCPLB_ADDR0);\r\nD32(DCPLB_ADDR10);\r\nD32(DCPLB_ADDR11);\r\nD32(DCPLB_ADDR12);\r\nD32(DCPLB_ADDR13);\r\nD32(DCPLB_ADDR14);\r\nD32(DCPLB_ADDR15);\r\nD32(DCPLB_ADDR1);\r\nD32(DCPLB_ADDR2);\r\nD32(DCPLB_ADDR3);\r\nD32(DCPLB_ADDR4);\r\nD32(DCPLB_ADDR5);\r\nD32(DCPLB_ADDR6);\r\nD32(DCPLB_ADDR7);\r\nD32(DCPLB_ADDR8);\r\nD32(DCPLB_ADDR9);\r\nD32(DCPLB_DATA0);\r\nD32(DCPLB_DATA10);\r\nD32(DCPLB_DATA11);\r\nD32(DCPLB_DATA12);\r\nD32(DCPLB_DATA13);\r\nD32(DCPLB_DATA14);\r\nD32(DCPLB_DATA15);\r\nD32(DCPLB_DATA1);\r\nD32(DCPLB_DATA2);\r\nD32(DCPLB_DATA3);\r\nD32(DCPLB_DATA4);\r\nD32(DCPLB_DATA5);\r\nD32(DCPLB_DATA6);\r\nD32(DCPLB_DATA7);\r\nD32(DCPLB_DATA8);\r\nD32(DCPLB_DATA9);\r\nD32(DCPLB_FAULT_ADDR);\r\nD32(DCPLB_STATUS);\r\nD32(DMEM_CONTROL);\r\nD32(DTEST_COMMAND);\r\nD32(DTEST_DATA0);\r\nD32(DTEST_DATA1);\r\nD32(ICPLB_ADDR0);\r\nD32(ICPLB_ADDR1);\r\nD32(ICPLB_ADDR2);\r\nD32(ICPLB_ADDR3);\r\nD32(ICPLB_ADDR4);\r\nD32(ICPLB_ADDR5);\r\nD32(ICPLB_ADDR6);\r\nD32(ICPLB_ADDR7);\r\nD32(ICPLB_ADDR8);\r\nD32(ICPLB_ADDR9);\r\nD32(ICPLB_ADDR10);\r\nD32(ICPLB_ADDR11);\r\nD32(ICPLB_ADDR12);\r\nD32(ICPLB_ADDR13);\r\nD32(ICPLB_ADDR14);\r\nD32(ICPLB_ADDR15);\r\nD32(ICPLB_DATA0);\r\nD32(ICPLB_DATA1);\r\nD32(ICPLB_DATA2);\r\nD32(ICPLB_DATA3);\r\nD32(ICPLB_DATA4);\r\nD32(ICPLB_DATA5);\r\nD32(ICPLB_DATA6);\r\nD32(ICPLB_DATA7);\r\nD32(ICPLB_DATA8);\r\nD32(ICPLB_DATA9);\r\nD32(ICPLB_DATA10);\r\nD32(ICPLB_DATA11);\r\nD32(ICPLB_DATA12);\r\nD32(ICPLB_DATA13);\r\nD32(ICPLB_DATA14);\r\nD32(ICPLB_DATA15);\r\nD32(ICPLB_FAULT_ADDR);\r\nD32(ICPLB_STATUS);\r\nD32(IMEM_CONTROL);\r\nif (!ANOMALY_05000481) {\r\nD32(ITEST_COMMAND);\r\nD32(ITEST_DATA0);\r\nD32(ITEST_DATA1);\r\n}\r\nparent = debugfs_create_dir("perf", top);\r\nD32(PFCNTR0);\r\nD32(PFCNTR1);\r\nD32(PFCTL);\r\nparent = debugfs_create_dir("trace", top);\r\nD32(TBUF);\r\nD32(TBUFCTL);\r\nD32(TBUFSTAT);\r\nparent = debugfs_create_dir("watchpoint", top);\r\nD32(WPIACTL);\r\nD32(WPIA0);\r\nD32(WPIA1);\r\nD32(WPIA2);\r\nD32(WPIA3);\r\nD32(WPIA4);\r\nD32(WPIA5);\r\nD32(WPIACNT0);\r\nD32(WPIACNT1);\r\nD32(WPIACNT2);\r\nD32(WPIACNT3);\r\nD32(WPIACNT4);\r\nD32(WPIACNT5);\r\nD32(WPDACTL);\r\nD32(WPDA0);\r\nD32(WPDA1);\r\nD32(WPDACNT0);\r\nD32(WPDACNT1);\r\nD32(WPSTAT);\r\n#ifdef ATAPI_CONTROL\r\nparent = debugfs_create_dir("atapi", top);\r\nD16(ATAPI_CONTROL);\r\nD16(ATAPI_DEV_ADDR);\r\nD16(ATAPI_DEV_RXBUF);\r\nD16(ATAPI_DEV_TXBUF);\r\nD16(ATAPI_DMA_TFRCNT);\r\nD16(ATAPI_INT_MASK);\r\nD16(ATAPI_INT_STATUS);\r\nD16(ATAPI_LINE_STATUS);\r\nD16(ATAPI_MULTI_TIM_0);\r\nD16(ATAPI_MULTI_TIM_1);\r\nD16(ATAPI_MULTI_TIM_2);\r\nD16(ATAPI_PIO_TFRCNT);\r\nD16(ATAPI_PIO_TIM_0);\r\nD16(ATAPI_PIO_TIM_1);\r\nD16(ATAPI_REG_TIM_0);\r\nD16(ATAPI_SM_STATE);\r\nD16(ATAPI_STATUS);\r\nD16(ATAPI_TERMINATE);\r\nD16(ATAPI_UDMAOUT_TFRCNT);\r\nD16(ATAPI_ULTRA_TIM_0);\r\nD16(ATAPI_ULTRA_TIM_1);\r\nD16(ATAPI_ULTRA_TIM_2);\r\nD16(ATAPI_ULTRA_TIM_3);\r\nD16(ATAPI_UMAIN_TFRCNT);\r\nD16(ATAPI_XFER_LEN);\r\n#endif\r\n#if defined(CAN_MC1) || defined(CAN0_MC1) || defined(CAN1_MC1)\r\nparent = debugfs_create_dir("can", top);\r\n# ifdef CAN_MC1\r\nbfin_debug_mmrs_can(parent, CAN_MC1, -1);\r\n# endif\r\n# ifdef CAN0_MC1\r\nCAN(0);\r\n# endif\r\n# ifdef CAN1_MC1\r\nCAN(1);\r\n# endif\r\n#endif\r\n#ifdef CNT_COMMAND\r\nparent = debugfs_create_dir("counter", top);\r\nD16(CNT_COMMAND);\r\nD16(CNT_CONFIG);\r\nD32(CNT_COUNTER);\r\nD16(CNT_DEBOUNCE);\r\nD16(CNT_IMASK);\r\nD32(CNT_MAX);\r\nD32(CNT_MIN);\r\nD16(CNT_STATUS);\r\n#endif\r\nparent = debugfs_create_dir("dmac", top);\r\n#ifdef DMAC_TC_CNT\r\nD16(DMAC_TC_CNT);\r\nD16(DMAC_TC_PER);\r\n#endif\r\n#ifdef DMAC0_TC_CNT\r\nD16(DMAC0_TC_CNT);\r\nD16(DMAC0_TC_PER);\r\n#endif\r\n#ifdef DMAC1_TC_CNT\r\nD16(DMAC1_TC_CNT);\r\nD16(DMAC1_TC_PER);\r\n#endif\r\n#ifdef DMAC1_PERIMUX\r\nD16(DMAC1_PERIMUX);\r\n#endif\r\n#ifdef __ADSPBF561__\r\n# define DMA0_NEXT_DESC_PTR DMA2_0_NEXT_DESC_PTR\r\n# define DMA1_NEXT_DESC_PTR DMA2_1_NEXT_DESC_PTR\r\n# define DMA2_NEXT_DESC_PTR DMA2_2_NEXT_DESC_PTR\r\n# define DMA3_NEXT_DESC_PTR DMA2_3_NEXT_DESC_PTR\r\n# define DMA4_NEXT_DESC_PTR DMA2_4_NEXT_DESC_PTR\r\n# define DMA5_NEXT_DESC_PTR DMA2_5_NEXT_DESC_PTR\r\n# define DMA6_NEXT_DESC_PTR DMA2_6_NEXT_DESC_PTR\r\n# define DMA7_NEXT_DESC_PTR DMA2_7_NEXT_DESC_PTR\r\n# define DMA8_NEXT_DESC_PTR DMA2_8_NEXT_DESC_PTR\r\n# define DMA9_NEXT_DESC_PTR DMA2_9_NEXT_DESC_PTR\r\n# define DMA10_NEXT_DESC_PTR DMA2_10_NEXT_DESC_PTR\r\n# define DMA11_NEXT_DESC_PTR DMA2_11_NEXT_DESC_PTR\r\n# define DMA12_NEXT_DESC_PTR DMA1_0_NEXT_DESC_PTR\r\n# define DMA13_NEXT_DESC_PTR DMA1_1_NEXT_DESC_PTR\r\n# define DMA14_NEXT_DESC_PTR DMA1_2_NEXT_DESC_PTR\r\n# define DMA15_NEXT_DESC_PTR DMA1_3_NEXT_DESC_PTR\r\n# define DMA16_NEXT_DESC_PTR DMA1_4_NEXT_DESC_PTR\r\n# define DMA17_NEXT_DESC_PTR DMA1_5_NEXT_DESC_PTR\r\n# define DMA18_NEXT_DESC_PTR DMA1_6_NEXT_DESC_PTR\r\n# define DMA19_NEXT_DESC_PTR DMA1_7_NEXT_DESC_PTR\r\n# define DMA20_NEXT_DESC_PTR DMA1_8_NEXT_DESC_PTR\r\n# define DMA21_NEXT_DESC_PTR DMA1_9_NEXT_DESC_PTR\r\n# define DMA22_NEXT_DESC_PTR DMA1_10_NEXT_DESC_PTR\r\n# define DMA23_NEXT_DESC_PTR DMA1_11_NEXT_DESC_PTR\r\n#endif\r\nparent = debugfs_create_dir("dma", top);\r\nDMA(0);\r\nDMA(1);\r\nDMA(1);\r\nDMA(2);\r\nDMA(3);\r\nDMA(4);\r\nDMA(5);\r\nDMA(6);\r\nDMA(7);\r\n#ifdef DMA8_NEXT_DESC_PTR\r\nDMA(8);\r\nDMA(9);\r\nDMA(10);\r\nDMA(11);\r\n#endif\r\n#ifdef DMA12_NEXT_DESC_PTR\r\nDMA(12);\r\nDMA(13);\r\nDMA(14);\r\nDMA(15);\r\nDMA(16);\r\nDMA(17);\r\nDMA(18);\r\nDMA(19);\r\n#endif\r\n#ifdef DMA20_NEXT_DESC_PTR\r\nDMA(20);\r\nDMA(21);\r\nDMA(22);\r\nDMA(23);\r\n#endif\r\nparent = debugfs_create_dir("ebiu_amc", top);\r\nD32(EBIU_AMBCTL0);\r\nD32(EBIU_AMBCTL1);\r\nD16(EBIU_AMGCTL);\r\n#ifdef EBIU_MBSCTL\r\nD16(EBIU_MBSCTL);\r\nD32(EBIU_ARBSTAT);\r\nD32(EBIU_MODE);\r\nD16(EBIU_FCTL);\r\n#endif\r\n#ifdef EBIU_SDGCTL\r\nparent = debugfs_create_dir("ebiu_sdram", top);\r\n# ifdef __ADSPBF561__\r\nD32(EBIU_SDBCTL);\r\n# else\r\nD16(EBIU_SDBCTL);\r\n# endif\r\nD32(EBIU_SDGCTL);\r\nD16(EBIU_SDRRC);\r\nD16(EBIU_SDSTAT);\r\n#endif\r\n#ifdef EBIU_DDRACCT\r\nparent = debugfs_create_dir("ebiu_ddr", top);\r\nD32(EBIU_DDRACCT);\r\nD32(EBIU_DDRARCT);\r\nD32(EBIU_DDRBRC0);\r\nD32(EBIU_DDRBRC1);\r\nD32(EBIU_DDRBRC2);\r\nD32(EBIU_DDRBRC3);\r\nD32(EBIU_DDRBRC4);\r\nD32(EBIU_DDRBRC5);\r\nD32(EBIU_DDRBRC6);\r\nD32(EBIU_DDRBRC7);\r\nD32(EBIU_DDRBWC0);\r\nD32(EBIU_DDRBWC1);\r\nD32(EBIU_DDRBWC2);\r\nD32(EBIU_DDRBWC3);\r\nD32(EBIU_DDRBWC4);\r\nD32(EBIU_DDRBWC5);\r\nD32(EBIU_DDRBWC6);\r\nD32(EBIU_DDRBWC7);\r\nD32(EBIU_DDRCTL0);\r\nD32(EBIU_DDRCTL1);\r\nD32(EBIU_DDRCTL2);\r\nD32(EBIU_DDRCTL3);\r\nD32(EBIU_DDRGC0);\r\nD32(EBIU_DDRGC1);\r\nD32(EBIU_DDRGC2);\r\nD32(EBIU_DDRGC3);\r\nD32(EBIU_DDRMCCL);\r\nD32(EBIU_DDRMCEN);\r\nD32(EBIU_DDRQUE);\r\nD32(EBIU_DDRTACT);\r\nD32(EBIU_ERRADD);\r\nD16(EBIU_ERRMST);\r\nD16(EBIU_RSTCTL);\r\n#endif\r\n#ifdef EMAC_ADDRHI\r\nparent = debugfs_create_dir("emac", top);\r\nD32(EMAC_ADDRHI);\r\nD32(EMAC_ADDRLO);\r\nD32(EMAC_FLC);\r\nD32(EMAC_HASHHI);\r\nD32(EMAC_HASHLO);\r\nD32(EMAC_MMC_CTL);\r\nD32(EMAC_MMC_RIRQE);\r\nD32(EMAC_MMC_RIRQS);\r\nD32(EMAC_MMC_TIRQE);\r\nD32(EMAC_MMC_TIRQS);\r\nD32(EMAC_OPMODE);\r\nD32(EMAC_RXC_ALIGN);\r\nD32(EMAC_RXC_ALLFRM);\r\nD32(EMAC_RXC_ALLOCT);\r\nD32(EMAC_RXC_BROAD);\r\nD32(EMAC_RXC_DMAOVF);\r\nD32(EMAC_RXC_EQ64);\r\nD32(EMAC_RXC_FCS);\r\nD32(EMAC_RXC_GE1024);\r\nD32(EMAC_RXC_LNERRI);\r\nD32(EMAC_RXC_LNERRO);\r\nD32(EMAC_RXC_LONG);\r\nD32(EMAC_RXC_LT1024);\r\nD32(EMAC_RXC_LT128);\r\nD32(EMAC_RXC_LT256);\r\nD32(EMAC_RXC_LT512);\r\nD32(EMAC_RXC_MACCTL);\r\nD32(EMAC_RXC_MULTI);\r\nD32(EMAC_RXC_OCTET);\r\nD32(EMAC_RXC_OK);\r\nD32(EMAC_RXC_OPCODE);\r\nD32(EMAC_RXC_PAUSE);\r\nD32(EMAC_RXC_SHORT);\r\nD32(EMAC_RXC_TYPED);\r\nD32(EMAC_RXC_UNICST);\r\nD32(EMAC_RX_IRQE);\r\nD32(EMAC_RX_STAT);\r\nD32(EMAC_RX_STKY);\r\nD32(EMAC_STAADD);\r\nD32(EMAC_STADAT);\r\nD32(EMAC_SYSCTL);\r\nD32(EMAC_SYSTAT);\r\nD32(EMAC_TXC_1COL);\r\nD32(EMAC_TXC_ABORT);\r\nD32(EMAC_TXC_ALLFRM);\r\nD32(EMAC_TXC_ALLOCT);\r\nD32(EMAC_TXC_BROAD);\r\nD32(EMAC_TXC_CRSERR);\r\nD32(EMAC_TXC_DEFER);\r\nD32(EMAC_TXC_DMAUND);\r\nD32(EMAC_TXC_EQ64);\r\nD32(EMAC_TXC_GE1024);\r\nD32(EMAC_TXC_GT1COL);\r\nD32(EMAC_TXC_LATECL);\r\nD32(EMAC_TXC_LT1024);\r\nD32(EMAC_TXC_LT128);\r\nD32(EMAC_TXC_LT256);\r\nD32(EMAC_TXC_LT512);\r\nD32(EMAC_TXC_MACCTL);\r\nD32(EMAC_TXC_MULTI);\r\nD32(EMAC_TXC_OCTET);\r\nD32(EMAC_TXC_OK);\r\nD32(EMAC_TXC_UNICST);\r\nD32(EMAC_TXC_XS_COL);\r\nD32(EMAC_TXC_XS_DFR);\r\nD32(EMAC_TX_IRQE);\r\nD32(EMAC_TX_STAT);\r\nD32(EMAC_TX_STKY);\r\nD32(EMAC_VLAN1);\r\nD32(EMAC_VLAN2);\r\nD32(EMAC_WKUP_CTL);\r\nD32(EMAC_WKUP_FFCMD);\r\nD32(EMAC_WKUP_FFCRC0);\r\nD32(EMAC_WKUP_FFCRC1);\r\nD32(EMAC_WKUP_FFMSK0);\r\nD32(EMAC_WKUP_FFMSK1);\r\nD32(EMAC_WKUP_FFMSK2);\r\nD32(EMAC_WKUP_FFMSK3);\r\nD32(EMAC_WKUP_FFOFF);\r\n# ifdef EMAC_PTP_ACCR\r\nD32(EMAC_PTP_ACCR);\r\nD32(EMAC_PTP_ADDEND);\r\nD32(EMAC_PTP_ALARMHI);\r\nD32(EMAC_PTP_ALARMLO);\r\nD16(EMAC_PTP_CTL);\r\nD32(EMAC_PTP_FOFF);\r\nD32(EMAC_PTP_FV1);\r\nD32(EMAC_PTP_FV2);\r\nD32(EMAC_PTP_FV3);\r\nD16(EMAC_PTP_ID_OFF);\r\nD32(EMAC_PTP_ID_SNAP);\r\nD16(EMAC_PTP_IE);\r\nD16(EMAC_PTP_ISTAT);\r\nD32(EMAC_PTP_OFFSET);\r\nD32(EMAC_PTP_PPS_PERIOD);\r\nD32(EMAC_PTP_PPS_STARTHI);\r\nD32(EMAC_PTP_PPS_STARTLO);\r\nD32(EMAC_PTP_RXSNAPHI);\r\nD32(EMAC_PTP_RXSNAPLO);\r\nD32(EMAC_PTP_TIMEHI);\r\nD32(EMAC_PTP_TIMELO);\r\nD32(EMAC_PTP_TXSNAPHI);\r\nD32(EMAC_PTP_TXSNAPLO);\r\n# endif\r\n#endif\r\n#if defined(EPPI0_STATUS) || defined(EPPI1_STATUS) || defined(EPPI2_STATUS)\r\nparent = debugfs_create_dir("eppi", top);\r\n# ifdef EPPI0_STATUS\r\nEPPI(0);\r\n# endif\r\n# ifdef EPPI1_STATUS\r\nEPPI(1);\r\n# endif\r\n# ifdef EPPI2_STATUS\r\nEPPI(2);\r\n# endif\r\n#endif\r\nparent = debugfs_create_dir("gptimer", top);\r\n#ifdef TIMER_ENABLE\r\nGPTIMER_GROUP(TIMER_ENABLE, -1);\r\n#endif\r\n#ifdef TIMER_ENABLE0\r\nGPTIMER_GROUP(TIMER_ENABLE0, 0);\r\n#endif\r\n#ifdef TIMER_ENABLE1\r\nGPTIMER_GROUP(TIMER_ENABLE1, 1);\r\n#endif\r\n#ifdef TMRS4_DISABLE\r\nGPTIMER_GROUP(TMRS4_ENABLE, 0);\r\nGPTIMER_GROUP(TMRS8_ENABLE, 1);\r\n#endif\r\nGPTIMER(0);\r\nGPTIMER(1);\r\nGPTIMER(2);\r\n#ifdef TIMER3_CONFIG\r\nGPTIMER(3);\r\nGPTIMER(4);\r\nGPTIMER(5);\r\nGPTIMER(6);\r\nGPTIMER(7);\r\n#endif\r\n#ifdef TIMER8_CONFIG\r\nGPTIMER(8);\r\nGPTIMER(9);\r\nGPTIMER(10);\r\n#endif\r\n#ifdef TIMER11_CONFIG\r\nGPTIMER(11);\r\n#endif\r\n#ifdef HMDMA0_CONTROL\r\nparent = debugfs_create_dir("hmdma", top);\r\nHMDMA(0);\r\nHMDMA(1);\r\n#endif\r\n#ifdef HOST_CONTROL\r\nparent = debugfs_create_dir("hostdp", top);\r\nD16(HOST_CONTROL);\r\nD16(HOST_STATUS);\r\nD16(HOST_TIMEOUT);\r\n#endif\r\n#ifdef IMDMA_S0_CONFIG\r\nparent = debugfs_create_dir("imdma", top);\r\nIMDMA(0);\r\nIMDMA(1);\r\n#endif\r\n#ifdef KPAD_CTL\r\nparent = debugfs_create_dir("keypad", top);\r\nD16(KPAD_CTL);\r\nD16(KPAD_PRESCALE);\r\nD16(KPAD_MSEL);\r\nD16(KPAD_ROWCOL);\r\nD16(KPAD_STAT);\r\nD16(KPAD_SOFTEVAL);\r\n#endif\r\nparent = debugfs_create_dir("mdma", top);\r\nMDMA(0);\r\nMDMA(1);\r\n#ifdef MDMA_D2_CONFIG\r\nMDMA(2);\r\nMDMA(3);\r\n#endif\r\n#ifdef MXVR_CONFIG\r\nparent = debugfs_create_dir("mxvr", top);\r\nD16(MXVR_CONFIG);\r\n# ifdef MXVR_PLL_CTL_0\r\nD32(MXVR_PLL_CTL_0);\r\n# endif\r\nD32(MXVR_STATE_0);\r\nD32(MXVR_STATE_1);\r\nD32(MXVR_INT_STAT_0);\r\nD32(MXVR_INT_STAT_1);\r\nD32(MXVR_INT_EN_0);\r\nD32(MXVR_INT_EN_1);\r\nD16(MXVR_POSITION);\r\nD16(MXVR_MAX_POSITION);\r\nD16(MXVR_DELAY);\r\nD16(MXVR_MAX_DELAY);\r\nD32(MXVR_LADDR);\r\nD16(MXVR_GADDR);\r\nD32(MXVR_AADDR);\r\nD32(MXVR_ALLOC_0);\r\nD32(MXVR_ALLOC_1);\r\nD32(MXVR_ALLOC_2);\r\nD32(MXVR_ALLOC_3);\r\nD32(MXVR_ALLOC_4);\r\nD32(MXVR_ALLOC_5);\r\nD32(MXVR_ALLOC_6);\r\nD32(MXVR_ALLOC_7);\r\nD32(MXVR_ALLOC_8);\r\nD32(MXVR_ALLOC_9);\r\nD32(MXVR_ALLOC_10);\r\nD32(MXVR_ALLOC_11);\r\nD32(MXVR_ALLOC_12);\r\nD32(MXVR_ALLOC_13);\r\nD32(MXVR_ALLOC_14);\r\nD32(MXVR_SYNC_LCHAN_0);\r\nD32(MXVR_SYNC_LCHAN_1);\r\nD32(MXVR_SYNC_LCHAN_2);\r\nD32(MXVR_SYNC_LCHAN_3);\r\nD32(MXVR_SYNC_LCHAN_4);\r\nD32(MXVR_SYNC_LCHAN_5);\r\nD32(MXVR_SYNC_LCHAN_6);\r\nD32(MXVR_SYNC_LCHAN_7);\r\nD32(MXVR_DMA0_CONFIG);\r\nD32(MXVR_DMA0_START_ADDR);\r\nD16(MXVR_DMA0_COUNT);\r\nD32(MXVR_DMA0_CURR_ADDR);\r\nD16(MXVR_DMA0_CURR_COUNT);\r\nD32(MXVR_DMA1_CONFIG);\r\nD32(MXVR_DMA1_START_ADDR);\r\nD16(MXVR_DMA1_COUNT);\r\nD32(MXVR_DMA1_CURR_ADDR);\r\nD16(MXVR_DMA1_CURR_COUNT);\r\nD32(MXVR_DMA2_CONFIG);\r\nD32(MXVR_DMA2_START_ADDR);\r\nD16(MXVR_DMA2_COUNT);\r\nD32(MXVR_DMA2_CURR_ADDR);\r\nD16(MXVR_DMA2_CURR_COUNT);\r\nD32(MXVR_DMA3_CONFIG);\r\nD32(MXVR_DMA3_START_ADDR);\r\nD16(MXVR_DMA3_COUNT);\r\nD32(MXVR_DMA3_CURR_ADDR);\r\nD16(MXVR_DMA3_CURR_COUNT);\r\nD32(MXVR_DMA4_CONFIG);\r\nD32(MXVR_DMA4_START_ADDR);\r\nD16(MXVR_DMA4_COUNT);\r\nD32(MXVR_DMA4_CURR_ADDR);\r\nD16(MXVR_DMA4_CURR_COUNT);\r\nD32(MXVR_DMA5_CONFIG);\r\nD32(MXVR_DMA5_START_ADDR);\r\nD16(MXVR_DMA5_COUNT);\r\nD32(MXVR_DMA5_CURR_ADDR);\r\nD16(MXVR_DMA5_CURR_COUNT);\r\nD32(MXVR_DMA6_CONFIG);\r\nD32(MXVR_DMA6_START_ADDR);\r\nD16(MXVR_DMA6_COUNT);\r\nD32(MXVR_DMA6_CURR_ADDR);\r\nD16(MXVR_DMA6_CURR_COUNT);\r\nD32(MXVR_DMA7_CONFIG);\r\nD32(MXVR_DMA7_START_ADDR);\r\nD16(MXVR_DMA7_COUNT);\r\nD32(MXVR_DMA7_CURR_ADDR);\r\nD16(MXVR_DMA7_CURR_COUNT);\r\nD16(MXVR_AP_CTL);\r\nD32(MXVR_APRB_START_ADDR);\r\nD32(MXVR_APRB_CURR_ADDR);\r\nD32(MXVR_APTB_START_ADDR);\r\nD32(MXVR_APTB_CURR_ADDR);\r\nD32(MXVR_CM_CTL);\r\nD32(MXVR_CMRB_START_ADDR);\r\nD32(MXVR_CMRB_CURR_ADDR);\r\nD32(MXVR_CMTB_START_ADDR);\r\nD32(MXVR_CMTB_CURR_ADDR);\r\nD32(MXVR_RRDB_START_ADDR);\r\nD32(MXVR_RRDB_CURR_ADDR);\r\nD32(MXVR_PAT_DATA_0);\r\nD32(MXVR_PAT_EN_0);\r\nD32(MXVR_PAT_DATA_1);\r\nD32(MXVR_PAT_EN_1);\r\nD16(MXVR_FRAME_CNT_0);\r\nD16(MXVR_FRAME_CNT_1);\r\nD32(MXVR_ROUTING_0);\r\nD32(MXVR_ROUTING_1);\r\nD32(MXVR_ROUTING_2);\r\nD32(MXVR_ROUTING_3);\r\nD32(MXVR_ROUTING_4);\r\nD32(MXVR_ROUTING_5);\r\nD32(MXVR_ROUTING_6);\r\nD32(MXVR_ROUTING_7);\r\nD32(MXVR_ROUTING_8);\r\nD32(MXVR_ROUTING_9);\r\nD32(MXVR_ROUTING_10);\r\nD32(MXVR_ROUTING_11);\r\nD32(MXVR_ROUTING_12);\r\nD32(MXVR_ROUTING_13);\r\nD32(MXVR_ROUTING_14);\r\n# ifdef MXVR_PLL_CTL_1\r\nD32(MXVR_PLL_CTL_1);\r\n# endif\r\nD16(MXVR_BLOCK_CNT);\r\n# ifdef MXVR_CLK_CTL\r\nD32(MXVR_CLK_CTL);\r\n# endif\r\n# ifdef MXVR_CDRPLL_CTL\r\nD32(MXVR_CDRPLL_CTL);\r\n# endif\r\n# ifdef MXVR_FMPLL_CTL\r\nD32(MXVR_FMPLL_CTL);\r\n# endif\r\n# ifdef MXVR_PIN_CTL\r\nD16(MXVR_PIN_CTL);\r\n# endif\r\n# ifdef MXVR_SCLK_CNT\r\nD16(MXVR_SCLK_CNT);\r\n# endif\r\n#endif\r\n#ifdef NFC_ADDR\r\nparent = debugfs_create_dir("nfc", top);\r\nD_WO(NFC_ADDR, 16);\r\nD_WO(NFC_CMD, 16);\r\nD_RO(NFC_COUNT, 16);\r\nD16(NFC_CTL);\r\nD_WO(NFC_DATA_RD, 16);\r\nD_WO(NFC_DATA_WR, 16);\r\nD_RO(NFC_ECC0, 16);\r\nD_RO(NFC_ECC1, 16);\r\nD_RO(NFC_ECC2, 16);\r\nD_RO(NFC_ECC3, 16);\r\nD16(NFC_IRQMASK);\r\nD16(NFC_IRQSTAT);\r\nD_WO(NFC_PGCTL, 16);\r\nD_RO(NFC_READ, 16);\r\nD16(NFC_RST);\r\nD_RO(NFC_STAT, 16);\r\n#endif\r\n#ifdef OTP_CONTROL\r\nparent = debugfs_create_dir("otp", top);\r\nD16(OTP_CONTROL);\r\nD16(OTP_BEN);\r\nD16(OTP_STATUS);\r\nD32(OTP_TIMING);\r\nD32(OTP_DATA0);\r\nD32(OTP_DATA1);\r\nD32(OTP_DATA2);\r\nD32(OTP_DATA3);\r\n#endif\r\n#ifdef PINT0_MASK_SET\r\nparent = debugfs_create_dir("pint", top);\r\nPINT(0);\r\nPINT(1);\r\nPINT(2);\r\nPINT(3);\r\n#endif\r\n#ifdef PIXC_CTL\r\nparent = debugfs_create_dir("pixc", top);\r\nD16(PIXC_CTL);\r\nD16(PIXC_PPL);\r\nD16(PIXC_LPF);\r\nD16(PIXC_AHSTART);\r\nD16(PIXC_AHEND);\r\nD16(PIXC_AVSTART);\r\nD16(PIXC_AVEND);\r\nD16(PIXC_ATRANSP);\r\nD16(PIXC_BHSTART);\r\nD16(PIXC_BHEND);\r\nD16(PIXC_BVSTART);\r\nD16(PIXC_BVEND);\r\nD16(PIXC_BTRANSP);\r\nD16(PIXC_INTRSTAT);\r\nD32(PIXC_RYCON);\r\nD32(PIXC_GUCON);\r\nD32(PIXC_BVCON);\r\nD32(PIXC_CCBIAS);\r\nD32(PIXC_TC);\r\n#endif\r\nparent = debugfs_create_dir("pll", top);\r\nD16(PLL_CTL);\r\nD16(PLL_DIV);\r\nD16(PLL_LOCKCNT);\r\nD16(PLL_STAT);\r\nD16(VR_CTL);\r\nD32(CHIPID);\r\n#if defined(PPI_CONTROL) || defined(PPI0_CONTROL) || defined(PPI1_CONTROL)\r\nparent = debugfs_create_dir("ppi", top);\r\n# ifdef PPI_CONTROL\r\nbfin_debug_mmrs_ppi(parent, PPI_CONTROL, -1);\r\n# endif\r\n# ifdef PPI0_CONTROL\r\nPPI(0);\r\n# endif\r\n# ifdef PPI1_CONTROL\r\nPPI(1);\r\n# endif\r\n#endif\r\n#ifdef PWM_CTRL\r\nparent = debugfs_create_dir("pwm", top);\r\nD16(PWM_CTRL);\r\nD16(PWM_STAT);\r\nD16(PWM_TM);\r\nD16(PWM_DT);\r\nD16(PWM_GATE);\r\nD16(PWM_CHA);\r\nD16(PWM_CHB);\r\nD16(PWM_CHC);\r\nD16(PWM_SEG);\r\nD16(PWM_SYNCWT);\r\nD16(PWM_CHAL);\r\nD16(PWM_CHBL);\r\nD16(PWM_CHCL);\r\nD16(PWM_LSI);\r\nD16(PWM_STAT2);\r\n#endif\r\n#ifdef RSI_CONFIG\r\nparent = debugfs_create_dir("rsi", top);\r\nD32(RSI_ARGUMENT);\r\nD16(RSI_CEATA_CONTROL);\r\nD16(RSI_CLK_CONTROL);\r\nD16(RSI_COMMAND);\r\nD16(RSI_CONFIG);\r\nD16(RSI_DATA_CNT);\r\nD16(RSI_DATA_CONTROL);\r\nD16(RSI_DATA_LGTH);\r\nD32(RSI_DATA_TIMER);\r\nD16(RSI_EMASK);\r\nD16(RSI_ESTAT);\r\nD32(RSI_FIFO);\r\nD16(RSI_FIFO_CNT);\r\nD32(RSI_MASK0);\r\nD32(RSI_MASK1);\r\nD16(RSI_PID0);\r\nD16(RSI_PID1);\r\nD16(RSI_PID2);\r\nD16(RSI_PID3);\r\nD16(RSI_PID4);\r\nD16(RSI_PID5);\r\nD16(RSI_PID6);\r\nD16(RSI_PID7);\r\nD16(RSI_PWR_CONTROL);\r\nD16(RSI_RD_WAIT_EN);\r\nD32(RSI_RESPONSE0);\r\nD32(RSI_RESPONSE1);\r\nD32(RSI_RESPONSE2);\r\nD32(RSI_RESPONSE3);\r\nD16(RSI_RESP_CMD);\r\nD32(RSI_STATUS);\r\nD_WO(RSI_STATUSCL, 16);\r\n#endif\r\n#ifdef RTC_ALARM\r\nparent = debugfs_create_dir("rtc", top);\r\nD32(RTC_ALARM);\r\nD16(RTC_ICTL);\r\nD16(RTC_ISTAT);\r\nD16(RTC_PREN);\r\nD32(RTC_STAT);\r\nD16(RTC_SWCNT);\r\n#endif\r\n#ifdef SDH_CFG\r\nparent = debugfs_create_dir("sdh", top);\r\nD32(SDH_ARGUMENT);\r\nD16(SDH_CFG);\r\nD16(SDH_CLK_CTL);\r\nD16(SDH_COMMAND);\r\nD_RO(SDH_DATA_CNT, 16);\r\nD16(SDH_DATA_CTL);\r\nD16(SDH_DATA_LGTH);\r\nD32(SDH_DATA_TIMER);\r\nD16(SDH_E_MASK);\r\nD16(SDH_E_STATUS);\r\nD32(SDH_FIFO);\r\nD_RO(SDH_FIFO_CNT, 16);\r\nD32(SDH_MASK0);\r\nD32(SDH_MASK1);\r\nD_RO(SDH_PID0, 16);\r\nD_RO(SDH_PID1, 16);\r\nD_RO(SDH_PID2, 16);\r\nD_RO(SDH_PID3, 16);\r\nD_RO(SDH_PID4, 16);\r\nD_RO(SDH_PID5, 16);\r\nD_RO(SDH_PID6, 16);\r\nD_RO(SDH_PID7, 16);\r\nD16(SDH_PWR_CTL);\r\nD16(SDH_RD_WAIT_EN);\r\nD_RO(SDH_RESPONSE0, 32);\r\nD_RO(SDH_RESPONSE1, 32);\r\nD_RO(SDH_RESPONSE2, 32);\r\nD_RO(SDH_RESPONSE3, 32);\r\nD_RO(SDH_RESP_CMD, 16);\r\nD_RO(SDH_STATUS, 32);\r\nD_WO(SDH_STATUS_CLR, 16);\r\n#endif\r\n#ifdef SECURE_CONTROL\r\nparent = debugfs_create_dir("security", top);\r\nD16(SECURE_CONTROL);\r\nD16(SECURE_STATUS);\r\nD32(SECURE_SYSSWT);\r\n#endif\r\nparent = debugfs_create_dir("sic", top);\r\nD16(SWRST);\r\nD16(SYSCR);\r\nD16(SIC_RVECT);\r\nD32(SIC_IAR0);\r\nD32(SIC_IAR1);\r\nD32(SIC_IAR2);\r\n#ifdef SIC_IAR3\r\nD32(SIC_IAR3);\r\n#endif\r\n#ifdef SIC_IAR4\r\nD32(SIC_IAR4);\r\nD32(SIC_IAR5);\r\nD32(SIC_IAR6);\r\n#endif\r\n#ifdef SIC_IAR7\r\nD32(SIC_IAR7);\r\n#endif\r\n#ifdef SIC_IAR8\r\nD32(SIC_IAR8);\r\nD32(SIC_IAR9);\r\nD32(SIC_IAR10);\r\nD32(SIC_IAR11);\r\n#endif\r\n#ifdef SIC_IMASK\r\nD32(SIC_IMASK);\r\nD32(SIC_ISR);\r\nD32(SIC_IWR);\r\n#endif\r\n#ifdef SIC_IMASK0\r\nD32(SIC_IMASK0);\r\nD32(SIC_IMASK1);\r\nD32(SIC_ISR0);\r\nD32(SIC_ISR1);\r\nD32(SIC_IWR0);\r\nD32(SIC_IWR1);\r\n#endif\r\n#ifdef SIC_IMASK2\r\nD32(SIC_IMASK2);\r\nD32(SIC_ISR2);\r\nD32(SIC_IWR2);\r\n#endif\r\n#ifdef SICB_RVECT\r\nD16(SICB_SWRST);\r\nD16(SICB_SYSCR);\r\nD16(SICB_RVECT);\r\nD32(SICB_IAR0);\r\nD32(SICB_IAR1);\r\nD32(SICB_IAR2);\r\nD32(SICB_IAR3);\r\nD32(SICB_IAR4);\r\nD32(SICB_IAR5);\r\nD32(SICB_IAR6);\r\nD32(SICB_IAR7);\r\nD32(SICB_IMASK0);\r\nD32(SICB_IMASK1);\r\nD32(SICB_ISR0);\r\nD32(SICB_ISR1);\r\nD32(SICB_IWR0);\r\nD32(SICB_IWR1);\r\n#endif\r\nparent = debugfs_create_dir("spi", top);\r\n#ifdef SPI0_REGBASE\r\nSPI(0);\r\n#endif\r\n#ifdef SPI1_REGBASE\r\nSPI(1);\r\n#endif\r\n#ifdef SPI2_REGBASE\r\nSPI(2);\r\n#endif\r\nparent = debugfs_create_dir("sport", top);\r\n#ifdef SPORT0_STAT\r\nSPORT(0);\r\n#endif\r\n#ifdef SPORT1_STAT\r\nSPORT(1);\r\n#endif\r\n#ifdef SPORT2_STAT\r\nSPORT(2);\r\n#endif\r\n#ifdef SPORT3_STAT\r\nSPORT(3);\r\n#endif\r\n#if defined(TWI_CLKDIV) || defined(TWI0_CLKDIV) || defined(TWI1_CLKDIV)\r\nparent = debugfs_create_dir("twi", top);\r\n# ifdef TWI_CLKDIV\r\nbfin_debug_mmrs_twi(parent, TWI_CLKDIV, -1);\r\n# endif\r\n# ifdef TWI0_CLKDIV\r\nTWI(0);\r\n# endif\r\n# ifdef TWI1_CLKDIV\r\nTWI(1);\r\n# endif\r\n#endif\r\nparent = debugfs_create_dir("uart", top);\r\n#ifdef BFIN_UART_DLL\r\nbfin_debug_mmrs_uart(parent, BFIN_UART_DLL, -1);\r\n#endif\r\n#ifdef UART0_DLL\r\nUART(0);\r\n#endif\r\n#ifdef UART1_DLL\r\nUART(1);\r\n#endif\r\n#ifdef UART2_DLL\r\nUART(2);\r\n#endif\r\n#ifdef UART3_DLL\r\nUART(3);\r\n#endif\r\n#ifdef USB_FADDR\r\nparent = debugfs_create_dir("usb", top);\r\nD16(USB_FADDR);\r\nD16(USB_POWER);\r\nD16(USB_INTRTX);\r\nD16(USB_INTRRX);\r\nD16(USB_INTRTXE);\r\nD16(USB_INTRRXE);\r\nD16(USB_INTRUSB);\r\nD16(USB_INTRUSBE);\r\nD16(USB_FRAME);\r\nD16(USB_INDEX);\r\nD16(USB_TESTMODE);\r\nD16(USB_GLOBINTR);\r\nD16(USB_GLOBAL_CTL);\r\nD16(USB_TX_MAX_PACKET);\r\nD16(USB_CSR0);\r\nD16(USB_TXCSR);\r\nD16(USB_RX_MAX_PACKET);\r\nD16(USB_RXCSR);\r\nD16(USB_COUNT0);\r\nD16(USB_RXCOUNT);\r\nD16(USB_TXTYPE);\r\nD16(USB_NAKLIMIT0);\r\nD16(USB_TXINTERVAL);\r\nD16(USB_RXTYPE);\r\nD16(USB_RXINTERVAL);\r\nD16(USB_TXCOUNT);\r\nD16(USB_EP0_FIFO);\r\nD16(USB_EP1_FIFO);\r\nD16(USB_EP2_FIFO);\r\nD16(USB_EP3_FIFO);\r\nD16(USB_EP4_FIFO);\r\nD16(USB_EP5_FIFO);\r\nD16(USB_EP6_FIFO);\r\nD16(USB_EP7_FIFO);\r\nD16(USB_OTG_DEV_CTL);\r\nD16(USB_OTG_VBUS_IRQ);\r\nD16(USB_OTG_VBUS_MASK);\r\nD16(USB_LINKINFO);\r\nD16(USB_VPLEN);\r\nD16(USB_HS_EOF1);\r\nD16(USB_FS_EOF1);\r\nD16(USB_LS_EOF1);\r\nD16(USB_APHY_CNTRL);\r\nD16(USB_APHY_CALIB);\r\nD16(USB_APHY_CNTRL2);\r\nD16(USB_PHY_TEST);\r\nD16(USB_PLLOSC_CTRL);\r\nD16(USB_SRP_CLKDIV);\r\nD16(USB_EP_NI0_TXMAXP);\r\nD16(USB_EP_NI0_TXCSR);\r\nD16(USB_EP_NI0_RXMAXP);\r\nD16(USB_EP_NI0_RXCSR);\r\nD16(USB_EP_NI0_RXCOUNT);\r\nD16(USB_EP_NI0_TXTYPE);\r\nD16(USB_EP_NI0_TXINTERVAL);\r\nD16(USB_EP_NI0_RXTYPE);\r\nD16(USB_EP_NI0_RXINTERVAL);\r\nD16(USB_EP_NI0_TXCOUNT);\r\nD16(USB_EP_NI1_TXMAXP);\r\nD16(USB_EP_NI1_TXCSR);\r\nD16(USB_EP_NI1_RXMAXP);\r\nD16(USB_EP_NI1_RXCSR);\r\nD16(USB_EP_NI1_RXCOUNT);\r\nD16(USB_EP_NI1_TXTYPE);\r\nD16(USB_EP_NI1_TXINTERVAL);\r\nD16(USB_EP_NI1_RXTYPE);\r\nD16(USB_EP_NI1_RXINTERVAL);\r\nD16(USB_EP_NI1_TXCOUNT);\r\nD16(USB_EP_NI2_TXMAXP);\r\nD16(USB_EP_NI2_TXCSR);\r\nD16(USB_EP_NI2_RXMAXP);\r\nD16(USB_EP_NI2_RXCSR);\r\nD16(USB_EP_NI2_RXCOUNT);\r\nD16(USB_EP_NI2_TXTYPE);\r\nD16(USB_EP_NI2_TXINTERVAL);\r\nD16(USB_EP_NI2_RXTYPE);\r\nD16(USB_EP_NI2_RXINTERVAL);\r\nD16(USB_EP_NI2_TXCOUNT);\r\nD16(USB_EP_NI3_TXMAXP);\r\nD16(USB_EP_NI3_TXCSR);\r\nD16(USB_EP_NI3_RXMAXP);\r\nD16(USB_EP_NI3_RXCSR);\r\nD16(USB_EP_NI3_RXCOUNT);\r\nD16(USB_EP_NI3_TXTYPE);\r\nD16(USB_EP_NI3_TXINTERVAL);\r\nD16(USB_EP_NI3_RXTYPE);\r\nD16(USB_EP_NI3_RXINTERVAL);\r\nD16(USB_EP_NI3_TXCOUNT);\r\nD16(USB_EP_NI4_TXMAXP);\r\nD16(USB_EP_NI4_TXCSR);\r\nD16(USB_EP_NI4_RXMAXP);\r\nD16(USB_EP_NI4_RXCSR);\r\nD16(USB_EP_NI4_RXCOUNT);\r\nD16(USB_EP_NI4_TXTYPE);\r\nD16(USB_EP_NI4_TXINTERVAL);\r\nD16(USB_EP_NI4_RXTYPE);\r\nD16(USB_EP_NI4_RXINTERVAL);\r\nD16(USB_EP_NI4_TXCOUNT);\r\nD16(USB_EP_NI5_TXMAXP);\r\nD16(USB_EP_NI5_TXCSR);\r\nD16(USB_EP_NI5_RXMAXP);\r\nD16(USB_EP_NI5_RXCSR);\r\nD16(USB_EP_NI5_RXCOUNT);\r\nD16(USB_EP_NI5_TXTYPE);\r\nD16(USB_EP_NI5_TXINTERVAL);\r\nD16(USB_EP_NI5_RXTYPE);\r\nD16(USB_EP_NI5_RXINTERVAL);\r\nD16(USB_EP_NI5_TXCOUNT);\r\nD16(USB_EP_NI6_TXMAXP);\r\nD16(USB_EP_NI6_TXCSR);\r\nD16(USB_EP_NI6_RXMAXP);\r\nD16(USB_EP_NI6_RXCSR);\r\nD16(USB_EP_NI6_RXCOUNT);\r\nD16(USB_EP_NI6_TXTYPE);\r\nD16(USB_EP_NI6_TXINTERVAL);\r\nD16(USB_EP_NI6_RXTYPE);\r\nD16(USB_EP_NI6_RXINTERVAL);\r\nD16(USB_EP_NI6_TXCOUNT);\r\nD16(USB_EP_NI7_TXMAXP);\r\nD16(USB_EP_NI7_TXCSR);\r\nD16(USB_EP_NI7_RXMAXP);\r\nD16(USB_EP_NI7_RXCSR);\r\nD16(USB_EP_NI7_RXCOUNT);\r\nD16(USB_EP_NI7_TXTYPE);\r\nD16(USB_EP_NI7_TXINTERVAL);\r\nD16(USB_EP_NI7_RXTYPE);\r\nD16(USB_EP_NI7_RXINTERVAL);\r\nD16(USB_EP_NI7_TXCOUNT);\r\nD16(USB_DMA_INTERRUPT);\r\nD16(USB_DMA0CONTROL);\r\nD16(USB_DMA0ADDRLOW);\r\nD16(USB_DMA0ADDRHIGH);\r\nD16(USB_DMA0COUNTLOW);\r\nD16(USB_DMA0COUNTHIGH);\r\nD16(USB_DMA1CONTROL);\r\nD16(USB_DMA1ADDRLOW);\r\nD16(USB_DMA1ADDRHIGH);\r\nD16(USB_DMA1COUNTLOW);\r\nD16(USB_DMA1COUNTHIGH);\r\nD16(USB_DMA2CONTROL);\r\nD16(USB_DMA2ADDRLOW);\r\nD16(USB_DMA2ADDRHIGH);\r\nD16(USB_DMA2COUNTLOW);\r\nD16(USB_DMA2COUNTHIGH);\r\nD16(USB_DMA3CONTROL);\r\nD16(USB_DMA3ADDRLOW);\r\nD16(USB_DMA3ADDRHIGH);\r\nD16(USB_DMA3COUNTLOW);\r\nD16(USB_DMA3COUNTHIGH);\r\nD16(USB_DMA4CONTROL);\r\nD16(USB_DMA4ADDRLOW);\r\nD16(USB_DMA4ADDRHIGH);\r\nD16(USB_DMA4COUNTLOW);\r\nD16(USB_DMA4COUNTHIGH);\r\nD16(USB_DMA5CONTROL);\r\nD16(USB_DMA5ADDRLOW);\r\nD16(USB_DMA5ADDRHIGH);\r\nD16(USB_DMA5COUNTLOW);\r\nD16(USB_DMA5COUNTHIGH);\r\nD16(USB_DMA6CONTROL);\r\nD16(USB_DMA6ADDRLOW);\r\nD16(USB_DMA6ADDRHIGH);\r\nD16(USB_DMA6COUNTLOW);\r\nD16(USB_DMA6COUNTHIGH);\r\nD16(USB_DMA7CONTROL);\r\nD16(USB_DMA7ADDRLOW);\r\nD16(USB_DMA7ADDRHIGH);\r\nD16(USB_DMA7COUNTLOW);\r\nD16(USB_DMA7COUNTHIGH);\r\n#endif\r\n#ifdef WDOG_CNT\r\nparent = debugfs_create_dir("watchdog", top);\r\nD32(WDOG_CNT);\r\nD16(WDOG_CTL);\r\nD32(WDOG_STAT);\r\n#endif\r\n#ifdef WDOGA_CNT\r\nparent = debugfs_create_dir("watchdog", top);\r\nD32(WDOGA_CNT);\r\nD16(WDOGA_CTL);\r\nD32(WDOGA_STAT);\r\nD32(WDOGB_CNT);\r\nD16(WDOGB_CTL);\r\nD32(WDOGB_STAT);\r\n#endif\r\n#ifdef FIO_FLAG_D\r\n#define PORTFIO FIO_FLAG_D\r\n#endif\r\n#ifdef FIO0_FLAG_D\r\n#define PORTFIO FIO0_FLAG_D\r\n#endif\r\n#ifdef FIO1_FLAG_D\r\n#define PORTGIO FIO1_FLAG_D\r\n#endif\r\n#ifdef FIO2_FLAG_D\r\n#define PORTHIO FIO2_FLAG_D\r\n#endif\r\nparent = debugfs_create_dir("port", top);\r\n#ifdef PORTFIO\r\nPORT(PORTFIO, 'F');\r\n#endif\r\n#ifdef PORTGIO\r\nPORT(PORTGIO, 'G');\r\n#endif\r\n#ifdef PORTHIO\r\nPORT(PORTHIO, 'H');\r\n#endif\r\n#ifdef __ADSPBF51x__\r\nD16(PORTF_FER);\r\nD16(PORTF_DRIVE);\r\nD16(PORTF_HYSTERESIS);\r\nD16(PORTF_MUX);\r\nD16(PORTG_FER);\r\nD16(PORTG_DRIVE);\r\nD16(PORTG_HYSTERESIS);\r\nD16(PORTG_MUX);\r\nD16(PORTH_FER);\r\nD16(PORTH_DRIVE);\r\nD16(PORTH_HYSTERESIS);\r\nD16(PORTH_MUX);\r\nD16(MISCPORT_DRIVE);\r\nD16(MISCPORT_HYSTERESIS);\r\n#endif\r\n#ifdef __ADSPBF52x__\r\nD16(PORTF_FER);\r\nD16(PORTF_DRIVE);\r\nD16(PORTF_HYSTERESIS);\r\nD16(PORTF_MUX);\r\nD16(PORTF_SLEW);\r\nD16(PORTG_FER);\r\nD16(PORTG_DRIVE);\r\nD16(PORTG_HYSTERESIS);\r\nD16(PORTG_MUX);\r\nD16(PORTG_SLEW);\r\nD16(PORTH_FER);\r\nD16(PORTH_DRIVE);\r\nD16(PORTH_HYSTERESIS);\r\nD16(PORTH_MUX);\r\nD16(PORTH_SLEW);\r\nD16(MISCPORT_DRIVE);\r\nD16(MISCPORT_HYSTERESIS);\r\nD16(MISCPORT_SLEW);\r\n#endif\r\n#ifdef BF537_FAMILY\r\nD16(PORTF_FER);\r\nD16(PORTG_FER);\r\nD16(PORTH_FER);\r\nD16(PORT_MUX);\r\n#endif\r\n#ifdef BF538_FAMILY\r\nD16(PORTCIO_FER);\r\nD16(PORTCIO);\r\nD16(PORTCIO_CLEAR);\r\nD16(PORTCIO_SET);\r\nD16(PORTCIO_TOGGLE);\r\nD16(PORTCIO_DIR);\r\nD16(PORTCIO_INEN);\r\nD16(PORTDIO);\r\nD16(PORTDIO_CLEAR);\r\nD16(PORTDIO_DIR);\r\nD16(PORTDIO_FER);\r\nD16(PORTDIO_INEN);\r\nD16(PORTDIO_SET);\r\nD16(PORTDIO_TOGGLE);\r\nD16(PORTEIO);\r\nD16(PORTEIO_CLEAR);\r\nD16(PORTEIO_DIR);\r\nD16(PORTEIO_FER);\r\nD16(PORTEIO_INEN);\r\nD16(PORTEIO_SET);\r\nD16(PORTEIO_TOGGLE);\r\n#endif\r\n#ifdef __ADSPBF54x__\r\n{\r\nint num;\r\nunsigned long base;\r\nbase = PORTA_FER;\r\nfor (num = 0; num < 10; ++num) {\r\nPORT(base, num);\r\nbase += sizeof(struct bfin_gpio_regs);\r\n}\r\n}\r\n#endif\r\ndebug_mmrs_dentry = top;\r\nreturn 0;\r\n}\r\nstatic void __exit bfin_debug_mmrs_exit(void)\r\n{\r\ndebugfs_remove_recursive(debug_mmrs_dentry);\r\n}
