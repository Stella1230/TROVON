static ssize_t\r\nqla4xxx_fw_version_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nif (is_qla8022(ha))\r\nreturn snprintf(buf, PAGE_SIZE, "%d.%02d.%02d (%x)\n",\r\nha->firmware_version[0],\r\nha->firmware_version[1],\r\nha->patch_number, ha->build_number);\r\nelse\r\nreturn snprintf(buf, PAGE_SIZE, "%d.%02d.%02d.%02d\n",\r\nha->firmware_version[0],\r\nha->firmware_version[1],\r\nha->patch_number, ha->build_number);\r\n}\r\nstatic ssize_t\r\nqla4xxx_serial_num_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nreturn snprintf(buf, PAGE_SIZE, "%s\n", ha->serial_number);\r\n}\r\nstatic ssize_t\r\nqla4xxx_iscsi_version_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nreturn snprintf(buf, PAGE_SIZE, "%d.%02d\n", ha->iscsi_major,\r\nha->iscsi_minor);\r\n}\r\nstatic ssize_t\r\nqla4xxx_optrom_version_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nreturn snprintf(buf, PAGE_SIZE, "%d.%02d.%02d.%02d\n",\r\nha->bootload_major, ha->bootload_minor,\r\nha->bootload_patch, ha->bootload_build);\r\n}\r\nstatic ssize_t\r\nqla4xxx_board_id_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nreturn snprintf(buf, PAGE_SIZE, "0x%08X\n", ha->board_id);\r\n}\r\nstatic ssize_t\r\nqla4xxx_fw_state_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nqla4xxx_get_firmware_state(ha);\r\nreturn snprintf(buf, PAGE_SIZE, "0x%08X%8X\n", ha->firmware_state,\r\nha->addl_fw_state);\r\n}\r\nstatic ssize_t\r\nqla4xxx_phy_port_cnt_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nif (!is_qla8022(ha))\r\nreturn -ENOSYS;\r\nreturn snprintf(buf, PAGE_SIZE, "0x%04X\n", ha->phy_port_cnt);\r\n}\r\nstatic ssize_t\r\nqla4xxx_phy_port_num_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nif (!is_qla8022(ha))\r\nreturn -ENOSYS;\r\nreturn snprintf(buf, PAGE_SIZE, "0x%04X\n", ha->phy_port_num);\r\n}\r\nstatic ssize_t\r\nqla4xxx_iscsi_func_cnt_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nif (!is_qla8022(ha))\r\nreturn -ENOSYS;\r\nreturn snprintf(buf, PAGE_SIZE, "0x%04X\n", ha->iscsi_pci_func_cnt);\r\n}\r\nstatic ssize_t\r\nqla4xxx_hba_model_show(struct device *dev, struct device_attribute *attr,\r\nchar *buf)\r\n{\r\nstruct scsi_qla_host *ha = to_qla_host(class_to_shost(dev));\r\nreturn snprintf(buf, PAGE_SIZE, "%s\n", ha->model_name);\r\n}
