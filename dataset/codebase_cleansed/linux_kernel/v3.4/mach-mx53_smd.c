static inline void mx53_smd_init_uart(void)\r\n{\r\nimx53_add_imx_uart(0, NULL);\r\nimx53_add_imx_uart(1, NULL);\r\nimx53_add_imx_uart(2, &mx53_smd_uart_data);\r\n}\r\nstatic inline void mx53_smd_fec_reset(void)\r\n{\r\nint ret;\r\nret = gpio_request(SMD_FEC_PHY_RST, "fec-phy-reset");\r\nif (ret) {\r\nprintk(KERN_ERR"failed to get GPIO_FEC_PHY_RESET: %d\n", ret);\r\nreturn;\r\n}\r\ngpio_direction_output(SMD_FEC_PHY_RST, 0);\r\nmsleep(1);\r\ngpio_set_value(SMD_FEC_PHY_RST, 1);\r\n}\r\nstatic inline void mx53_smd_ahci_pwr_on(void)\r\n{\r\nint ret;\r\nret = gpio_request_one(MX53_SMD_SATA_PWR_EN,\r\nGPIOF_DIR_OUT | GPIOF_INIT_HIGH, "ahci-sata-pwr");\r\nif (ret) {\r\npr_err("failed to enable SATA_PWR_EN: %d\n", ret);\r\nreturn;\r\n}\r\n}\r\nvoid __init imx53_smd_common_init(void)\r\n{\r\nmxc_iomux_v3_setup_multiple_pads(mx53_smd_pads,\r\nARRAY_SIZE(mx53_smd_pads));\r\n}\r\nstatic void __init mx53_smd_board_init(void)\r\n{\r\nimx53_soc_init();\r\nimx53_smd_common_init();\r\nmx53_smd_init_uart();\r\nmx53_smd_fec_reset();\r\nimx53_add_fec(&mx53_smd_fec_data);\r\nimx53_add_imx2_wdt(0, NULL);\r\nimx53_add_imx_i2c(0, &mx53_smd_i2c_data);\r\nimx53_add_sdhci_esdhc_imx(0, NULL);\r\nimx53_add_sdhci_esdhc_imx(1, NULL);\r\nimx53_add_sdhci_esdhc_imx(2, NULL);\r\nmx53_smd_ahci_pwr_on();\r\nimx53_add_ahci_imx();\r\n}\r\nstatic void __init mx53_smd_timer_init(void)\r\n{\r\nmx53_clocks_init(32768, 24000000, 22579200, 0);\r\n}
