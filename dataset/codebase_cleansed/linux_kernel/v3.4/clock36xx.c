static int omap36xx_pwrdn_clk_enable_with_hsdiv_restore(struct clk *clk)\r\n{\r\nu32 dummy_v, orig_v, clksel_shift;\r\nint ret;\r\nret = omap2_dflt_clk_enable(clk);\r\nif (!ret) {\r\nclksel_shift = __ffs(clk->parent->clksel_mask);\r\norig_v = __raw_readl(clk->parent->clksel_reg);\r\ndummy_v = orig_v;\r\ndummy_v ^= (1 << clksel_shift);\r\n__raw_writel(dummy_v, clk->parent->clksel_reg);\r\n__raw_writel(orig_v, clk->parent->clksel_reg);\r\n}\r\nreturn ret;\r\n}
