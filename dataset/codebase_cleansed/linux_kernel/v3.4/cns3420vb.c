static void __init cns3420_early_serial_setup(void)\r\n{\r\n#ifdef CONFIG_SERIAL_8250_CONSOLE\r\nstatic struct uart_port cns3420_serial_port = {\r\n.membase = (void __iomem *)CNS3XXX_UART0_BASE_VIRT,\r\n.mapbase = CNS3XXX_UART0_BASE,\r\n.irq = IRQ_CNS3XXX_UART0,\r\n.iotype = UPIO_MEM,\r\n.flags = UPF_BOOT_AUTOCONF | UPF_FIXED_TYPE,\r\n.regshift = 2,\r\n.uartclk = 24000000,\r\n.line = 0,\r\n.type = PORT_16550A,\r\n.fifosize = 16,\r\n};\r\nearly_serial_setup(&cns3420_serial_port);\r\n#endif\r\n}\r\nstatic void __init cns3420_init(void)\r\n{\r\ncns3xxx_l2x0_init();\r\nplatform_add_devices(cns3420_pdevs, ARRAY_SIZE(cns3420_pdevs));\r\ncns3xxx_ahci_init();\r\ncns3xxx_sdhci_init();\r\npm_power_off = cns3xxx_power_off;\r\n}\r\nstatic void __init cns3420_map_io(void)\r\n{\r\ncns3xxx_map_io();\r\niotable_init(cns3420_io_desc, ARRAY_SIZE(cns3420_io_desc));\r\ncns3420_early_serial_setup();\r\n}
