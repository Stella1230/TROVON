static int __init serial_init(void)\r\n{\r\nunsigned char iotype;\r\niotype = uart8250_data[mips_machtype][0].iotype;\r\nif (UPIO_MEM == iotype)\r\nuart8250_data[mips_machtype][0].membase =\r\n(void __iomem *)_loongson_uart_base;\r\nelse if (UPIO_PORT == iotype)\r\nuart8250_data[mips_machtype][0].iobase =\r\nloongson_uart_base - LOONGSON_PCIIO_BASE;\r\nuart8250_device.dev.platform_data = uart8250_data[mips_machtype];\r\nreturn platform_device_register(&uart8250_device);\r\n}
