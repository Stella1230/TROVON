asmlinkage long sys32_ipc(u32 call, int first, int second, int third,\r\ncompat_uptr_t ptr, u32 fifth)\r\n{\r\nint version;\r\nversion = call >> 16;\r\ncall &= 0xffff;\r\nswitch (call) {\r\ncase SEMOP:\r\nreturn sys_semtimedop(first, compat_ptr(ptr), second, NULL);\r\ncase SEMTIMEDOP:\r\nreturn compat_sys_semtimedop(first, compat_ptr(ptr), second,\r\ncompat_ptr(fifth));\r\ncase SEMGET:\r\nreturn sys_semget(first, second, third);\r\ncase SEMCTL:\r\nreturn compat_sys_semctl(first, second, third, compat_ptr(ptr));\r\ncase MSGSND:\r\nreturn compat_sys_msgsnd(first, second, third, compat_ptr(ptr));\r\ncase MSGRCV:\r\nreturn compat_sys_msgrcv(first, second, fifth, third,\r\nversion, compat_ptr(ptr));\r\ncase MSGGET:\r\nreturn sys_msgget((key_t) first, second);\r\ncase MSGCTL:\r\nreturn compat_sys_msgctl(first, second, compat_ptr(ptr));\r\ncase SHMAT:\r\nreturn compat_sys_shmat(first, second, third, version,\r\ncompat_ptr(ptr));\r\ncase SHMDT:\r\nreturn sys_shmdt(compat_ptr(ptr));\r\ncase SHMGET:\r\nreturn sys_shmget(first, (unsigned)second, third);\r\ncase SHMCTL:\r\nreturn compat_sys_shmctl(first, second, compat_ptr(ptr));\r\n}\r\nreturn -ENOSYS;\r\n}
