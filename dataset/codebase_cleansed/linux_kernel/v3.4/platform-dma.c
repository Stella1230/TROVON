static struct platform_device *__init mxs_add_dma(const char *devid,\r\nresource_size_t base)\r\n{\r\nstruct resource res[] = {\r\n{\r\n.start = base,\r\n.end = base + SZ_8K - 1,\r\n.flags = IORESOURCE_MEM,\r\n}\r\n};\r\nreturn mxs_add_platform_device_dmamask(devid, -1,\r\nres, ARRAY_SIZE(res), NULL, 0,\r\nDMA_BIT_MASK(32));\r\n}\r\nstatic int __init mxs_add_mxs_dma(void)\r\n{\r\nchar *apbh = "mxs-dma-apbh";\r\nchar *apbx = "mxs-dma-apbx";\r\nif (cpu_is_mx23()) {\r\nmxs_add_dma(apbh, MX23_APBH_DMA_BASE_ADDR);\r\nmxs_add_dma(apbx, MX23_APBX_DMA_BASE_ADDR);\r\n}\r\nif (cpu_is_mx28()) {\r\nmxs_add_dma(apbh, MX28_APBH_DMA_BASE_ADDR);\r\nmxs_add_dma(apbx, MX28_APBX_DMA_BASE_ADDR);\r\n}\r\nreturn 0;\r\n}
