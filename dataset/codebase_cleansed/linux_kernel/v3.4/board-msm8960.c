static void __init msm8960_fixup(struct tag *tag, char **cmdline,\r\nstruct meminfo *mi)\r\n{\r\nfor (; tag->hdr.size; tag = tag_next(tag))\r\nif (tag->hdr.tag == ATAG_MEM &&\r\ntag->u.mem.start == 0x40200000) {\r\ntag->u.mem.start = 0x40000000;\r\ntag->u.mem.size += SZ_2M;\r\n}\r\n}\r\nstatic void __init msm8960_reserve(void)\r\n{\r\nmemblock_remove(0x40000000, SZ_2M);\r\n}\r\nstatic void __init msm8960_map_io(void)\r\n{\r\nmsm_map_msm8960_io();\r\n}\r\nstatic void __init msm8960_init_irq(void)\r\n{\r\nunsigned int i;\r\ngic_init(0, GIC_PPI_START, MSM_QGIC_DIST_BASE,\r\n(void *)MSM_QGIC_CPU_BASE);\r\nwritel(0xFFFFD7FF, MSM_QGIC_DIST_BASE + GIC_DIST_CONFIG + 4);\r\nif (machine_is_msm8960_rumi3())\r\nwritel(0x0000FFFF, MSM_QGIC_DIST_BASE + GIC_DIST_ENABLE_SET);\r\nfor (i = GIC_PPI_START; i < GIC_SPI_START; i++) {\r\nif (i != AVS_SVICINT && i != AVS_SVICINTSWDONE)\r\nirq_set_handler(i, handle_percpu_irq);\r\n}\r\n}\r\nstatic void __init msm8960_sim_init(void)\r\n{\r\nplatform_add_devices(sim_devices, ARRAY_SIZE(sim_devices));\r\n}\r\nstatic void __init msm8960_rumi3_init(void)\r\n{\r\nplatform_add_devices(rumi3_devices, ARRAY_SIZE(rumi3_devices));\r\n}
