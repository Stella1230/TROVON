static int __init polaris_initialise(void)\r\n{\r\nu16 wcr, bcr_mask;\r\nprintk(KERN_INFO "Configuring Polaris external bus\n");\r\nwcr = __raw_readw(WCR2);\r\nwcr &= (~AREA5_WAIT_CTRL);\r\nwcr |= (WAIT_STATES_10 << 10);\r\n__raw_writew(wcr, WCR2);\r\nbcr_mask = __raw_readw(BCR2);\r\nbcr_mask |= 1 << 10;\r\n__raw_writew(bcr_mask, BCR2);\r\nreturn platform_add_devices(polaris_devices,\r\nARRAY_SIZE(polaris_devices));\r\n}\r\nstatic void __init init_polaris_irq(void)\r\n{\r\n__raw_writew(0, BCR_ILCRA);\r\n__raw_writew(0, BCR_ILCRB);\r\n__raw_writew(0, BCR_ILCRC);\r\n__raw_writew(0, BCR_ILCRD);\r\n__raw_writew(0, BCR_ILCRE);\r\n__raw_writew(0, BCR_ILCRF);\r\n__raw_writew(0, BCR_ILCRG);\r\nregister_ipr_controller(&ipr_irq_desc);\r\n}
