static void n30_sdi_set_power(unsigned char power_mode, unsigned short vdd)\r\n{\r\nswitch (power_mode) {\r\ncase MMC_POWER_ON:\r\ncase MMC_POWER_UP:\r\ngpio_set_value(S3C2410_GPG(4), 1);\r\nbreak;\r\ncase MMC_POWER_OFF:\r\ndefault:\r\ngpio_set_value(S3C2410_GPG(4), 0);\r\nbreak;\r\n}\r\n}\r\nstatic void __init n30_hwinit(void)\r\n{\r\nif (machine_is_n30())\r\n__raw_writel(0x007fffff, S3C2410_GPACON);\r\nif (machine_is_n35())\r\n__raw_writel(0x007fefff, S3C2410_GPACON);\r\n__raw_writel(0x00000000, S3C2410_GPADAT);\r\n__raw_writel(0x00154556, S3C2410_GPBCON);\r\n__raw_writel(0x00000750, S3C2410_GPBDAT);\r\n__raw_writel(0x00000073, S3C2410_GPBUP);\r\n__raw_writel(0xaaa80618, S3C2410_GPCCON);\r\n__raw_writel(0x0000014c, S3C2410_GPCDAT);\r\n__raw_writel(0x0000fef2, S3C2410_GPCUP);\r\n__raw_writel(0xaa95aaa4, S3C2410_GPDCON);\r\n__raw_writel(0x00000601, S3C2410_GPDDAT);\r\n__raw_writel(0x0000fbfe, S3C2410_GPDUP);\r\n__raw_writel(0xa56aaaaa, S3C2410_GPECON);\r\n__raw_writel(0x0000efc5, S3C2410_GPEDAT);\r\n__raw_writel(0x0000f81f, S3C2410_GPEUP);\r\n__raw_writel(0x0000aaaa, S3C2410_GPFCON);\r\n__raw_writel(0x00000000, S3C2410_GPFDAT);\r\n__raw_writel(0x000000ff, S3C2410_GPFUP);\r\nif (machine_is_n30())\r\n__raw_writel(0xff0a956a, S3C2410_GPGCON);\r\nif (machine_is_n35())\r\n__raw_writel(0xff4aa92a, S3C2410_GPGCON);\r\n__raw_writel(0x0000e800, S3C2410_GPGDAT);\r\n__raw_writel(0x0000f86f, S3C2410_GPGUP);\r\n__raw_writel(0x0028aaaa, S3C2410_GPHCON);\r\n__raw_writel(0x000005ef, S3C2410_GPHDAT);\r\n__raw_writel(0x0000063f, S3C2410_GPHUP);\r\n}\r\nstatic void __init n30_map_io(void)\r\n{\r\ns3c24xx_init_io(n30_iodesc, ARRAY_SIZE(n30_iodesc));\r\nn30_hwinit();\r\ns3c24xx_init_clocks(0);\r\ns3c24xx_init_uarts(n30_uartcfgs, ARRAY_SIZE(n30_uartcfgs));\r\n}\r\nstatic void __init n30_init(void)\r\n{\r\nWARN_ON(gpio_request(S3C2410_GPG(4), "mmc power"));\r\ns3c24xx_fb_set_platdata(&n30_fb_info);\r\ns3c24xx_udc_set_platdata(&n30_udc_cfg);\r\ns3c24xx_mci_set_platdata(&n30_mci_cfg);\r\ns3c_i2c0_set_platdata(&n30_i2ccfg);\r\ns3c2410_modify_misccr(S3C2410_MISCCR_USBHOST |\r\nS3C2410_MISCCR_USBSUSPND0 |\r\nS3C2410_MISCCR_USBSUSPND1, 0x0);\r\nif (machine_is_n30()) {\r\ns3c2410_modify_misccr(S3C2410_MISCCR_USBHOST |\r\nS3C2410_MISCCR_USBSUSPND0 |\r\nS3C2410_MISCCR_USBSUSPND1, 0x0);\r\nplatform_add_devices(n30_devices, ARRAY_SIZE(n30_devices));\r\n}\r\nif (machine_is_n35()) {\r\ns3c2410_modify_misccr(S3C2410_MISCCR_USBHOST |\r\nS3C2410_MISCCR_USBSUSPND0 |\r\nS3C2410_MISCCR_USBSUSPND1,\r\nS3C2410_MISCCR_USBSUSPND0);\r\nplatform_add_devices(n35_devices, ARRAY_SIZE(n35_devices));\r\n}\r\n}
