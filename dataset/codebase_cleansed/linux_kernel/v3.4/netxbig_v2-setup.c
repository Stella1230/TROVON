static void netxbig_v2_power_off(void)\r\n{\r\ngpio_set_value(NETXBIG_V2_GPIO_POWER_OFF, 1);\r\n}\r\nstatic void __init netxbig_v2_init(void)\r\n{\r\nkirkwood_init();\r\nif (machine_is_net2big_v2())\r\nkirkwood_mpp_conf(net2big_v2_mpp_config);\r\nelse\r\nkirkwood_mpp_conf(net5big_v2_mpp_config);\r\nif (machine_is_net2big_v2())\r\nlacie_v2_hdd_power_init(2);\r\nelse\r\nlacie_v2_hdd_power_init(5);\r\nkirkwood_ehci_init();\r\nkirkwood_ge00_init(&netxbig_v2_ge00_data);\r\nif (machine_is_net5big_v2())\r\nkirkwood_ge01_init(&netxbig_v2_ge01_data);\r\nkirkwood_sata_init(&netxbig_v2_sata_data);\r\nkirkwood_uart0_init();\r\nlacie_v2_register_flash();\r\nlacie_v2_register_i2c_devices();\r\nif (machine_is_net5big_v2())\r\nnetxbig_v2_leds.dev.platform_data = &net5big_v2_leds_data;\r\nplatform_device_register(&netxbig_v2_leds);\r\nplatform_device_register(&netxbig_v2_gpio_buttons);\r\nif (gpio_request(NETXBIG_V2_GPIO_POWER_OFF, "power-off") == 0 &&\r\ngpio_direction_output(NETXBIG_V2_GPIO_POWER_OFF, 0) == 0)\r\npm_power_off = netxbig_v2_power_off;\r\nelse\r\npr_err("netxbig_v2: failed to configure power-off GPIO\n");\r\n}
