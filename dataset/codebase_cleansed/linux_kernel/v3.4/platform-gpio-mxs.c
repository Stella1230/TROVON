struct platform_device *__init mxs_add_gpio(\r\nint id, resource_size_t iobase, int irq)\r\n{\r\nstruct resource res[] = {\r\n{\r\n.start = iobase,\r\n.end = iobase + SZ_8K - 1,\r\n.flags = IORESOURCE_MEM,\r\n}, {\r\n.start = irq,\r\n.end = irq,\r\n.flags = IORESOURCE_IRQ,\r\n},\r\n};\r\nreturn platform_device_register_resndata(&mxs_apbh_bus,\r\n"gpio-mxs", id, res, ARRAY_SIZE(res), NULL, 0);\r\n}\r\nstatic int __init mxs_add_mxs_gpio(void)\r\n{\r\nif (cpu_is_mx23()) {\r\nmxs_add_gpio(0, MX23_PINCTRL_BASE_ADDR, MX23_INT_GPIO0);\r\nmxs_add_gpio(1, MX23_PINCTRL_BASE_ADDR, MX23_INT_GPIO1);\r\nmxs_add_gpio(2, MX23_PINCTRL_BASE_ADDR, MX23_INT_GPIO2);\r\n}\r\nif (cpu_is_mx28()) {\r\nmxs_add_gpio(0, MX28_PINCTRL_BASE_ADDR, MX28_INT_GPIO0);\r\nmxs_add_gpio(1, MX28_PINCTRL_BASE_ADDR, MX28_INT_GPIO1);\r\nmxs_add_gpio(2, MX28_PINCTRL_BASE_ADDR, MX28_INT_GPIO2);\r\nmxs_add_gpio(3, MX28_PINCTRL_BASE_ADDR, MX28_INT_GPIO3);\r\nmxs_add_gpio(4, MX28_PINCTRL_BASE_ADDR, MX28_INT_GPIO4);\r\n}\r\nreturn 0;\r\n}
