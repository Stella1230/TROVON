static int __init p5020_ds_probe(void)\r\n{\r\nunsigned long root = of_get_flat_dt_root();\r\n#ifdef CONFIG_SMP\r\nextern struct smp_ops_t smp_85xx_ops;\r\n#endif\r\nif (of_flat_dt_is_compatible(root, "fsl,P5020DS"))\r\nreturn 1;\r\nif (of_flat_dt_is_compatible(root, "fsl,P5020DS-hv")) {\r\nppc_md.init_IRQ = ehv_pic_init;\r\nppc_md.get_irq = ehv_pic_get_irq;\r\nppc_md.restart = fsl_hv_restart;\r\nppc_md.power_off = fsl_hv_halt;\r\nppc_md.halt = fsl_hv_halt;\r\n#ifdef CONFIG_SMP\r\nsmp_85xx_ops.give_timebase = NULL;\r\nsmp_85xx_ops.take_timebase = NULL;\r\n#endif\r\nreturn 1;\r\n}\r\nreturn 0;\r\n}
