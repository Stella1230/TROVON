void __init omap_ads7846_init(int bus_num, int gpio_pendown, int gpio_debounce,\r\nstruct ads7846_platform_data *board_pdata)\r\n{\r\nstruct spi_board_info *spi_bi = &ads7846_spi_board_info;\r\nint err;\r\nif (board_pdata && board_pdata->get_pendown_state) {\r\nerr = gpio_request_one(gpio_pendown, GPIOF_IN, "TSPenDown");\r\nif (err) {\r\npr_err("Couldn't obtain gpio for TSPenDown: %d\n", err);\r\nreturn;\r\n}\r\ngpio_export(gpio_pendown, 0);\r\nif (gpio_debounce)\r\ngpio_set_debounce(gpio_pendown, gpio_debounce);\r\n}\r\nads7846_config.gpio_pendown = gpio_pendown;\r\nspi_bi->bus_num = bus_num;\r\nspi_bi->irq = OMAP_GPIO_IRQ(gpio_pendown);\r\nif (board_pdata)\r\nspi_bi->platform_data = board_pdata;\r\nspi_register_board_info(&ads7846_spi_board_info, 1);\r\n}\r\nvoid __init omap_ads7846_init(int bus_num, int gpio_pendown, int gpio_debounce,\r\nstruct ads7846_platform_data *board_pdata)\r\n{\r\n}\r\nvoid __init omap_nand_flash_init(int options, struct mtd_partition *parts,\r\nint nr_parts)\r\n{\r\nu8 cs = 0;\r\nu8 nandcs = GPMC_CS_NUM + 1;\r\nwhile (cs < GPMC_CS_NUM) {\r\nu32 ret = 0;\r\nret = gpmc_cs_read_reg(cs, GPMC_CS_CONFIG1);\r\nif ((ret & 0xC00) == 0x800) {\r\nprintk(KERN_INFO "Found NAND on CS%d\n", cs);\r\nif (nandcs > GPMC_CS_NUM)\r\nnandcs = cs;\r\n}\r\ncs++;\r\n}\r\nif (nandcs > GPMC_CS_NUM) {\r\nprintk(KERN_INFO "NAND: Unable to find configuration "\r\n"in GPMC\n ");\r\nreturn;\r\n}\r\nif (nandcs < GPMC_CS_NUM) {\r\nnand_data.cs = nandcs;\r\nnand_data.parts = parts;\r\nnand_data.nr_parts = nr_parts;\r\nnand_data.devsize = options;\r\nprintk(KERN_INFO "Registering NAND on CS%d\n", nandcs);\r\nif (gpmc_nand_init(&nand_data) < 0)\r\nprintk(KERN_ERR "Unable to register NAND device\n");\r\n}\r\n}\r\nvoid __init omap_nand_flash_init(int options, struct mtd_partition *parts,\r\nint nr_parts)\r\n{\r\n}
