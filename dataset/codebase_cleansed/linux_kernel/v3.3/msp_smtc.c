static void msp_smtc_send_ipi_single(int cpu, unsigned int action)\r\n{\r\nsmtc_send_ipi(cpu, LINUX_SMP_IPI, action);\r\n}\r\nstatic void msp_smtc_send_ipi_mask(const struct cpumask *mask,\r\nunsigned int action)\r\n{\r\nunsigned int i;\r\nfor_each_cpu(i, mask)\r\nmsp_smtc_send_ipi_single(i, action);\r\n}\r\nstatic void __cpuinit msp_smtc_init_secondary(void)\r\n{\r\nint myvpe;\r\nmyvpe = read_c0_tcbind() & TCBIND_CURVPE;\r\nif (myvpe > 0)\r\nchange_c0_status(ST0_IM, STATUSF_IP0 | STATUSF_IP1 |\r\nSTATUSF_IP6 | STATUSF_IP7);\r\nsmtc_init_secondary();\r\n}\r\nstatic void __cpuinit msp_smtc_boot_secondary(int cpu,\r\nstruct task_struct *idle)\r\n{\r\nsmtc_boot_secondary(cpu, idle);\r\n}\r\nstatic void __cpuinit msp_smtc_smp_finish(void)\r\n{\r\nsmtc_smp_finish();\r\n}\r\nstatic void msp_smtc_cpus_done(void)\r\n{\r\n}\r\nstatic void __init msp_smtc_smp_setup(void)\r\n{\r\nif (read_c0_config3() & (1 << 2))\r\nsmp_num_siblings = smtc_build_cpu_map(0);\r\n}\r\nstatic void __init msp_smtc_prepare_cpus(unsigned int max_cpus)\r\n{\r\nsmtc_prepare_cpus(max_cpus);\r\n}
