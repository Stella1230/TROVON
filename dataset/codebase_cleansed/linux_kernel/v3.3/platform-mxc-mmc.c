struct platform_device *__init imx_add_mxc_mmc(\r\nconst struct imx_mxc_mmc_data *data,\r\nconst struct imxmmc_platform_data *pdata)\r\n{\r\nstruct resource res[] = {\r\n{\r\n.start = data->iobase,\r\n.end = data->iobase + SZ_4K - 1,\r\n.flags = IORESOURCE_MEM,\r\n}, {\r\n.start = data->irq,\r\n.end = data->irq,\r\n.flags = IORESOURCE_IRQ,\r\n}, {\r\n.start = data->dmareq,\r\n.end = data->dmareq,\r\n.flags = IORESOURCE_DMA,\r\n},\r\n};\r\nreturn imx_add_platform_device_dmamask("mxc-mmc", data->id,\r\nres, ARRAY_SIZE(res),\r\npdata, sizeof(*pdata), DMA_BIT_MASK(32));\r\n}
