int watchdog_register_device(struct watchdog_device *wdd)\r\n{\r\nint ret;\r\nif (wdd == NULL || wdd->info == NULL || wdd->ops == NULL)\r\nreturn -EINVAL;\r\nif (wdd->ops->start == NULL || wdd->ops->stop == NULL)\r\nreturn -EINVAL;\r\nif (wdd->min_timeout > wdd->max_timeout) {\r\npr_info("Invalid min and max timeout values, resetting to 0!\n");\r\nwdd->min_timeout = 0;\r\nwdd->max_timeout = 0;\r\n}\r\nret = watchdog_dev_register(wdd);\r\nif (ret) {\r\npr_err("error registering /dev/watchdog (err=%d).\n", ret);\r\nreturn ret;\r\n}\r\nreturn 0;\r\n}\r\nvoid watchdog_unregister_device(struct watchdog_device *wdd)\r\n{\r\nint ret;\r\nif (wdd == NULL)\r\nreturn;\r\nret = watchdog_dev_unregister(wdd);\r\nif (ret)\r\npr_err("error unregistering /dev/watchdog (err=%d).\n", ret);\r\n}
