static void ar9003_hw_init_mode_regs(struct ath_hw *ah)\r\n{\r\n#define PCIE_PLL_ON_CREQ_DIS_L1_2P0 \\r\nar9462_pciephy_pll_on_clkreq_disable_L1_2p0\r\n#define AR9462_BB_CTX_COEFJ(x) \\r\nar9462_##x##_baseband_core_txfir_coeff_japan_2484\r\n#define AR9462_BBC_TXIFR_COEFFJ \\r\nar9462_2p0_baseband_core_txfir_coeff_japan_2484\r\nif (AR_SREV_9330_11(ah)) {\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_CORE],\r\nar9331_1p1_mac_core,\r\nARRAY_SIZE(ar9331_1p1_mac_core), 2);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_POST],\r\nar9331_1p1_mac_postamble,\r\nARRAY_SIZE(ar9331_1p1_mac_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_CORE],\r\nar9331_1p1_baseband_core,\r\nARRAY_SIZE(ar9331_1p1_baseband_core), 2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_POST],\r\nar9331_1p1_baseband_postamble,\r\nARRAY_SIZE(ar9331_1p1_baseband_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_CORE],\r\nar9331_1p1_radio_core,\r\nARRAY_SIZE(ar9331_1p1_radio_core), 2);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_POST], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_PRE],\r\nar9331_1p1_soc_preamble,\r\nARRAY_SIZE(ar9331_1p1_soc_preamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_CORE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_POST],\r\nar9331_1p1_soc_postamble,\r\nARRAY_SIZE(ar9331_1p1_soc_postamble), 2);\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9331_common_rx_gain_1p1,\r\nARRAY_SIZE(ar9331_common_rx_gain_1p1), 2);\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_lowest_ob_db_tx_gain_1p1,\r\nARRAY_SIZE(ar9331_modes_lowest_ob_db_tx_gain_1p1),\r\n5);\r\nif (ah->is_clk_25mhz)\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9331_1p1_xtal_25M,\r\nARRAY_SIZE(ar9331_1p1_xtal_25M), 2);\r\nelse\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9331_1p1_xtal_40M,\r\nARRAY_SIZE(ar9331_1p1_xtal_40M), 2);\r\n} else if (AR_SREV_9330_12(ah)) {\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_CORE],\r\nar9331_1p2_mac_core,\r\nARRAY_SIZE(ar9331_1p2_mac_core), 2);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_POST],\r\nar9331_1p2_mac_postamble,\r\nARRAY_SIZE(ar9331_1p2_mac_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_CORE],\r\nar9331_1p2_baseband_core,\r\nARRAY_SIZE(ar9331_1p2_baseband_core), 2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_POST],\r\nar9331_1p2_baseband_postamble,\r\nARRAY_SIZE(ar9331_1p2_baseband_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_CORE],\r\nar9331_1p2_radio_core,\r\nARRAY_SIZE(ar9331_1p2_radio_core), 2);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_POST], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_PRE],\r\nar9331_1p2_soc_preamble,\r\nARRAY_SIZE(ar9331_1p2_soc_preamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_CORE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_POST],\r\nar9331_1p2_soc_postamble,\r\nARRAY_SIZE(ar9331_1p2_soc_postamble), 2);\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9331_common_rx_gain_1p2,\r\nARRAY_SIZE(ar9331_common_rx_gain_1p2), 2);\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_lowest_ob_db_tx_gain_1p2,\r\nARRAY_SIZE(ar9331_modes_lowest_ob_db_tx_gain_1p2),\r\n5);\r\nif (ah->is_clk_25mhz)\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9331_1p2_xtal_25M,\r\nARRAY_SIZE(ar9331_1p2_xtal_25M), 2);\r\nelse\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9331_1p2_xtal_40M,\r\nARRAY_SIZE(ar9331_1p2_xtal_40M), 2);\r\n} else if (AR_SREV_9340(ah)) {\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_CORE],\r\nar9340_1p0_mac_core,\r\nARRAY_SIZE(ar9340_1p0_mac_core), 2);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_POST],\r\nar9340_1p0_mac_postamble,\r\nARRAY_SIZE(ar9340_1p0_mac_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_CORE],\r\nar9340_1p0_baseband_core,\r\nARRAY_SIZE(ar9340_1p0_baseband_core), 2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_POST],\r\nar9340_1p0_baseband_postamble,\r\nARRAY_SIZE(ar9340_1p0_baseband_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_CORE],\r\nar9340_1p0_radio_core,\r\nARRAY_SIZE(ar9340_1p0_radio_core), 2);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_POST],\r\nar9340_1p0_radio_postamble,\r\nARRAY_SIZE(ar9340_1p0_radio_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_PRE],\r\nar9340_1p0_soc_preamble,\r\nARRAY_SIZE(ar9340_1p0_soc_preamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_CORE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_POST],\r\nar9340_1p0_soc_postamble,\r\nARRAY_SIZE(ar9340_1p0_soc_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9340Common_wo_xlna_rx_gain_table_1p0,\r\nARRAY_SIZE(ar9340Common_wo_xlna_rx_gain_table_1p0),\r\n5);\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9340Modes_high_ob_db_tx_gain_table_1p0,\r\nARRAY_SIZE(ar9340Modes_high_ob_db_tx_gain_table_1p0),\r\n5);\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9340Modes_fast_clock_1p0,\r\nARRAY_SIZE(ar9340Modes_fast_clock_1p0),\r\n3);\r\nINIT_INI_ARRAY(&ah->iniModesAdditional_40M,\r\nar9340_1p0_radio_core_40M,\r\nARRAY_SIZE(ar9340_1p0_radio_core_40M),\r\n2);\r\n} else if (AR_SREV_9485_11(ah)) {\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_CORE],\r\nar9485_1_1_mac_core,\r\nARRAY_SIZE(ar9485_1_1_mac_core), 2);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_POST],\r\nar9485_1_1_mac_postamble,\r\nARRAY_SIZE(ar9485_1_1_mac_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_PRE], ar9485_1_1,\r\nARRAY_SIZE(ar9485_1_1), 2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_CORE],\r\nar9485_1_1_baseband_core,\r\nARRAY_SIZE(ar9485_1_1_baseband_core), 2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_POST],\r\nar9485_1_1_baseband_postamble,\r\nARRAY_SIZE(ar9485_1_1_baseband_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_CORE],\r\nar9485_1_1_radio_core,\r\nARRAY_SIZE(ar9485_1_1_radio_core), 2);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_POST],\r\nar9485_1_1_radio_postamble,\r\nARRAY_SIZE(ar9485_1_1_radio_postamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_PRE],\r\nar9485_1_1_soc_preamble,\r\nARRAY_SIZE(ar9485_1_1_soc_preamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_CORE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_POST], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9485Common_wo_xlna_rx_gain_1_1,\r\nARRAY_SIZE(ar9485Common_wo_xlna_rx_gain_1_1), 2);\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9485_modes_lowest_ob_db_tx_gain_1_1,\r\nARRAY_SIZE(ar9485_modes_lowest_ob_db_tx_gain_1_1),\r\n5);\r\nINIT_INI_ARRAY(&ah->iniPcieSerdes,\r\nar9485_1_1_pcie_phy_clkreq_disable_L1,\r\nARRAY_SIZE(ar9485_1_1_pcie_phy_clkreq_disable_L1),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniPcieSerdesLowPower,\r\nar9485_1_1_pcie_phy_clkreq_disable_L1,\r\nARRAY_SIZE(ar9485_1_1_pcie_phy_clkreq_disable_L1),\r\n2);\r\n} else if (AR_SREV_9462_10(ah)) {\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_CORE], ar9462_1p0_mac_core,\r\nARRAY_SIZE(ar9462_1p0_mac_core), 2);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_POST],\r\nar9462_1p0_mac_postamble,\r\nARRAY_SIZE(ar9462_1p0_mac_postamble),\r\n5);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_CORE],\r\nar9462_1p0_baseband_core,\r\nARRAY_SIZE(ar9462_1p0_baseband_core),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_POST],\r\nar9462_1p0_baseband_postamble,\r\nARRAY_SIZE(ar9462_1p0_baseband_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_CORE],\r\nar9462_1p0_radio_core,\r\nARRAY_SIZE(ar9462_1p0_radio_core), 2);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_POST],\r\nar9462_1p0_radio_postamble,\r\nARRAY_SIZE(ar9462_1p0_radio_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_PRE],\r\nar9462_1p0_soc_preamble,\r\nARRAY_SIZE(ar9462_1p0_soc_preamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_CORE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_POST],\r\nar9462_1p0_soc_postamble,\r\nARRAY_SIZE(ar9462_1p0_soc_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9462_common_rx_gain_table_1p0,\r\nARRAY_SIZE(ar9462_common_rx_gain_table_1p0), 2);\r\nINIT_INI_ARRAY(&ah->iniPcieSerdes,\r\nar9462_pcie_phy_clkreq_disable_L1_1p0,\r\nARRAY_SIZE(ar9462_pcie_phy_clkreq_disable_L1_1p0),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniPcieSerdesLowPower,\r\nar9462_pcie_phy_clkreq_disable_L1_1p0,\r\nARRAY_SIZE(ar9462_pcie_phy_clkreq_disable_L1_1p0),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9462_modes_fast_clock_1p0,\r\nARRAY_SIZE(ar9462_modes_fast_clock_1p0), 3);\r\nINIT_INI_ARRAY(&ah->iniCckfirJapan2484,\r\nAR9462_BB_CTX_COEFJ(1p0),\r\nARRAY_SIZE(AR9462_BB_CTX_COEFJ(1p0)), 2);\r\n} else if (AR_SREV_9462_20(ah)) {\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_CORE], ar9462_2p0_mac_core,\r\nARRAY_SIZE(ar9462_2p0_mac_core), 2);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_POST],\r\nar9462_2p0_mac_postamble,\r\nARRAY_SIZE(ar9462_2p0_mac_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_CORE],\r\nar9462_2p0_baseband_core,\r\nARRAY_SIZE(ar9462_2p0_baseband_core), 2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_POST],\r\nar9462_2p0_baseband_postamble,\r\nARRAY_SIZE(ar9462_2p0_baseband_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_CORE],\r\nar9462_2p0_radio_core,\r\nARRAY_SIZE(ar9462_2p0_radio_core), 2);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_POST],\r\nar9462_2p0_radio_postamble,\r\nARRAY_SIZE(ar9462_2p0_radio_postamble), 5);\r\nINIT_INI_ARRAY(&ah->ini_radio_post_sys2ant,\r\nar9462_2p0_radio_postamble_sys2ant,\r\nARRAY_SIZE(ar9462_2p0_radio_postamble_sys2ant),\r\n5);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_PRE],\r\nar9462_2p0_soc_preamble,\r\nARRAY_SIZE(ar9462_2p0_soc_preamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_CORE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_POST],\r\nar9462_2p0_soc_postamble,\r\nARRAY_SIZE(ar9462_2p0_soc_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9462_common_rx_gain_table_2p0,\r\nARRAY_SIZE(ar9462_common_rx_gain_table_2p0), 2);\r\nINIT_INI_ARRAY(&ah->ini_BTCOEX_MAX_TXPWR,\r\nar9462_2p0_BTCOEX_MAX_TXPWR_table,\r\nARRAY_SIZE(ar9462_2p0_BTCOEX_MAX_TXPWR_table),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniPcieSerdes,\r\nPCIE_PLL_ON_CREQ_DIS_L1_2P0,\r\nARRAY_SIZE(PCIE_PLL_ON_CREQ_DIS_L1_2P0),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniPcieSerdesLowPower,\r\nPCIE_PLL_ON_CREQ_DIS_L1_2P0,\r\nARRAY_SIZE(PCIE_PLL_ON_CREQ_DIS_L1_2P0),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9462_modes_fast_clock_2p0,\r\nARRAY_SIZE(ar9462_modes_fast_clock_2p0), 3);\r\nINIT_INI_ARRAY(&ah->iniCckfirJapan2484,\r\nAR9462_BB_CTX_COEFJ(2p0),\r\nARRAY_SIZE(AR9462_BB_CTX_COEFJ(2p0)), 2);\r\nINIT_INI_ARRAY(&ah->ini_japan2484, AR9462_BBC_TXIFR_COEFFJ,\r\nARRAY_SIZE(AR9462_BBC_TXIFR_COEFFJ), 2);\r\n} else if (AR_SREV_9580(ah)) {\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_CORE],\r\nar9580_1p0_mac_core,\r\nARRAY_SIZE(ar9580_1p0_mac_core), 2);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_POST],\r\nar9580_1p0_mac_postamble,\r\nARRAY_SIZE(ar9580_1p0_mac_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_CORE],\r\nar9580_1p0_baseband_core,\r\nARRAY_SIZE(ar9580_1p0_baseband_core), 2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_POST],\r\nar9580_1p0_baseband_postamble,\r\nARRAY_SIZE(ar9580_1p0_baseband_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_CORE],\r\nar9580_1p0_radio_core,\r\nARRAY_SIZE(ar9580_1p0_radio_core), 2);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_POST],\r\nar9580_1p0_radio_postamble,\r\nARRAY_SIZE(ar9580_1p0_radio_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_PRE],\r\nar9580_1p0_soc_preamble,\r\nARRAY_SIZE(ar9580_1p0_soc_preamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_CORE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_POST],\r\nar9580_1p0_soc_postamble,\r\nARRAY_SIZE(ar9580_1p0_soc_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9580_1p0_rx_gain_table,\r\nARRAY_SIZE(ar9580_1p0_rx_gain_table), 2);\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9580_1p0_low_ob_db_tx_gain_table,\r\nARRAY_SIZE(ar9580_1p0_low_ob_db_tx_gain_table),\r\n5);\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9580_1p0_modes_fast_clock,\r\nARRAY_SIZE(ar9580_1p0_modes_fast_clock),\r\n3);\r\n} else {\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_CORE],\r\nar9300_2p2_mac_core,\r\nARRAY_SIZE(ar9300_2p2_mac_core), 2);\r\nINIT_INI_ARRAY(&ah->iniMac[ATH_INI_POST],\r\nar9300_2p2_mac_postamble,\r\nARRAY_SIZE(ar9300_2p2_mac_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_CORE],\r\nar9300_2p2_baseband_core,\r\nARRAY_SIZE(ar9300_2p2_baseband_core), 2);\r\nINIT_INI_ARRAY(&ah->iniBB[ATH_INI_POST],\r\nar9300_2p2_baseband_postamble,\r\nARRAY_SIZE(ar9300_2p2_baseband_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_PRE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_CORE],\r\nar9300_2p2_radio_core,\r\nARRAY_SIZE(ar9300_2p2_radio_core), 2);\r\nINIT_INI_ARRAY(&ah->iniRadio[ATH_INI_POST],\r\nar9300_2p2_radio_postamble,\r\nARRAY_SIZE(ar9300_2p2_radio_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_PRE],\r\nar9300_2p2_soc_preamble,\r\nARRAY_SIZE(ar9300_2p2_soc_preamble), 2);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_CORE], NULL, 0, 0);\r\nINIT_INI_ARRAY(&ah->iniSOC[ATH_INI_POST],\r\nar9300_2p2_soc_postamble,\r\nARRAY_SIZE(ar9300_2p2_soc_postamble), 5);\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9300Common_rx_gain_table_2p2,\r\nARRAY_SIZE(ar9300Common_rx_gain_table_2p2), 2);\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9300Modes_lowest_ob_db_tx_gain_table_2p2,\r\nARRAY_SIZE(ar9300Modes_lowest_ob_db_tx_gain_table_2p2),\r\n5);\r\nINIT_INI_ARRAY(&ah->iniPcieSerdes,\r\nar9300PciePhy_pll_on_clkreq_disable_L1_2p2,\r\nARRAY_SIZE(ar9300PciePhy_pll_on_clkreq_disable_L1_2p2),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniPcieSerdesLowPower,\r\nar9300PciePhy_pll_on_clkreq_disable_L1_2p2,\r\nARRAY_SIZE(ar9300PciePhy_pll_on_clkreq_disable_L1_2p2),\r\n2);\r\nINIT_INI_ARRAY(&ah->iniModesAdditional,\r\nar9300Modes_fast_clock_2p2,\r\nARRAY_SIZE(ar9300Modes_fast_clock_2p2),\r\n3);\r\n}\r\n}\r\nstatic void ar9003_tx_gain_table_mode0(struct ath_hw *ah)\r\n{\r\nif (AR_SREV_9330_12(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_lowest_ob_db_tx_gain_1p2,\r\nARRAY_SIZE(ar9331_modes_lowest_ob_db_tx_gain_1p2),\r\n5);\r\nelse if (AR_SREV_9330_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_lowest_ob_db_tx_gain_1p1,\r\nARRAY_SIZE(ar9331_modes_lowest_ob_db_tx_gain_1p1),\r\n5);\r\nelse if (AR_SREV_9340(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9340Modes_lowest_ob_db_tx_gain_table_1p0,\r\nARRAY_SIZE(ar9340Modes_lowest_ob_db_tx_gain_table_1p0),\r\n5);\r\nelse if (AR_SREV_9485_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9485_modes_lowest_ob_db_tx_gain_1_1,\r\nARRAY_SIZE(ar9485_modes_lowest_ob_db_tx_gain_1_1),\r\n5);\r\nelse if (AR_SREV_9580(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9580_1p0_lowest_ob_db_tx_gain_table,\r\nARRAY_SIZE(ar9580_1p0_lowest_ob_db_tx_gain_table),\r\n5);\r\nelse if (AR_SREV_9462_10(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9462_modes_low_ob_db_tx_gain_table_1p0,\r\nARRAY_SIZE(ar9462_modes_low_ob_db_tx_gain_table_1p0),\r\n5);\r\nelse if (AR_SREV_9462_20(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9462_modes_low_ob_db_tx_gain_table_2p0,\r\nARRAY_SIZE(ar9462_modes_low_ob_db_tx_gain_table_2p0),\r\n5);\r\nelse\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9300Modes_lowest_ob_db_tx_gain_table_2p2,\r\nARRAY_SIZE(ar9300Modes_lowest_ob_db_tx_gain_table_2p2),\r\n5);\r\n}\r\nstatic void ar9003_tx_gain_table_mode1(struct ath_hw *ah)\r\n{\r\nif (AR_SREV_9330_12(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_high_ob_db_tx_gain_1p2,\r\nARRAY_SIZE(ar9331_modes_high_ob_db_tx_gain_1p2),\r\n5);\r\nelse if (AR_SREV_9330_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_high_ob_db_tx_gain_1p1,\r\nARRAY_SIZE(ar9331_modes_high_ob_db_tx_gain_1p1),\r\n5);\r\nelse if (AR_SREV_9340(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9340Modes_lowest_ob_db_tx_gain_table_1p0,\r\nARRAY_SIZE(ar9340Modes_lowest_ob_db_tx_gain_table_1p0),\r\n5);\r\nelse if (AR_SREV_9485_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9485Modes_high_ob_db_tx_gain_1_1,\r\nARRAY_SIZE(ar9485Modes_high_ob_db_tx_gain_1_1),\r\n5);\r\nelse if (AR_SREV_9580(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9580_1p0_high_ob_db_tx_gain_table,\r\nARRAY_SIZE(ar9580_1p0_high_ob_db_tx_gain_table),\r\n5);\r\nelse if (AR_SREV_9462_10(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9462_modes_high_ob_db_tx_gain_table_1p0,\r\nARRAY_SIZE(ar9462_modes_high_ob_db_tx_gain_table_1p0),\r\n5);\r\nelse if (AR_SREV_9462_20(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9462_modes_high_ob_db_tx_gain_table_2p0,\r\nARRAY_SIZE(ar9462_modes_high_ob_db_tx_gain_table_2p0),\r\n5);\r\nelse\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9300Modes_high_ob_db_tx_gain_table_2p2,\r\nARRAY_SIZE(ar9300Modes_high_ob_db_tx_gain_table_2p2),\r\n5);\r\n}\r\nstatic void ar9003_tx_gain_table_mode2(struct ath_hw *ah)\r\n{\r\nif (AR_SREV_9330_12(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_low_ob_db_tx_gain_1p2,\r\nARRAY_SIZE(ar9331_modes_low_ob_db_tx_gain_1p2),\r\n5);\r\nelse if (AR_SREV_9330_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_low_ob_db_tx_gain_1p1,\r\nARRAY_SIZE(ar9331_modes_low_ob_db_tx_gain_1p1),\r\n5);\r\nelse if (AR_SREV_9340(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9340Modes_lowest_ob_db_tx_gain_table_1p0,\r\nARRAY_SIZE(ar9340Modes_lowest_ob_db_tx_gain_table_1p0),\r\n5);\r\nelse if (AR_SREV_9485_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9485Modes_low_ob_db_tx_gain_1_1,\r\nARRAY_SIZE(ar9485Modes_low_ob_db_tx_gain_1_1),\r\n5);\r\nelse if (AR_SREV_9580(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9580_1p0_low_ob_db_tx_gain_table,\r\nARRAY_SIZE(ar9580_1p0_low_ob_db_tx_gain_table),\r\n5);\r\nelse\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9300Modes_low_ob_db_tx_gain_table_2p2,\r\nARRAY_SIZE(ar9300Modes_low_ob_db_tx_gain_table_2p2),\r\n5);\r\n}\r\nstatic void ar9003_tx_gain_table_mode3(struct ath_hw *ah)\r\n{\r\nif (AR_SREV_9330_12(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_high_power_tx_gain_1p2,\r\nARRAY_SIZE(ar9331_modes_high_power_tx_gain_1p2),\r\n5);\r\nelse if (AR_SREV_9330_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9331_modes_high_power_tx_gain_1p1,\r\nARRAY_SIZE(ar9331_modes_high_power_tx_gain_1p1),\r\n5);\r\nelse if (AR_SREV_9340(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9340Modes_lowest_ob_db_tx_gain_table_1p0,\r\nARRAY_SIZE(ar9340Modes_lowest_ob_db_tx_gain_table_1p0),\r\n5);\r\nelse if (AR_SREV_9485_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9485Modes_high_power_tx_gain_1_1,\r\nARRAY_SIZE(ar9485Modes_high_power_tx_gain_1_1),\r\n5);\r\nelse if (AR_SREV_9580(ah))\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9580_1p0_high_power_tx_gain_table,\r\nARRAY_SIZE(ar9580_1p0_high_power_tx_gain_table),\r\n5);\r\nelse\r\nINIT_INI_ARRAY(&ah->iniModesTxGain,\r\nar9300Modes_high_power_tx_gain_table_2p2,\r\nARRAY_SIZE(ar9300Modes_high_power_tx_gain_table_2p2),\r\n5);\r\n}\r\nstatic void ar9003_tx_gain_table_apply(struct ath_hw *ah)\r\n{\r\nswitch (ar9003_hw_get_tx_gain_idx(ah)) {\r\ncase 0:\r\ndefault:\r\nar9003_tx_gain_table_mode0(ah);\r\nbreak;\r\ncase 1:\r\nar9003_tx_gain_table_mode1(ah);\r\nbreak;\r\ncase 2:\r\nar9003_tx_gain_table_mode2(ah);\r\nbreak;\r\ncase 3:\r\nar9003_tx_gain_table_mode3(ah);\r\nbreak;\r\n}\r\n}\r\nstatic void ar9003_rx_gain_table_mode0(struct ath_hw *ah)\r\n{\r\nif (AR_SREV_9330_12(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9331_common_rx_gain_1p2,\r\nARRAY_SIZE(ar9331_common_rx_gain_1p2),\r\n2);\r\nelse if (AR_SREV_9330_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9331_common_rx_gain_1p1,\r\nARRAY_SIZE(ar9331_common_rx_gain_1p1),\r\n2);\r\nelse if (AR_SREV_9340(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9340Common_rx_gain_table_1p0,\r\nARRAY_SIZE(ar9340Common_rx_gain_table_1p0),\r\n2);\r\nelse if (AR_SREV_9485_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9485Common_wo_xlna_rx_gain_1_1,\r\nARRAY_SIZE(ar9485Common_wo_xlna_rx_gain_1_1),\r\n2);\r\nelse if (AR_SREV_9580(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9580_1p0_rx_gain_table,\r\nARRAY_SIZE(ar9580_1p0_rx_gain_table),\r\n2);\r\nelse if (AR_SREV_9462_10(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9462_common_rx_gain_table_1p0,\r\nARRAY_SIZE(ar9462_common_rx_gain_table_1p0),\r\n2);\r\nelse if (AR_SREV_9462_20(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9462_common_rx_gain_table_2p0,\r\nARRAY_SIZE(ar9462_common_rx_gain_table_2p0),\r\n2);\r\nelse\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9300Common_rx_gain_table_2p2,\r\nARRAY_SIZE(ar9300Common_rx_gain_table_2p2),\r\n2);\r\n}\r\nstatic void ar9003_rx_gain_table_mode1(struct ath_hw *ah)\r\n{\r\nif (AR_SREV_9330_12(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9331_common_wo_xlna_rx_gain_1p2,\r\nARRAY_SIZE(ar9331_common_wo_xlna_rx_gain_1p2),\r\n2);\r\nelse if (AR_SREV_9330_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9331_common_wo_xlna_rx_gain_1p1,\r\nARRAY_SIZE(ar9331_common_wo_xlna_rx_gain_1p1),\r\n2);\r\nelse if (AR_SREV_9340(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9340Common_wo_xlna_rx_gain_table_1p0,\r\nARRAY_SIZE(ar9340Common_wo_xlna_rx_gain_table_1p0),\r\n2);\r\nelse if (AR_SREV_9485_11(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9485Common_wo_xlna_rx_gain_1_1,\r\nARRAY_SIZE(ar9485Common_wo_xlna_rx_gain_1_1),\r\n2);\r\nelse if (AR_SREV_9462_10(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9462_common_wo_xlna_rx_gain_table_1p0,\r\nARRAY_SIZE(ar9462_common_wo_xlna_rx_gain_table_1p0),\r\n2);\r\nelse if (AR_SREV_9462_20(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9462_common_wo_xlna_rx_gain_table_2p0,\r\nARRAY_SIZE(ar9462_common_wo_xlna_rx_gain_table_2p0),\r\n2);\r\nelse if (AR_SREV_9580(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9580_1p0_wo_xlna_rx_gain_table,\r\nARRAY_SIZE(ar9580_1p0_wo_xlna_rx_gain_table),\r\n2);\r\nelse\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9300Common_wo_xlna_rx_gain_table_2p2,\r\nARRAY_SIZE(ar9300Common_wo_xlna_rx_gain_table_2p2),\r\n2);\r\n}\r\nstatic void ar9003_rx_gain_table_mode2(struct ath_hw *ah)\r\n{\r\nif (AR_SREV_9462_10(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9462_common_mixed_rx_gain_table_1p0,\r\nARRAY_SIZE(ar9462_common_mixed_rx_gain_table_1p0), 2);\r\nelse if (AR_SREV_9462_20(ah))\r\nINIT_INI_ARRAY(&ah->iniModesRxGain,\r\nar9462_common_mixed_rx_gain_table_2p0,\r\nARRAY_SIZE(ar9462_common_mixed_rx_gain_table_2p0), 2);\r\n}\r\nstatic void ar9003_rx_gain_table_apply(struct ath_hw *ah)\r\n{\r\nswitch (ar9003_hw_get_rx_gain_idx(ah)) {\r\ncase 0:\r\ndefault:\r\nar9003_rx_gain_table_mode0(ah);\r\nbreak;\r\ncase 1:\r\nar9003_rx_gain_table_mode1(ah);\r\nbreak;\r\ncase 2:\r\nar9003_rx_gain_table_mode2(ah);\r\nbreak;\r\n}\r\n}\r\nstatic void ar9003_hw_init_mode_gain_regs(struct ath_hw *ah)\r\n{\r\nar9003_tx_gain_table_apply(ah);\r\nar9003_rx_gain_table_apply(ah);\r\n}\r\nstatic void ar9003_hw_configpcipowersave(struct ath_hw *ah,\r\nbool power_off)\r\n{\r\nif (!power_off ) {\r\nREG_SET_BIT(ah, AR_PCIE_PM_CTRL, AR_PCIE_PM_CTRL_ENA);\r\nif (ah->config.pcie_waen)\r\nREG_WRITE(ah, AR_WA, ah->config.pcie_waen);\r\nelse\r\nREG_WRITE(ah, AR_WA, ah->WARegVal);\r\n}\r\nif (ah->config.pcieSerDesWrite) {\r\nunsigned int i;\r\nstruct ar5416IniArray *array;\r\narray = power_off ? &ah->iniPcieSerdes :\r\n&ah->iniPcieSerdesLowPower;\r\nfor (i = 0; i < array->ia_rows; i++) {\r\nREG_WRITE(ah,\r\nINI_RA(array, i, 0),\r\nINI_RA(array, i, 1));\r\n}\r\n}\r\n}\r\nvoid ar9003_hw_attach_ops(struct ath_hw *ah)\r\n{\r\nstruct ath_hw_private_ops *priv_ops = ath9k_hw_private_ops(ah);\r\nstruct ath_hw_ops *ops = ath9k_hw_ops(ah);\r\npriv_ops->init_mode_regs = ar9003_hw_init_mode_regs;\r\npriv_ops->init_mode_gain_regs = ar9003_hw_init_mode_gain_regs;\r\nops->config_pci_powersave = ar9003_hw_configpcipowersave;\r\nar9003_hw_attach_phy_ops(ah);\r\nar9003_hw_attach_calib_ops(ah);\r\nar9003_hw_attach_mac_ops(ah);\r\n}
