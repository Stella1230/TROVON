static int cis820x_config_init(struct phy_device *phydev)\r\n{\r\nint err;\r\nerr = phy_write(phydev, MII_CIS8201_AUX_CONSTAT,\r\nMII_CIS8201_AUXCONSTAT_INIT);\r\nif (err < 0)\r\nreturn err;\r\nerr = phy_write(phydev, MII_CIS8201_EXT_CON1,\r\nMII_CIS8201_EXTCON1_INIT);\r\nreturn err;\r\n}\r\nstatic int cis820x_ack_interrupt(struct phy_device *phydev)\r\n{\r\nint err = phy_read(phydev, MII_CIS8201_ISTAT);\r\nreturn (err < 0) ? err : 0;\r\n}\r\nstatic int cis820x_config_intr(struct phy_device *phydev)\r\n{\r\nint err;\r\nif(phydev->interrupts == PHY_INTERRUPT_ENABLED)\r\nerr = phy_write(phydev, MII_CIS8201_IMASK,\r\nMII_CIS8201_IMASK_MASK);\r\nelse\r\nerr = phy_write(phydev, MII_CIS8201_IMASK, 0);\r\nreturn err;\r\n}\r\nstatic int __init cicada_init(void)\r\n{\r\nint ret;\r\nret = phy_driver_register(&cis8204_driver);\r\nif (ret)\r\ngoto err1;\r\nret = phy_driver_register(&cis8201_driver);\r\nif (ret)\r\ngoto err2;\r\nreturn 0;\r\nerr2:\r\nphy_driver_unregister(&cis8204_driver);\r\nerr1:\r\nreturn ret;\r\n}\r\nstatic void __exit cicada_exit(void)\r\n{\r\nphy_driver_unregister(&cis8204_driver);\r\nphy_driver_unregister(&cis8201_driver);\r\n}
