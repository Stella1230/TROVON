static void __init init_net5501(void)\r\n{\r\nplatform_device_register(&net5501_leds_dev);\r\n}\r\nstatic int __init soekris_init(void)\r\n{\r\nint i;\r\nunsigned char *rombase, *bios;\r\nif (!is_geode())\r\nreturn 0;\r\nrombase = ioremap(0xffff0000, 0xffff);\r\nif (!rombase) {\r\nprintk(KERN_INFO "Soekris net5501 LED driver failed to get rombase");\r\nreturn 0;\r\n}\r\nbios = rombase + 0x20;\r\nif (strncmp(bios, "comBIOS", 7))\r\ngoto unmap;\r\nfor (i = 0; i < ARRAY_SIZE(boards); i++) {\r\nunsigned char *model = rombase + boards[i].offset;\r\nif (strncmp(model, boards[i].sig, boards[i].len) == 0) {\r\nprintk(KERN_INFO "Soekris %s: %s\n", model, bios);\r\nif (boards[i].init)\r\nboards[i].init();\r\nbreak;\r\n}\r\n}\r\nunmap:\r\niounmap(rombase);\r\nreturn 0;\r\n}
