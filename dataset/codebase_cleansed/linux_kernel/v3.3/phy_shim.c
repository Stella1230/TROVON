struct phy_shim_info *wlc_phy_shim_attach(struct brcms_hardware *wlc_hw,\r\nstruct brcms_info *wl,\r\nstruct brcms_c_info *wlc) {\r\nstruct phy_shim_info *physhim = NULL;\r\nphyshim = kzalloc(sizeof(struct phy_shim_info), GFP_ATOMIC);\r\nif (!physhim)\r\nreturn NULL;\r\nphyshim->wlc_hw = wlc_hw;\r\nphyshim->wlc = wlc;\r\nphyshim->wl = wl;\r\nreturn physhim;\r\n}\r\nvoid wlc_phy_shim_detach(struct phy_shim_info *physhim)\r\n{\r\nkfree(physhim);\r\n}\r\nstruct wlapi_timer *wlapi_init_timer(struct phy_shim_info *physhim,\r\nvoid (*fn)(struct brcms_phy *pi),\r\nvoid *arg, const char *name)\r\n{\r\nreturn (struct wlapi_timer *)\r\nbrcms_init_timer(physhim->wl, (void (*)(void *))fn,\r\narg, name);\r\n}\r\nvoid wlapi_free_timer(struct wlapi_timer *t)\r\n{\r\nbrcms_free_timer((struct brcms_timer *)t);\r\n}\r\nvoid\r\nwlapi_add_timer(struct wlapi_timer *t, uint ms, int periodic)\r\n{\r\nbrcms_add_timer((struct brcms_timer *)t, ms, periodic);\r\n}\r\nbool wlapi_del_timer(struct wlapi_timer *t)\r\n{\r\nreturn brcms_del_timer((struct brcms_timer *)t);\r\n}\r\nvoid wlapi_intrson(struct phy_shim_info *physhim)\r\n{\r\nbrcms_intrson(physhim->wl);\r\n}\r\nu32 wlapi_intrsoff(struct phy_shim_info *physhim)\r\n{\r\nreturn brcms_intrsoff(physhim->wl);\r\n}\r\nvoid wlapi_intrsrestore(struct phy_shim_info *physhim, u32 macintmask)\r\n{\r\nbrcms_intrsrestore(physhim->wl, macintmask);\r\n}\r\nvoid wlapi_bmac_write_shm(struct phy_shim_info *physhim, uint offset, u16 v)\r\n{\r\nbrcms_b_write_shm(physhim->wlc_hw, offset, v);\r\n}\r\nu16 wlapi_bmac_read_shm(struct phy_shim_info *physhim, uint offset)\r\n{\r\nreturn brcms_b_read_shm(physhim->wlc_hw, offset);\r\n}\r\nvoid\r\nwlapi_bmac_mhf(struct phy_shim_info *physhim, u8 idx, u16 mask,\r\nu16 val, int bands)\r\n{\r\nbrcms_b_mhf(physhim->wlc_hw, idx, mask, val, bands);\r\n}\r\nvoid wlapi_bmac_corereset(struct phy_shim_info *physhim, u32 flags)\r\n{\r\nbrcms_b_corereset(physhim->wlc_hw, flags);\r\n}\r\nvoid wlapi_suspend_mac_and_wait(struct phy_shim_info *physhim)\r\n{\r\nbrcms_c_suspend_mac_and_wait(physhim->wlc);\r\n}\r\nvoid wlapi_switch_macfreq(struct phy_shim_info *physhim, u8 spurmode)\r\n{\r\nbrcms_b_switch_macfreq(physhim->wlc_hw, spurmode);\r\n}\r\nvoid wlapi_enable_mac(struct phy_shim_info *physhim)\r\n{\r\nbrcms_c_enable_mac(physhim->wlc);\r\n}\r\nvoid wlapi_bmac_mctrl(struct phy_shim_info *physhim, u32 mask, u32 val)\r\n{\r\nbrcms_b_mctrl(physhim->wlc_hw, mask, val);\r\n}\r\nvoid wlapi_bmac_phy_reset(struct phy_shim_info *physhim)\r\n{\r\nbrcms_b_phy_reset(physhim->wlc_hw);\r\n}\r\nvoid wlapi_bmac_bw_set(struct phy_shim_info *physhim, u16 bw)\r\n{\r\nbrcms_b_bw_set(physhim->wlc_hw, bw);\r\n}\r\nu16 wlapi_bmac_get_txant(struct phy_shim_info *physhim)\r\n{\r\nreturn brcms_b_get_txant(physhim->wlc_hw);\r\n}\r\nvoid wlapi_bmac_phyclk_fgc(struct phy_shim_info *physhim, bool clk)\r\n{\r\nbrcms_b_phyclk_fgc(physhim->wlc_hw, clk);\r\n}\r\nvoid wlapi_bmac_macphyclk_set(struct phy_shim_info *physhim, bool clk)\r\n{\r\nbrcms_b_macphyclk_set(physhim->wlc_hw, clk);\r\n}\r\nvoid wlapi_bmac_core_phypll_ctl(struct phy_shim_info *physhim, bool on)\r\n{\r\nbrcms_b_core_phypll_ctl(physhim->wlc_hw, on);\r\n}\r\nvoid wlapi_bmac_core_phypll_reset(struct phy_shim_info *physhim)\r\n{\r\nbrcms_b_core_phypll_reset(physhim->wlc_hw);\r\n}\r\nvoid wlapi_bmac_ucode_wake_override_phyreg_set(struct phy_shim_info *physhim)\r\n{\r\nbrcms_c_ucode_wake_override_set(physhim->wlc_hw,\r\nBRCMS_WAKE_OVERRIDE_PHYREG);\r\n}\r\nvoid wlapi_bmac_ucode_wake_override_phyreg_clear(struct phy_shim_info *physhim)\r\n{\r\nbrcms_c_ucode_wake_override_clear(physhim->wlc_hw,\r\nBRCMS_WAKE_OVERRIDE_PHYREG);\r\n}\r\nvoid\r\nwlapi_bmac_write_template_ram(struct phy_shim_info *physhim, int offset,\r\nint len, void *buf)\r\n{\r\nbrcms_b_write_template_ram(physhim->wlc_hw, offset, len, buf);\r\n}\r\nu16 wlapi_bmac_rate_shm_offset(struct phy_shim_info *physhim, u8 rate)\r\n{\r\nreturn brcms_b_rate_shm_offset(physhim->wlc_hw, rate);\r\n}\r\nvoid wlapi_ucode_sample_init(struct phy_shim_info *physhim)\r\n{\r\n}\r\nvoid\r\nwlapi_copyfrom_objmem(struct phy_shim_info *physhim, uint offset, void *buf,\r\nint len, u32 sel)\r\n{\r\nbrcms_b_copyfrom_objmem(physhim->wlc_hw, offset, buf, len, sel);\r\n}\r\nvoid\r\nwlapi_copyto_objmem(struct phy_shim_info *physhim, uint offset, const void *buf,\r\nint l, u32 sel)\r\n{\r\nbrcms_b_copyto_objmem(physhim->wlc_hw, offset, buf, l, sel);\r\n}\r\nchar *wlapi_getvar(struct phy_shim_info *physhim, enum brcms_srom_id id)\r\n{\r\nreturn getvar(physhim->wlc_hw->sih, id);\r\n}\r\nint wlapi_getintvar(struct phy_shim_info *physhim, enum brcms_srom_id id)\r\n{\r\nreturn getintvar(physhim->wlc_hw->sih, id);\r\n}
