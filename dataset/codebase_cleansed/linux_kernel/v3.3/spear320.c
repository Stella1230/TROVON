void __init spear320_init(struct pmx_mode *pmx_mode, struct pmx_dev **pmx_devs,\r\nu8 pmx_dev_count)\r\n{\r\nvoid __iomem *base;\r\nint ret = 0;\r\nspear3xx_init();\r\nbase = ioremap(SPEAR320_SOC_CONFIG_BASE, SZ_4K);\r\nif (base) {\r\nshirq_ras1.regs.base = base;\r\nret = spear_shirq_register(&shirq_ras1);\r\nif (ret)\r\nprintk(KERN_ERR "Error registering Shared IRQ 1\n");\r\nshirq_ras3.regs.base = base;\r\nret = spear_shirq_register(&shirq_ras3);\r\nif (ret)\r\nprintk(KERN_ERR "Error registering Shared IRQ 3\n");\r\nshirq_intrcomm_ras.regs.base = base;\r\nret = spear_shirq_register(&shirq_intrcomm_ras);\r\nif (ret)\r\nprintk(KERN_ERR "Error registering Shared IRQ 4\n");\r\n}\r\npmx_driver.base = base;\r\npmx_driver.mode = pmx_mode;\r\npmx_driver.devs = pmx_devs;\r\npmx_driver.devs_count = pmx_dev_count;\r\nret = pmx_register(&pmx_driver);\r\nif (ret)\r\nprintk(KERN_ERR "padmux: registeration failed. err no: %d\n",\r\nret);\r\n}
