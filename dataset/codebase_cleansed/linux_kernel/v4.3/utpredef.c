const union acpi_predefined_info *acpi_ut_get_next_predefined_method(const union\r\nacpi_predefined_info\r\n*this_name)\r\n{\r\nif ((this_name->info.expected_btypes & ACPI_RTYPE_PACKAGE) &&\r\n(this_name->info.expected_btypes != ACPI_RTYPE_ALL)) {\r\nthis_name++;\r\n}\r\nthis_name++;\r\nreturn (this_name);\r\n}\r\nconst union acpi_predefined_info *acpi_ut_match_predefined_method(char *name)\r\n{\r\nconst union acpi_predefined_info *this_name;\r\nif (name[0] != '_') {\r\nreturn (NULL);\r\n}\r\nthis_name = acpi_gbl_predefined_methods;\r\nwhile (this_name->info.name[0]) {\r\nif (ACPI_COMPARE_NAME(name, this_name->info.name)) {\r\nreturn (this_name);\r\n}\r\nthis_name = acpi_ut_get_next_predefined_method(this_name);\r\n}\r\nreturn (NULL);\r\n}\r\nvoid acpi_ut_get_expected_return_types(char *buffer, u32 expected_btypes)\r\n{\r\nu32 this_rtype;\r\nu32 i;\r\nu32 j;\r\nif (!expected_btypes) {\r\nstrcpy(buffer, "NONE");\r\nreturn;\r\n}\r\nj = 1;\r\nbuffer[0] = 0;\r\nthis_rtype = ACPI_RTYPE_INTEGER;\r\nfor (i = 0; i < ACPI_NUM_RTYPES; i++) {\r\nif (expected_btypes & this_rtype) {\r\nstrcat(buffer, &ut_rtype_names[i][j]);\r\nj = 0;\r\n}\r\nthis_rtype <<= 1;\r\n}\r\n}\r\nconst union acpi_predefined_info *acpi_ut_match_resource_name(char *name)\r\n{\r\nconst union acpi_predefined_info *this_name;\r\nif (name[0] != '_') {\r\nreturn (NULL);\r\n}\r\nthis_name = acpi_gbl_resource_names;\r\nwhile (this_name->info.name[0]) {\r\nif (ACPI_COMPARE_NAME(name, this_name->info.name)) {\r\nreturn (this_name);\r\n}\r\nthis_name++;\r\n}\r\nreturn (NULL);\r\n}\r\nvoid\r\nacpi_ut_display_predefined_method(char *buffer,\r\nconst union acpi_predefined_info *this_name,\r\nu8 multi_line)\r\n{\r\nu32 arg_count;\r\narg_count = acpi_ut_get_argument_types(buffer,\r\nthis_name->info.argument_list);\r\nif (multi_line) {\r\nprintf(" ");\r\n}\r\nprintf("%4.4s Requires %s%u argument%s",\r\nthis_name->info.name,\r\n(this_name->info.argument_list & ARG_COUNT_IS_MINIMUM) ?\r\n"(at least) " : "", arg_count, arg_count != 1 ? "s" : "");\r\nif (arg_count > 0) {\r\nprintf(" (%s)", buffer);\r\n}\r\nif (multi_line) {\r\nprintf("\n ");\r\n}\r\nif (this_name->info.expected_btypes) {\r\nacpi_ut_get_expected_return_types(buffer,\r\nthis_name->info.\r\nexpected_btypes);\r\nprintf(" Return value types: %s\n", buffer);\r\n} else {\r\nprintf(" No return value\n");\r\n}\r\n}\r\nstatic u32 acpi_ut_get_argument_types(char *buffer, u16 argument_types)\r\n{\r\nu16 this_argument_type;\r\nu16 sub_index;\r\nu16 arg_count;\r\nu32 i;\r\n*buffer = 0;\r\nsub_index = 2;\r\narg_count = METHOD_GET_ARG_COUNT(argument_types);\r\nif (arg_count > METHOD_PREDEF_ARGS_MAX) {\r\nprintf("**** Invalid argument count (%u) "\r\n"in predefined info structure\n", arg_count);\r\nreturn (arg_count);\r\n}\r\nfor (i = 0; i < arg_count; i++) {\r\nthis_argument_type = METHOD_GET_NEXT_TYPE(argument_types);\r\nif (!this_argument_type\r\n|| (this_argument_type > METHOD_MAX_ARG_TYPE)) {\r\nprintf("**** Invalid argument type (%u) "\r\n"in predefined info structure\n",\r\nthis_argument_type);\r\nreturn (arg_count);\r\n}\r\nstrcat(buffer,\r\nut_external_type_names[this_argument_type] + sub_index);\r\nsub_index = 0;\r\n}\r\nreturn (arg_count);\r\n}\r\nu32 acpi_ut_get_resource_bit_width(char *buffer, u16 types)\r\n{\r\nu32 i;\r\nu16 sub_index;\r\nu32 found;\r\n*buffer = 0;\r\nsub_index = 1;\r\nfound = 0;\r\nfor (i = 0; i < NUM_RESOURCE_WIDTHS; i++) {\r\nif (types & 1) {\r\nstrcat(buffer, &(ut_resource_type_names[i][sub_index]));\r\nsub_index = 0;\r\nfound++;\r\n}\r\ntypes >>= 1;\r\n}\r\nreturn (found);\r\n}
