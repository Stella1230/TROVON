void __init prom_meminit(void)\r\n{\r\nu64 base, size;\r\nint bank;\r\ncrime_init();\r\nfor (bank=0; bank < CRIME_MAXBANKS; bank++) {\r\nu64 bankctl = crime->bank_ctrl[bank];\r\nbase = (bankctl & CRIME_MEM_BANK_CONTROL_ADDR) << 25;\r\nif (bank != 0 && base == 0)\r\ncontinue;\r\nsize = (bankctl & CRIME_MEM_BANK_CONTROL_SDRAM_SIZE) ? 128 : 32;\r\nsize <<= 20;\r\nif (base + size > (256 << 20))\r\nbase += CRIME_HI_MEM_BASE;\r\nprintk("CRIME MC: bank %u base 0x%016Lx size %LuMiB\n",\r\nbank, base, size >> 20);\r\nadd_memory_region(base, size, BOOT_MEM_RAM);\r\n}\r\n}\r\nvoid __init prom_free_prom_memory(void)\r\n{\r\n}
