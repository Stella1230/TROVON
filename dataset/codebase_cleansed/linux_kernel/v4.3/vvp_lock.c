static unsigned long vvp_lock_weigh(const struct lu_env *env,\r\nconst struct cl_lock_slice *slice)\r\n{\r\nstruct ccc_object *cob = cl2ccc(slice->cls_obj);\r\nreturn atomic_read(&cob->cob_mmap_cnt) > 0 ? ~0UL >> 2 : 0;\r\n}\r\nint vvp_lock_init(const struct lu_env *env, struct cl_object *obj,\r\nstruct cl_lock *lock, const struct cl_io *io)\r\n{\r\nreturn ccc_lock_init(env, obj, lock, io, &vvp_lock_ops);\r\n}
