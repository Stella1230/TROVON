static int __init s5pv210_fdt_map_sys(unsigned long node, const char *uname,\r\nint depth, void *data)\r\n{\r\nstruct map_desc iodesc;\r\nconst __be32 *reg;\r\nint len;\r\nif (!of_flat_dt_is_compatible(node, "samsung,s5pv210-clock"))\r\nreturn 0;\r\nreg = of_get_flat_dt_prop(node, "reg", &len);\r\nif (reg == NULL || len != (sizeof(unsigned long) * 2))\r\nreturn 0;\r\niodesc.pfn = __phys_to_pfn(be32_to_cpu(reg[0]));\r\niodesc.length = be32_to_cpu(reg[1]) - 1;\r\niodesc.virtual = (unsigned long)S3C_VA_SYS;\r\niodesc.type = MT_DEVICE;\r\niotable_init(&iodesc, 1);\r\nreturn 1;\r\n}\r\nstatic void __init s5pv210_dt_map_io(void)\r\n{\r\ndebug_ll_io_init();\r\nof_scan_flat_dt(s5pv210_fdt_map_sys, NULL);\r\n}\r\nstatic void s5pv210_dt_restart(enum reboot_mode mode, const char *cmd)\r\n{\r\n__raw_writel(0x1, S5P_SWRESET);\r\n}\r\nstatic void __init s5pv210_dt_init_late(void)\r\n{\r\nplatform_device_register_simple("s5pv210-cpufreq", -1, NULL, 0);\r\ns5pv210_pm_init();\r\n}
