static int vp1041_frontend_init(struct mantis_pci *mantis, struct dvb_frontend *fe)\r\n{\r\nstruct i2c_adapter *adapter = &mantis->adapter;\r\nint err = 0;\r\nerr = mantis_frontend_power(mantis, POWER_ON);\r\nif (err == 0) {\r\nmantis_frontend_soft_reset(mantis);\r\nmsleep(250);\r\nmantis->fe = dvb_attach(stb0899_attach, &vp1041_stb0899_config, adapter);\r\nif (mantis->fe) {\r\ndprintk(MANTIS_ERROR, 1,\r\n"found STB0899 DVB-S/DVB-S2 frontend @0x%02x",\r\nvp1041_stb0899_config.demod_address);\r\nif (dvb_attach(stb6100_attach, mantis->fe, &vp1041_stb6100_config, adapter)) {\r\nif (!dvb_attach(lnbp21_attach, mantis->fe, adapter, 0, 0))\r\ndprintk(MANTIS_ERROR, 1, "No LNBP21 found!");\r\n}\r\n} else {\r\nreturn -EREMOTEIO;\r\n}\r\n} else {\r\ndprintk(MANTIS_ERROR, 1, "Frontend on <%s> POWER ON failed! <%d>",\r\nadapter->name,\r\nerr);\r\nreturn -EIO;\r\n}\r\ndprintk(MANTIS_ERROR, 1, "Done!");\r\nreturn 0;\r\n}
