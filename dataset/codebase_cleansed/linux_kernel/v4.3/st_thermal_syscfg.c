static int st_syscfg_power_ctrl(struct st_thermal_sensor *sensor,\r\nenum st_thermal_power_state power_state)\r\n{\r\nreturn regmap_field_write(sensor->pwr, power_state);\r\n}\r\nstatic int st_syscfg_alloc_regfields(struct st_thermal_sensor *sensor)\r\n{\r\nstruct device *dev = sensor->dev;\r\nsensor->pwr = devm_regmap_field_alloc(dev, sensor->regmap,\r\nsensor->cdata->reg_fields[TEMP_PWR]);\r\nif (IS_ERR(sensor->pwr)) {\r\ndev_err(dev, "failed to alloc syscfg regfields\n");\r\nreturn PTR_ERR(sensor->pwr);\r\n}\r\nreturn 0;\r\n}\r\nstatic int st_syscfg_regmap_init(struct st_thermal_sensor *sensor)\r\n{\r\nsensor->regmap =\r\nsyscon_regmap_lookup_by_compatible(sensor->cdata->sys_compat);\r\nif (IS_ERR(sensor->regmap)) {\r\ndev_err(sensor->dev, "failed to find syscfg regmap\n");\r\nreturn PTR_ERR(sensor->regmap);\r\n}\r\nreturn 0;\r\n}\r\nstatic int st_syscfg_probe(struct platform_device *pdev)\r\n{\r\nreturn st_thermal_register(pdev, st_syscfg_thermal_of_match);\r\n}\r\nstatic int st_syscfg_remove(struct platform_device *pdev)\r\n{\r\nreturn st_thermal_unregister(pdev);\r\n}
