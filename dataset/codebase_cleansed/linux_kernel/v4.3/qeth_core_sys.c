static ssize_t qeth_dev_state_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nswitch (card->state) {\r\ncase CARD_STATE_DOWN:\r\nreturn sprintf(buf, "DOWN\n");\r\ncase CARD_STATE_HARDSETUP:\r\nreturn sprintf(buf, "HARDSETUP\n");\r\ncase CARD_STATE_SOFTSETUP:\r\nreturn sprintf(buf, "SOFTSETUP\n");\r\ncase CARD_STATE_UP:\r\nif (card->lan_online)\r\nreturn sprintf(buf, "UP (LAN ONLINE)\n");\r\nelse\r\nreturn sprintf(buf, "UP (LAN OFFLINE)\n");\r\ncase CARD_STATE_RECOVER:\r\nreturn sprintf(buf, "RECOVER\n");\r\ndefault:\r\nreturn sprintf(buf, "UNKNOWN\n");\r\n}\r\n}\r\nstatic ssize_t qeth_dev_chpid_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%02X\n", card->info.chpid);\r\n}\r\nstatic ssize_t qeth_dev_if_name_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%s\n", QETH_CARD_IFNAME(card));\r\n}\r\nstatic ssize_t qeth_dev_card_type_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%s\n", qeth_get_cardname_short(card));\r\n}\r\nstatic inline const char *qeth_get_bufsize_str(struct qeth_card *card)\r\n{\r\nif (card->qdio.in_buf_size == 16384)\r\nreturn "16k";\r\nelse if (card->qdio.in_buf_size == 24576)\r\nreturn "24k";\r\nelse if (card->qdio.in_buf_size == 32768)\r\nreturn "32k";\r\nelse if (card->qdio.in_buf_size == 40960)\r\nreturn "40k";\r\nelse\r\nreturn "64k";\r\n}\r\nstatic ssize_t qeth_dev_inbuf_size_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%s\n", qeth_get_bufsize_str(card));\r\n}\r\nstatic ssize_t qeth_dev_portno_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%i\n", card->info.portno);\r\n}\r\nstatic ssize_t qeth_dev_portno_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nchar *tmp;\r\nunsigned int portno, limit;\r\nint rc = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->conf_mutex);\r\nif ((card->state != CARD_STATE_DOWN) &&\r\n(card->state != CARD_STATE_RECOVER)) {\r\nrc = -EPERM;\r\ngoto out;\r\n}\r\nportno = simple_strtoul(buf, &tmp, 16);\r\nif (portno > QETH_MAX_PORTNO) {\r\nrc = -EINVAL;\r\ngoto out;\r\n}\r\nlimit = (card->ssqd.pcnt ? card->ssqd.pcnt - 1 : card->ssqd.pcnt);\r\nif (portno > limit) {\r\nrc = -EINVAL;\r\ngoto out;\r\n}\r\ncard->info.portno = portno;\r\nout:\r\nmutex_unlock(&card->conf_mutex);\r\nreturn rc ? rc : count;\r\n}\r\nstatic ssize_t qeth_dev_portname_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nchar portname[9] = {0, };\r\nif (!card)\r\nreturn -EINVAL;\r\nif (card->info.portname_required) {\r\nmemcpy(portname, card->info.portname + 1, 8);\r\nEBCASC(portname, 8);\r\nreturn sprintf(buf, "%s\n", portname);\r\n} else\r\nreturn sprintf(buf, "no portname required\n");\r\n}\r\nstatic ssize_t qeth_dev_portname_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nchar *tmp;\r\nint i, rc = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->conf_mutex);\r\nif ((card->state != CARD_STATE_DOWN) &&\r\n(card->state != CARD_STATE_RECOVER)) {\r\nrc = -EPERM;\r\ngoto out;\r\n}\r\ntmp = strsep((char **) &buf, "\n");\r\nif ((strlen(tmp) > 8) || (strlen(tmp) == 0)) {\r\nrc = -EINVAL;\r\ngoto out;\r\n}\r\ncard->info.portname[0] = strlen(tmp);\r\nfor (i = 1; i < 9; i++)\r\ncard->info.portname[i] = ' ';\r\nstrcpy(card->info.portname + 1, tmp);\r\nASCEBC(card->info.portname + 1, 8);\r\nout:\r\nmutex_unlock(&card->conf_mutex);\r\nreturn rc ? rc : count;\r\n}\r\nstatic ssize_t qeth_dev_prioqing_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nswitch (card->qdio.do_prio_queueing) {\r\ncase QETH_PRIO_Q_ING_PREC:\r\nreturn sprintf(buf, "%s\n", "by precedence");\r\ncase QETH_PRIO_Q_ING_TOS:\r\nreturn sprintf(buf, "%s\n", "by type of service");\r\ncase QETH_PRIO_Q_ING_SKB:\r\nreturn sprintf(buf, "%s\n", "by skb-priority");\r\ncase QETH_PRIO_Q_ING_VLAN:\r\nreturn sprintf(buf, "%s\n", "by VLAN headers");\r\ndefault:\r\nreturn sprintf(buf, "always queue %i\n",\r\ncard->qdio.default_out_queue);\r\n}\r\n}\r\nstatic ssize_t qeth_dev_prioqing_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nint rc = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->conf_mutex);\r\nif ((card->state != CARD_STATE_DOWN) &&\r\n(card->state != CARD_STATE_RECOVER)) {\r\nrc = -EPERM;\r\ngoto out;\r\n}\r\nif (card->qdio.no_out_queues == 1) {\r\ncard->qdio.do_prio_queueing = QETH_PRIOQ_DEFAULT;\r\nrc = -EPERM;\r\ngoto out;\r\n}\r\nif (sysfs_streq(buf, "prio_queueing_prec")) {\r\ncard->qdio.do_prio_queueing = QETH_PRIO_Q_ING_PREC;\r\ncard->qdio.default_out_queue = QETH_DEFAULT_QUEUE;\r\n} else if (sysfs_streq(buf, "prio_queueing_skb")) {\r\ncard->qdio.do_prio_queueing = QETH_PRIO_Q_ING_SKB;\r\ncard->qdio.default_out_queue = QETH_DEFAULT_QUEUE;\r\n} else if (sysfs_streq(buf, "prio_queueing_tos")) {\r\ncard->qdio.do_prio_queueing = QETH_PRIO_Q_ING_TOS;\r\ncard->qdio.default_out_queue = QETH_DEFAULT_QUEUE;\r\n} else if (sysfs_streq(buf, "prio_queueing_vlan")) {\r\nif (!card->options.layer2) {\r\nrc = -ENOTSUPP;\r\ngoto out;\r\n}\r\ncard->qdio.do_prio_queueing = QETH_PRIO_Q_ING_VLAN;\r\ncard->qdio.default_out_queue = QETH_DEFAULT_QUEUE;\r\n} else if (sysfs_streq(buf, "no_prio_queueing:0")) {\r\ncard->qdio.do_prio_queueing = QETH_NO_PRIO_QUEUEING;\r\ncard->qdio.default_out_queue = 0;\r\n} else if (sysfs_streq(buf, "no_prio_queueing:1")) {\r\ncard->qdio.do_prio_queueing = QETH_NO_PRIO_QUEUEING;\r\ncard->qdio.default_out_queue = 1;\r\n} else if (sysfs_streq(buf, "no_prio_queueing:2")) {\r\ncard->qdio.do_prio_queueing = QETH_NO_PRIO_QUEUEING;\r\ncard->qdio.default_out_queue = 2;\r\n} else if (sysfs_streq(buf, "no_prio_queueing:3")) {\r\ncard->qdio.do_prio_queueing = QETH_NO_PRIO_QUEUEING;\r\ncard->qdio.default_out_queue = 3;\r\n} else if (sysfs_streq(buf, "no_prio_queueing")) {\r\ncard->qdio.do_prio_queueing = QETH_NO_PRIO_QUEUEING;\r\ncard->qdio.default_out_queue = QETH_DEFAULT_QUEUE;\r\n} else\r\nrc = -EINVAL;\r\nout:\r\nmutex_unlock(&card->conf_mutex);\r\nreturn rc ? rc : count;\r\n}\r\nstatic ssize_t qeth_dev_bufcnt_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%i\n", card->qdio.in_buf_pool.buf_count);\r\n}\r\nstatic ssize_t qeth_dev_bufcnt_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nchar *tmp;\r\nint cnt, old_cnt;\r\nint rc = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->conf_mutex);\r\nif ((card->state != CARD_STATE_DOWN) &&\r\n(card->state != CARD_STATE_RECOVER)) {\r\nrc = -EPERM;\r\ngoto out;\r\n}\r\nold_cnt = card->qdio.in_buf_pool.buf_count;\r\ncnt = simple_strtoul(buf, &tmp, 10);\r\ncnt = (cnt < QETH_IN_BUF_COUNT_MIN) ? QETH_IN_BUF_COUNT_MIN :\r\n((cnt > QETH_IN_BUF_COUNT_MAX) ? QETH_IN_BUF_COUNT_MAX : cnt);\r\nif (old_cnt != cnt) {\r\nrc = qeth_realloc_buffer_pool(card, cnt);\r\n}\r\nout:\r\nmutex_unlock(&card->conf_mutex);\r\nreturn rc ? rc : count;\r\n}\r\nstatic ssize_t qeth_dev_recover_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nchar *tmp;\r\nint i;\r\nif (!card)\r\nreturn -EINVAL;\r\nif (card->state != CARD_STATE_UP)\r\nreturn -EPERM;\r\ni = simple_strtoul(buf, &tmp, 16);\r\nif (i == 1)\r\nqeth_schedule_recovery(card);\r\nreturn count;\r\n}\r\nstatic ssize_t qeth_dev_performance_stats_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%i\n", card->options.performance_stats ? 1:0);\r\n}\r\nstatic ssize_t qeth_dev_performance_stats_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nchar *tmp;\r\nint i, rc = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->conf_mutex);\r\ni = simple_strtoul(buf, &tmp, 16);\r\nif ((i == 0) || (i == 1)) {\r\nif (i == card->options.performance_stats)\r\ngoto out;\r\ncard->options.performance_stats = i;\r\nif (i == 0)\r\nmemset(&card->perf_stats, 0,\r\nsizeof(struct qeth_perf_stats));\r\ncard->perf_stats.initial_rx_packets = card->stats.rx_packets;\r\ncard->perf_stats.initial_tx_packets = card->stats.tx_packets;\r\n} else\r\nrc = -EINVAL;\r\nout:\r\nmutex_unlock(&card->conf_mutex);\r\nreturn rc ? rc : count;\r\n}\r\nstatic ssize_t qeth_dev_layer2_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%i\n", card->options.layer2);\r\n}\r\nstatic ssize_t qeth_dev_layer2_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nchar *tmp;\r\nint i, rc = 0;\r\nenum qeth_discipline_id newdis;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->discipline_mutex);\r\nif (card->state != CARD_STATE_DOWN) {\r\nrc = -EPERM;\r\ngoto out;\r\n}\r\ni = simple_strtoul(buf, &tmp, 16);\r\nswitch (i) {\r\ncase 0:\r\nnewdis = QETH_DISCIPLINE_LAYER3;\r\nbreak;\r\ncase 1:\r\nnewdis = QETH_DISCIPLINE_LAYER2;\r\nbreak;\r\ndefault:\r\nrc = -EINVAL;\r\ngoto out;\r\n}\r\nif (card->options.layer2 == newdis)\r\ngoto out;\r\nelse {\r\ncard->info.mac_bits = 0;\r\nif (card->discipline) {\r\ncard->discipline->remove(card->gdev);\r\nqeth_core_free_discipline(card);\r\n}\r\n}\r\nrc = qeth_core_load_discipline(card, newdis);\r\nif (rc)\r\ngoto out;\r\nrc = card->discipline->setup(card->gdev);\r\nout:\r\nmutex_unlock(&card->discipline_mutex);\r\nreturn rc ? rc : count;\r\n}\r\nstatic ssize_t qeth_dev_isolation_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nswitch (card->options.isolation) {\r\ncase ISOLATION_MODE_NONE:\r\nreturn snprintf(buf, 6, "%s\n", ATTR_QETH_ISOLATION_NONE);\r\ncase ISOLATION_MODE_FWD:\r\nreturn snprintf(buf, 9, "%s\n", ATTR_QETH_ISOLATION_FWD);\r\ncase ISOLATION_MODE_DROP:\r\nreturn snprintf(buf, 6, "%s\n", ATTR_QETH_ISOLATION_DROP);\r\ndefault:\r\nreturn snprintf(buf, 5, "%s\n", "N/A");\r\n}\r\n}\r\nstatic ssize_t qeth_dev_isolation_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nenum qeth_ipa_isolation_modes isolation;\r\nint rc = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->conf_mutex);\r\nif (card->info.type != QETH_CARD_TYPE_OSD &&\r\ncard->info.type != QETH_CARD_TYPE_OSX &&\r\ncard->info.type != QETH_CARD_TYPE_UNKNOWN) {\r\nrc = -EOPNOTSUPP;\r\ndev_err(&card->gdev->dev, "Adapter does not "\r\n"support QDIO data connection isolation\n");\r\ngoto out;\r\n}\r\nif (sysfs_streq(buf, ATTR_QETH_ISOLATION_NONE)) {\r\nisolation = ISOLATION_MODE_NONE;\r\n} else if (sysfs_streq(buf, ATTR_QETH_ISOLATION_FWD)) {\r\nisolation = ISOLATION_MODE_FWD;\r\n} else if (sysfs_streq(buf, ATTR_QETH_ISOLATION_DROP)) {\r\nisolation = ISOLATION_MODE_DROP;\r\n} else {\r\nrc = -EINVAL;\r\ngoto out;\r\n}\r\nrc = count;\r\ncard->options.prev_isolation = card->options.isolation;\r\ncard->options.isolation = isolation;\r\nif (qeth_card_hw_is_reachable(card)) {\r\nint ipa_rc = qeth_set_access_ctrl_online(card, 1);\r\nif (ipa_rc != 0)\r\nrc = ipa_rc;\r\n}\r\nout:\r\nmutex_unlock(&card->conf_mutex);\r\nreturn rc;\r\n}\r\nstatic ssize_t qeth_dev_switch_attrs_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nstruct qeth_switch_info sw_info;\r\nint rc = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nif (!qeth_card_hw_is_reachable(card))\r\nreturn sprintf(buf, "n/a\n");\r\nrc = qeth_query_switch_attributes(card, &sw_info);\r\nif (rc)\r\nreturn rc;\r\nif (!sw_info.capabilities)\r\nrc = sprintf(buf, "unknown");\r\nif (sw_info.capabilities & QETH_SWITCH_FORW_802_1)\r\nrc = sprintf(buf, (sw_info.settings & QETH_SWITCH_FORW_802_1 ?\r\n"[802.1]" : "802.1"));\r\nif (sw_info.capabilities & QETH_SWITCH_FORW_REFL_RELAY)\r\nrc += sprintf(buf + rc,\r\n(sw_info.settings & QETH_SWITCH_FORW_REFL_RELAY ?\r\n" [rr]" : " rr"));\r\nrc += sprintf(buf + rc, "\n");\r\nreturn rc;\r\n}\r\nstatic ssize_t qeth_hw_trap_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nif (!card)\r\nreturn -EINVAL;\r\nif (card->info.hwtrap)\r\nreturn snprintf(buf, 5, "arm\n");\r\nelse\r\nreturn snprintf(buf, 8, "disarm\n");\r\n}\r\nstatic ssize_t qeth_hw_trap_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nint rc = 0;\r\nint state = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->conf_mutex);\r\nif (qeth_card_hw_is_reachable(card))\r\nstate = 1;\r\nif (sysfs_streq(buf, "arm") && !card->info.hwtrap) {\r\nif (state) {\r\nif (qeth_is_diagass_supported(card,\r\nQETH_DIAGS_CMD_TRAP)) {\r\nrc = qeth_hw_trap(card, QETH_DIAGS_TRAP_ARM);\r\nif (!rc)\r\ncard->info.hwtrap = 1;\r\n} else\r\nrc = -EINVAL;\r\n} else\r\ncard->info.hwtrap = 1;\r\n} else if (sysfs_streq(buf, "disarm") && card->info.hwtrap) {\r\nif (state) {\r\nrc = qeth_hw_trap(card, QETH_DIAGS_TRAP_DISARM);\r\nif (!rc)\r\ncard->info.hwtrap = 0;\r\n} else\r\ncard->info.hwtrap = 0;\r\n} else if (sysfs_streq(buf, "trap") && state && card->info.hwtrap)\r\nrc = qeth_hw_trap(card, QETH_DIAGS_TRAP_CAPTURE);\r\nelse\r\nrc = -EINVAL;\r\nmutex_unlock(&card->conf_mutex);\r\nreturn rc ? rc : count;\r\n}\r\nstatic ssize_t qeth_dev_blkt_show(char *buf, struct qeth_card *card, int value)\r\n{\r\nif (!card)\r\nreturn -EINVAL;\r\nreturn sprintf(buf, "%i\n", value);\r\n}\r\nstatic ssize_t qeth_dev_blkt_store(struct qeth_card *card,\r\nconst char *buf, size_t count, int *value, int max_value)\r\n{\r\nchar *tmp;\r\nint i, rc = 0;\r\nif (!card)\r\nreturn -EINVAL;\r\nmutex_lock(&card->conf_mutex);\r\nif ((card->state != CARD_STATE_DOWN) &&\r\n(card->state != CARD_STATE_RECOVER)) {\r\nrc = -EPERM;\r\ngoto out;\r\n}\r\ni = simple_strtoul(buf, &tmp, 10);\r\nif (i <= max_value)\r\n*value = i;\r\nelse\r\nrc = -EINVAL;\r\nout:\r\nmutex_unlock(&card->conf_mutex);\r\nreturn rc ? rc : count;\r\n}\r\nstatic ssize_t qeth_dev_blkt_total_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nreturn qeth_dev_blkt_show(buf, card, card->info.blkt.time_total);\r\n}\r\nstatic ssize_t qeth_dev_blkt_total_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nreturn qeth_dev_blkt_store(card, buf, count,\r\n&card->info.blkt.time_total, 5000);\r\n}\r\nstatic ssize_t qeth_dev_blkt_inter_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nreturn qeth_dev_blkt_show(buf, card, card->info.blkt.inter_packet);\r\n}\r\nstatic ssize_t qeth_dev_blkt_inter_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nreturn qeth_dev_blkt_store(card, buf, count,\r\n&card->info.blkt.inter_packet, 1000);\r\n}\r\nstatic ssize_t qeth_dev_blkt_inter_jumbo_show(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nreturn qeth_dev_blkt_show(buf, card,\r\ncard->info.blkt.inter_packet_jumbo);\r\n}\r\nstatic ssize_t qeth_dev_blkt_inter_jumbo_store(struct device *dev,\r\nstruct device_attribute *attr, const char *buf, size_t count)\r\n{\r\nstruct qeth_card *card = dev_get_drvdata(dev);\r\nreturn qeth_dev_blkt_store(card, buf, count,\r\n&card->info.blkt.inter_packet_jumbo, 1000);\r\n}
