static bool bc_transmit(struct team *team, struct sk_buff *skb)\r\n{\r\nstruct team_port *cur;\r\nstruct team_port *last = NULL;\r\nstruct sk_buff *skb2;\r\nbool ret;\r\nbool sum_ret = false;\r\nlist_for_each_entry_rcu(cur, &team->port_list, list) {\r\nif (team_port_txable(cur)) {\r\nif (last) {\r\nskb2 = skb_clone(skb, GFP_ATOMIC);\r\nif (skb2) {\r\nret = !team_dev_queue_xmit(team, last,\r\nskb2);\r\nif (!sum_ret)\r\nsum_ret = ret;\r\n}\r\n}\r\nlast = cur;\r\n}\r\n}\r\nif (last) {\r\nret = !team_dev_queue_xmit(team, last, skb);\r\nif (!sum_ret)\r\nsum_ret = ret;\r\n}\r\nreturn sum_ret;\r\n}\r\nstatic int __init bc_init_module(void)\r\n{\r\nreturn team_mode_register(&bc_mode);\r\n}\r\nstatic void __exit bc_cleanup_module(void)\r\n{\r\nteam_mode_unregister(&bc_mode);\r\n}
