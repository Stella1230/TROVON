int main( int argc, const char * argv [] )\r\n{\r\nconst char * varname;\r\nint i = 0;\r\nint c;\r\nint id = 0;\r\nif(argv[1] && strcmp(argv[1],"-i")==0)\r\n{\r\nargv++;\r\nargc--;\r\nid=1;\r\n}\r\nif(argc==1)\r\n{\r\nfprintf(stderr, "bin2hex: [-i] firmware\n");\r\nexit(1);\r\n}\r\nvarname = argv[1];\r\nprintf( "/* automatically generated by bin2hex */\n" );\r\nprintf( "static unsigned char %s [] %s =\n{\n", varname , id?"__initdata":"");\r\nwhile ( ( c = getchar( ) ) != EOF )\r\n{\r\nif ( i != 0 && i % 10 == 0 )\r\nprintf( "\n" );\r\nprintf( "0x%02lx,", c & 0xFFl );\r\ni++;\r\n}\r\nprintf( "};\nstatic int %sLen = %d;\n", varname, i );\r\nreturn 0;\r\n}
