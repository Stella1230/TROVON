void brcmf_debugfs_init(void)\r\n{\r\nroot_folder = debugfs_create_dir(KBUILD_MODNAME, NULL);\r\nif (IS_ERR(root_folder))\r\nroot_folder = NULL;\r\n}\r\nvoid brcmf_debugfs_exit(void)\r\n{\r\nif (!root_folder)\r\nreturn;\r\ndebugfs_remove_recursive(root_folder);\r\nroot_folder = NULL;\r\n}\r\nint brcmf_debugfs_attach(struct brcmf_pub *drvr)\r\n{\r\nstruct device *dev = drvr->bus_if->dev;\r\nif (!root_folder)\r\nreturn -ENODEV;\r\ndrvr->dbgfs_dir = debugfs_create_dir(dev_name(dev), root_folder);\r\nreturn PTR_ERR_OR_ZERO(drvr->dbgfs_dir);\r\n}\r\nvoid brcmf_debugfs_detach(struct brcmf_pub *drvr)\r\n{\r\nif (!IS_ERR_OR_NULL(drvr->dbgfs_dir))\r\ndebugfs_remove_recursive(drvr->dbgfs_dir);\r\n}\r\nstruct dentry *brcmf_debugfs_get_devdir(struct brcmf_pub *drvr)\r\n{\r\nreturn drvr->dbgfs_dir;\r\n}\r\nint brcmf_debugfs_add_entry(struct brcmf_pub *drvr, const char *fn,\r\nint (*read_fn)(struct seq_file *seq, void *data))\r\n{\r\nstruct dentry *e;\r\ne = debugfs_create_devm_seqfile(drvr->bus_if->dev, fn,\r\ndrvr->dbgfs_dir, read_fn);\r\nreturn PTR_ERR_OR_ZERO(e);\r\n}
