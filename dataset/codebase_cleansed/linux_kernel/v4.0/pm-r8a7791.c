static void __init r8a7791_sysc_init(void)\r\n{\r\nvoid __iomem *base = rcar_sysc_init(0xe6180000);\r\niowrite32(0x0131000e, base + SYSCIER);\r\niowrite32(0, base + SYSCIMR);\r\n}\r\nstatic inline void r8a7791_sysc_init(void) {}\r\nvoid __init r8a7791_pm_init(void)\r\n{\r\nvoid __iomem *p;\r\nu32 bar;\r\nstatic int once;\r\nif (once++)\r\nreturn;\r\np = ioremap_nocache(RAM, shmobile_boot_size);\r\nmemcpy_toio(p, shmobile_boot_vector, shmobile_boot_size);\r\niounmap(p);\r\np = ioremap_nocache(RST, 0x63);\r\nbar = (RAM >> 8) & 0xfffffc00;\r\nwritel_relaxed(bar, p + CA15BAR);\r\nwritel_relaxed(bar | 0x10, p + CA15BAR);\r\nwritel_relaxed((readl_relaxed(p + CA15RESCNT) & ~0x0f) | 0xa5a50000,\r\np + CA15RESCNT);\r\niounmap(p);\r\nr8a7791_sysc_init();\r\nshmobile_smp_apmu_suspend_init();\r\n}
