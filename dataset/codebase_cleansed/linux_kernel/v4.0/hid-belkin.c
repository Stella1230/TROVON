static int belkin_input_mapping(struct hid_device *hdev, struct hid_input *hi,\r\nstruct hid_field *field, struct hid_usage *usage,\r\nunsigned long **bit, int *max)\r\n{\r\nunsigned long quirks = (unsigned long)hid_get_drvdata(hdev);\r\nif ((usage->hid & HID_USAGE_PAGE) != HID_UP_CONSUMER ||\r\n!(quirks & BELKIN_WKBD))\r\nreturn 0;\r\nswitch (usage->hid & HID_USAGE) {\r\ncase 0x03a: belkin_map_key_clear(KEY_SOUND); break;\r\ncase 0x03b: belkin_map_key_clear(KEY_CAMERA); break;\r\ncase 0x03c: belkin_map_key_clear(KEY_DOCUMENTS); break;\r\ndefault:\r\nreturn 0;\r\n}\r\nreturn 1;\r\n}\r\nstatic int belkin_probe(struct hid_device *hdev, const struct hid_device_id *id)\r\n{\r\nunsigned long quirks = id->driver_data;\r\nint ret;\r\nhid_set_drvdata(hdev, (void *)quirks);\r\nret = hid_parse(hdev);\r\nif (ret) {\r\nhid_err(hdev, "parse failed\n");\r\ngoto err_free;\r\n}\r\nret = hid_hw_start(hdev, HID_CONNECT_DEFAULT |\r\n((quirks & BELKIN_HIDDEV) ? HID_CONNECT_HIDDEV_FORCE : 0));\r\nif (ret) {\r\nhid_err(hdev, "hw start failed\n");\r\ngoto err_free;\r\n}\r\nreturn 0;\r\nerr_free:\r\nreturn ret;\r\n}
