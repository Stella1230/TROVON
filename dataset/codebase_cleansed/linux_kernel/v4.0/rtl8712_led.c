static void InitLed871x(struct _adapter *padapter, struct LED_871x *pLed,\r\nenum LED_PIN_871x LedPin)\r\n{\r\nstruct net_device *nic;\r\nnic = padapter->pnetdev;\r\npLed->padapter = padapter;\r\npLed->LedPin = LedPin;\r\npLed->CurrLedState = LED_OFF;\r\npLed->bLedOn = false;\r\npLed->bLedBlinkInProgress = false;\r\npLed->BlinkTimes = 0;\r\npLed->BlinkingLedState = LED_UNKNOWN;\r\n_init_timer(&(pLed->BlinkTimer), nic, BlinkTimerCallback, pLed);\r\nINIT_WORK(&pLed->BlinkWorkItem, BlinkWorkItemCallback);\r\n}\r\nstatic void DeInitLed871x(struct LED_871x *pLed)\r\n{\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nstatic void SwLedOn(struct _adapter *padapter, struct LED_871x *pLed)\r\n{\r\nu8 LedCfg;\r\nif ((padapter->bSurpriseRemoved == true) ||\r\n(padapter->bDriverStopped == true))\r\nreturn;\r\nLedCfg = r8712_read8(padapter, LEDCFG);\r\nswitch (pLed->LedPin) {\r\ncase LED_PIN_GPIO0:\r\nbreak;\r\ncase LED_PIN_LED0:\r\nr8712_write8(padapter, LEDCFG, LedCfg&0xf0);\r\nbreak;\r\ncase LED_PIN_LED1:\r\nr8712_write8(padapter, LEDCFG, LedCfg&0x0f);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\npLed->bLedOn = true;\r\n}\r\nstatic void SwLedOff(struct _adapter *padapter, struct LED_871x *pLed)\r\n{\r\nu8 LedCfg;\r\nif ((padapter->bSurpriseRemoved == true) ||\r\n(padapter->bDriverStopped == true))\r\nreturn;\r\nLedCfg = r8712_read8(padapter, LEDCFG);\r\nswitch (pLed->LedPin) {\r\ncase LED_PIN_GPIO0:\r\nbreak;\r\ncase LED_PIN_LED0:\r\nLedCfg &= 0xf0;\r\nr8712_write8(padapter, LEDCFG, (LedCfg|BIT(3)));\r\nbreak;\r\ncase LED_PIN_LED1:\r\nLedCfg &= 0x0f;\r\nr8712_write8(padapter, LEDCFG, (LedCfg|BIT(7)));\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\npLed->bLedOn = false;\r\n}\r\nvoid r8712_InitSwLeds(struct _adapter *padapter)\r\n{\r\nstruct led_priv *pledpriv = &(padapter->ledpriv);\r\npledpriv->LedControlHandler = LedControl871x;\r\nInitLed871x(padapter, &(pledpriv->SwLed0), LED_PIN_LED0);\r\nInitLed871x(padapter, &(pledpriv->SwLed1), LED_PIN_LED1);\r\n}\r\nvoid r8712_DeInitSwLeds(struct _adapter *padapter)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nDeInitLed871x(&(ledpriv->SwLed0));\r\nDeInitLed871x(&(ledpriv->SwLed1));\r\n}\r\nstatic void SwLedBlink(struct LED_871x *pLed)\r\n{\r\nstruct _adapter *padapter = pLed->padapter;\r\nstruct mlme_priv *pmlmepriv = &(padapter->mlmepriv);\r\nu8 bStopBlinking = false;\r\nif (pLed->BlinkingLedState == LED_ON)\r\nSwLedOn(padapter, pLed);\r\nelse\r\nSwLedOff(padapter, pLed);\r\npLed->BlinkTimes--;\r\nswitch (pLed->CurrLedState) {\r\ncase LED_BLINK_NORMAL:\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nbreak;\r\ncase LED_BLINK_StartToBlink:\r\nif ((check_fwstate(pmlmepriv, _FW_LINKED) == true) &&\r\n(pmlmepriv->fw_state & WIFI_STATION_STATE))\r\nbStopBlinking = true;\r\nif ((check_fwstate(pmlmepriv, _FW_LINKED) == true) &&\r\n((pmlmepriv->fw_state & WIFI_ADHOC_STATE) ||\r\n(pmlmepriv->fw_state & WIFI_ADHOC_MASTER_STATE)))\r\nbStopBlinking = true;\r\nelse if (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nbreak;\r\ncase LED_BLINK_WPS:\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nbreak;\r\ndefault:\r\nbStopBlinking = true;\r\nbreak;\r\n}\r\nif (bStopBlinking) {\r\nif ((check_fwstate(pmlmepriv, _FW_LINKED) == true) &&\r\n(pLed->bLedOn == false))\r\nSwLedOn(padapter, pLed);\r\nelse if ((check_fwstate(pmlmepriv, _FW_LINKED) ==\r\ntrue) && pLed->bLedOn == true)\r\nSwLedOff(padapter, pLed);\r\npLed->BlinkTimes = 0;\r\npLed->bLedBlinkInProgress = false;\r\n} else {\r\nif (pLed->BlinkingLedState == LED_ON)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\nswitch (pLed->CurrLedState) {\r\ncase LED_BLINK_NORMAL:\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NORMAL_INTERVAL);\r\nbreak;\r\ncase LED_BLINK_SLOWLY:\r\ncase LED_BLINK_StartToBlink:\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SLOWLY_INTERVAL);\r\nbreak;\r\ncase LED_BLINK_WPS:\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_LONG_INTERVAL);\r\nbreak;\r\ndefault:\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SLOWLY_INTERVAL);\r\nbreak;\r\n}\r\n}\r\n}\r\nstatic void SwLedBlink1(struct LED_871x *pLed)\r\n{\r\nstruct _adapter *padapter = pLed->padapter;\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nstruct mlme_priv *pmlmepriv = &(padapter->mlmepriv);\r\nstruct eeprom_priv *peeprompriv = &(padapter->eeprompriv);\r\nstruct LED_871x *pLed1 = &(ledpriv->SwLed1);\r\nu8 bStopBlinking = false;\r\nif (peeprompriv->CustomerID == RT_CID_819x_CAMEO)\r\npLed = &(ledpriv->SwLed1);\r\nif (pLed->BlinkingLedState == LED_ON)\r\nSwLedOn(padapter, pLed);\r\nelse\r\nSwLedOff(padapter, pLed);\r\nif (peeprompriv->CustomerID == RT_CID_DEFAULT) {\r\nif (check_fwstate(pmlmepriv, _FW_LINKED) == true) {\r\nif (!pLed1->bSWLedCtrl) {\r\nSwLedOn(padapter, pLed1);\r\npLed1->bSWLedCtrl = true;\r\n} else if (!pLed1->bLedOn)\r\nSwLedOn(padapter, pLed1);\r\n} else {\r\nif (!pLed1->bSWLedCtrl) {\r\nSwLedOff(padapter, pLed1);\r\npLed1->bSWLedCtrl = true;\r\n} else if (pLed1->bLedOn)\r\nSwLedOff(padapter, pLed1);\r\n}\r\n}\r\nswitch (pLed->CurrLedState) {\r\ncase LED_BLINK_SLOWLY:\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\nbreak;\r\ncase LED_BLINK_NORMAL:\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_LINK_INTERVAL_ALPHA);\r\nbreak;\r\ncase LED_SCAN_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\nif (check_fwstate(pmlmepriv, _FW_LINKED) == true) {\r\npLed->bLedLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_NORMAL;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_LINK_INTERVAL_ALPHA);\r\n} else if (!check_fwstate(pmlmepriv, _FW_LINKED)) {\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\n}\r\npLed->bLedScanBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_TXRX_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\nif (check_fwstate(pmlmepriv, _FW_LINKED) == true) {\r\npLed->bLedLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_NORMAL;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_LINK_INTERVAL_ALPHA);\r\n} else if (!check_fwstate(pmlmepriv, _FW_LINKED)) {\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\n}\r\npLed->BlinkTimes = 0;\r\npLed->bLedBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_BLINK_WPS:\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\nbreak;\r\ncase LED_BLINK_WPS_STOP:\r\nif (pLed->BlinkingLedState == LED_ON) {\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_WPS_SUCESS_INTERVAL_ALPHA);\r\nbStopBlinking = false;\r\n} else\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\npLed->bLedLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_NORMAL;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_LINK_INTERVAL_ALPHA);\r\n}\r\npLed->bLedWPSBlinkInProgress = false;\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedBlink2(struct LED_871x *pLed)\r\n{\r\nstruct _adapter *padapter = pLed->padapter;\r\nstruct mlme_priv *pmlmepriv = &(padapter->mlmepriv);\r\nu8 bStopBlinking = false;\r\nif (pLed->BlinkingLedState == LED_ON)\r\nSwLedOn(padapter, pLed);\r\nelse\r\nSwLedOff(padapter, pLed);\r\nswitch (pLed->CurrLedState) {\r\ncase LED_SCAN_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\nif (check_fwstate(pmlmepriv, _FW_LINKED) == true) {\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nSwLedOn(padapter, pLed);\r\n} else if (!check_fwstate(pmlmepriv, _FW_LINKED)) {\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nSwLedOff(padapter, pLed);\r\n}\r\npLed->bLedScanBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_TXRX_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\nif (check_fwstate(pmlmepriv, _FW_LINKED) == true) {\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nSwLedOn(padapter, pLed);\r\n} else if (!check_fwstate(pmlmepriv, _FW_LINKED)) {\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nSwLedOff(padapter, pLed);\r\n}\r\npLed->bLedBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedBlink3(struct LED_871x *pLed)\r\n{\r\nstruct _adapter *padapter = pLed->padapter;\r\nstruct mlme_priv *pmlmepriv = &(padapter->mlmepriv);\r\nu8 bStopBlinking = false;\r\nif (pLed->BlinkingLedState == LED_ON)\r\nSwLedOn(padapter, pLed);\r\nelse\r\nif (pLed->CurrLedState != LED_BLINK_WPS_STOP)\r\nSwLedOff(padapter, pLed);\r\nswitch (pLed->CurrLedState) {\r\ncase LED_SCAN_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\nif (check_fwstate(pmlmepriv, _FW_LINKED) == true) {\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nif (!pLed->bLedOn)\r\nSwLedOn(padapter, pLed);\r\n} else if (!check_fwstate(pmlmepriv, _FW_LINKED)) {\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nif (pLed->bLedOn)\r\nSwLedOff(padapter, pLed);\r\n}\r\npLed->bLedScanBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_TXRX_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\nif (check_fwstate(pmlmepriv, _FW_LINKED) == true) {\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nif (!pLed->bLedOn)\r\nSwLedOn(padapter, pLed);\r\n} else if (!check_fwstate(pmlmepriv, _FW_LINKED)) {\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nif (pLed->bLedOn)\r\nSwLedOff(padapter, pLed);\r\n}\r\npLed->bLedBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_BLINK_WPS:\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\nbreak;\r\ncase LED_BLINK_WPS_STOP:\r\nif (pLed->BlinkingLedState == LED_ON) {\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_WPS_SUCESS_INTERVAL_ALPHA);\r\nbStopBlinking = false;\r\n} else\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nSwLedOn(padapter, pLed);\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedBlink4(struct LED_871x *pLed)\r\n{\r\nstruct _adapter *padapter = pLed->padapter;\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nstruct LED_871x *pLed1 = &(ledpriv->SwLed1);\r\nu8 bStopBlinking = false;\r\nif (pLed->BlinkingLedState == LED_ON)\r\nSwLedOn(padapter, pLed);\r\nelse\r\nSwLedOff(padapter, pLed);\r\nif (!pLed1->bLedWPSBlinkInProgress &&\r\npLed1->BlinkingLedState == LED_UNKNOWN) {\r\npLed1->BlinkingLedState = LED_OFF;\r\npLed1->CurrLedState = LED_OFF;\r\nSwLedOff(padapter, pLed1);\r\n}\r\nswitch (pLed->CurrLedState) {\r\ncase LED_BLINK_SLOWLY:\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\nbreak;\r\ncase LED_BLINK_StartToBlink:\r\nif (pLed->bLedOn) {\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SLOWLY_INTERVAL);\r\n} else {\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NORMAL_INTERVAL);\r\n}\r\nbreak;\r\ncase LED_SCAN_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\npLed->bLedScanBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_TXRX_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\npLed->bLedBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_BLINK_WPS:\r\nif (pLed->bLedOn) {\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SLOWLY_INTERVAL);\r\n} else {\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NORMAL_INTERVAL);\r\n}\r\nbreak;\r\ncase LED_BLINK_WPS_STOP:\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), LED_BLINK_NORMAL_INTERVAL);\r\nbreak;\r\ncase LED_BLINK_WPS_STOP_OVERLAP:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0) {\r\nif (pLed->bLedOn)\r\npLed->BlinkTimes = 1;\r\nelse\r\nbStopBlinking = true;\r\n}\r\nif (bStopBlinking) {\r\npLed->BlinkTimes = 10;\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_LINK_INTERVAL_ALPHA);\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NORMAL_INTERVAL);\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedBlink5(struct LED_871x *pLed)\r\n{\r\nstruct _adapter *padapter = pLed->padapter;\r\nu8 bStopBlinking = false;\r\nif (pLed->BlinkingLedState == LED_ON)\r\nSwLedOn(padapter, pLed);\r\nelse\r\nSwLedOff(padapter, pLed);\r\nswitch (pLed->CurrLedState) {\r\ncase LED_SCAN_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nif (!pLed->bLedOn)\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\npLed->bLedScanBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_TXRX_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nif (!pLed->bLedOn)\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\npLed->bLedBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedBlink6(struct LED_871x *pLed)\r\n{\r\nstruct _adapter *padapter = pLed->padapter;\r\nu8 bStopBlinking = false;\r\nif (pLed->BlinkingLedState == LED_ON)\r\nSwLedOn(padapter, pLed);\r\nelse\r\nSwLedOff(padapter, pLed);\r\nswitch (pLed->CurrLedState) {\r\ncase LED_TXRX_BLINK:\r\npLed->BlinkTimes--;\r\nif (pLed->BlinkTimes == 0)\r\nbStopBlinking = true;\r\nif (bStopBlinking) {\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nif (!pLed->bLedOn)\r\nSwLedOn(padapter, pLed);\r\npLed->bLedBlinkInProgress = false;\r\n} else {\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_BLINK_WPS:\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), LED_BLINK_SCAN_INTERVAL_ALPHA);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void BlinkTimerCallback(unsigned long data)\r\n{\r\nstruct LED_871x *pLed = (struct LED_871x *)data;\r\nif ((pLed->padapter->bSurpriseRemoved == true) ||\r\n(pLed->padapter->bDriverStopped == true))\r\nreturn;\r\nschedule_work(&pLed->BlinkWorkItem);\r\n}\r\nstatic void BlinkWorkItemCallback(struct work_struct *work)\r\n{\r\nstruct LED_871x *pLed = container_of(work, struct LED_871x,\r\nBlinkWorkItem);\r\nstruct led_priv *ledpriv = &(pLed->padapter->ledpriv);\r\nswitch (ledpriv->LedStrategy) {\r\ncase SW_LED_MODE0:\r\nSwLedBlink(pLed);\r\nbreak;\r\ncase SW_LED_MODE1:\r\nSwLedBlink1(pLed);\r\nbreak;\r\ncase SW_LED_MODE2:\r\nSwLedBlink2(pLed);\r\nbreak;\r\ncase SW_LED_MODE3:\r\nSwLedBlink3(pLed);\r\nbreak;\r\ncase SW_LED_MODE4:\r\nSwLedBlink4(pLed);\r\nbreak;\r\ncase SW_LED_MODE5:\r\nSwLedBlink5(pLed);\r\nbreak;\r\ncase SW_LED_MODE6:\r\nSwLedBlink6(pLed);\r\nbreak;\r\ndefault:\r\nSwLedBlink(pLed);\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedControlMode1(struct _adapter *padapter,\r\nenum LED_CTL_MODE LedAction)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nstruct LED_871x *pLed = &(ledpriv->SwLed0);\r\nstruct mlme_priv *pmlmepriv = &(padapter->mlmepriv);\r\nstruct sitesurvey_ctrl *psitesurveyctrl = &(pmlmepriv->sitesurveyctrl);\r\nif (padapter->eeprompriv.CustomerID == RT_CID_819x_CAMEO)\r\npLed = &(ledpriv->SwLed1);\r\nswitch (LedAction) {\r\ncase LED_CTL_START_TO_LINK:\r\ncase LED_CTL_NO_LINK:\r\nif (pLed->bLedNoLinkBlinkInProgress == false) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK ||\r\nIS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_LINK:\r\nif (pLed->bLedLinkBlinkInProgress == false) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK ||\r\nIS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_NORMAL;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_LINK_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_SITE_SURVEY:\r\nif ((psitesurveyctrl->traffic_busy) &&\r\n(check_fwstate(pmlmepriv, _FW_LINKED) == true))\r\n;\r\nelse if (pLed->bLedScanBlinkInProgress == false) {\r\nif (IS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedScanBlinkInProgress = true;\r\npLed->CurrLedState = LED_SCAN_BLINK;\r\npLed->BlinkTimes = 24;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_TX:\r\ncase LED_CTL_RX:\r\nif (pLed->bLedBlinkInProgress == false) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK ||\r\nIS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedLinkBlinkInProgress = false;\r\n}\r\npLed->bLedBlinkInProgress = true;\r\npLed->CurrLedState = LED_TXRX_BLINK;\r\npLed->BlinkTimes = 2;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_START_WPS:\r\ncase LED_CTL_START_WPS_BOTTON:\r\nif (pLed->bLedWPSBlinkInProgress == false) {\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\npLed->bLedWPSBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_WPS;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_STOP_WPS:\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\nif (pLed->bLedWPSBlinkInProgress)\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\nelse\r\npLed->bLedWPSBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_WPS_STOP;\r\nif (pLed->bLedOn) {\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_WPS_SUCESS_INTERVAL_ALPHA);\r\n} else {\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\n}\r\nbreak;\r\ncase LED_CTL_STOP_WPS_FAIL:\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\nbreak;\r\ncase LED_CTL_POWER_OFF:\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nif (pLed->bLedNoLinkBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedLinkBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedControlMode2(struct _adapter *padapter,\r\nenum LED_CTL_MODE LedAction)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nstruct mlme_priv *pmlmepriv = &padapter->mlmepriv;\r\nstruct LED_871x *pLed = &(ledpriv->SwLed0);\r\nswitch (LedAction) {\r\ncase LED_CTL_SITE_SURVEY:\r\nif (pmlmepriv->sitesurveyctrl.traffic_busy)\r\n;\r\nelse if (pLed->bLedScanBlinkInProgress == false) {\r\nif (IS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedScanBlinkInProgress = true;\r\npLed->CurrLedState = LED_SCAN_BLINK;\r\npLed->BlinkTimes = 24;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_TX:\r\ncase LED_CTL_RX:\r\nif ((pLed->bLedBlinkInProgress == false) &&\r\n(check_fwstate(pmlmepriv, _FW_LINKED) == true)) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK ||\r\nIS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\npLed->bLedBlinkInProgress = true;\r\npLed->CurrLedState = LED_TXRX_BLINK;\r\npLed->BlinkTimes = 2;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_LINK:\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nif (pLed->bLedBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ncase LED_CTL_START_WPS:\r\ncase LED_CTL_START_WPS_BOTTON:\r\nif (pLed->bLedWPSBlinkInProgress == false) {\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\npLed->bLedWPSBlinkInProgress = true;\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\n}\r\nbreak;\r\ncase LED_CTL_STOP_WPS:\r\npLed->bLedWPSBlinkInProgress = false;\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ncase LED_CTL_STOP_WPS_FAIL:\r\npLed->bLedWPSBlinkInProgress = false;\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ncase LED_CTL_START_TO_LINK:\r\ncase LED_CTL_NO_LINK:\r\nif (!IS_LED_BLINKING(pLed)) {\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\n}\r\nbreak;\r\ncase LED_CTL_POWER_OFF:\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nif (pLed->bLedBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedControlMode3(struct _adapter *padapter,\r\nenum LED_CTL_MODE LedAction)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nstruct mlme_priv *pmlmepriv = &padapter->mlmepriv;\r\nstruct LED_871x *pLed = &(ledpriv->SwLed0);\r\nswitch (LedAction) {\r\ncase LED_CTL_SITE_SURVEY:\r\nif (pmlmepriv->sitesurveyctrl.traffic_busy)\r\n;\r\nelse if (pLed->bLedScanBlinkInProgress == false) {\r\nif (IS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedScanBlinkInProgress = true;\r\npLed->CurrLedState = LED_SCAN_BLINK;\r\npLed->BlinkTimes = 24;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_TX:\r\ncase LED_CTL_RX:\r\nif ((pLed->bLedBlinkInProgress == false) &&\r\n(check_fwstate(pmlmepriv, _FW_LINKED) == true)) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK ||\r\nIS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\npLed->bLedBlinkInProgress = true;\r\npLed->CurrLedState = LED_TXRX_BLINK;\r\npLed->BlinkTimes = 2;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_LINK:\r\nif (IS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\nif (pLed->bLedBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ncase LED_CTL_START_WPS:\r\ncase LED_CTL_START_WPS_BOTTON:\r\nif (pLed->bLedWPSBlinkInProgress == false) {\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\npLed->bLedWPSBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_WPS;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_STOP_WPS:\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n} else\r\npLed->bLedWPSBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_WPS_STOP;\r\nif (pLed->bLedOn) {\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_WPS_SUCESS_INTERVAL_ALPHA);\r\n} else {\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\n}\r\nbreak;\r\ncase LED_CTL_STOP_WPS_FAIL:\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ncase LED_CTL_START_TO_LINK:\r\ncase LED_CTL_NO_LINK:\r\nif (!IS_LED_BLINKING(pLed)) {\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\n}\r\nbreak;\r\ncase LED_CTL_POWER_OFF:\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nif (pLed->bLedBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedControlMode4(struct _adapter *padapter,\r\nenum LED_CTL_MODE LedAction)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nstruct mlme_priv *pmlmepriv = &padapter->mlmepriv;\r\nstruct LED_871x *pLed = &(ledpriv->SwLed0);\r\nstruct LED_871x *pLed1 = &(ledpriv->SwLed1);\r\nswitch (LedAction) {\r\ncase LED_CTL_START_TO_LINK:\r\nif (pLed1->bLedWPSBlinkInProgress) {\r\npLed1->bLedWPSBlinkInProgress = false;\r\n_cancel_timer_ex(&(pLed1->BlinkTimer));\r\npLed1->BlinkingLedState = LED_OFF;\r\npLed1->CurrLedState = LED_OFF;\r\nif (pLed1->bLedOn)\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\n}\r\nif (pLed->bLedStartToLinkBlinkInProgress == false) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK ||\r\nIS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\npLed->bLedStartToLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_StartToBlink;\r\nif (pLed->bLedOn) {\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SLOWLY_INTERVAL);\r\n} else {\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NORMAL_INTERVAL);\r\n}\r\n}\r\nbreak;\r\ncase LED_CTL_LINK:\r\ncase LED_CTL_NO_LINK:\r\nif (LedAction == LED_CTL_LINK) {\r\nif (pLed1->bLedWPSBlinkInProgress) {\r\npLed1->bLedWPSBlinkInProgress = false;\r\n_cancel_timer_ex(&(pLed1->BlinkTimer));\r\npLed1->BlinkingLedState = LED_OFF;\r\npLed1->CurrLedState = LED_OFF;\r\nif (pLed1->bLedOn)\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\n}\r\n}\r\nif (pLed->bLedNoLinkBlinkInProgress == false) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK ||\r\nIS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_SITE_SURVEY:\r\nif ((pmlmepriv->sitesurveyctrl.traffic_busy) &&\r\n(check_fwstate(pmlmepriv, _FW_LINKED) == true))\r\n;\r\nelse if (pLed->bLedScanBlinkInProgress == false) {\r\nif (IS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedScanBlinkInProgress = true;\r\npLed->CurrLedState = LED_SCAN_BLINK;\r\npLed->BlinkTimes = 24;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_TX:\r\ncase LED_CTL_RX:\r\nif (pLed->bLedBlinkInProgress == false) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK ||\r\nIS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\npLed->bLedBlinkInProgress = true;\r\npLed->CurrLedState = LED_TXRX_BLINK;\r\npLed->BlinkTimes = 2;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_START_WPS:\r\ncase LED_CTL_START_WPS_BOTTON:\r\nif (pLed1->bLedWPSBlinkInProgress) {\r\npLed1->bLedWPSBlinkInProgress = false;\r\n_cancel_timer_ex(&(pLed1->BlinkTimer));\r\npLed1->BlinkingLedState = LED_OFF;\r\npLed1->CurrLedState = LED_OFF;\r\nif (pLed1->bLedOn)\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\n}\r\nif (pLed->bLedWPSBlinkInProgress == false) {\r\nif (pLed->bLedNoLinkBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\npLed->bLedWPSBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_WPS;\r\nif (pLed->bLedOn) {\r\npLed->BlinkingLedState = LED_OFF;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SLOWLY_INTERVAL);\r\n} else {\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NORMAL_INTERVAL);\r\n}\r\n}\r\nbreak;\r\ncase LED_CTL_STOP_WPS:\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\nbreak;\r\ncase LED_CTL_STOP_WPS_FAIL:\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\nif (pLed1->bLedWPSBlinkInProgress)\r\n_cancel_timer_ex(&(pLed1->BlinkTimer));\r\nelse\r\npLed1->bLedWPSBlinkInProgress = true;\r\npLed1->CurrLedState = LED_BLINK_WPS_STOP;\r\nif (pLed1->bLedOn)\r\npLed1->BlinkingLedState = LED_OFF;\r\nelse\r\npLed1->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), LED_BLINK_NORMAL_INTERVAL);\r\nbreak;\r\ncase LED_CTL_STOP_WPS_FAIL_OVERLAP:\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\npLed->bLedNoLinkBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_SLOWLY;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_NO_LINK_INTERVAL_ALPHA);\r\nif (pLed1->bLedWPSBlinkInProgress)\r\n_cancel_timer_ex(&(pLed1->BlinkTimer));\r\nelse\r\npLed1->bLedWPSBlinkInProgress = true;\r\npLed1->CurrLedState = LED_BLINK_WPS_STOP_OVERLAP;\r\npLed1->BlinkTimes = 10;\r\nif (pLed1->bLedOn)\r\npLed1->BlinkingLedState = LED_OFF;\r\nelse\r\npLed1->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), LED_BLINK_NORMAL_INTERVAL);\r\nbreak;\r\ncase LED_CTL_POWER_OFF:\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nif (pLed->bLedNoLinkBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedNoLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedLinkBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedLinkBlinkInProgress = false;\r\n}\r\nif (pLed->bLedBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\nif (pLed->bLedScanBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedScanBlinkInProgress = false;\r\n}\r\nif (pLed->bLedStartToLinkBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedStartToLinkBlinkInProgress = false;\r\n}\r\nif (pLed1->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed1->BlinkTimer));\r\npLed1->bLedWPSBlinkInProgress = false;\r\n}\r\npLed1->BlinkingLedState = LED_UNKNOWN;\r\nSwLedOff(padapter, pLed);\r\nSwLedOff(padapter, pLed1);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedControlMode5(struct _adapter *padapter,\r\nenum LED_CTL_MODE LedAction)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nstruct mlme_priv *pmlmepriv = &padapter->mlmepriv;\r\nstruct LED_871x *pLed = &(ledpriv->SwLed0);\r\nif (padapter->eeprompriv.CustomerID == RT_CID_819x_CAMEO)\r\npLed = &(ledpriv->SwLed1);\r\nswitch (LedAction) {\r\ncase LED_CTL_POWER_ON:\r\ncase LED_CTL_NO_LINK:\r\ncase LED_CTL_LINK:\r\nif (pLed->CurrLedState == LED_SCAN_BLINK)\r\nreturn;\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\npLed->bLedBlinkInProgress = false;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ncase LED_CTL_SITE_SURVEY:\r\nif ((pmlmepriv->sitesurveyctrl.traffic_busy) &&\r\n(check_fwstate(pmlmepriv, _FW_LINKED) == true))\r\n;\r\nelse if (pLed->bLedScanBlinkInProgress == false) {\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedScanBlinkInProgress = true;\r\npLed->CurrLedState = LED_SCAN_BLINK;\r\npLed->BlinkTimes = 24;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_TX:\r\ncase LED_CTL_RX:\r\nif (pLed->bLedBlinkInProgress == false) {\r\nif (pLed->CurrLedState == LED_SCAN_BLINK)\r\nreturn;\r\npLed->bLedBlinkInProgress = true;\r\npLed->CurrLedState = LED_TXRX_BLINK;\r\npLed->BlinkTimes = 2;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_POWER_OFF:\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nif (pLed->bLedBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nSwLedOff(padapter, pLed);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic void SwLedControlMode6(struct _adapter *padapter,\r\nenum LED_CTL_MODE LedAction)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nstruct mlme_priv *pmlmepriv = &padapter->mlmepriv;\r\nstruct LED_871x *pLed = &(ledpriv->SwLed0);\r\nswitch (LedAction) {\r\ncase LED_CTL_POWER_ON:\r\ncase LED_CTL_NO_LINK:\r\ncase LED_CTL_LINK:\r\ncase LED_CTL_SITE_SURVEY:\r\nif (IS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\npLed->bLedBlinkInProgress = false;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ncase LED_CTL_TX:\r\ncase LED_CTL_RX:\r\nif (pLed->bLedBlinkInProgress == false &&\r\n(check_fwstate(pmlmepriv, _FW_LINKED) == true)) {\r\nif (IS_LED_WPS_BLINKING(pLed))\r\nreturn;\r\npLed->bLedBlinkInProgress = true;\r\npLed->CurrLedState = LED_TXRX_BLINK;\r\npLed->BlinkTimes = 2;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_FASTER_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_START_WPS:\r\ncase LED_CTL_START_WPS_BOTTON:\r\nif (pLed->bLedWPSBlinkInProgress == false) {\r\nif (pLed->bLedBlinkInProgress == true) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\npLed->bLedWPSBlinkInProgress = true;\r\npLed->CurrLedState = LED_BLINK_WPS;\r\nif (pLed->bLedOn)\r\npLed->BlinkingLedState = LED_OFF;\r\nelse\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer),\r\nLED_BLINK_SCAN_INTERVAL_ALPHA);\r\n}\r\nbreak;\r\ncase LED_CTL_STOP_WPS_FAIL:\r\ncase LED_CTL_STOP_WPS:\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\npLed->CurrLedState = LED_ON;\r\npLed->BlinkingLedState = LED_ON;\r\n_set_timer(&(pLed->BlinkTimer), 0);\r\nbreak;\r\ncase LED_CTL_POWER_OFF:\r\npLed->CurrLedState = LED_OFF;\r\npLed->BlinkingLedState = LED_OFF;\r\nif (pLed->bLedBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedBlinkInProgress = false;\r\n}\r\nif (pLed->bLedWPSBlinkInProgress) {\r\n_cancel_timer_ex(&(pLed->BlinkTimer));\r\npLed->bLedWPSBlinkInProgress = false;\r\n}\r\nSwLedOff(padapter, pLed);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nvoid LedControl871x(struct _adapter *padapter, enum LED_CTL_MODE LedAction)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nif (ledpriv->bRegUseLed == false)\r\nreturn;\r\nswitch (ledpriv->LedStrategy) {\r\ncase SW_LED_MODE0:\r\nbreak;\r\ncase SW_LED_MODE1:\r\nSwLedControlMode1(padapter, LedAction);\r\nbreak;\r\ncase SW_LED_MODE2:\r\nSwLedControlMode2(padapter, LedAction);\r\nbreak;\r\ncase SW_LED_MODE3:\r\nSwLedControlMode3(padapter, LedAction);\r\nbreak;\r\ncase SW_LED_MODE4:\r\nSwLedControlMode4(padapter, LedAction);\r\nbreak;\r\ncase SW_LED_MODE5:\r\nSwLedControlMode5(padapter, LedAction);\r\nbreak;\r\ncase SW_LED_MODE6:\r\nSwLedControlMode6(padapter, LedAction);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}
