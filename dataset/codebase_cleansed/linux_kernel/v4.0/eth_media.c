static int tipc_eth_addr2str(struct tipc_media_addr *addr,\r\nchar *strbuf, int bufsz)\r\n{\r\nif (bufsz < 18)\r\nreturn 1;\r\nsprintf(strbuf, "%pM", addr->value);\r\nreturn 0;\r\n}\r\nstatic int tipc_eth_addr2msg(char *msg, struct tipc_media_addr *addr)\r\n{\r\nmemset(msg, 0, TIPC_MEDIA_ADDR_SIZE);\r\nmsg[TIPC_MEDIA_TYPE_OFFSET] = TIPC_MEDIA_TYPE_ETH;\r\nmemcpy(msg + ETH_ADDR_OFFSET, addr->value, ETH_ALEN);\r\nreturn 0;\r\n}\r\nstatic int tipc_eth_raw2addr(struct tipc_bearer *b,\r\nstruct tipc_media_addr *addr,\r\nchar *msg)\r\n{\r\nchar bcast_mac[ETH_ALEN] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff};\r\nmemset(addr, 0, sizeof(*addr));\r\nether_addr_copy(addr->value, msg);\r\naddr->media_id = TIPC_MEDIA_TYPE_ETH;\r\naddr->broadcast = !memcmp(addr->value, bcast_mac, ETH_ALEN);\r\nreturn 0;\r\n}\r\nstatic int tipc_eth_msg2addr(struct tipc_bearer *b,\r\nstruct tipc_media_addr *addr,\r\nchar *msg)\r\n{\r\nmsg += ETH_ADDR_OFFSET;\r\nreturn tipc_eth_raw2addr(b, addr, msg);\r\n}
