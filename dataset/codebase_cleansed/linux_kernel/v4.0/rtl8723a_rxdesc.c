static void process_rssi(struct rtw_adapter *padapter,\r\nstruct recv_frame *prframe)\r\n{\r\nstruct rx_pkt_attrib *pattrib = &prframe->attrib;\r\nstruct signal_stat *signal_stat = &padapter->recvpriv.signal_strength_data;\r\nif (signal_stat->update_req) {\r\nsignal_stat->total_num = 0;\r\nsignal_stat->total_val = 0;\r\nsignal_stat->update_req = 0;\r\n}\r\nsignal_stat->total_num++;\r\nsignal_stat->total_val += pattrib->phy_info.SignalStrength;\r\nsignal_stat->avg_val = signal_stat->total_val / signal_stat->total_num;\r\n}\r\nstatic void process_link_qual(struct rtw_adapter *padapter,\r\nstruct recv_frame *prframe)\r\n{\r\nstruct rx_pkt_attrib *pattrib;\r\nstruct signal_stat *signal_stat;\r\nif (prframe == NULL || padapter == NULL)\r\nreturn;\r\npattrib = &prframe->attrib;\r\nsignal_stat = &padapter->recvpriv.signal_qual_data;\r\nif (signal_stat->update_req) {\r\nsignal_stat->total_num = 0;\r\nsignal_stat->total_val = 0;\r\nsignal_stat->update_req = 0;\r\n}\r\nsignal_stat->total_num++;\r\nsignal_stat->total_val += pattrib->phy_info.SignalQuality;\r\nsignal_stat->avg_val = signal_stat->total_val / signal_stat->total_num;\r\n}\r\nvoid rtl8723a_process_phy_info(struct rtw_adapter *padapter, void *prframe)\r\n{\r\nstruct recv_frame *precvframe = prframe;\r\nprocess_rssi(padapter, precvframe);\r\nprocess_link_qual(padapter, precvframe);\r\n}
