struct cfs_cpt_table *\r\ncfs_cpt_table_alloc(unsigned int ncpt)\r\n{\r\nstruct cfs_cpt_table *cptab;\r\nif (ncpt != 1) {\r\nCERROR("Can't support cpu partition number %d\n", ncpt);\r\nreturn NULL;\r\n}\r\nLIBCFS_ALLOC(cptab, sizeof(*cptab));\r\nif (cptab != NULL) {\r\ncptab->ctb_version = CFS_CPU_VERSION_MAGIC;\r\ncptab->ctb_nparts = ncpt;\r\n}\r\nreturn cptab;\r\n}\r\nvoid\r\ncfs_cpt_table_free(struct cfs_cpt_table *cptab)\r\n{\r\nLASSERT(cptab->ctb_version == CFS_CPU_VERSION_MAGIC);\r\nLIBCFS_FREE(cptab, sizeof(*cptab));\r\n}\r\nint\r\ncfs_cpt_table_print(struct cfs_cpt_table *cptab, char *buf, int len)\r\n{\r\nint rc = 0;\r\nrc = snprintf(buf, len, "%d\t: %d\n", 0, 0);\r\nlen -= rc;\r\nif (len <= 0)\r\nreturn -EFBIG;\r\nreturn rc;\r\n}\r\nint\r\ncfs_cpt_number(struct cfs_cpt_table *cptab)\r\n{\r\nreturn 1;\r\n}\r\nint\r\ncfs_cpt_weight(struct cfs_cpt_table *cptab, int cpt)\r\n{\r\nreturn 1;\r\n}\r\nint\r\ncfs_cpt_online(struct cfs_cpt_table *cptab, int cpt)\r\n{\r\nreturn 1;\r\n}\r\nint\r\ncfs_cpt_set_cpu(struct cfs_cpt_table *cptab, int cpt, int cpu)\r\n{\r\nreturn 1;\r\n}\r\nvoid\r\ncfs_cpt_unset_cpu(struct cfs_cpt_table *cptab, int cpt, int cpu)\r\n{\r\n}\r\nint\r\ncfs_cpt_set_cpumask(struct cfs_cpt_table *cptab, int cpt, cpumask_t *mask)\r\n{\r\nreturn 1;\r\n}\r\nvoid\r\ncfs_cpt_unset_cpumask(struct cfs_cpt_table *cptab, int cpt, cpumask_t *mask)\r\n{\r\n}\r\nint\r\ncfs_cpt_set_node(struct cfs_cpt_table *cptab, int cpt, int node)\r\n{\r\nreturn 1;\r\n}\r\nvoid\r\ncfs_cpt_unset_node(struct cfs_cpt_table *cptab, int cpt, int node)\r\n{\r\n}\r\nint\r\ncfs_cpt_set_nodemask(struct cfs_cpt_table *cptab, int cpt, nodemask_t *mask)\r\n{\r\nreturn 1;\r\n}\r\nvoid\r\ncfs_cpt_unset_nodemask(struct cfs_cpt_table *cptab, int cpt, nodemask_t *mask)\r\n{\r\n}\r\nvoid\r\ncfs_cpt_clear(struct cfs_cpt_table *cptab, int cpt)\r\n{\r\n}\r\nint\r\ncfs_cpt_spread_node(struct cfs_cpt_table *cptab, int cpt)\r\n{\r\nreturn 0;\r\n}\r\nint\r\ncfs_cpu_ht_nsiblings(int cpu)\r\n{\r\nreturn 1;\r\n}\r\nint\r\ncfs_cpt_current(struct cfs_cpt_table *cptab, int remap)\r\n{\r\nreturn 0;\r\n}\r\nint\r\ncfs_cpt_of_cpu(struct cfs_cpt_table *cptab, int cpu)\r\n{\r\nreturn 0;\r\n}\r\nint\r\ncfs_cpt_bind(struct cfs_cpt_table *cptab, int cpt)\r\n{\r\nreturn 0;\r\n}\r\nvoid\r\ncfs_cpu_fini(void)\r\n{\r\nif (cfs_cpt_table != NULL) {\r\ncfs_cpt_table_free(cfs_cpt_table);\r\ncfs_cpt_table = NULL;\r\n}\r\n}\r\nint\r\ncfs_cpu_init(void)\r\n{\r\ncfs_cpt_table = cfs_cpt_table_alloc(1);\r\nreturn cfs_cpt_table != NULL ? 0 : -1;\r\n}
