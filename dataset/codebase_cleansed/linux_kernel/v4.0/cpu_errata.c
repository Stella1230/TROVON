static bool __maybe_unused\r\nis_affected_midr_range(struct arm64_cpu_capabilities *entry)\r\n{\r\nu32 midr = read_cpuid_id();\r\nif ((midr & CPU_MODEL_MASK) != entry->midr_model)\r\nreturn false;\r\nmidr &= MIDR_REVISION_MASK | MIDR_VARIANT_MASK;\r\nreturn (midr >= entry->midr_range_min && midr <= entry->midr_range_max);\r\n}\r\nvoid check_local_cpu_errata(void)\r\n{\r\nstruct arm64_cpu_capabilities *cpus = arm64_errata;\r\nint i;\r\nfor (i = 0; cpus[i].desc; i++) {\r\nif (!cpus[i].is_affected(&cpus[i]))\r\ncontinue;\r\nif (!cpus_have_cap(cpus[i].capability))\r\npr_info("enabling workaround for %s\n", cpus[i].desc);\r\ncpus_set_cap(cpus[i].capability);\r\n}\r\n}
