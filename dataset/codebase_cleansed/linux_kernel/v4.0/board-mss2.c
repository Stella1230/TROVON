static int __init mss2_pci_map_irq(const struct pci_dev *dev, u8 slot, u8 pin)\r\n{\r\nint irq;\r\nirq = orion5x_pci_map_irq(dev, slot, pin);\r\nif (irq != -1)\r\nreturn irq;\r\nreturn -1;\r\n}\r\nstatic int __init mss2_pci_init(void)\r\n{\r\nif (machine_is_mss2())\r\npci_common_init(&mss2_pci);\r\nreturn 0;\r\n}\r\nstatic void mss2_power_off(void)\r\n{\r\nu32 reg;\r\nreg = readl(RSTOUTn_MASK);\r\nreg |= 1 << 2;\r\nwritel(reg, RSTOUTn_MASK);\r\nreg = readl(CPU_SOFT_RESET);\r\nreg |= 1;\r\nwritel(reg, CPU_SOFT_RESET);\r\n}\r\nvoid __init mss2_init(void)\r\n{\r\npm_power_off = mss2_power_off;\r\n}
