static void __init r8a7791_smp_prepare_cpus(unsigned int max_cpus)\r\n{\r\nshmobile_smp_apmu_prepare_cpus(max_cpus,\r\nr8a7791_apmu_config,\r\nARRAY_SIZE(r8a7791_apmu_config));\r\nr8a7791_pm_init();\r\n}\r\nstatic int r8a7791_smp_boot_secondary(unsigned int cpu,\r\nstruct task_struct *idle)\r\n{\r\nif (rcar_gen2_read_mode_pins() & BIT(21)) {\r\npr_warn("Unable to boot CPU%u when MD21 is set\n", cpu);\r\nreturn -ENOTSUPP;\r\n}\r\nreturn shmobile_smp_apmu_boot_secondary(cpu, idle);\r\n}
