static inline __u32 consume(int nob, __u8 **ptr)\r\n{\r\n__u32 value;\r\nLASSERT(nob <= sizeof(value));\r\nfor (value = 0; nob > 0; --nob)\r\nvalue = (value << 8) | *((*ptr)++);\r\nreturn value;\r\n}\r\nstatic void uuid_unpack(class_uuid_t in, __u16 *uu, int nr)\r\n{\r\n__u8 *ptr = in;\r\nLASSERT(nr * sizeof(*uu) == sizeof(class_uuid_t));\r\nwhile (nr-- > 0)\r\nCONSUME(uu[nr], &ptr);\r\n}\r\nvoid class_uuid_unparse(class_uuid_t uu, struct obd_uuid *out)\r\n{\r\n__u16 uuid[sizeof(class_uuid_t) / sizeof(__u16)];\r\nCLASSERT(ARRAY_SIZE(uuid) == 8);\r\nuuid_unpack(uu, uuid, ARRAY_SIZE(uuid));\r\nsprintf(out->uuid, "%04x%04x-%04x-%04x-%04x-%04x%04x%04x",\r\nuuid[0], uuid[1], uuid[2], uuid[3],\r\nuuid[4], uuid[5], uuid[6], uuid[7]);\r\n}
