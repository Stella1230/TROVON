static int __maybe_unused ad714x_i2c_suspend(struct device *dev)\r\n{\r\nreturn ad714x_disable(i2c_get_clientdata(to_i2c_client(dev)));\r\n}\r\nstatic int __maybe_unused ad714x_i2c_resume(struct device *dev)\r\n{\r\nreturn ad714x_enable(i2c_get_clientdata(to_i2c_client(dev)));\r\n}\r\nstatic int ad714x_i2c_write(struct ad714x_chip *chip,\r\nunsigned short reg, unsigned short data)\r\n{\r\nstruct i2c_client *client = to_i2c_client(chip->dev);\r\nint error;\r\nchip->xfer_buf[0] = cpu_to_be16(reg);\r\nchip->xfer_buf[1] = cpu_to_be16(data);\r\nerror = i2c_master_send(client, (u8 *)chip->xfer_buf,\r\n2 * sizeof(*chip->xfer_buf));\r\nif (unlikely(error < 0)) {\r\ndev_err(&client->dev, "I2C write error: %d\n", error);\r\nreturn error;\r\n}\r\nreturn 0;\r\n}\r\nstatic int ad714x_i2c_read(struct ad714x_chip *chip,\r\nunsigned short reg, unsigned short *data, size_t len)\r\n{\r\nstruct i2c_client *client = to_i2c_client(chip->dev);\r\nint i;\r\nint error;\r\nchip->xfer_buf[0] = cpu_to_be16(reg);\r\nerror = i2c_master_send(client, (u8 *)chip->xfer_buf,\r\nsizeof(*chip->xfer_buf));\r\nif (error >= 0)\r\nerror = i2c_master_recv(client, (u8 *)chip->xfer_buf,\r\nlen * sizeof(*chip->xfer_buf));\r\nif (unlikely(error < 0)) {\r\ndev_err(&client->dev, "I2C read error: %d\n", error);\r\nreturn error;\r\n}\r\nfor (i = 0; i < len; i++)\r\ndata[i] = be16_to_cpu(chip->xfer_buf[i]);\r\nreturn 0;\r\n}\r\nstatic int ad714x_i2c_probe(struct i2c_client *client,\r\nconst struct i2c_device_id *id)\r\n{\r\nstruct ad714x_chip *chip;\r\nchip = ad714x_probe(&client->dev, BUS_I2C, client->irq,\r\nad714x_i2c_read, ad714x_i2c_write);\r\nif (IS_ERR(chip))\r\nreturn PTR_ERR(chip);\r\ni2c_set_clientdata(client, chip);\r\nreturn 0;\r\n}\r\nstatic int ad714x_i2c_remove(struct i2c_client *client)\r\n{\r\nstruct ad714x_chip *chip = i2c_get_clientdata(client);\r\nad714x_remove(chip);\r\nreturn 0;\r\n}
