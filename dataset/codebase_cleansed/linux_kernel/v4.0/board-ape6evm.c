static void __init ape6evm_add_standard_devices(void)\r\n{\r\nstruct clk *parent;\r\nstruct clk *mp;\r\nr8a73a4_clock_init();\r\nparent = clk_get(NULL, "extal2");\r\nmp = clk_get(NULL, "mp");\r\nBUG_ON(IS_ERR(parent) || IS_ERR(mp));\r\nclk_set_parent(mp, parent);\r\nclk_put(parent);\r\nclk_put(mp);\r\npinctrl_register_mappings(ape6evm_pinctrl_map,\r\nARRAY_SIZE(ape6evm_pinctrl_map));\r\nr8a73a4_pinmux_init();\r\nr8a73a4_add_standard_devices();\r\ngpio_request_one(270, GPIOF_OUT_INIT_HIGH, NULL);\r\nregulator_register_fixed(0, dummy_supplies, ARRAY_SIZE(dummy_supplies));\r\nplatform_device_register_resndata(NULL, "smsc911x", -1,\r\nlan9220_res, ARRAY_SIZE(lan9220_res),\r\n&lan9220_data, sizeof(lan9220_data));\r\nregulator_register_always_on(1, "MMC0 Vcc", vcc_mmc0_consumers,\r\nARRAY_SIZE(vcc_mmc0_consumers), 2800000);\r\nplatform_device_register_resndata(NULL, "sh_mmcif", 0,\r\nmmcif0_resources, ARRAY_SIZE(mmcif0_resources),\r\n&mmcif0_pdata, sizeof(mmcif0_pdata));\r\nplatform_device_register_data(NULL, "reg-fixed-voltage", 2,\r\n&vcc_sdhi0_info, sizeof(vcc_sdhi0_info));\r\nplatform_device_register_resndata(NULL, "sh_mobile_sdhi", 0,\r\nsdhi0_resources, ARRAY_SIZE(sdhi0_resources),\r\n&sdhi0_pdata, sizeof(sdhi0_pdata));\r\nregulator_register_always_on(3, "SDHI1 Vcc", vcc_sdhi1_consumers,\r\nARRAY_SIZE(vcc_sdhi1_consumers), 3300000);\r\nplatform_device_register_resndata(NULL, "sh_mobile_sdhi", 1,\r\nsdhi1_resources, ARRAY_SIZE(sdhi1_resources),\r\n&sdhi1_pdata, sizeof(sdhi1_pdata));\r\nplatform_device_register_data(NULL, "gpio-keys", -1,\r\n&ape6evm_keys_pdata,\r\nsizeof(ape6evm_keys_pdata));\r\nplatform_device_register_data(NULL, "leds-gpio", -1,\r\n&ape6evm_leds_pdata,\r\nsizeof(ape6evm_leds_pdata));\r\n}\r\nstatic void __init ape6evm_legacy_init_time(void)\r\n{\r\n}\r\nstatic void __init ape6evm_legacy_init_irq(void)\r\n{\r\nvoid __iomem *gic_dist_base = ioremap_nocache(0xf1001000, 0x1000);\r\nvoid __iomem *gic_cpu_base = ioremap_nocache(0xf1002000, 0x1000);\r\ngic_init(0, 29, gic_dist_base, gic_cpu_base);\r\n}
