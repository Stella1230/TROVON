int intel_connector_update_modes(struct drm_connector *connector,\r\nstruct edid *edid)\r\n{\r\nint ret;\r\ndrm_mode_connector_update_edid_property(connector, edid);\r\nret = drm_add_edid_modes(connector, edid);\r\ndrm_edid_to_eld(connector, edid);\r\nreturn ret;\r\n}\r\nint intel_ddc_get_modes(struct drm_connector *connector,\r\nstruct i2c_adapter *adapter)\r\n{\r\nstruct edid *edid;\r\nint ret;\r\nedid = drm_get_edid(connector, adapter);\r\nif (!edid)\r\nreturn 0;\r\nret = intel_connector_update_modes(connector, edid);\r\nkfree(edid);\r\nreturn ret;\r\n}\r\nvoid\r\nintel_attach_force_audio_property(struct drm_connector *connector)\r\n{\r\nstruct drm_device *dev = connector->dev;\r\nstruct drm_i915_private *dev_priv = dev->dev_private;\r\nstruct drm_property *prop;\r\nprop = dev_priv->force_audio_property;\r\nif (prop == NULL) {\r\nprop = drm_property_create_enum(dev, 0,\r\n"audio",\r\nforce_audio_names,\r\nARRAY_SIZE(force_audio_names));\r\nif (prop == NULL)\r\nreturn;\r\ndev_priv->force_audio_property = prop;\r\n}\r\ndrm_object_attach_property(&connector->base, prop, 0);\r\n}\r\nvoid\r\nintel_attach_broadcast_rgb_property(struct drm_connector *connector)\r\n{\r\nstruct drm_device *dev = connector->dev;\r\nstruct drm_i915_private *dev_priv = dev->dev_private;\r\nstruct drm_property *prop;\r\nprop = dev_priv->broadcast_rgb_property;\r\nif (prop == NULL) {\r\nprop = drm_property_create_enum(dev, DRM_MODE_PROP_ENUM,\r\n"Broadcast RGB",\r\nbroadcast_rgb_names,\r\nARRAY_SIZE(broadcast_rgb_names));\r\nif (prop == NULL)\r\nreturn;\r\ndev_priv->broadcast_rgb_property = prop;\r\n}\r\ndrm_object_attach_property(&connector->base, prop, 0);\r\n}
