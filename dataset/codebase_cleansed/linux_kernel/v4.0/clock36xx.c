int omap36xx_pwrdn_clk_enable_with_hsdiv_restore(struct clk_hw *clk)\r\n{\r\nstruct clk_divider *parent;\r\nstruct clk_hw *parent_hw;\r\nu32 dummy_v, orig_v;\r\nstruct clk_hw_omap *omap_clk = to_clk_hw_omap(clk);\r\nint ret;\r\nret = omap2_dflt_clk_enable(clk);\r\nparent_hw = __clk_get_hw(__clk_get_parent(clk->clk));\r\nparent = to_clk_divider(parent_hw);\r\nif (!ret) {\r\norig_v = omap2_clk_readl(omap_clk, parent->reg);\r\ndummy_v = orig_v;\r\ndummy_v ^= (1 << parent->shift);\r\nomap2_clk_writel(dummy_v, omap_clk, parent->reg);\r\nomap2_clk_writel(orig_v, omap_clk, parent->reg);\r\n}\r\nreturn ret;\r\n}
