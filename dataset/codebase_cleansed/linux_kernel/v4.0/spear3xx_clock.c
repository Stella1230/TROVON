static void __init spear300_clk_init(void)\r\n{\r\nstruct clk *clk;\r\nclk = clk_register_fixed_factor(NULL, "clcd_clk", "ras_pll3_clk", 0,\r\n1, 1);\r\nclk_register_clkdev(clk, NULL, "60000000.clcd");\r\nclk = clk_register_fixed_factor(NULL, "fsmc_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "94000000.flash");\r\nclk = clk_register_fixed_factor(NULL, "sdhci_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "70000000.sdhci");\r\nclk = clk_register_fixed_factor(NULL, "gpio1_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "a9000000.gpio");\r\nclk = clk_register_fixed_factor(NULL, "kbd_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "a0000000.kbd");\r\n}\r\nstatic inline void spear300_clk_init(void) { }\r\nstatic void __init spear310_clk_init(void)\r\n{\r\nstruct clk *clk;\r\nclk = clk_register_fixed_factor(NULL, "emi_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, "emi", NULL);\r\nclk = clk_register_fixed_factor(NULL, "fsmc_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "44000000.flash");\r\nclk = clk_register_fixed_factor(NULL, "tdm_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "tdm");\r\nclk = clk_register_fixed_factor(NULL, "uart1_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "b2000000.serial");\r\nclk = clk_register_fixed_factor(NULL, "uart2_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "b2080000.serial");\r\nclk = clk_register_fixed_factor(NULL, "uart3_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "b2100000.serial");\r\nclk = clk_register_fixed_factor(NULL, "uart4_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "b2180000.serial");\r\nclk = clk_register_fixed_factor(NULL, "uart5_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "b2200000.serial");\r\n}\r\nstatic inline void spear310_clk_init(void) { }\r\nstatic void __init spear320_clk_init(void __iomem *soc_config_base,\r\nstruct clk *ras_apb_clk)\r\n{\r\nstruct clk *clk;\r\nclk = clk_register_fixed_rate(NULL, "smii_125m_pad_clk", NULL,\r\nCLK_IS_ROOT, 125000000);\r\nclk_register_clkdev(clk, "smii_125m_pad", NULL);\r\nclk = clk_register_fixed_factor(NULL, "clcd_clk", "ras_pll3_clk", 0,\r\n1, 1);\r\nclk_register_clkdev(clk, NULL, "90000000.clcd");\r\nclk = clk_register_fixed_factor(NULL, "emi_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, "emi", NULL);\r\nclk = clk_register_fixed_factor(NULL, "fsmc_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "4c000000.flash");\r\nclk = clk_register_fixed_factor(NULL, "i2c1_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "a7000000.i2c");\r\nclk = clk_register_fixed_factor(NULL, "pwm_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "a8000000.pwm");\r\nclk = clk_register_fixed_factor(NULL, "ssp1_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "a5000000.spi");\r\nclk = clk_register_fixed_factor(NULL, "ssp2_clk", "ras_ahb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "a6000000.spi");\r\nclk = clk_register_fixed_factor(NULL, "can0_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "c_can_platform.0");\r\nclk = clk_register_fixed_factor(NULL, "can1_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "c_can_platform.1");\r\nclk = clk_register_fixed_factor(NULL, "i2s_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "a9400000.i2s");\r\nclk = clk_register_mux(NULL, "i2s_ref_clk", i2s_ref_parents,\r\nARRAY_SIZE(i2s_ref_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_CONTROL_REG, I2S_REF_PCLK_SHIFT,\r\nI2S_REF_PCLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, "i2s_ref_clk", NULL);\r\nclk = clk_register_fixed_factor(NULL, "i2s_sclk", "i2s_ref_clk",\r\nCLK_SET_RATE_PARENT, 1,\r\n4);\r\nclk_register_clkdev(clk, "i2s_sclk", NULL);\r\nclk = clk_register_fixed_factor(NULL, "macb1_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, "hclk", "aa000000.eth");\r\nclk = clk_register_fixed_factor(NULL, "macb2_clk", "ras_apb_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, "hclk", "ab000000.eth");\r\nclk = clk_register_mux(NULL, "rs485_clk", uartx_parents,\r\nARRAY_SIZE(uartx_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_EXT_CTRL_REG, SPEAR320_RS485_PCLK_SHIFT,\r\nSPEAR320_UARTX_PCLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "a9300000.serial");\r\nclk = clk_register_mux(NULL, "sdhci_clk", sdhci_parents,\r\nARRAY_SIZE(sdhci_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_CONTROL_REG, SDHCI_PCLK_SHIFT, SDHCI_PCLK_MASK,\r\n0, &_lock);\r\nclk_register_clkdev(clk, NULL, "70000000.sdhci");\r\nclk = clk_register_mux(NULL, "smii_pclk", smii0_parents,\r\nARRAY_SIZE(smii0_parents), CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_CONTROL_REG, SMII_PCLK_SHIFT, SMII_PCLK_MASK,\r\n0, &_lock);\r\nclk_register_clkdev(clk, NULL, "smii_pclk");\r\nclk = clk_register_fixed_factor(NULL, "smii_clk", "smii_pclk", 0, 1, 1);\r\nclk_register_clkdev(clk, NULL, "smii");\r\nclk = clk_register_mux(NULL, "uart1_clk", uartx_parents,\r\nARRAY_SIZE(uartx_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_CONTROL_REG, UART1_PCLK_SHIFT, UART1_PCLK_MASK,\r\n0, &_lock);\r\nclk_register_clkdev(clk, NULL, "a3000000.serial");\r\nclk_set_parent(clk, ras_apb_clk);\r\nclk = clk_register_mux(NULL, "uart2_clk", uartx_parents,\r\nARRAY_SIZE(uartx_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_EXT_CTRL_REG, SPEAR320_UART2_PCLK_SHIFT,\r\nSPEAR320_UARTX_PCLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "a4000000.serial");\r\nclk_set_parent(clk, ras_apb_clk);\r\nclk = clk_register_mux(NULL, "uart3_clk", uartx_parents,\r\nARRAY_SIZE(uartx_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_EXT_CTRL_REG, SPEAR320_UART3_PCLK_SHIFT,\r\nSPEAR320_UARTX_PCLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "a9100000.serial");\r\nclk = clk_register_mux(NULL, "uart4_clk", uartx_parents,\r\nARRAY_SIZE(uartx_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_EXT_CTRL_REG, SPEAR320_UART4_PCLK_SHIFT,\r\nSPEAR320_UARTX_PCLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "a9200000.serial");\r\nclk = clk_register_mux(NULL, "uart5_clk", uartx_parents,\r\nARRAY_SIZE(uartx_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_EXT_CTRL_REG, SPEAR320_UART5_PCLK_SHIFT,\r\nSPEAR320_UARTX_PCLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "60000000.serial");\r\nclk = clk_register_mux(NULL, "uart6_clk", uartx_parents,\r\nARRAY_SIZE(uartx_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nSPEAR320_EXT_CTRL_REG, SPEAR320_UART6_PCLK_SHIFT,\r\nSPEAR320_UARTX_PCLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "60100000.serial");\r\n}\r\nstatic inline void spear320_clk_init(void __iomem *sb, struct clk *rc) { }\r\nvoid __init spear3xx_clk_init(void __iomem *misc_base, void __iomem *soc_config_base)\r\n{\r\nstruct clk *clk, *clk1, *ras_apb_clk;\r\nclk = clk_register_fixed_rate(NULL, "osc_32k_clk", NULL, CLK_IS_ROOT,\r\n32000);\r\nclk_register_clkdev(clk, "osc_32k_clk", NULL);\r\nclk = clk_register_fixed_rate(NULL, "osc_24m_clk", NULL, CLK_IS_ROOT,\r\n24000000);\r\nclk_register_clkdev(clk, "osc_24m_clk", NULL);\r\nclk = clk_register_gate(NULL, "rtc-spear", "osc_32k_clk", 0,\r\nPERIP1_CLK_ENB, RTC_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "fc900000.rtc");\r\nclk = clk_register_fixed_rate(NULL, "pll3_clk", "osc_24m_clk", 0,\r\n48000000);\r\nclk_register_clkdev(clk, "pll3_clk", NULL);\r\nclk = clk_register_fixed_factor(NULL, "wdt_clk", "osc_24m_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, NULL, "fc880000.wdt");\r\nclk = clk_register_vco_pll("vco1_clk", "pll1_clk", NULL,\r\n"osc_24m_clk", 0, PLL1_CTR, PLL1_FRQ, pll_rtbl,\r\nARRAY_SIZE(pll_rtbl), &_lock, &clk1, NULL);\r\nclk_register_clkdev(clk, "vco1_clk", NULL);\r\nclk_register_clkdev(clk1, "pll1_clk", NULL);\r\nclk = clk_register_vco_pll("vco2_clk", "pll2_clk", NULL,\r\n"osc_24m_clk", 0, PLL2_CTR, PLL2_FRQ, pll_rtbl,\r\nARRAY_SIZE(pll_rtbl), &_lock, &clk1, NULL);\r\nclk_register_clkdev(clk, "vco2_clk", NULL);\r\nclk_register_clkdev(clk1, "pll2_clk", NULL);\r\nclk = clk_register_fixed_factor(NULL, "cpu_clk", "pll1_clk",\r\nCLK_SET_RATE_PARENT, 1, 1);\r\nclk_register_clkdev(clk, "cpu_clk", NULL);\r\nclk = clk_register_divider(NULL, "ahb_clk", "pll1_clk",\r\nCLK_SET_RATE_PARENT, CORE_CLK_CFG, HCLK_RATIO_SHIFT,\r\nHCLK_RATIO_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, "ahb_clk", NULL);\r\nclk = clk_register_aux("uart_syn_clk", "uart_syn_gclk", "pll1_clk", 0,\r\nUART_CLK_SYNT, NULL, aux_rtbl, ARRAY_SIZE(aux_rtbl),\r\n&_lock, &clk1);\r\nclk_register_clkdev(clk, "uart_syn_clk", NULL);\r\nclk_register_clkdev(clk1, "uart_syn_gclk", NULL);\r\nclk = clk_register_mux(NULL, "uart0_mclk", uart0_parents,\r\nARRAY_SIZE(uart0_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nPERIP_CLK_CFG, UART_CLK_SHIFT, UART_CLK_MASK, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, "uart0_mclk", NULL);\r\nclk = clk_register_gate(NULL, "uart0", "uart0_mclk",\r\nCLK_SET_RATE_PARENT, PERIP1_CLK_ENB, UART_CLK_ENB, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, NULL, "d0000000.serial");\r\nclk = clk_register_aux("firda_syn_clk", "firda_syn_gclk", "pll1_clk", 0,\r\nFIRDA_CLK_SYNT, NULL, aux_rtbl, ARRAY_SIZE(aux_rtbl),\r\n&_lock, &clk1);\r\nclk_register_clkdev(clk, "firda_syn_clk", NULL);\r\nclk_register_clkdev(clk1, "firda_syn_gclk", NULL);\r\nclk = clk_register_mux(NULL, "firda_mclk", firda_parents,\r\nARRAY_SIZE(firda_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nPERIP_CLK_CFG, FIRDA_CLK_SHIFT, FIRDA_CLK_MASK, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, "firda_mclk", NULL);\r\nclk = clk_register_gate(NULL, "firda_clk", "firda_mclk",\r\nCLK_SET_RATE_PARENT, PERIP1_CLK_ENB, FIRDA_CLK_ENB, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, NULL, "firda");\r\nclk_register_gpt("gpt0_syn_clk", "pll1_clk", 0, PRSC0_CLK_CFG, gpt_rtbl,\r\nARRAY_SIZE(gpt_rtbl), &_lock);\r\nclk = clk_register_mux(NULL, "gpt0_clk", gpt0_parents,\r\nARRAY_SIZE(gpt0_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nPERIP_CLK_CFG, GPT0_CLK_SHIFT, GPT_CLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "gpt0");\r\nclk_register_gpt("gpt1_syn_clk", "pll1_clk", 0, PRSC1_CLK_CFG, gpt_rtbl,\r\nARRAY_SIZE(gpt_rtbl), &_lock);\r\nclk = clk_register_mux(NULL, "gpt1_mclk", gpt1_parents,\r\nARRAY_SIZE(gpt1_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nPERIP_CLK_CFG, GPT1_CLK_SHIFT, GPT_CLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, "gpt1_mclk", NULL);\r\nclk = clk_register_gate(NULL, "gpt1_clk", "gpt1_mclk",\r\nCLK_SET_RATE_PARENT, PERIP1_CLK_ENB, GPT1_CLK_ENB, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, NULL, "gpt1");\r\nclk_register_gpt("gpt2_syn_clk", "pll1_clk", 0, PRSC2_CLK_CFG, gpt_rtbl,\r\nARRAY_SIZE(gpt_rtbl), &_lock);\r\nclk = clk_register_mux(NULL, "gpt2_mclk", gpt2_parents,\r\nARRAY_SIZE(gpt2_parents),\r\nCLK_SET_RATE_PARENT | CLK_SET_RATE_NO_REPARENT,\r\nPERIP_CLK_CFG, GPT2_CLK_SHIFT, GPT_CLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, "gpt2_mclk", NULL);\r\nclk = clk_register_gate(NULL, "gpt2_clk", "gpt2_mclk",\r\nCLK_SET_RATE_PARENT, PERIP1_CLK_ENB, GPT2_CLK_ENB, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, NULL, "gpt2");\r\nclk = clk_register_aux("gen0_syn_clk", "gen0_syn_gclk", "pll1_clk",\r\n0, GEN0_CLK_SYNT, NULL, aux_rtbl, ARRAY_SIZE(aux_rtbl),\r\n&_lock, &clk1);\r\nclk_register_clkdev(clk, "gen0_syn_clk", NULL);\r\nclk_register_clkdev(clk1, "gen0_syn_gclk", NULL);\r\nclk = clk_register_aux("gen1_syn_clk", "gen1_syn_gclk", "pll1_clk",\r\n0, GEN1_CLK_SYNT, NULL, aux_rtbl, ARRAY_SIZE(aux_rtbl),\r\n&_lock, &clk1);\r\nclk_register_clkdev(clk, "gen1_syn_clk", NULL);\r\nclk_register_clkdev(clk1, "gen1_syn_gclk", NULL);\r\nclk = clk_register_mux(NULL, "gen2_3_par_clk", gen2_3_parents,\r\nARRAY_SIZE(gen2_3_parents), CLK_SET_RATE_NO_REPARENT,\r\nCORE_CLK_CFG, GEN_SYNTH2_3_CLK_SHIFT,\r\nGEN_SYNTH2_3_CLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, "gen2_3_par_clk", NULL);\r\nclk = clk_register_aux("gen2_syn_clk", "gen2_syn_gclk",\r\n"gen2_3_par_clk", 0, GEN2_CLK_SYNT, NULL, aux_rtbl,\r\nARRAY_SIZE(aux_rtbl), &_lock, &clk1);\r\nclk_register_clkdev(clk, "gen2_syn_clk", NULL);\r\nclk_register_clkdev(clk1, "gen2_syn_gclk", NULL);\r\nclk = clk_register_aux("gen3_syn_clk", "gen3_syn_gclk",\r\n"gen2_3_par_clk", 0, GEN3_CLK_SYNT, NULL, aux_rtbl,\r\nARRAY_SIZE(aux_rtbl), &_lock, &clk1);\r\nclk_register_clkdev(clk, "gen3_syn_clk", NULL);\r\nclk_register_clkdev(clk1, "gen3_syn_gclk", NULL);\r\nclk = clk_register_gate(NULL, "usbh_clk", "pll3_clk", 0, PERIP1_CLK_ENB,\r\nUSBH_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "e1800000.ehci");\r\nclk_register_clkdev(clk, NULL, "e1900000.ohci");\r\nclk_register_clkdev(clk, NULL, "e2100000.ohci");\r\nclk = clk_register_fixed_factor(NULL, "usbh.0_clk", "usbh_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, "usbh.0_clk", NULL);\r\nclk = clk_register_fixed_factor(NULL, "usbh.1_clk", "usbh_clk", 0, 1,\r\n1);\r\nclk_register_clkdev(clk, "usbh.1_clk", NULL);\r\nclk = clk_register_gate(NULL, "usbd_clk", "pll3_clk", 0, PERIP1_CLK_ENB,\r\nUSBD_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "e1100000.usbd");\r\nclk = clk_register_fixed_factor(NULL, "ahbmult2_clk", "ahb_clk", 0, 2,\r\n1);\r\nclk_register_clkdev(clk, "ahbmult2_clk", NULL);\r\nclk = clk_register_mux(NULL, "ddr_clk", ddr_parents,\r\nARRAY_SIZE(ddr_parents), CLK_SET_RATE_NO_REPARENT,\r\nPLL_CLK_CFG, MCTR_CLK_SHIFT, MCTR_CLK_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, "ddr_clk", NULL);\r\nclk = clk_register_divider(NULL, "apb_clk", "ahb_clk",\r\nCLK_SET_RATE_PARENT, CORE_CLK_CFG, PCLK_RATIO_SHIFT,\r\nPCLK_RATIO_MASK, 0, &_lock);\r\nclk_register_clkdev(clk, "apb_clk", NULL);\r\nclk = clk_register_gate(NULL, "amem_clk", "ahb_clk", 0, AMEM_CLK_CFG,\r\nAMEM_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, "amem_clk", NULL);\r\nclk = clk_register_gate(NULL, "c3_clk", "ahb_clk", 0, PERIP1_CLK_ENB,\r\nC3_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "c3_clk");\r\nclk = clk_register_gate(NULL, "dma_clk", "ahb_clk", 0, PERIP1_CLK_ENB,\r\nDMA_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "fc400000.dma");\r\nclk = clk_register_gate(NULL, "gmac_clk", "ahb_clk", 0, PERIP1_CLK_ENB,\r\nGMAC_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "e0800000.eth");\r\nclk = clk_register_gate(NULL, "i2c0_clk", "ahb_clk", 0, PERIP1_CLK_ENB,\r\nI2C_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "d0180000.i2c");\r\nclk = clk_register_gate(NULL, "jpeg_clk", "ahb_clk", 0, PERIP1_CLK_ENB,\r\nJPEG_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "jpeg");\r\nclk = clk_register_gate(NULL, "smi_clk", "ahb_clk", 0, PERIP1_CLK_ENB,\r\nSMI_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "fc000000.flash");\r\nclk = clk_register_gate(NULL, "adc_clk", "apb_clk", 0, PERIP1_CLK_ENB,\r\nADC_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "d0080000.adc");\r\nclk = clk_register_gate(NULL, "gpio0_clk", "apb_clk", 0, PERIP1_CLK_ENB,\r\nGPIO_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "fc980000.gpio");\r\nclk = clk_register_gate(NULL, "ssp0_clk", "apb_clk", 0, PERIP1_CLK_ENB,\r\nSSP_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, NULL, "d0100000.spi");\r\nclk = clk_register_gate(NULL, "ras_ahb_clk", "ahb_clk", 0, RAS_CLK_ENB,\r\nRAS_AHB_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, "ras_ahb_clk", NULL);\r\nclk = clk_register_gate(NULL, "ras_apb_clk", "apb_clk", 0, RAS_CLK_ENB,\r\nRAS_APB_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, "ras_apb_clk", NULL);\r\nras_apb_clk = clk;\r\nclk = clk_register_gate(NULL, "ras_32k_clk", "osc_32k_clk", 0,\r\nRAS_CLK_ENB, RAS_32K_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, "ras_32k_clk", NULL);\r\nclk = clk_register_gate(NULL, "ras_24m_clk", "osc_24m_clk", 0,\r\nRAS_CLK_ENB, RAS_24M_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, "ras_24m_clk", NULL);\r\nclk = clk_register_gate(NULL, "ras_pll1_clk", "pll1_clk", 0,\r\nRAS_CLK_ENB, RAS_PLL1_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, "ras_pll1_clk", NULL);\r\nclk = clk_register_gate(NULL, "ras_pll2_clk", "pll2_clk", 0,\r\nRAS_CLK_ENB, RAS_PLL2_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, "ras_pll2_clk", NULL);\r\nclk = clk_register_gate(NULL, "ras_pll3_clk", "pll3_clk", 0,\r\nRAS_CLK_ENB, RAS_48M_CLK_ENB, 0, &_lock);\r\nclk_register_clkdev(clk, "ras_pll3_clk", NULL);\r\nclk = clk_register_gate(NULL, "ras_syn0_gclk", "gen0_syn_gclk",\r\nCLK_SET_RATE_PARENT, RAS_CLK_ENB, RAS_SYNT0_CLK_ENB, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, "ras_syn0_gclk", NULL);\r\nclk = clk_register_gate(NULL, "ras_syn1_gclk", "gen1_syn_gclk",\r\nCLK_SET_RATE_PARENT, RAS_CLK_ENB, RAS_SYNT1_CLK_ENB, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, "ras_syn1_gclk", NULL);\r\nclk = clk_register_gate(NULL, "ras_syn2_gclk", "gen2_syn_gclk",\r\nCLK_SET_RATE_PARENT, RAS_CLK_ENB, RAS_SYNT2_CLK_ENB, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, "ras_syn2_gclk", NULL);\r\nclk = clk_register_gate(NULL, "ras_syn3_gclk", "gen3_syn_gclk",\r\nCLK_SET_RATE_PARENT, RAS_CLK_ENB, RAS_SYNT3_CLK_ENB, 0,\r\n&_lock);\r\nclk_register_clkdev(clk, "ras_syn3_gclk", NULL);\r\nif (of_machine_is_compatible("st,spear300"))\r\nspear300_clk_init();\r\nelse if (of_machine_is_compatible("st,spear310"))\r\nspear310_clk_init();\r\nelse if (of_machine_is_compatible("st,spear320"))\r\nspear320_clk_init(soc_config_base, ras_apb_clk);\r\n}
