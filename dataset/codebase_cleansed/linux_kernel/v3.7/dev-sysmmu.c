static int __init init_sysmmu_platform_device(void)\r\n{\r\nint i, j;\r\nstruct sysmmu_resource_map *resmap[2] = {NULL, NULL};\r\nint nmap[2] = {0, 0};\r\n#ifdef CONFIG_ARCH_EXYNOS5\r\nif (soc_is_exynos5250()) {\r\nresmap[0] = sysmmu_resmap5;\r\nnmap[0] = ARRAY_SIZE(sysmmu_resmap5);\r\nnmap[1] = 0;\r\n}\r\n#endif\r\n#ifdef CONFIG_ARCH_EXYNOS4\r\nif (resmap[0] == NULL) {\r\nresmap[0] = sysmmu_resmap4;\r\nnmap[0] = ARRAY_SIZE(sysmmu_resmap4);\r\n}\r\nif (soc_is_exynos4210()) {\r\nresmap[1] = sysmmu_resmap4210;\r\nnmap[1] = ARRAY_SIZE(sysmmu_resmap4210);\r\n}\r\nif (soc_is_exynos4412() || soc_is_exynos4212()) {\r\nresmap[1] = sysmmu_resmap4212;\r\nnmap[1] = ARRAY_SIZE(sysmmu_resmap4212);\r\n}\r\n#endif\r\nfor (j = 0; j < 2; j++) {\r\nfor (i = 0; i < nmap[j]; i++) {\r\nstruct sysmmu_resource_map *map;\r\nstruct sysmmu_platform_data *platdata;\r\nmap = &resmap[j][i];\r\nmap->pdev->dev.parent = map->pdd;\r\nplatdata = map->pdev->dev.platform_data;\r\nplatdata->clockname = map->clocknames;\r\nif (platform_device_add_resources(map->pdev, map->res,\r\nmap->rnum)) {\r\npr_err("%s: Failed to add device resources for "\r\n"%s.%d\n", __func__,\r\nmap->pdev->name, map->pdev->id);\r\ncontinue;\r\n}\r\nif (platform_device_register(map->pdev)) {\r\npr_err("%s: Failed to register %s.%d\n",\r\n__func__, map->pdev->name,\r\nmap->pdev->id);\r\n}\r\n}\r\n}\r\nreturn 0;\r\n}
