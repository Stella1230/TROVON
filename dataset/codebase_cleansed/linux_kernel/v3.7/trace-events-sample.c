static void simple_thread_func(int cnt)\r\n{\r\nset_current_state(TASK_INTERRUPTIBLE);\r\nschedule_timeout(HZ);\r\ntrace_foo_bar("hello", cnt);\r\n}\r\nstatic int simple_thread(void *arg)\r\n{\r\nint cnt = 0;\r\nwhile (!kthread_should_stop())\r\nsimple_thread_func(cnt++);\r\nreturn 0;\r\n}\r\nstatic int __init trace_event_init(void)\r\n{\r\nsimple_tsk = kthread_run(simple_thread, NULL, "event-sample");\r\nif (IS_ERR(simple_tsk))\r\nreturn -1;\r\nreturn 0;\r\n}\r\nstatic void __exit trace_event_exit(void)\r\n{\r\nkthread_stop(simple_tsk);\r\n}
