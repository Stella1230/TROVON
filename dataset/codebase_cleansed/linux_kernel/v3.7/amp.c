static void wm_put(struct snd_ice1712 *ice, int reg, unsigned short val)\r\n{\r\nunsigned short cval;\r\ncval = (reg << 9) | val;\r\nsnd_vt1724_write_i2c(ice, WM_DEV, cval >> 8, cval & 0xff);\r\n}\r\nstatic int __devinit snd_vt1724_amp_init(struct snd_ice1712 *ice)\r\n{\r\nstatic const unsigned short wm_inits[] = {\r\nWM_ATTEN_L, 0x0000,\r\nWM_ATTEN_R, 0x0000,\r\nWM_DAC_CTRL, 0x0008,\r\nWM_INT_CTRL, 0x0001,\r\n};\r\nunsigned int i;\r\nice->num_total_dacs = 6;\r\nice->num_total_adcs = 2;\r\nif (ice->eeprom.subvendor == VT1724_SUBDEVICE_AV710) {\r\nfor (i = 0; i < ARRAY_SIZE(wm_inits); i += 2)\r\nwm_put(ice, wm_inits[i], wm_inits[i+1]);\r\n}\r\nreturn 0;\r\n}\r\nstatic int __devinit snd_vt1724_amp_add_controls(struct snd_ice1712 *ice)\r\n{\r\nif (ice->ac97)\r\nsnd_ac97_write_cache(ice->ac97, 0x5a,\r\nsnd_ac97_read(ice->ac97, 0x5a) & ~0x8000);\r\nreturn 0;\r\n}
