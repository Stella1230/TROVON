void CsrWifiNmeApPfree(void *ptr)\r\n{\r\nkfree(ptr);\r\n}\r\nsize_t CsrWifiNmeApConfigSetReqSizeof(void *msg)\r\n{\r\nCsrWifiNmeApConfigSetReq *primitive = (CsrWifiNmeApConfigSetReq *) msg;\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\nbufferSize += 20;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < 4; i2++)\r\n{\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\n}\r\n}\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < 4; i2++)\r\n{\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\n}\r\n}\r\nbufferSize += 1;\r\nbufferSize += 1;\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < primitive->apMacConfig.macAddressListCount; i2++)\r\n{\r\nbufferSize += 6;\r\n}\r\n}\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApConfigSetReqSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApConfigSetReq *primitive = (CsrWifiNmeApConfigSetReq *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apConfig.apGroupkeyTimeout);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apConfig.apStrictGtkRekey);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apConfig.apGmkTimeout);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apConfig.apResponseTimeout);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apConfig.apRetransLimit);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.phySupportedBitmap);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apMacConfig.beaconInterval);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.dtimPeriod);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apMacConfig.maxListenInterval);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.supportedRatesCount);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apMacConfig.supportedRates, ((u16) (20)));\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.preamble);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.shortSlotTimeEnabled);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.ctsProtectionType);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmEnabled);\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < 4; i2++)\r\n{\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmApParams[i2].cwMin);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmApParams[i2].cwMax);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmApParams[i2].aifs);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apMacConfig.wmmApParams[i2].txopLimit);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmApParams[i2].admissionControlMandatory);\r\n}\r\n}\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < 4; i2++)\r\n{\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmApBcParams[i2].cwMin);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmApBcParams[i2].cwMax);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmApBcParams[i2].aifs);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apMacConfig.wmmApBcParams[i2].txopLimit);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.wmmApBcParams[i2].admissionControlMandatory);\r\n}\r\n}\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.accessType);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.macAddressListCount);\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < primitive->apMacConfig.macAddressListCount; i2++)\r\n{\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apMacConfig.macAddressList[i2].a, ((u16) (6)));\r\n}\r\n}\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.apHtParams.greenfieldSupported);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.apHtParams.shortGi20MHz);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.apHtParams.rxStbc);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.apHtParams.rifsModeAllowed);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.apHtParams.htProtection);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apMacConfig.apHtParams.dualCtsProtection);\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApConfigSetReqDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApConfigSetReq *primitive = kmalloc(sizeof(CsrWifiNmeApConfigSetReq), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apConfig.apGroupkeyTimeout, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apConfig.apStrictGtkRekey, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apConfig.apGmkTimeout, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apConfig.apResponseTimeout, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apConfig.apRetransLimit, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.phySupportedBitmap, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apMacConfig.beaconInterval, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.dtimPeriod, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apMacConfig.maxListenInterval, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.supportedRatesCount, buffer, &offset);\r\nCsrMemCpyDes(primitive->apMacConfig.supportedRates, buffer, &offset, ((u16) (20)));\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.preamble, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.shortSlotTimeEnabled, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.ctsProtectionType, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmEnabled, buffer, &offset);\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < 4; i2++)\r\n{\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmApParams[i2].cwMin, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmApParams[i2].cwMax, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmApParams[i2].aifs, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apMacConfig.wmmApParams[i2].txopLimit, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmApParams[i2].admissionControlMandatory, buffer, &offset);\r\n}\r\n}\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < 4; i2++)\r\n{\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmApBcParams[i2].cwMin, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmApBcParams[i2].cwMax, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmApBcParams[i2].aifs, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apMacConfig.wmmApBcParams[i2].txopLimit, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.wmmApBcParams[i2].admissionControlMandatory, buffer, &offset);\r\n}\r\n}\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.accessType, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.macAddressListCount, buffer, &offset);\r\nprimitive->apMacConfig.macAddressList = NULL;\r\nif (primitive->apMacConfig.macAddressListCount)\r\n{\r\nprimitive->apMacConfig.macAddressList = kmalloc(sizeof(CsrWifiMacAddress) * primitive->apMacConfig.macAddressListCount, GFP_KERNEL);\r\n}\r\n{\r\nu16 i2;\r\nfor (i2 = 0; i2 < primitive->apMacConfig.macAddressListCount; i2++)\r\n{\r\nCsrMemCpyDes(primitive->apMacConfig.macAddressList[i2].a, buffer, &offset, ((u16) (6)));\r\n}\r\n}\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.apHtParams.greenfieldSupported, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.apHtParams.shortGi20MHz, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.apHtParams.rxStbc, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.apHtParams.rifsModeAllowed, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.apHtParams.htProtection, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apMacConfig.apHtParams.dualCtsProtection, buffer, &offset);\r\nreturn primitive;\r\n}\r\nvoid CsrWifiNmeApConfigSetReqSerFree(void *voidPrimitivePointer)\r\n{\r\nCsrWifiNmeApConfigSetReq *primitive = (CsrWifiNmeApConfigSetReq *) voidPrimitivePointer;\r\nkfree(primitive->apMacConfig.macAddressList);\r\nkfree(primitive);\r\n}\r\nsize_t CsrWifiNmeApWpsRegisterReqSizeof(void *msg)\r\n{\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 2;\r\nbufferSize += 2;\r\nbufferSize += 8;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApWpsRegisterReqSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApWpsRegisterReq *primitive = (CsrWifiNmeApWpsRegisterReq *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->interfaceTag);\r\nCsrUint16Ser(ptr, len, (u16) primitive->selectedDevicePasswordId);\r\nCsrUint16Ser(ptr, len, (u16) primitive->selectedConfigMethod);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->pin, ((u16) (8)));\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApWpsRegisterReqDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApWpsRegisterReq *primitive = kmalloc(sizeof(CsrWifiNmeApWpsRegisterReq), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->interfaceTag, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->selectedDevicePasswordId, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->selectedConfigMethod, buffer, &offset);\r\nCsrMemCpyDes(primitive->pin, buffer, &offset, ((u16) (8)));\r\nreturn primitive;\r\n}\r\nsize_t CsrWifiNmeApStartReqSizeof(void *msg)\r\n{\r\nCsrWifiNmeApStartReq *primitive = (CsrWifiNmeApStartReq *) msg;\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 32;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nswitch (primitive->apCredentials.authType)\r\n{\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_OPEN_SYSTEM:\r\nbufferSize += 1;\r\nbreak;\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_WEP:\r\nbufferSize += 1;\r\nswitch (primitive->apCredentials.nmeAuthType.authwep.wepKeyType)\r\n{\r\ncase CSR_WIFI_SME_CREDENTIAL_TYPE_WEP128:\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 13;\r\nbufferSize += 13;\r\nbufferSize += 13;\r\nbufferSize += 13;\r\nbreak;\r\ncase CSR_WIFI_SME_CREDENTIAL_TYPE_WEP64:\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 5;\r\nbufferSize += 5;\r\nbufferSize += 5;\r\nbufferSize += 5;\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbreak;\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_PERSONAL:\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\nswitch (primitive->apCredentials.nmeAuthType.authTypePersonal.pskOrPassphrase)\r\n{\r\ncase CSR_WIFI_NME_AP_CREDENTIAL_TYPE_PSK:\r\nbufferSize += 2;\r\nbufferSize += 32;\r\nbreak;\r\ncase CSR_WIFI_NME_AP_CREDENTIAL_TYPE_PASSPHRASE:\r\nbufferSize += 2;\r\nbufferSize += (primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.passphrase.passphrase ? strlen(primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.passphrase.passphrase) : 0) + 1;\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 3;\r\nbufferSize += 1;\r\n{\r\nu16 i3;\r\nfor (i3 = 0; i3 < primitive->p2pGoParam.operatingChanList.channelEntryListCount; i3++)\r\n{\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannelCount;\r\n}\r\n}\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApStartReqSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApStartReq *primitive = (CsrWifiNmeApStartReq *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->interfaceTag);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apType);\r\nCsrUint8Ser(ptr, len, (u8) primitive->cloakSsid);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->ssid.ssid, ((u16) (32)));\r\nCsrUint8Ser(ptr, len, (u8) primitive->ssid.length);\r\nCsrUint8Ser(ptr, len, (u8) primitive->ifIndex);\r\nCsrUint8Ser(ptr, len, (u8) primitive->channel);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.authType);\r\nswitch (primitive->apCredentials.authType)\r\n{\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_OPEN_SYSTEM:\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.nmeAuthType.openSystemEmpty.empty);\r\nbreak;\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_WEP:\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.nmeAuthType.authwep.wepKeyType);\r\nswitch (primitive->apCredentials.nmeAuthType.authwep.wepKeyType)\r\n{\r\ncase CSR_WIFI_SME_CREDENTIAL_TYPE_WEP128:\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.wepAuthType);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.selectedWepKey);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.key1, ((u16) (13)));\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.key2, ((u16) (13)));\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.key3, ((u16) (13)));\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.key4, ((u16) (13)));\r\nbreak;\r\ncase CSR_WIFI_SME_CREDENTIAL_TYPE_WEP64:\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.wepAuthType);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.selectedWepKey);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.key1, ((u16) (5)));\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.key2, ((u16) (5)));\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.key3, ((u16) (5)));\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.key4, ((u16) (5)));\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbreak;\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_PERSONAL:\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.nmeAuthType.authTypePersonal.authSupport);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apCredentials.nmeAuthType.authTypePersonal.rsnCapabilities);\r\nCsrUint16Ser(ptr, len, (u16) primitive->apCredentials.nmeAuthType.authTypePersonal.wapiCapabilities);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apCredentials.nmeAuthType.authTypePersonal.pskOrPassphrase);\r\nswitch (primitive->apCredentials.nmeAuthType.authTypePersonal.pskOrPassphrase)\r\n{\r\ncase CSR_WIFI_NME_AP_CREDENTIAL_TYPE_PSK:\r\nCsrUint16Ser(ptr, len, (u16) primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.psk.encryptionMode);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.psk.psk, ((u16) (32)));\r\nbreak;\r\ncase CSR_WIFI_NME_AP_CREDENTIAL_TYPE_PASSPHRASE:\r\nCsrUint16Ser(ptr, len, (u16) primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.passphrase.encryptionMode);\r\nCsrCharStringSer(ptr, len, primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.passphrase.passphrase);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nCsrUint8Ser(ptr, len, (u8) primitive->maxConnections);\r\nCsrUint8Ser(ptr, len, (u8) primitive->p2pGoParam.groupCapability);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->p2pGoParam.operatingChanList.country, ((u16) (3)));\r\nCsrUint8Ser(ptr, len, (u8) primitive->p2pGoParam.operatingChanList.channelEntryListCount);\r\n{\r\nu16 i3;\r\nfor (i3 = 0; i3 < primitive->p2pGoParam.operatingChanList.channelEntryListCount; i3++)\r\n{\r\nCsrUint8Ser(ptr, len, (u8) primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingClass);\r\nCsrUint8Ser(ptr, len, (u8) primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannelCount);\r\nif (primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannelCount)\r\n{\r\nCsrMemCpySer(ptr, len, (const void *) primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannel, ((u16) (primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannelCount)));\r\n}\r\n}\r\n}\r\nCsrUint8Ser(ptr, len, (u8) primitive->p2pGoParam.opPsEnabled);\r\nCsrUint8Ser(ptr, len, (u8) primitive->p2pGoParam.ctWindow);\r\nCsrUint8Ser(ptr, len, (u8) primitive->p2pGoParam.noaConfigMethod);\r\nCsrUint8Ser(ptr, len, (u8) primitive->p2pGoParam.allowNoaWithNonP2pDevices);\r\nCsrUint8Ser(ptr, len, (u8) primitive->wpsEnabled);\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApStartReqDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApStartReq *primitive = kmalloc(sizeof(CsrWifiNmeApStartReq), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->interfaceTag, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apType, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->cloakSsid, buffer, &offset);\r\nCsrMemCpyDes(primitive->ssid.ssid, buffer, &offset, ((u16) (32)));\r\nCsrUint8Des((u8 *) &primitive->ssid.length, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->ifIndex, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->channel, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apCredentials.authType, buffer, &offset);\r\nswitch (primitive->apCredentials.authType)\r\n{\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_OPEN_SYSTEM:\r\nCsrUint8Des((u8 *) &primitive->apCredentials.nmeAuthType.openSystemEmpty.empty, buffer, &offset);\r\nbreak;\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_WEP:\r\nCsrUint8Des((u8 *) &primitive->apCredentials.nmeAuthType.authwep.wepKeyType, buffer, &offset);\r\nswitch (primitive->apCredentials.nmeAuthType.authwep.wepKeyType)\r\n{\r\ncase CSR_WIFI_SME_CREDENTIAL_TYPE_WEP128:\r\nCsrUint8Des((u8 *) &primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.wepAuthType, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.selectedWepKey, buffer, &offset);\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.key1, buffer, &offset, ((u16) (13)));\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.key2, buffer, &offset, ((u16) (13)));\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.key3, buffer, &offset, ((u16) (13)));\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep128Key.key4, buffer, &offset, ((u16) (13)));\r\nbreak;\r\ncase CSR_WIFI_SME_CREDENTIAL_TYPE_WEP64:\r\nCsrUint8Des((u8 *) &primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.wepAuthType, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.selectedWepKey, buffer, &offset);\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.key1, buffer, &offset, ((u16) (5)));\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.key2, buffer, &offset, ((u16) (5)));\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.key3, buffer, &offset, ((u16) (5)));\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authwep.wepCredentials.wep64Key.key4, buffer, &offset, ((u16) (5)));\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbreak;\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_PERSONAL:\r\nCsrUint8Des((u8 *) &primitive->apCredentials.nmeAuthType.authTypePersonal.authSupport, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apCredentials.nmeAuthType.authTypePersonal.rsnCapabilities, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->apCredentials.nmeAuthType.authTypePersonal.wapiCapabilities, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apCredentials.nmeAuthType.authTypePersonal.pskOrPassphrase, buffer, &offset);\r\nswitch (primitive->apCredentials.nmeAuthType.authTypePersonal.pskOrPassphrase)\r\n{\r\ncase CSR_WIFI_NME_AP_CREDENTIAL_TYPE_PSK:\r\nCsrUint16Des((u16 *) &primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.psk.encryptionMode, buffer, &offset);\r\nCsrMemCpyDes(primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.psk.psk, buffer, &offset, ((u16) (32)));\r\nbreak;\r\ncase CSR_WIFI_NME_AP_CREDENTIAL_TYPE_PASSPHRASE:\r\nCsrUint16Des((u16 *) &primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.passphrase.encryptionMode, buffer, &offset);\r\nCsrCharStringDes(&primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.passphrase.passphrase, buffer, &offset);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nCsrUint8Des((u8 *) &primitive->maxConnections, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->p2pGoParam.groupCapability, buffer, &offset);\r\nCsrMemCpyDes(primitive->p2pGoParam.operatingChanList.country, buffer, &offset, ((u16) (3)));\r\nCsrUint8Des((u8 *) &primitive->p2pGoParam.operatingChanList.channelEntryListCount, buffer, &offset);\r\nprimitive->p2pGoParam.operatingChanList.channelEntryList = NULL;\r\nif (primitive->p2pGoParam.operatingChanList.channelEntryListCount)\r\n{\r\nprimitive->p2pGoParam.operatingChanList.channelEntryList = kmalloc(sizeof(CsrWifiSmeApP2pOperatingChanEntry) * primitive->p2pGoParam.operatingChanList.channelEntryListCount, GFP_KERNEL);\r\n}\r\n{\r\nu16 i3;\r\nfor (i3 = 0; i3 < primitive->p2pGoParam.operatingChanList.channelEntryListCount; i3++)\r\n{\r\nCsrUint8Des((u8 *) &primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingClass, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannelCount, buffer, &offset);\r\nif (primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannelCount)\r\n{\r\nprimitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannel = kmalloc(primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannelCount, GFP_KERNEL);\r\nCsrMemCpyDes(primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannel, buffer, &offset, ((u16) (primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannelCount)));\r\n}\r\nelse\r\n{\r\nprimitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannel = NULL;\r\n}\r\n}\r\n}\r\nCsrUint8Des((u8 *) &primitive->p2pGoParam.opPsEnabled, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->p2pGoParam.ctWindow, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->p2pGoParam.noaConfigMethod, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->p2pGoParam.allowNoaWithNonP2pDevices, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->wpsEnabled, buffer, &offset);\r\nreturn primitive;\r\n}\r\nvoid CsrWifiNmeApStartReqSerFree(void *voidPrimitivePointer)\r\n{\r\nCsrWifiNmeApStartReq *primitive = (CsrWifiNmeApStartReq *) voidPrimitivePointer;\r\nswitch (primitive->apCredentials.authType)\r\n{\r\ncase CSR_WIFI_SME_AP_AUTH_TYPE_PERSONAL:\r\nswitch (primitive->apCredentials.nmeAuthType.authTypePersonal.pskOrPassphrase)\r\n{\r\ncase CSR_WIFI_NME_AP_CREDENTIAL_TYPE_PASSPHRASE:\r\nkfree(primitive->apCredentials.nmeAuthType.authTypePersonal.authPers_credentials.passphrase.passphrase);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n{\r\nu16 i3;\r\nfor (i3 = 0; i3 < primitive->p2pGoParam.operatingChanList.channelEntryListCount; i3++)\r\n{\r\nkfree(primitive->p2pGoParam.operatingChanList.channelEntryList[i3].operatingChannel);\r\n}\r\n}\r\nkfree(primitive->p2pGoParam.operatingChanList.channelEntryList);\r\nkfree(primitive);\r\n}\r\nsize_t CsrWifiNmeApWmmParamUpdateReqSizeof(void *msg)\r\n{\r\nsize_t bufferSize = 2;\r\n{\r\nu16 i1;\r\nfor (i1 = 0; i1 < 4; i1++)\r\n{\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\n}\r\n}\r\n{\r\nu16 i1;\r\nfor (i1 = 0; i1 < 4; i1++)\r\n{\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\n}\r\n}\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApWmmParamUpdateReqSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApWmmParamUpdateReq *primitive = (CsrWifiNmeApWmmParamUpdateReq *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\n{\r\nu16 i1;\r\nfor (i1 = 0; i1 < 4; i1++)\r\n{\r\nCsrUint8Ser(ptr, len, (u8) primitive->wmmApParams[i1].cwMin);\r\nCsrUint8Ser(ptr, len, (u8) primitive->wmmApParams[i1].cwMax);\r\nCsrUint8Ser(ptr, len, (u8) primitive->wmmApParams[i1].aifs);\r\nCsrUint16Ser(ptr, len, (u16) primitive->wmmApParams[i1].txopLimit);\r\nCsrUint8Ser(ptr, len, (u8) primitive->wmmApParams[i1].admissionControlMandatory);\r\n}\r\n}\r\n{\r\nu16 i1;\r\nfor (i1 = 0; i1 < 4; i1++)\r\n{\r\nCsrUint8Ser(ptr, len, (u8) primitive->wmmApBcParams[i1].cwMin);\r\nCsrUint8Ser(ptr, len, (u8) primitive->wmmApBcParams[i1].cwMax);\r\nCsrUint8Ser(ptr, len, (u8) primitive->wmmApBcParams[i1].aifs);\r\nCsrUint16Ser(ptr, len, (u16) primitive->wmmApBcParams[i1].txopLimit);\r\nCsrUint8Ser(ptr, len, (u8) primitive->wmmApBcParams[i1].admissionControlMandatory);\r\n}\r\n}\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApWmmParamUpdateReqDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApWmmParamUpdateReq *primitive = kmalloc(sizeof(CsrWifiNmeApWmmParamUpdateReq), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\n{\r\nu16 i1;\r\nfor (i1 = 0; i1 < 4; i1++)\r\n{\r\nCsrUint8Des((u8 *) &primitive->wmmApParams[i1].cwMin, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->wmmApParams[i1].cwMax, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->wmmApParams[i1].aifs, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->wmmApParams[i1].txopLimit, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->wmmApParams[i1].admissionControlMandatory, buffer, &offset);\r\n}\r\n}\r\n{\r\nu16 i1;\r\nfor (i1 = 0; i1 < 4; i1++)\r\n{\r\nCsrUint8Des((u8 *) &primitive->wmmApBcParams[i1].cwMin, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->wmmApBcParams[i1].cwMax, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->wmmApBcParams[i1].aifs, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->wmmApBcParams[i1].txopLimit, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->wmmApBcParams[i1].admissionControlMandatory, buffer, &offset);\r\n}\r\n}\r\nreturn primitive;\r\n}\r\nsize_t CsrWifiNmeApStaRemoveReqSizeof(void *msg)\r\n{\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 6;\r\nbufferSize += 1;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApStaRemoveReqSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApStaRemoveReq *primitive = (CsrWifiNmeApStaRemoveReq *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->interfaceTag);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->staMacAddress.a, ((u16) (6)));\r\nCsrUint8Ser(ptr, len, (u8) primitive->keepBlocking);\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApStaRemoveReqDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApStaRemoveReq *primitive = kmalloc(sizeof(CsrWifiNmeApStaRemoveReq), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->interfaceTag, buffer, &offset);\r\nCsrMemCpyDes(primitive->staMacAddress.a, buffer, &offset, ((u16) (6)));\r\nCsrUint8Des((u8 *) &primitive->keepBlocking, buffer, &offset);\r\nreturn primitive;\r\n}\r\nsize_t CsrWifiNmeApWpsRegisterCfmSizeof(void *msg)\r\n{\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 2;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApWpsRegisterCfmSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApWpsRegisterCfm *primitive = (CsrWifiNmeApWpsRegisterCfm *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->interfaceTag);\r\nCsrUint16Ser(ptr, len, (u16) primitive->status);\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApWpsRegisterCfmDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApWpsRegisterCfm *primitive = kmalloc(sizeof(CsrWifiNmeApWpsRegisterCfm), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->interfaceTag, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->status, buffer, &offset);\r\nreturn primitive;\r\n}\r\nsize_t CsrWifiNmeApStartCfmSizeof(void *msg)\r\n{\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 2;\r\nbufferSize += 32;\r\nbufferSize += 1;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApStartCfmSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApStartCfm *primitive = (CsrWifiNmeApStartCfm *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->interfaceTag);\r\nCsrUint16Ser(ptr, len, (u16) primitive->status);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->ssid.ssid, ((u16) (32)));\r\nCsrUint8Ser(ptr, len, (u8) primitive->ssid.length);\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApStartCfmDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApStartCfm *primitive = kmalloc(sizeof(CsrWifiNmeApStartCfm), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->interfaceTag, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->status, buffer, &offset);\r\nCsrMemCpyDes(primitive->ssid.ssid, buffer, &offset, ((u16) (32)));\r\nCsrUint8Des((u8 *) &primitive->ssid.length, buffer, &offset);\r\nreturn primitive;\r\n}\r\nsize_t CsrWifiNmeApStopCfmSizeof(void *msg)\r\n{\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 2;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApStopCfmSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApStopCfm *primitive = (CsrWifiNmeApStopCfm *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->interfaceTag);\r\nCsrUint16Ser(ptr, len, (u16) primitive->status);\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApStopCfmDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApStopCfm *primitive = kmalloc(sizeof(CsrWifiNmeApStopCfm), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->interfaceTag, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->status, buffer, &offset);\r\nreturn primitive;\r\n}\r\nsize_t CsrWifiNmeApStopIndSizeof(void *msg)\r\n{\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\nbufferSize += 2;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApStopIndSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApStopInd *primitive = (CsrWifiNmeApStopInd *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->interfaceTag);\r\nCsrUint8Ser(ptr, len, (u8) primitive->apType);\r\nCsrUint16Ser(ptr, len, (u16) primitive->status);\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApStopIndDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApStopInd *primitive = kmalloc(sizeof(CsrWifiNmeApStopInd), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->interfaceTag, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->apType, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->status, buffer, &offset);\r\nreturn primitive;\r\n}\r\nsize_t CsrWifiNmeApStationIndSizeof(void *msg)\r\n{\r\nsize_t bufferSize = 2;\r\nbufferSize += 2;\r\nbufferSize += 1;\r\nbufferSize += 6;\r\nbufferSize += 6;\r\nreturn bufferSize;\r\n}\r\nu8* CsrWifiNmeApStationIndSer(u8 *ptr, size_t *len, void *msg)\r\n{\r\nCsrWifiNmeApStationInd *primitive = (CsrWifiNmeApStationInd *)msg;\r\n*len = 0;\r\nCsrUint16Ser(ptr, len, primitive->common.type);\r\nCsrUint16Ser(ptr, len, (u16) primitive->interfaceTag);\r\nCsrUint8Ser(ptr, len, (u8) primitive->mediaStatus);\r\nCsrMemCpySer(ptr, len, (const void *) primitive->peerMacAddress.a, ((u16) (6)));\r\nCsrMemCpySer(ptr, len, (const void *) primitive->peerDeviceAddress.a, ((u16) (6)));\r\nreturn(ptr);\r\n}\r\nvoid* CsrWifiNmeApStationIndDes(u8 *buffer, size_t length)\r\n{\r\nCsrWifiNmeApStationInd *primitive = kmalloc(sizeof(CsrWifiNmeApStationInd), GFP_KERNEL);\r\nsize_t offset;\r\noffset = 0;\r\nCsrUint16Des(&primitive->common.type, buffer, &offset);\r\nCsrUint16Des((u16 *) &primitive->interfaceTag, buffer, &offset);\r\nCsrUint8Des((u8 *) &primitive->mediaStatus, buffer, &offset);\r\nCsrMemCpyDes(primitive->peerMacAddress.a, buffer, &offset, ((u16) (6)));\r\nCsrMemCpyDes(primitive->peerDeviceAddress.a, buffer, &offset, ((u16) (6)));\r\nreturn primitive;\r\n}
