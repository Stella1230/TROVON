static int jack_detect_kctl_get(struct snd_kcontrol *kcontrol,\r\nstruct snd_ctl_elem_value *ucontrol)\r\n{\r\nucontrol->value.integer.value[0] = kcontrol->private_value;\r\nreturn 0;\r\n}\r\nstruct snd_kcontrol *\r\nsnd_kctl_jack_new(const char *name, int idx, void *private_data)\r\n{\r\nstruct snd_kcontrol *kctl;\r\nkctl = snd_ctl_new1(&jack_detect_kctl, private_data);\r\nif (!kctl)\r\nreturn NULL;\r\nsnprintf(kctl->id.name, sizeof(kctl->id.name), "%s Jack", name);\r\nkctl->id.index = idx;\r\nkctl->private_value = 0;\r\nreturn kctl;\r\n}\r\nvoid snd_kctl_jack_report(struct snd_card *card,\r\nstruct snd_kcontrol *kctl, bool status)\r\n{\r\nif (kctl->private_value == status)\r\nreturn;\r\nkctl->private_value = status;\r\nsnd_ctl_notify(card, SNDRV_CTL_EVENT_MASK_VALUE, &kctl->id);\r\n}
