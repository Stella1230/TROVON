long spu_sys_callback(struct spu_syscall_block *s)\r\n{\r\nlong (*syscall)(u64 a1, u64 a2, u64 a3, u64 a4, u64 a5, u64 a6);\r\nif (s->nr_ret >= ARRAY_SIZE(spu_syscall_table)) {\r\npr_debug("%s: invalid syscall #%lld", __func__, s->nr_ret);\r\nreturn -ENOSYS;\r\n}\r\nsyscall = spu_syscall_table[s->nr_ret];\r\n#ifdef DEBUG\r\nprint_symbol(KERN_DEBUG "SPU-syscall %s:", (unsigned long)syscall);\r\nprintk("syscall%ld(%lx, %lx, %lx, %lx, %lx, %lx)\n",\r\ns->nr_ret,\r\ns->parm[0], s->parm[1], s->parm[2],\r\ns->parm[3], s->parm[4], s->parm[5]);\r\n#endif\r\nreturn syscall(s->parm[0], s->parm[1], s->parm[2],\r\ns->parm[3], s->parm[4], s->parm[5]);\r\n}
