static void probe(struct via_aux_bus *bus, u8 addr)\r\n{\r\nstruct via_aux_drv drv = {\r\n.bus = bus,\r\n.addr = addr,\r\n.name = name};\r\nconst u8 id[] = {0x01, 0x00, 0x06, 0x00}, len = ARRAY_SIZE(id);\r\nu8 tmp[len];\r\nif (!via_aux_read(&drv, 0x00, tmp, len) || memcmp(id, tmp, len))\r\nreturn;\r\nprintk(KERN_INFO "viafb: Found %s at address 0x%x\n", name, addr);\r\nvia_aux_add(&drv);\r\n}\r\nvoid via_aux_sii164_probe(struct via_aux_bus *bus)\r\n{\r\nu8 i;\r\nfor (i = 0x38; i <= 0x3F; i++)\r\nprobe(bus, i);\r\n}
