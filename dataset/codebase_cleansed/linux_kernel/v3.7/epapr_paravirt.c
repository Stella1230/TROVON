static int __init epapr_paravirt_init(void)\r\n{\r\nstruct device_node *hyper_node;\r\nconst u32 *insts;\r\nint len, i;\r\nhyper_node = of_find_node_by_path("/hypervisor");\r\nif (!hyper_node)\r\nreturn -ENODEV;\r\ninsts = of_get_property(hyper_node, "hcall-instructions", &len);\r\nif (!insts)\r\nreturn -ENODEV;\r\nif (len % 4 || len > (4 * 4))\r\nreturn -ENODEV;\r\nfor (i = 0; i < (len / 4); i++)\r\npatch_instruction(epapr_hypercall_start + i, insts[i]);\r\nepapr_paravirt_enabled = true;\r\nreturn 0;\r\n}
