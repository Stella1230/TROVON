static int gplugd_eth_init(void)\r\n{\r\nif (unlikely(gpio_request(104, "ETH_RESET_N"))) {\r\nprintk(KERN_ERR "Can't get hold of GPIO 104 to bring Ethernet "\r\n"PHY out of reset\n");\r\nreturn -EIO;\r\n}\r\ngpio_direction_output(104, 1);\r\ngpio_free(104);\r\nreturn 0;\r\n}\r\nstatic void __init select_disp_freq(void)\r\n{\r\nif (unlikely(gpio_request(35, "DISP_FREQ_SEL"))) {\r\nprintk(KERN_ERR "Can't get hold of GPIO 35 to select display "\r\n"frequency\n");\r\n} else {\r\ngpio_direction_output(35, 1);\r\ngpio_free(35);\r\n}\r\nif (unlikely(gpio_request(85, "DISP_FREQ_SEL_2"))) {\r\nprintk(KERN_ERR "Can't get hold of GPIO 85 to select display "\r\n"frequency\n");\r\n} else {\r\ngpio_direction_output(85, 0);\r\ngpio_free(85);\r\n}\r\n}\r\nstatic void __init gplugd_init(void)\r\n{\r\nmfp_config(ARRAY_AND_SIZE(gplugd_pin_config));\r\nselect_disp_freq();\r\npxa168_add_uart(3);\r\npxa168_add_ssp(1);\r\npxa168_add_twsi(0, NULL, ARRAY_AND_SIZE(gplugd_i2c_board_info));\r\nplatform_device_register(&pxa168_device_gpio);\r\npxa168_add_eth(&gplugd_eth_platform_data);\r\n}
