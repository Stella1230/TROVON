const char *acpi_format_exception(acpi_status status)\r\n{\r\nconst char *exception = NULL;\r\nACPI_FUNCTION_ENTRY();\r\nexception = acpi_ut_validate_exception(status);\r\nif (!exception) {\r\nACPI_ERROR((AE_INFO,\r\n"Unknown exception code: 0x%8.8X", status));\r\nexception = "UNKNOWN_STATUS_CODE";\r\n}\r\nreturn (ACPI_CAST_PTR(const char, exception));\r\n}\r\nconst char *acpi_ut_validate_exception(acpi_status status)\r\n{\r\nu32 sub_status;\r\nconst char *exception = NULL;\r\nACPI_FUNCTION_ENTRY();\r\nsub_status = (status & ~AE_CODE_MASK);\r\nswitch (status & AE_CODE_MASK) {\r\ncase AE_CODE_ENVIRONMENTAL:\r\nif (sub_status <= AE_CODE_ENV_MAX) {\r\nexception = acpi_gbl_exception_names_env[sub_status];\r\n}\r\nbreak;\r\ncase AE_CODE_PROGRAMMER:\r\nif (sub_status <= AE_CODE_PGM_MAX) {\r\nexception = acpi_gbl_exception_names_pgm[sub_status];\r\n}\r\nbreak;\r\ncase AE_CODE_ACPI_TABLES:\r\nif (sub_status <= AE_CODE_TBL_MAX) {\r\nexception = acpi_gbl_exception_names_tbl[sub_status];\r\n}\r\nbreak;\r\ncase AE_CODE_AML:\r\nif (sub_status <= AE_CODE_AML_MAX) {\r\nexception = acpi_gbl_exception_names_aml[sub_status];\r\n}\r\nbreak;\r\ncase AE_CODE_CONTROL:\r\nif (sub_status <= AE_CODE_CTRL_MAX) {\r\nexception = acpi_gbl_exception_names_ctrl[sub_status];\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nreturn (ACPI_CAST_PTR(const char, exception));\r\n}
