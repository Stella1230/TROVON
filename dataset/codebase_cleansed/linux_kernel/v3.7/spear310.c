static void __init spear310_dt_init(void)\r\n{\r\nvoid __iomem *base;\r\nint ret;\r\npl080_plat_data.slave_channels = spear310_dma_info;\r\npl080_plat_data.num_slave_channels = ARRAY_SIZE(spear310_dma_info);\r\nof_platform_populate(NULL, of_default_bus_match_table,\r\nspear310_auxdata_lookup, NULL);\r\nbase = ioremap(SPEAR310_SOC_CONFIG_BASE, SZ_4K);\r\nif (base) {\r\nshirq_ras1.regs.base = base;\r\nret = spear_shirq_register(&shirq_ras1);\r\nif (ret)\r\npr_err("Error registering Shared IRQ 1\n");\r\nshirq_ras2.regs.base = base;\r\nret = spear_shirq_register(&shirq_ras2);\r\nif (ret)\r\npr_err("Error registering Shared IRQ 2\n");\r\nshirq_ras3.regs.base = base;\r\nret = spear_shirq_register(&shirq_ras3);\r\nif (ret)\r\npr_err("Error registering Shared IRQ 3\n");\r\nshirq_intrcomm_ras.regs.base = base;\r\nret = spear_shirq_register(&shirq_intrcomm_ras);\r\nif (ret)\r\npr_err("Error registering Shared IRQ 4\n");\r\n}\r\n}\r\nstatic void __init spear310_map_io(void)\r\n{\r\nspear3xx_map_io();\r\n}
