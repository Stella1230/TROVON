static void __init spear320_dt_init(void)\r\n{\r\nvoid __iomem *base;\r\nint ret;\r\npl080_plat_data.slave_channels = spear320_dma_info;\r\npl080_plat_data.num_slave_channels = ARRAY_SIZE(spear320_dma_info);\r\nof_platform_populate(NULL, of_default_bus_match_table,\r\nspear320_auxdata_lookup, NULL);\r\nbase = ioremap(SPEAR320_SOC_CONFIG_BASE, SZ_4K);\r\nif (base) {\r\nshirq_ras1.regs.base = base;\r\nret = spear_shirq_register(&shirq_ras1);\r\nif (ret)\r\npr_err("Error registering Shared IRQ 1\n");\r\nshirq_ras3.regs.base = base;\r\nret = spear_shirq_register(&shirq_ras3);\r\nif (ret)\r\npr_err("Error registering Shared IRQ 3\n");\r\nshirq_intrcomm_ras.regs.base = base;\r\nret = spear_shirq_register(&shirq_intrcomm_ras);\r\nif (ret)\r\npr_err("Error registering Shared IRQ 4\n");\r\n}\r\n}\r\nstatic void __init spear320_map_io(void)\r\n{\r\niotable_init(spear320_io_desc, ARRAY_SIZE(spear320_io_desc));\r\nspear3xx_map_io();\r\n}
