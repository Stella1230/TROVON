void __init spear3xx_map_io(void)\r\n{\r\niotable_init(spear3xx_io_desc, ARRAY_SIZE(spear3xx_io_desc));\r\n}\r\nstatic void __init spear3xx_timer_init(void)\r\n{\r\nchar pclk_name[] = "pll3_clk";\r\nstruct clk *gpt_clk, *pclk;\r\nspear3xx_clk_init();\r\ngpt_clk = clk_get_sys("gpt0", NULL);\r\nif (IS_ERR(gpt_clk)) {\r\npr_err("%s:couldn't get clk for gpt\n", __func__);\r\nBUG();\r\n}\r\npclk = clk_get(NULL, pclk_name);\r\nif (IS_ERR(pclk)) {\r\npr_err("%s:couldn't get %s as parent for gpt\n",\r\n__func__, pclk_name);\r\nBUG();\r\n}\r\nclk_set_parent(gpt_clk, pclk);\r\nclk_put(gpt_clk);\r\nclk_put(pclk);\r\nspear_setup_of_timer();\r\n}\r\nvoid __init spear3xx_dt_init_irq(void)\r\n{\r\nof_irq_init(vic_of_match);\r\n}
