void of_parse_dma_window(struct device_node *dn, const void *dma_window_prop,\r\nunsigned long *busno, unsigned long *phys, unsigned long *size)\r\n{\r\nconst u32 *dma_window;\r\nu32 cells;\r\nconst unsigned char *prop;\r\ndma_window = dma_window_prop;\r\n*busno = *(dma_window++);\r\nprop = of_get_property(dn, "ibm,#dma-address-cells", NULL);\r\nif (!prop)\r\nprop = of_get_property(dn, "#address-cells", NULL);\r\ncells = prop ? *(u32 *)prop : of_n_addr_cells(dn);\r\n*phys = of_read_number(dma_window, cells);\r\ndma_window += cells;\r\nprop = of_get_property(dn, "ibm,#dma-size-cells", NULL);\r\ncells = prop ? *(u32 *)prop : of_n_size_cells(dn);\r\n*size = of_read_number(dma_window, cells);\r\n}
