static int mxt_td60_pca9557_setup(struct i2c_client *client,\r\nunsigned gpio_base, unsigned ngpio,\r\nvoid *context)\r\n{\r\nstatic int mxt_td60_gpio_value[] = {\r\n-1, -1, -1, -1, -1, -1, -1, 1\r\n};\r\nint n;\r\nfor (n = 0; n < ARRAY_SIZE(mxt_td60_gpio_value); ++n) {\r\ngpio_request(gpio_base + n, "MXT_TD60 GPIO Exp");\r\nif (mxt_td60_gpio_value[n] < 0)\r\ngpio_direction_input(gpio_base + n);\r\nelse\r\ngpio_direction_output(gpio_base + n,\r\nmxt_td60_gpio_value[n]);\r\ngpio_export(gpio_base + n, 0);\r\n}\r\nreturn 0;\r\n}\r\nstatic int mxt_td60_sdhc1_init(struct device *dev, irq_handler_t detect_irq,\r\nvoid *data)\r\n{\r\nreturn request_irq(gpio_to_irq(IMX_GPIO_NR(6, 8)), detect_irq,\r\nIRQF_TRIGGER_FALLING, "sdhc1-card-detect", data);\r\n}\r\nstatic void mxt_td60_sdhc1_exit(struct device *dev, void *data)\r\n{\r\nfree_irq(gpio_to_irq(IMX_GPIO_NR(6, 8)), data);\r\n}\r\nstatic void __init mxt_td60_board_init(void)\r\n{\r\nimx27_soc_init();\r\nmxc_gpio_setup_multiple_pins(mxt_td60_pins, ARRAY_SIZE(mxt_td60_pins),\r\n"MXT_TD60");\r\nimx27_add_imx_uart0(&uart_pdata);\r\nimx27_add_imx_uart1(&uart_pdata);\r\nimx27_add_imx_uart2(&uart_pdata);\r\nimx27_add_mxc_nand(&mxt_td60_nand_board_info);\r\ni2c_register_board_info(0, mxt_td60_i2c_devices,\r\nARRAY_SIZE(mxt_td60_i2c_devices));\r\ni2c_register_board_info(1, mxt_td60_i2c2_devices,\r\nARRAY_SIZE(mxt_td60_i2c2_devices));\r\nimx27_add_imx_i2c(0, &mxt_td60_i2c0_data);\r\nimx27_add_imx_i2c(1, &mxt_td60_i2c1_data);\r\nimx27_add_imx_fb(&mxt_td60_fb_data);\r\nimx27_add_mxc_mmc(0, &sdhc1_pdata);\r\nimx27_add_fec(NULL);\r\n}\r\nstatic void __init mxt_td60_timer_init(void)\r\n{\r\nmx27_clocks_init(26000000);\r\n}
