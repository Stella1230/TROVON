static void __init i386_default_early_setup(void)\r\n{\r\nx86_init.resources.reserve_resources = i386_reserve_resources;\r\nx86_init.mpparse.setup_ioapic_ids = setup_ioapic_ids_from_mpc;\r\nreserve_ebda_region();\r\n}\r\nvoid __init i386_start_kernel(void)\r\n{\r\nmemblock_reserve(__pa_symbol(&_text),\r\n__pa_symbol(&__bss_stop) - __pa_symbol(&_text));\r\n#ifdef CONFIG_BLK_DEV_INITRD\r\nif (boot_params.hdr.type_of_loader && boot_params.hdr.ramdisk_image) {\r\nu64 ramdisk_image = boot_params.hdr.ramdisk_image;\r\nu64 ramdisk_size = boot_params.hdr.ramdisk_size;\r\nu64 ramdisk_end = PAGE_ALIGN(ramdisk_image + ramdisk_size);\r\nmemblock_reserve(ramdisk_image, ramdisk_end - ramdisk_image);\r\n}\r\n#endif\r\nswitch (boot_params.hdr.hardware_subarch) {\r\ncase X86_SUBARCH_MRST:\r\nx86_mrst_early_setup();\r\nbreak;\r\ncase X86_SUBARCH_CE4100:\r\nx86_ce4100_early_setup();\r\nbreak;\r\ndefault:\r\ni386_default_early_setup();\r\nbreak;\r\n}\r\nstart_kernel();\r\n}
