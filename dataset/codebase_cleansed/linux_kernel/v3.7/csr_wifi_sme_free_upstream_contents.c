void CsrWifiSmeFreeUpstreamMessageContents(u16 eventClass, void *message)\r\n{\r\nif (eventClass != CSR_WIFI_SME_PRIM)\r\n{\r\nreturn;\r\n}\r\nif (NULL == message)\r\n{\r\nreturn;\r\n}\r\nswitch (*((CsrWifiSmePrim *) message))\r\n{\r\ncase CSR_WIFI_SME_ASSOCIATION_COMPLETE_IND:\r\n{\r\nCsrWifiSmeAssociationCompleteInd *p = (CsrWifiSmeAssociationCompleteInd *)message;\r\nkfree(p->connectionInfo.beaconFrame);\r\np->connectionInfo.beaconFrame = NULL;\r\nkfree(p->connectionInfo.associationReqFrame);\r\np->connectionInfo.associationReqFrame = NULL;\r\nkfree(p->connectionInfo.associationRspFrame);\r\np->connectionInfo.associationRspFrame = NULL;\r\nkfree(p->connectionInfo.assocScanInfoElements);\r\np->connectionInfo.assocScanInfoElements = NULL;\r\nkfree(p->connectionInfo.assocReqInfoElements);\r\np->connectionInfo.assocReqInfoElements = NULL;\r\nkfree(p->connectionInfo.assocRspInfoElements);\r\np->connectionInfo.assocRspInfoElements = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_BLACKLIST_CFM:\r\n{\r\nCsrWifiSmeBlacklistCfm *p = (CsrWifiSmeBlacklistCfm *)message;\r\nkfree(p->getAddresses);\r\np->getAddresses = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_CALIBRATION_DATA_GET_CFM:\r\n{\r\nCsrWifiSmeCalibrationDataGetCfm *p = (CsrWifiSmeCalibrationDataGetCfm *)message;\r\nkfree(p->calibrationData);\r\np->calibrationData = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_CONNECTION_CONFIG_GET_CFM:\r\n{\r\nCsrWifiSmeConnectionConfigGetCfm *p = (CsrWifiSmeConnectionConfigGetCfm *)message;\r\nkfree(p->connectionConfig.mlmeAssociateReqInformationElements);\r\np->connectionConfig.mlmeAssociateReqInformationElements = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_CONNECTION_INFO_GET_CFM:\r\n{\r\nCsrWifiSmeConnectionInfoGetCfm *p = (CsrWifiSmeConnectionInfoGetCfm *)message;\r\nkfree(p->connectionInfo.beaconFrame);\r\np->connectionInfo.beaconFrame = NULL;\r\nkfree(p->connectionInfo.associationReqFrame);\r\np->connectionInfo.associationReqFrame = NULL;\r\nkfree(p->connectionInfo.associationRspFrame);\r\np->connectionInfo.associationRspFrame = NULL;\r\nkfree(p->connectionInfo.assocScanInfoElements);\r\np->connectionInfo.assocScanInfoElements = NULL;\r\nkfree(p->connectionInfo.assocReqInfoElements);\r\np->connectionInfo.assocReqInfoElements = NULL;\r\nkfree(p->connectionInfo.assocRspInfoElements);\r\np->connectionInfo.assocRspInfoElements = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_MEDIA_STATUS_IND:\r\n{\r\nCsrWifiSmeMediaStatusInd *p = (CsrWifiSmeMediaStatusInd *)message;\r\nkfree(p->connectionInfo.beaconFrame);\r\np->connectionInfo.beaconFrame = NULL;\r\nkfree(p->connectionInfo.associationReqFrame);\r\np->connectionInfo.associationReqFrame = NULL;\r\nkfree(p->connectionInfo.associationRspFrame);\r\np->connectionInfo.associationRspFrame = NULL;\r\nkfree(p->connectionInfo.assocScanInfoElements);\r\np->connectionInfo.assocScanInfoElements = NULL;\r\nkfree(p->connectionInfo.assocReqInfoElements);\r\np->connectionInfo.assocReqInfoElements = NULL;\r\nkfree(p->connectionInfo.assocRspInfoElements);\r\np->connectionInfo.assocRspInfoElements = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_MIB_GET_CFM:\r\n{\r\nCsrWifiSmeMibGetCfm *p = (CsrWifiSmeMibGetCfm *)message;\r\nkfree(p->mibAttribute);\r\np->mibAttribute = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_MIB_GET_NEXT_CFM:\r\n{\r\nCsrWifiSmeMibGetNextCfm *p = (CsrWifiSmeMibGetNextCfm *)message;\r\nkfree(p->mibAttribute);\r\np->mibAttribute = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_MULTICAST_ADDRESS_CFM:\r\n{\r\nCsrWifiSmeMulticastAddressCfm *p = (CsrWifiSmeMulticastAddressCfm *)message;\r\nkfree(p->getAddresses);\r\np->getAddresses = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_PMKID_CANDIDATE_LIST_IND:\r\n{\r\nCsrWifiSmePmkidCandidateListInd *p = (CsrWifiSmePmkidCandidateListInd *)message;\r\nkfree(p->pmkidCandidates);\r\np->pmkidCandidates = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_PMKID_CFM:\r\n{\r\nCsrWifiSmePmkidCfm *p = (CsrWifiSmePmkidCfm *)message;\r\nkfree(p->getPmkids);\r\np->getPmkids = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_SCAN_CONFIG_GET_CFM:\r\n{\r\nCsrWifiSmeScanConfigGetCfm *p = (CsrWifiSmeScanConfigGetCfm *)message;\r\nkfree(p->scanConfig.passiveChannelList);\r\np->scanConfig.passiveChannelList = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_SCAN_RESULT_IND:\r\n{\r\nCsrWifiSmeScanResultInd *p = (CsrWifiSmeScanResultInd *)message;\r\nkfree(p->result.informationElements);\r\np->result.informationElements = NULL;\r\nswitch (p->result.p2pDeviceRole)\r\n{\r\ncase CSR_WIFI_SME_P2P_ROLE_GO:\r\n{\r\nu16 i4;\r\nfor (i4 = 0; i4 < p->result.deviceInfo.groupInfo.p2pClientInfoCount; i4++)\r\n{\r\nkfree(p->result.deviceInfo.groupInfo.p2PClientInfo[i4].clientDeviceInfo.secDeviceType);\r\np->result.deviceInfo.groupInfo.p2PClientInfo[i4].clientDeviceInfo.secDeviceType = NULL;\r\n}\r\n}\r\nkfree(p->result.deviceInfo.groupInfo.p2PClientInfo);\r\np->result.deviceInfo.groupInfo.p2PClientInfo = NULL;\r\nbreak;\r\ncase CSR_WIFI_SME_P2P_ROLE_STANDALONE:\r\nkfree(p->result.deviceInfo.standalonedevInfo.secDeviceType);\r\np->result.deviceInfo.standalonedevInfo.secDeviceType = NULL;\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_SCAN_RESULTS_GET_CFM:\r\n{\r\nCsrWifiSmeScanResultsGetCfm *p = (CsrWifiSmeScanResultsGetCfm *)message;\r\n{\r\nu16 i1;\r\nfor (i1 = 0; i1 < p->scanResultsCount; i1++)\r\n{\r\nkfree(p->scanResults[i1].informationElements);\r\np->scanResults[i1].informationElements = NULL;\r\nswitch (p->scanResults[i1].p2pDeviceRole)\r\n{\r\ncase CSR_WIFI_SME_P2P_ROLE_GO:\r\n{\r\nu16 i4;\r\nfor (i4 = 0; i4 < p->scanResults[i1].deviceInfo.groupInfo.p2pClientInfoCount; i4++)\r\n{\r\nkfree(p->scanResults[i1].deviceInfo.groupInfo.p2PClientInfo[i4].clientDeviceInfo.secDeviceType);\r\np->scanResults[i1].deviceInfo.groupInfo.p2PClientInfo[i4].clientDeviceInfo.secDeviceType = NULL;\r\n}\r\n}\r\nkfree(p->scanResults[i1].deviceInfo.groupInfo.p2PClientInfo);\r\np->scanResults[i1].deviceInfo.groupInfo.p2PClientInfo = NULL;\r\nbreak;\r\ncase CSR_WIFI_SME_P2P_ROLE_STANDALONE:\r\nkfree(p->scanResults[i1].deviceInfo.standalonedevInfo.secDeviceType);\r\np->scanResults[i1].deviceInfo.standalonedevInfo.secDeviceType = NULL;\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\n}\r\nkfree(p->scanResults);\r\np->scanResults = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_TSPEC_IND:\r\n{\r\nCsrWifiSmeTspecInd *p = (CsrWifiSmeTspecInd *)message;\r\nkfree(p->tspec);\r\np->tspec = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_TSPEC_CFM:\r\n{\r\nCsrWifiSmeTspecCfm *p = (CsrWifiSmeTspecCfm *)message;\r\nkfree(p->tspec);\r\np->tspec = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_VERSIONS_GET_CFM:\r\n{\r\nCsrWifiSmeVersionsGetCfm *p = (CsrWifiSmeVersionsGetCfm *)message;\r\nkfree(p->versions.routerBuild);\r\np->versions.routerBuild = NULL;\r\nkfree(p->versions.smeBuild);\r\np->versions.smeBuild = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_CLOAKED_SSIDS_GET_CFM:\r\n{\r\nCsrWifiSmeCloakedSsidsGetCfm *p = (CsrWifiSmeCloakedSsidsGetCfm *)message;\r\nkfree(p->cloakedSsids.cloakedSsids);\r\np->cloakedSsids.cloakedSsids = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_ERROR_IND:\r\n{\r\nCsrWifiSmeErrorInd *p = (CsrWifiSmeErrorInd *)message;\r\nkfree(p->errorMessage);\r\np->errorMessage = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_INFO_IND:\r\n{\r\nCsrWifiSmeInfoInd *p = (CsrWifiSmeInfoInd *)message;\r\nkfree(p->infoMessage);\r\np->infoMessage = NULL;\r\nbreak;\r\n}\r\ncase CSR_WIFI_SME_CORE_DUMP_IND:\r\n{\r\nCsrWifiSmeCoreDumpInd *p = (CsrWifiSmeCoreDumpInd *)message;\r\nkfree(p->data);\r\np->data = NULL;\r\nbreak;\r\n}\r\ndefault:\r\nbreak;\r\n}\r\n}
