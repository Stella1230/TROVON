static int sctp_objcnt_seq_show(struct seq_file *seq, void *v)\r\n{\r\nint i, len;\r\ni = (int)*(loff_t *)v;\r\nseq_printf(seq, "%s: %d%n", sctp_dbg_objcnt[i].label,\r\natomic_read(sctp_dbg_objcnt[i].counter), &len);\r\nseq_printf(seq, "%*s\n", 127 - len, "");\r\nreturn 0;\r\n}\r\nstatic void *sctp_objcnt_seq_start(struct seq_file *seq, loff_t *pos)\r\n{\r\nreturn (*pos >= ARRAY_SIZE(sctp_dbg_objcnt)) ? NULL : (void *)pos;\r\n}\r\nstatic void sctp_objcnt_seq_stop(struct seq_file *seq, void *v)\r\n{\r\n}\r\nstatic void * sctp_objcnt_seq_next(struct seq_file *seq, void *v, loff_t *pos)\r\n{\r\n++*pos;\r\nreturn (*pos >= ARRAY_SIZE(sctp_dbg_objcnt)) ? NULL : (void *)pos;\r\n}\r\nstatic int sctp_objcnt_seq_open(struct inode *inode, struct file *file)\r\n{\r\nreturn seq_open(file, &sctp_objcnt_seq_ops);\r\n}\r\nvoid sctp_dbg_objcnt_init(void)\r\n{\r\nstruct proc_dir_entry *ent;\r\nent = proc_create("sctp_dbg_objcnt", 0,\r\nproc_net_sctp, &sctp_objcnt_ops);\r\nif (!ent)\r\npr_warn("sctp_dbg_objcnt: Unable to create /proc entry.\n");\r\n}\r\nvoid sctp_dbg_objcnt_exit(void)\r\n{\r\nremove_proc_entry("sctp_dbg_objcnt", proc_net_sctp);\r\n}
