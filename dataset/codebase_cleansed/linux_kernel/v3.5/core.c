static void shark_restart(char mode, const char *cmd)\r\n{\r\nshort temp;\r\noutw(0x09,0x24);\r\ntemp=inw(0x26);\r\ntemp = temp | (1<<3) | (1<<10);\r\noutw(0x09,0x24);\r\noutw(temp,0x26);\r\n}\r\nstatic int __init shark_init(void)\r\n{\r\nint ret;\r\nif (machine_is_shark())\r\n{\r\nret = platform_device_register(&rtc_device);\r\nif (ret) printk(KERN_ERR "Unable to register RTC device: %d\n", ret);\r\nret = platform_device_register(&serial_device);\r\nif (ret) printk(KERN_ERR "Unable to register Serial device: %d\n", ret);\r\n}\r\nreturn 0;\r\n}\r\nstatic void __init shark_map_io(void)\r\n{\r\niotable_init(shark_io_desc, ARRAY_SIZE(shark_io_desc));\r\n}\r\nstatic irqreturn_t\r\nshark_timer_interrupt(int irq, void *dev_id)\r\n{\r\ntimer_tick();\r\nreturn IRQ_HANDLED;\r\n}\r\nstatic void __init shark_timer_init(void)\r\n{\r\noutb(0x34, 0x43);\r\noutb(HZ_TIME & 0xff, 0x40);\r\noutb(HZ_TIME >> 8, 0x40);\r\nsetup_irq(IRQ_TIMER, &shark_timer_irq);\r\n}\r\nstatic void shark_init_early(void)\r\n{\r\ndisable_hlt();\r\n}
