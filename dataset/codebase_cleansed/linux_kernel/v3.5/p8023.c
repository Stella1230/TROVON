static int p8023_request(struct datalink_proto *dl,\r\nstruct sk_buff *skb, unsigned char *dest_node)\r\n{\r\nstruct net_device *dev = skb->dev;\r\ndev_hard_header(skb, dev, ETH_P_802_3, dest_node, NULL, skb->len);\r\nreturn dev_queue_xmit(skb);\r\n}\r\nstruct datalink_proto *make_8023_client(void)\r\n{\r\nstruct datalink_proto *proto = kmalloc(sizeof(*proto), GFP_ATOMIC);\r\nif (proto) {\r\nproto->header_length = 0;\r\nproto->request = p8023_request;\r\n}\r\nreturn proto;\r\n}\r\nvoid destroy_8023_client(struct datalink_proto *dl)\r\n{\r\nkfree(dl);\r\n}
