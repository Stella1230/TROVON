static int hfs_revalidate_dentry(struct dentry *dentry, struct nameidata *nd)\r\n{\r\nstruct inode *inode;\r\nint diff;\r\nif (nd->flags & LOOKUP_RCU)\r\nreturn -ECHILD;\r\ninode = dentry->d_inode;\r\nif(!inode)\r\nreturn 1;\r\ndiff = sys_tz.tz_minuteswest * 60 - HFS_I(inode)->tz_secondswest;\r\nif (diff) {\r\ninode->i_ctime.tv_sec += diff;\r\ninode->i_atime.tv_sec += diff;\r\ninode->i_mtime.tv_sec += diff;\r\nHFS_I(inode)->tz_secondswest += diff;\r\n}\r\nreturn 1;\r\n}
