const int of_get_nand_ecc_mode(struct device_node *np)\r\n{\r\nconst char *pm;\r\nint err, i;\r\nerr = of_property_read_string(np, "nand-ecc-mode", &pm);\r\nif (err < 0)\r\nreturn err;\r\nfor (i = 0; i < ARRAY_SIZE(nand_ecc_modes); i++)\r\nif (!strcasecmp(pm, nand_ecc_modes[i]))\r\nreturn i;\r\nreturn -ENODEV;\r\n}\r\nint of_get_nand_bus_width(struct device_node *np)\r\n{\r\nu32 val;\r\nif (of_property_read_u32(np, "nand-bus-width", &val))\r\nreturn 8;\r\nswitch(val) {\r\ncase 8:\r\ncase 16:\r\nreturn val;\r\ndefault:\r\nreturn -EIO;\r\n}\r\n}\r\nbool of_get_nand_on_flash_bbt(struct device_node *np)\r\n{\r\nreturn of_property_read_bool(np, "nand-on-flash-bbt");\r\n}
