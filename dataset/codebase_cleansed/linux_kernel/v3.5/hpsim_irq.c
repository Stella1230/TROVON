static unsigned int\r\nhpsim_irq_startup(struct irq_data *data)\r\n{\r\nreturn 0;\r\n}\r\nstatic void\r\nhpsim_irq_noop(struct irq_data *data)\r\n{\r\n}\r\nstatic int\r\nhpsim_set_affinity_noop(struct irq_data *d, const struct cpumask *b, bool f)\r\n{\r\nreturn 0;\r\n}\r\nstatic void hpsim_irq_set_chip(int irq)\r\n{\r\nstruct irq_chip *chip = irq_get_chip(irq);\r\nif (chip == &no_irq_chip)\r\nirq_set_chip(irq, &irq_type_hp_sim);\r\n}\r\nstatic void hpsim_connect_irq(int intr, int irq)\r\n{\r\nia64_ssc(intr, irq, 0, 0, SSC_CONNECT_INTERRUPT);\r\n}\r\nint hpsim_get_irq(int intr)\r\n{\r\nint irq = assign_irq_vector(AUTO_ASSIGN);\r\nif (irq >= 0) {\r\nhpsim_irq_set_chip(irq);\r\nirq_set_handler(irq, handle_simple_irq);\r\nhpsim_connect_irq(intr, irq);\r\n}\r\nreturn irq;\r\n}\r\nvoid __init\r\nhpsim_irq_init (void)\r\n{\r\nint i;\r\nfor_each_active_irq(i)\r\nhpsim_irq_set_chip(i);\r\n}
