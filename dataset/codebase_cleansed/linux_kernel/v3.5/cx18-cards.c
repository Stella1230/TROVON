const struct cx18_card *cx18_get_card(u16 index)\r\n{\r\nif (index >= ARRAY_SIZE(cx18_card_list))\r\nreturn NULL;\r\nreturn cx18_card_list[index];\r\n}\r\nint cx18_get_input(struct cx18 *cx, u16 index, struct v4l2_input *input)\r\n{\r\nconst struct cx18_card_video_input *card_input =\r\ncx->card->video_inputs + index;\r\nstatic const char * const input_strs[] = {\r\n"Tuner 1",\r\n"S-Video 1",\r\n"S-Video 2",\r\n"Composite 1",\r\n"Composite 2",\r\n"Component 1"\r\n};\r\nif (index >= cx->nof_inputs)\r\nreturn -EINVAL;\r\ninput->index = index;\r\nstrlcpy(input->name, input_strs[card_input->video_type - 1],\r\nsizeof(input->name));\r\ninput->type = (card_input->video_type == CX18_CARD_INPUT_VID_TUNER ?\r\nV4L2_INPUT_TYPE_TUNER : V4L2_INPUT_TYPE_CAMERA);\r\ninput->audioset = (1 << cx->nof_audio_inputs) - 1;\r\ninput->std = (input->type == V4L2_INPUT_TYPE_TUNER) ?\r\ncx->tuner_std : V4L2_STD_ALL;\r\nreturn 0;\r\n}\r\nint cx18_get_audio_input(struct cx18 *cx, u16 index, struct v4l2_audio *audio)\r\n{\r\nconst struct cx18_card_audio_input *aud_input =\r\ncx->card->audio_inputs + index;\r\nstatic const char * const input_strs[] = {\r\n"Tuner 1",\r\n"Line In 1",\r\n"Line In 2"\r\n};\r\nmemset(audio, 0, sizeof(*audio));\r\nif (index >= cx->nof_audio_inputs)\r\nreturn -EINVAL;\r\nstrlcpy(audio->name, input_strs[aud_input->audio_type - 1],\r\nsizeof(audio->name));\r\naudio->index = index;\r\naudio->capability = V4L2_AUDCAP_STEREO;\r\nreturn 0;\r\n}
