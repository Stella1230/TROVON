static void __init omap_detect_and_map_sram(void)\r\n{\r\nunsigned long omap_sram_skip = SRAM_BOOTLOADER_SZ;\r\nunsigned long omap_sram_start = OMAP1_SRAM_PA;\r\nunsigned long omap_sram_size;\r\nif (cpu_is_omap7xx())\r\nomap_sram_size = 0x32000;\r\nelse if (cpu_is_omap15xx())\r\nomap_sram_size = 0x30000;\r\nelse if (cpu_is_omap1610() || cpu_is_omap1611() ||\r\ncpu_is_omap1621() || cpu_is_omap1710())\r\nomap_sram_size = 0x4000;\r\nelse {\r\npr_err("Could not detect SRAM size\n");\r\nomap_sram_size = 0x4000;\r\n}\r\nomap_map_sram(omap_sram_start, omap_sram_size,\r\nomap_sram_skip, 1);\r\n}\r\nvoid omap_sram_reprogram_clock(u32 dpllctl, u32 ckctl)\r\n{\r\nBUG_ON(!_omap_sram_reprogram_clock);\r\nif (cpu_is_omap7xx())\r\nckctl |= 0x2000;\r\n_omap_sram_reprogram_clock(dpllctl, ckctl);\r\n}\r\nint __init omap_sram_init(void)\r\n{\r\nomap_detect_and_map_sram();\r\n_omap_sram_reprogram_clock =\r\nomap_sram_push(omap1_sram_reprogram_clock,\r\nomap1_sram_reprogram_clock_sz);\r\nreturn 0;\r\n}
