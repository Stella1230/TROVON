void omap2xxx_restart(enum reboot_mode mode, const char *cmd)\r\n{\r\nu32 rate;\r\nrate = clk_get_rate(reset_sys_ck);\r\nclk_set_rate(reset_virt_prcm_set_ck, rate);\r\nomap2xxx_prm_dpll_reset();\r\nwhile (1);\r\n}\r\nstatic int __init omap2xxx_common_look_up_clks_for_reset(void)\r\n{\r\nreset_virt_prcm_set_ck = clk_get(NULL, "virt_prcm_set");\r\nif (IS_ERR(reset_virt_prcm_set_ck))\r\nreturn -EINVAL;\r\nreset_sys_ck = clk_get(NULL, "sys_ck");\r\nif (IS_ERR(reset_sys_ck))\r\nreturn -EINVAL;\r\nreturn 0;\r\n}
