static void __init qnap_ts219_init(void)\r\n{\r\nu32 dev, rev;\r\nkirkwood_init();\r\nkirkwood_mpp_conf(qnap_ts219_mpp_config);\r\nkirkwood_uart0_init();\r\nkirkwood_uart1_init();\r\nqnap_tsx1x_register_flash();\r\nkirkwood_i2c_init();\r\ni2c_register_board_info(0, &qnap_ts219_i2c_rtc, 1);\r\nkirkwood_pcie_id(&dev, &rev);\r\nif (dev == MV88F6282_DEV_ID) {\r\nqnap_ts219_buttons[0].gpio = 43;\r\nqnap_ts219_buttons[1].gpio = 37;\r\nqnap_ts219_ge00_data.phy_addr = MV643XX_ETH_PHY_ADDR(0);\r\n}\r\nkirkwood_ge00_init(&qnap_ts219_ge00_data);\r\nkirkwood_sata_init(&qnap_ts219_sata_data);\r\nkirkwood_ehci_init();\r\nplatform_device_register(&qnap_ts219_button_device);\r\npm_power_off = qnap_tsx1x_power_off;\r\n}\r\nstatic int __init ts219_pci_init(void)\r\n{\r\nif (machine_is_ts219())\r\nkirkwood_pcie_init(KW_PCIE1 | KW_PCIE0);\r\nreturn 0;\r\n}
