static void net48xx_error_led_set(struct led_classdev *led_cdev,\r\nenum led_brightness value)\r\n{\r\nscx200_gpio_ops.gpio_set(NET48XX_ERROR_LED_GPIO, value ? 1 : 0);\r\n}\r\nstatic int net48xx_led_probe(struct platform_device *pdev)\r\n{\r\nreturn led_classdev_register(&pdev->dev, &net48xx_error_led);\r\n}\r\nstatic int net48xx_led_remove(struct platform_device *pdev)\r\n{\r\nled_classdev_unregister(&net48xx_error_led);\r\nreturn 0;\r\n}\r\nstatic int __init net48xx_led_init(void)\r\n{\r\nint ret;\r\nif (!scx200_gpio_ops.dev) {\r\nret = -ENODEV;\r\ngoto out;\r\n}\r\nret = platform_driver_register(&net48xx_led_driver);\r\nif (ret < 0)\r\ngoto out;\r\npdev = platform_device_register_simple(DRVNAME, -1, NULL, 0);\r\nif (IS_ERR(pdev)) {\r\nret = PTR_ERR(pdev);\r\nplatform_driver_unregister(&net48xx_led_driver);\r\ngoto out;\r\n}\r\nout:\r\nreturn ret;\r\n}\r\nstatic void __exit net48xx_led_exit(void)\r\n{\r\nplatform_device_unregister(pdev);\r\nplatform_driver_unregister(&net48xx_led_driver);\r\n}
