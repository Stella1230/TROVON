int tc_register_driver(struct tc_driver *tdrv)\r\n{\r\nreturn driver_register(&tdrv->driver);\r\n}\r\nvoid tc_unregister_driver(struct tc_driver *tdrv)\r\n{\r\ndriver_unregister(&tdrv->driver);\r\n}\r\nconst struct tc_device_id *tc_match_device(struct tc_driver *tdrv,\r\nstruct tc_dev *tdev)\r\n{\r\nconst struct tc_device_id *id = tdrv->id_table;\r\nif (id) {\r\nwhile (id->name[0] || id->vendor[0]) {\r\nif (strcmp(tdev->name, id->name) == 0 &&\r\nstrcmp(tdev->vendor, id->vendor) == 0)\r\nreturn id;\r\nid++;\r\n}\r\n}\r\nreturn NULL;\r\n}\r\nstatic int tc_bus_match(struct device *dev, struct device_driver *drv)\r\n{\r\nstruct tc_dev *tdev = to_tc_dev(dev);\r\nstruct tc_driver *tdrv = to_tc_driver(drv);\r\nconst struct tc_device_id *id;\r\nid = tc_match_device(tdrv, tdev);\r\nif (id)\r\nreturn 1;\r\nreturn 0;\r\n}\r\nstatic int __init tc_driver_init(void)\r\n{\r\nreturn bus_register(&tc_bus_type);\r\n}
