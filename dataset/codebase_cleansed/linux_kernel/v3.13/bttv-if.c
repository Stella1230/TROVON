struct pci_dev* bttv_get_pcidev(unsigned int card)\r\n{\r\nif (card >= bttv_num)\r\nreturn NULL;\r\nif (!bttvs[card])\r\nreturn NULL;\r\nreturn bttvs[card]->c.pci;\r\n}\r\nint bttv_gpio_enable(unsigned int card, unsigned long mask, unsigned long data)\r\n{\r\nstruct bttv *btv;\r\nif (card >= bttv_num) {\r\nreturn -EINVAL;\r\n}\r\nbtv = bttvs[card];\r\nif (!btv)\r\nreturn -ENODEV;\r\ngpio_inout(mask,data);\r\nif (bttv_gpio)\r\nbttv_gpio_tracking(btv,"extern enable");\r\nreturn 0;\r\n}\r\nint bttv_read_gpio(unsigned int card, unsigned long *data)\r\n{\r\nstruct bttv *btv;\r\nif (card >= bttv_num) {\r\nreturn -EINVAL;\r\n}\r\nbtv = bttvs[card];\r\nif (!btv)\r\nreturn -ENODEV;\r\nif(btv->shutdown) {\r\nreturn -ENODEV;\r\n}\r\n*data = gpio_read();\r\nreturn 0;\r\n}\r\nint bttv_write_gpio(unsigned int card, unsigned long mask, unsigned long data)\r\n{\r\nstruct bttv *btv;\r\nif (card >= bttv_num) {\r\nreturn -EINVAL;\r\n}\r\nbtv = bttvs[card];\r\nif (!btv)\r\nreturn -ENODEV;\r\ngpio_bits(mask,data);\r\nif (bttv_gpio)\r\nbttv_gpio_tracking(btv,"extern write");\r\nreturn 0;\r\n}
