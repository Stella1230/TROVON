static void __init s3c64xx_clk_register_fixed_ext(unsigned long fin_pll_f,\r\nunsigned long xusbxti_f)\r\n{\r\ns3c64xx_fixed_rate_ext_clks[0].fixed_rate = fin_pll_f;\r\ns3c64xx_fixed_rate_ext_clks[1].fixed_rate = xusbxti_f;\r\nsamsung_clk_register_fixed_rate(s3c64xx_fixed_rate_ext_clks,\r\nARRAY_SIZE(s3c64xx_fixed_rate_ext_clks));\r\n}\r\nvoid __init s3c64xx_clk_init(struct device_node *np, unsigned long xtal_f,\r\nunsigned long xusbxti_f, bool is_s3c6400,\r\nvoid __iomem *reg_base)\r\n{\r\nunsigned long *soc_regs = NULL;\r\nunsigned long nr_soc_regs = 0;\r\nif (np) {\r\nreg_base = of_iomap(np, 0);\r\nif (!reg_base)\r\npanic("%s: failed to map registers\n", __func__);\r\n}\r\nif (!is_s3c6400) {\r\nsoc_regs = s3c6410_clk_regs;\r\nnr_soc_regs = ARRAY_SIZE(s3c6410_clk_regs);\r\n}\r\nsamsung_clk_init(np, reg_base, NR_CLKS, s3c64xx_clk_regs,\r\nARRAY_SIZE(s3c64xx_clk_regs), soc_regs, nr_soc_regs);\r\nif (!np)\r\ns3c64xx_clk_register_fixed_ext(xtal_f, xusbxti_f);\r\nsamsung_clk_register_pll(s3c64xx_pll_clks,\r\nARRAY_SIZE(s3c64xx_pll_clks), reg_base);\r\nsamsung_clk_register_fixed_rate(s3c64xx_fixed_rate_clks,\r\nARRAY_SIZE(s3c64xx_fixed_rate_clks));\r\nsamsung_clk_register_mux(s3c64xx_mux_clks,\r\nARRAY_SIZE(s3c64xx_mux_clks));\r\nsamsung_clk_register_div(s3c64xx_div_clks,\r\nARRAY_SIZE(s3c64xx_div_clks));\r\nsamsung_clk_register_gate(s3c64xx_gate_clks,\r\nARRAY_SIZE(s3c64xx_gate_clks));\r\nif (is_s3c6400) {\r\nsamsung_clk_register_mux(s3c6400_mux_clks,\r\nARRAY_SIZE(s3c6400_mux_clks));\r\nsamsung_clk_register_div(s3c6400_div_clks,\r\nARRAY_SIZE(s3c6400_div_clks));\r\nsamsung_clk_register_gate(s3c6400_gate_clks,\r\nARRAY_SIZE(s3c6400_gate_clks));\r\nsamsung_clk_register_alias(s3c6400_clock_aliases,\r\nARRAY_SIZE(s3c6400_clock_aliases));\r\n} else {\r\nsamsung_clk_register_mux(s3c6410_mux_clks,\r\nARRAY_SIZE(s3c6410_mux_clks));\r\nsamsung_clk_register_div(s3c6410_div_clks,\r\nARRAY_SIZE(s3c6410_div_clks));\r\nsamsung_clk_register_gate(s3c6410_gate_clks,\r\nARRAY_SIZE(s3c6410_gate_clks));\r\nsamsung_clk_register_alias(s3c6410_clock_aliases,\r\nARRAY_SIZE(s3c6410_clock_aliases));\r\n}\r\nsamsung_clk_register_alias(s3c64xx_clock_aliases,\r\nARRAY_SIZE(s3c64xx_clock_aliases));\r\npr_info("%s clocks: apll = %lu, mpll = %lu\n"\r\n"\tepll = %lu, arm_clk = %lu\n",\r\nis_s3c6400 ? "S3C6400" : "S3C6410",\r\n_get_rate("fout_apll"), _get_rate("fout_mpll"),\r\n_get_rate("fout_epll"), _get_rate("armclk"));\r\n}\r\nstatic void __init s3c6400_clk_init(struct device_node *np)\r\n{\r\ns3c64xx_clk_init(np, 0, 0, true, NULL);\r\n}\r\nstatic void __init s3c6410_clk_init(struct device_node *np)\r\n{\r\ns3c64xx_clk_init(np, 0, 0, false, NULL);\r\n}
