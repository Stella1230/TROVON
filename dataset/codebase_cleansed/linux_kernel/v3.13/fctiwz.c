int\r\nfctiwz(u32 *frD, void *frB)\r\n{\r\nFP_DECL_D(B);\r\nFP_DECL_EX;\r\nu32 fpscr;\r\nunsigned int r;\r\nfpscr = __FPU_FPSCR;\r\n__FPU_FPSCR &= ~(3);\r\n__FPU_FPSCR |= FP_RND_ZERO;\r\nFP_UNPACK_DP(B, frB);\r\nFP_TO_INT_D(r, B, 32, 1);\r\nfrD[1] = r;\r\n__FPU_FPSCR = fpscr;\r\n#ifdef DEBUG\r\nprintk("%s: D %p, B %p: ", __func__, frD, frB);\r\ndump_double(frD);\r\nprintk("\n");\r\n#endif\r\nreturn 0;\r\n}
