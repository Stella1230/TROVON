void shove_aux_table(unsigned long sp)\r\n{\r\nint argc;\r\nchar *p;\r\nunsigned long e;\r\nunsigned long aux_start, offset;\r\nargc = *(int *)sp;\r\nsp += sizeof(int) + (argc + 1) * sizeof(char *);\r\ndo {\r\np = *(char **)sp;\r\nsp += sizeof(char *);\r\n} while (p != NULL);\r\naux_start = sp;\r\ndo {\r\ne = *(unsigned long *)sp;\r\nsp += 2 * sizeof(unsigned long);\r\n} while (e != AT_NULL);\r\noffset = ((aux_start + 15) & ~15) - aux_start;\r\nif (offset != 0) {\r\ndo {\r\nsp -= sizeof(unsigned long);\r\ne = *(unsigned long *)sp;\r\n*(unsigned long *)(sp + offset) = e;\r\n} while (sp > aux_start);\r\n}\r\n}
