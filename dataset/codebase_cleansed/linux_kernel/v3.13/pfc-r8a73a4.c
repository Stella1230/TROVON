static unsigned int r8a73a4_pinmux_get_bias(struct sh_pfc *pfc,\r\nunsigned int pin)\r\n{\r\nvoid __iomem *addr;\r\naddr = pfc->window->virt + r8a73a4_portcr_offsets[pin >> 5] + pin;\r\nswitch (ioread8(addr) & PORTCR_PULMD_MASK) {\r\ncase PORTCR_PULMD_UP:\r\nreturn PIN_CONFIG_BIAS_PULL_UP;\r\ncase PORTCR_PULMD_DOWN:\r\nreturn PIN_CONFIG_BIAS_PULL_DOWN;\r\ncase PORTCR_PULMD_OFF:\r\ndefault:\r\nreturn PIN_CONFIG_BIAS_DISABLE;\r\n}\r\n}\r\nstatic void r8a73a4_pinmux_set_bias(struct sh_pfc *pfc, unsigned int pin,\r\nunsigned int bias)\r\n{\r\nvoid __iomem *addr;\r\nu32 value;\r\naddr = pfc->window->virt + r8a73a4_portcr_offsets[pin >> 5] + pin;\r\nvalue = ioread8(addr) & ~PORTCR_PULMD_MASK;\r\nswitch (bias) {\r\ncase PIN_CONFIG_BIAS_PULL_UP:\r\nvalue |= PORTCR_PULMD_UP;\r\nbreak;\r\ncase PIN_CONFIG_BIAS_PULL_DOWN:\r\nvalue |= PORTCR_PULMD_DOWN;\r\nbreak;\r\n}\r\niowrite8(value, addr);\r\n}
