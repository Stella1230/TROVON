void of_parse_dma_window(struct device_node *dn, const __be32 *dma_window,\r\nunsigned long *busno, unsigned long *phys,\r\nunsigned long *size)\r\n{\r\nu32 cells;\r\nconst __be32 *prop;\r\n*busno = of_read_number(dma_window, 1);\r\ndma_window++;\r\nprop = of_get_property(dn, "ibm,#dma-address-cells", NULL);\r\nif (!prop)\r\nprop = of_get_property(dn, "#address-cells", NULL);\r\ncells = prop ? of_read_number(prop, 1) : of_n_addr_cells(dn);\r\n*phys = of_read_number(dma_window, cells);\r\ndma_window += cells;\r\nprop = of_get_property(dn, "ibm,#dma-size-cells", NULL);\r\ncells = prop ? of_read_number(prop, 1) : of_n_size_cells(dn);\r\n*size = of_read_number(dma_window, cells);\r\n}
