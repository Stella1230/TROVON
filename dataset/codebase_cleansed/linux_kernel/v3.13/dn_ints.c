unsigned int apollo_irq_startup(struct irq_data *data)\r\n{\r\nunsigned int irq = data->irq;\r\nif (irq < 8)\r\n*(volatile unsigned char *)(pica+1) &= ~(1 << irq);\r\nelse\r\n*(volatile unsigned char *)(picb+1) &= ~(1 << (irq - 8));\r\nreturn 0;\r\n}\r\nvoid apollo_irq_shutdown(struct irq_data *data)\r\n{\r\nunsigned int irq = data->irq;\r\nif (irq < 8)\r\n*(volatile unsigned char *)(pica+1) |= (1 << irq);\r\nelse\r\n*(volatile unsigned char *)(picb+1) |= (1 << (irq - 8));\r\n}\r\nvoid apollo_irq_eoi(struct irq_data *data)\r\n{\r\n*(volatile unsigned char *)(pica) = 0x20;\r\n*(volatile unsigned char *)(picb) = 0x20;\r\n}\r\nvoid __init dn_init_IRQ(void)\r\n{\r\nm68k_setup_user_interrupt(VEC_USER + 96, 16);\r\nm68k_setup_irq_controller(&apollo_irq_chip, handle_fasteoi_irq,\r\nIRQ_APOLLO, 16);\r\n}
