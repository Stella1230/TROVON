void spu_switch_notify(struct spu *spu, struct spu_context *ctx)\r\n{\r\nblocking_notifier_call_chain(&spu_switch_notifier,\r\nctx ? ctx->object_id : 0, spu);\r\n}\r\nint spu_switch_event_register(struct notifier_block *n)\r\n{\r\nint ret;\r\nret = blocking_notifier_chain_register(&spu_switch_notifier, n);\r\nif (!ret)\r\nnotify_spus_active();\r\nreturn ret;\r\n}\r\nint spu_switch_event_unregister(struct notifier_block *n)\r\n{\r\nreturn blocking_notifier_chain_unregister(&spu_switch_notifier, n);\r\n}\r\nvoid spu_set_profile_private_kref(struct spu_context *ctx,\r\nstruct kref *prof_info_kref,\r\nvoid (* prof_info_release) (struct kref *kref))\r\n{\r\nctx->prof_priv_kref = prof_info_kref;\r\nctx->prof_priv_release = prof_info_release;\r\n}\r\nvoid *spu_get_profile_private_kref(struct spu_context *ctx)\r\n{\r\nreturn ctx->prof_priv_kref;\r\n}
