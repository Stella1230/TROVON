static int palmtt_get_pendown_state(void)\r\n{\r\nreturn !gpio_get_value(6);\r\n}\r\nstatic void __init omap_mpu_wdt_mode(int mode) {\r\nif (mode)\r\nomap_writew(0x8000, OMAP_WDT_TIMER_MODE);\r\nelse {\r\nomap_writew(0x00f5, OMAP_WDT_TIMER_MODE);\r\nomap_writew(0x00a0, OMAP_WDT_TIMER_MODE);\r\n}\r\n}\r\nstatic void __init omap_palmtt_init(void)\r\n{\r\nomap_cfg_reg(UART1_TX);\r\nomap_cfg_reg(UART1_RTS);\r\nomap_cfg_reg(UART2_TX);\r\nomap_cfg_reg(UART2_RTS);\r\nomap_cfg_reg(UART3_TX);\r\nomap_cfg_reg(UART3_RX);\r\nomap_mpu_wdt_mode(0);\r\nplatform_add_devices(palmtt_devices, ARRAY_SIZE(palmtt_devices));\r\npalmtt_boardinfo[0].irq = gpio_to_irq(6);\r\nspi_register_board_info(palmtt_boardinfo,ARRAY_SIZE(palmtt_boardinfo));\r\nomap_serial_init();\r\nomap1_usb_init(&palmtt_usb_config);\r\nomap_register_i2c_bus(1, 100, NULL, 0);\r\nomapfb_set_lcd_config(&palmtt_lcd_config);\r\n}
