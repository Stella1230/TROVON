void sreset_init_value(struct adapter *padapter)\r\n{\r\nstruct hal_data_8188e *pHalData = GET_HAL_DATA(padapter);\r\nstruct sreset_priv *psrtpriv = &pHalData->srestpriv;\r\n_rtw_mutex_init(&psrtpriv->silentreset_mutex);\r\npsrtpriv->silent_reset_inprogress = false;\r\npsrtpriv->Wifi_Error_Status = WIFI_STATUS_SUCCESS;\r\npsrtpriv->last_tx_time = 0;\r\npsrtpriv->last_tx_complete_time = 0;\r\n}\r\nvoid sreset_reset_value(struct adapter *padapter)\r\n{\r\nstruct hal_data_8188e *pHalData = GET_HAL_DATA(padapter);\r\nstruct sreset_priv *psrtpriv = &pHalData->srestpriv;\r\npsrtpriv->silent_reset_inprogress = false;\r\npsrtpriv->Wifi_Error_Status = WIFI_STATUS_SUCCESS;\r\npsrtpriv->last_tx_time = 0;\r\npsrtpriv->last_tx_complete_time = 0;\r\n}\r\nu8 sreset_get_wifi_status(struct adapter *padapter)\r\n{\r\nstruct hal_data_8188e *pHalData = GET_HAL_DATA(padapter);\r\nstruct sreset_priv *psrtpriv = &pHalData->srestpriv;\r\nu8 status = WIFI_STATUS_SUCCESS;\r\nu32 val32 = 0;\r\nif (psrtpriv->silent_reset_inprogress)\r\nreturn status;\r\nval32 = rtw_read32(padapter, REG_TXDMA_STATUS);\r\nif (val32 == 0xeaeaeaea) {\r\npsrtpriv->Wifi_Error_Status = WIFI_IF_NOT_EXIST;\r\n} else if (val32 != 0) {\r\nDBG_88E("txdmastatu(%x)\n", val32);\r\npsrtpriv->Wifi_Error_Status = WIFI_MAC_TXDMA_ERROR;\r\n}\r\nif (WIFI_STATUS_SUCCESS != psrtpriv->Wifi_Error_Status) {\r\nDBG_88E("==>%s error_status(0x%x)\n", __func__, psrtpriv->Wifi_Error_Status);\r\nstatus = (psrtpriv->Wifi_Error_Status & (~(USB_READ_PORT_FAIL|USB_WRITE_PORT_FAIL)));\r\n}\r\nDBG_88E("==> %s wifi_status(0x%x)\n", __func__, status);\r\npsrtpriv->Wifi_Error_Status = WIFI_STATUS_SUCCESS;\r\nreturn status;\r\n}\r\nvoid sreset_set_wifi_error_status(struct adapter *padapter, u32 status)\r\n{\r\nstruct hal_data_8188e *pHalData = GET_HAL_DATA(padapter);\r\npHalData->srestpriv.Wifi_Error_Status = status;\r\n}
