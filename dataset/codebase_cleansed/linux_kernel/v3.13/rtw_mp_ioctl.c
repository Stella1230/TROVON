int rtl8188eu_oid_rt_wireless_mode_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->information_buf_len < sizeof(u8))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\nif (poid_par_priv->type_of_oid == SET_OID) {\r\nAdapter->registrypriv.wireless_mode = *(u8 *)poid_par_priv->information_buf;\r\n} else if (poid_par_priv->type_of_oid == QUERY_OID) {\r\n*(u8 *)poid_par_priv->information_buf = Adapter->registrypriv.wireless_mode;\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nRT_TRACE(_module_mp_, _drv_info_, ("-query Wireless Mode=%d\n", Adapter->registrypriv.wireless_mode));\r\n} else {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\n}\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_write_bb_reg_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct bb_reg_param *pbbreg;\r\nu16 offset;\r\nu32 value;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_write_bb_reg_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(struct bb_reg_param))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\npbbreg = (struct bb_reg_param *)(poid_par_priv->information_buf);\r\noffset = (u16)(pbbreg->offset) & 0xFFF;\r\nif (offset < BB_REG_BASE_ADDR)\r\noffset |= BB_REG_BASE_ADDR;\r\nvalue = pbbreg->value;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("rtl8188eu_oid_rt_pro_write_bb_reg_hdl: offset=0x%03X value=0x%08X\n",\r\noffset, value));\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nwrite_bbreg(Adapter, offset, 0xFFFFFFFF, value);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_read_bb_reg_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct bb_reg_param *pbbreg;\r\nu16 offset;\r\nu32 value;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_read_bb_reg_hdl\n"));\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(struct bb_reg_param))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\npbbreg = (struct bb_reg_param *)(poid_par_priv->information_buf);\r\noffset = (u16)(pbbreg->offset) & 0xFFF;\r\nif (offset < BB_REG_BASE_ADDR)\r\noffset |= BB_REG_BASE_ADDR;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nvalue = read_bbreg(Adapter, offset, 0xFFFFFFFF);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\npbbreg->value = value;\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("-rtl8188eu_oid_rt_pro_read_bb_reg_hdl: offset=0x%03X value:0x%08X\n",\r\noffset, value));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_write_rf_reg_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct rf_reg_param *pbbreg;\r\nu8 path;\r\nu8 offset;\r\nu32 value;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_write_rf_reg_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(struct rf_reg_param))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\npbbreg = (struct rf_reg_param *)(poid_par_priv->information_buf);\r\nif (pbbreg->path >= MAX_RF_PATH_NUMS)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (pbbreg->offset > 0xFF)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (pbbreg->value > 0xFFFFF)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\npath = (u8)pbbreg->path;\r\noffset = (u8)pbbreg->offset;\r\nvalue = pbbreg->value;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("rtl8188eu_oid_rt_pro_write_rf_reg_hdl: path=%d offset=0x%02X value=0x%05X\n",\r\npath, offset, value));\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nwrite_rfreg(Adapter, path, offset, value);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_read_rf_reg_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct rf_reg_param *pbbreg;\r\nu8 path;\r\nu8 offset;\r\nu32 value;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\nint status = NDIS_STATUS_SUCCESS;\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_read_rf_reg_hdl\n"));\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(struct rf_reg_param))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\npbbreg = (struct rf_reg_param *)(poid_par_priv->information_buf);\r\nif (pbbreg->path >= MAX_RF_PATH_NUMS)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (pbbreg->offset > 0xFF)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\npath = (u8)pbbreg->path;\r\noffset = (u8)pbbreg->offset;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nvalue = read_rfreg(Adapter, path, offset);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\npbbreg->value = value;\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("-rtl8188eu_oid_rt_pro_read_rf_reg_hdl: path=%d offset=0x%02X value=0x%05X\n",\r\npath, offset, value));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_data_rate_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 ratevalue;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("+rtl8188eu_oid_rt_pro_set_data_rate_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len != sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\nratevalue = *((u32 *)poid_par_priv->information_buf);\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("rtl8188eu_oid_rt_pro_set_data_rate_hdl: data rate idx=%d\n", ratevalue));\r\nif (ratevalue >= MPT_RATE_LAST)\r\nreturn NDIS_STATUS_INVALID_DATA;\r\nAdapter->mppriv.rateidx = ratevalue;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetDataRate(Adapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_start_test_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 mode;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_start_test_hdl\n"));\r\nif (Adapter->registrypriv.mp_mode == 0)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nmode = *((u32 *)poid_par_priv->information_buf);\r\nAdapter->mppriv.mode = mode;\r\nif (mp_start_test(Adapter) == _FAIL) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\ngoto exit;\r\n}\r\nexit:\r\n_irqlevel_changed_(&oldirql, RAISE);\r\nRT_TRACE(_module_mp_, _drv_notice_, ("-rtl8188eu_oid_rt_pro_start_test_hdl: mp_mode=%d\n", Adapter->mppriv.mode));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_stop_test_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+Set OID_RT_PRO_STOP_TEST\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nmp_stop_test(Adapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\nRT_TRACE(_module_mp_, _drv_notice_, ("-Set OID_RT_PRO_STOP_TEST\n"));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_channel_direct_call_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 Channel;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_set_channel_direct_call_hdl\n"));\r\nif (poid_par_priv->information_buf_len != sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\nif (poid_par_priv->type_of_oid == QUERY_OID) {\r\n*((u32 *)poid_par_priv->information_buf) = Adapter->mppriv.channel;\r\nreturn NDIS_STATUS_SUCCESS;\r\n}\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nChannel = *((u32 *)poid_par_priv->information_buf);\r\nRT_TRACE(_module_mp_, _drv_notice_, ("rtl8188eu_oid_rt_pro_set_channel_direct_call_hdl: Channel=%d\n", Channel));\r\nif (Channel > 14)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nAdapter->mppriv.channel = Channel;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetChannel(Adapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_set_bandwidth_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu16 bandwidth;\r\nu16 channel_offset;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *padapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("+rtl8188eu_oid_rt_set_bandwidth_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\nbandwidth = *((u32 *)poid_par_priv->information_buf);\r\nchannel_offset = HAL_PRIME_CHNL_OFFSET_DONT_CARE;\r\nif (bandwidth != HT_CHANNEL_WIDTH_40)\r\nbandwidth = HT_CHANNEL_WIDTH_20;\r\npadapter->mppriv.bandwidth = (u8)bandwidth;\r\npadapter->mppriv.prime_channel_offset = (u8)channel_offset;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetBandwidth(padapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("-rtl8188eu_oid_rt_set_bandwidth_hdl: bandwidth=%d channel_offset=%d\n",\r\nbandwidth, channel_offset));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_antenna_bb_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 antenna;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_set_antenna_bb_hdl\n"));\r\nif (poid_par_priv->information_buf_len != sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\nif (poid_par_priv->type_of_oid == SET_OID) {\r\nantenna = *(u32 *)poid_par_priv->information_buf;\r\nAdapter->mppriv.antenna_tx = (u16)((antenna & 0xFFFF0000) >> 16);\r\nAdapter->mppriv.antenna_rx = (u16)(antenna & 0x0000FFFF);\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("rtl8188eu_oid_rt_pro_set_antenna_bb_hdl: tx_ant=0x%04x rx_ant=0x%04x\n",\r\nAdapter->mppriv.antenna_tx, Adapter->mppriv.antenna_rx));\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetAntenna(Adapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n} else {\r\nantenna = (Adapter->mppriv.antenna_tx << 16)|Adapter->mppriv.antenna_rx;\r\n*(u32 *)poid_par_priv->information_buf = antenna;\r\n}\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_tx_power_control_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 tx_pwr_idx;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_info_, ("+rtl8188eu_oid_rt_pro_set_tx_power_control_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len != sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\ntx_pwr_idx = *((u32 *)poid_par_priv->information_buf);\r\nif (tx_pwr_idx > MAX_TX_PWR_INDEX_N_MODE)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nAdapter->mppriv.txpoweridx = (u8)tx_pwr_idx;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("rtl8188eu_oid_rt_pro_set_tx_power_control_hdl: idx=0x%2x\n",\r\nAdapter->mppriv.txpoweridx));\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetTxPower(Adapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_query_tx_packet_sent_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != QUERY_OID) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nreturn status;\r\n}\r\nif (poid_par_priv->information_buf_len == sizeof(u32)) {\r\n*(u32 *)poid_par_priv->information_buf = Adapter->mppriv.tx_pktcount;\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\n} else {\r\nstatus = NDIS_STATUS_INVALID_LENGTH;\r\n}\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_query_rx_packet_received_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != QUERY_OID) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nreturn status;\r\n}\r\nRT_TRACE(_module_mp_, _drv_alert_, ("===> rtl8188eu_oid_rt_pro_query_rx_packet_received_hdl.\n"));\r\nif (poid_par_priv->information_buf_len == sizeof(u32)) {\r\n*(u32 *)poid_par_priv->information_buf = Adapter->mppriv.rx_pktcount;\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nRT_TRACE(_module_mp_, _drv_alert_, ("recv_ok:%d\n", Adapter->mppriv.rx_pktcount));\r\n} else {\r\nstatus = NDIS_STATUS_INVALID_LENGTH;\r\n}\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_query_rx_packet_crc32_error_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != QUERY_OID) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nreturn status;\r\n}\r\nRT_TRACE(_module_mp_, _drv_alert_, ("===> rtl8188eu_oid_rt_pro_query_rx_packet_crc32_error_hdl.\n"));\r\nif (poid_par_priv->information_buf_len == sizeof(u32)) {\r\n*(u32 *)poid_par_priv->information_buf = Adapter->mppriv.rx_crcerrpktcount;\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nRT_TRACE(_module_mp_, _drv_alert_, ("recv_err:%d\n", Adapter->mppriv.rx_crcerrpktcount));\r\n} else {\r\nstatus = NDIS_STATUS_INVALID_LENGTH;\r\n}\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_reset_tx_packet_sent_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != SET_OID) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nreturn status;\r\n}\r\nRT_TRACE(_module_mp_, _drv_alert_, ("===> rtl8188eu_oid_rt_pro_reset_tx_packet_sent_hdl.\n"));\r\nAdapter->mppriv.tx_pktcount = 0;\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_reset_rx_packet_received_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != SET_OID) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nreturn status;\r\n}\r\nif (poid_par_priv->information_buf_len == sizeof(u32)) {\r\nAdapter->mppriv.rx_pktcount = 0;\r\nAdapter->mppriv.rx_crcerrpktcount = 0;\r\n} else {\r\nstatus = NDIS_STATUS_INVALID_LENGTH;\r\n}\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_reset_phy_rx_packet_count_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != SET_OID) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nreturn status;\r\n}\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nResetPhyRxPktCount(Adapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_get_phy_rx_packet_received_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_info_, ("+rtl8188eu_oid_rt_get_phy_rx_packet_received_hdl\n"));\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len != sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\n*(u32 *)poid_par_priv->information_buf = GetPhyRxPktReceived(Adapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("-rtl8188eu_oid_rt_get_phy_rx_packet_received_hdl: recv_ok=%d\n", *(u32 *)poid_par_priv->information_buf));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_get_phy_rx_packet_crc32_error_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_info_, ("+rtl8188eu_oid_rt_get_phy_rx_packet_crc32_error_hdl\n"));\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len != sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\n*(u32 *)poid_par_priv->information_buf = GetPhyRxPktCRC32Error(Adapter);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("-rtl8188eu_oid_rt_get_phy_rx_packet_crc32_error_hdl: recv_err =%d\n",\r\n*(u32 *)poid_par_priv->information_buf));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_continuous_tx_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 bStartTest;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_set_continuous_tx_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nbStartTest = *((u32 *)poid_par_priv->information_buf);\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetContinuousTx(Adapter, (u8)bStartTest);\r\nif (bStartTest) {\r\nstruct mp_priv *pmp_priv = &Adapter->mppriv;\r\nif (pmp_priv->tx.stop == 0) {\r\npmp_priv->tx.stop = 1;\r\nDBG_88E("%s: pkt tx is running...\n", __func__);\r\nrtw_msleep_os(5);\r\n}\r\npmp_priv->tx.stop = 0;\r\npmp_priv->tx.count = 1;\r\nSetPacketTx(Adapter);\r\n}\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_single_carrier_tx_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 bStartTest;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_alert_, ("+rtl8188eu_oid_rt_pro_set_single_carrier_tx_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nbStartTest = *((u32 *)poid_par_priv->information_buf);\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetSingleCarrierTx(Adapter, (u8)bStartTest);\r\nif (bStartTest) {\r\nstruct mp_priv *pmp_priv = &Adapter->mppriv;\r\nif (pmp_priv->tx.stop == 0) {\r\npmp_priv->tx.stop = 1;\r\nDBG_88E("%s: pkt tx is running...\n", __func__);\r\nrtw_msleep_os(5);\r\n}\r\npmp_priv->tx.stop = 0;\r\npmp_priv->tx.count = 1;\r\nSetPacketTx(Adapter);\r\n}\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_carrier_suppression_tx_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 bStartTest;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_set_carrier_suppression_tx_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nbStartTest = *((u32 *)poid_par_priv->information_buf);\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetCarrierSuppressionTx(Adapter, (u8)bStartTest);\r\nif (bStartTest) {\r\nstruct mp_priv *pmp_priv = &Adapter->mppriv;\r\nif (pmp_priv->tx.stop == 0) {\r\npmp_priv->tx.stop = 1;\r\nDBG_88E("%s: pkt tx is running...\n", __func__);\r\nrtw_msleep_os(5);\r\n}\r\npmp_priv->tx.stop = 0;\r\npmp_priv->tx.count = 1;\r\nSetPacketTx(Adapter);\r\n}\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_single_tone_tx_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu32 bStartTest;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_alert_, ("+rtl8188eu_oid_rt_pro_set_single_tone_tx_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nbStartTest = *((u32 *)poid_par_priv->information_buf);\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nSetSingleToneTx(Adapter, (u8)bStartTest);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_modulation_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_trigger_gpio_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\nint status = NDIS_STATUS_SUCCESS;\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nrtw_hal_set_hwreg(Adapter, HW_VAR_TRIGGER_GPIO_0, NULL);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro8711_join_bss_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_read_register_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct mp_rw_reg *RegRWStruct;\r\nu32 offset, width;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("+rtl8188eu_oid_rt_pro_read_register_hdl\n"));\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nRegRWStruct = (struct mp_rw_reg *)poid_par_priv->information_buf;\r\noffset = RegRWStruct->offset;\r\nwidth = RegRWStruct->width;\r\nif (offset > 0xFFF)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nswitch (width) {\r\ncase 1:\r\nRegRWStruct->value = rtw_read8(Adapter, offset);\r\nbreak;\r\ncase 2:\r\nRegRWStruct->value = rtw_read16(Adapter, offset);\r\nbreak;\r\ndefault:\r\nwidth = 4;\r\nRegRWStruct->value = rtw_read32(Adapter, offset);\r\nbreak;\r\n}\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("rtl8188eu_oid_rt_pro_read_register_hdl: offset:0x%04X value:0x%X\n",\r\noffset, RegRWStruct->value));\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n*poid_par_priv->bytes_rw = width;\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_write_register_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct mp_rw_reg *RegRWStruct;\r\nu32 offset, width, value;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *padapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("+rtl8188eu_oid_rt_pro_write_register_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nRegRWStruct = (struct mp_rw_reg *)poid_par_priv->information_buf;\r\noffset = RegRWStruct->offset;\r\nwidth = RegRWStruct->width;\r\nvalue = RegRWStruct->value;\r\nif (offset > 0xFFF)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nswitch (RegRWStruct->width) {\r\ncase 1:\r\nif (value > 0xFF) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nbreak;\r\n}\r\nrtw_write8(padapter, offset, (u8)value);\r\nbreak;\r\ncase 2:\r\nif (value > 0xFFFF) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nbreak;\r\n}\r\nrtw_write16(padapter, offset, (u16)value);\r\nbreak;\r\ncase 4:\r\nrtw_write32(padapter, offset, value);\r\nbreak;\r\ndefault:\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nbreak;\r\n}\r\n_irqlevel_changed_(&oldirql, RAISE);\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("-rtl8188eu_oid_rt_pro_write_register_hdl: offset=0x%08X width=%d value=0x%X\n",\r\noffset, width, value));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_burst_read_register_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_burst_write_register_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_write_txcmd_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_read16_eeprom_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_write16_eeprom_hdl (struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro8711_wi_poll_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro8711_pkt_loss_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_rd_attrib_mem_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_wr_attrib_mem_hdl (struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_rf_intfs_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_poll_rx_status_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_cfg_debug_message_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_data_rate_ex_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\nint status = NDIS_STATUS_SUCCESS;\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+OID_RT_PRO_SET_DATA_RATE_EX\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nif (rtw_setdatarate_cmd(Adapter, poid_par_priv->information_buf) != _SUCCESS)\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_get_thermal_meter_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nu8 thermal = 0;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_get_thermal_meter_hdl\n"));\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nGetThermalMeter(Adapter, &thermal);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n*(u32 *)poid_par_priv->information_buf = (u32)thermal;\r\n*poid_par_priv->bytes_rw = sizeof(u32);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_read_tssi_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_power_tracking_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->information_buf_len < sizeof(u8))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nif (poid_par_priv->type_of_oid == SET_OID) {\r\nu8 enable;\r\nenable = *(u8 *)poid_par_priv->information_buf;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("+rtl8188eu_oid_rt_pro_set_power_tracking_hdl: enable =%d\n", enable));\r\nSetPowerTracking(Adapter, enable);\r\n} else {\r\nGetPowerTracking(Adapter, (u8 *)poid_par_priv->information_buf);\r\n}\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_basic_rate_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_qry_pwrstate_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_pwrstate_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_h2c_set_rate_table_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_h2c_get_rate_table_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_encryption_ctrl_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_add_sta_info_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_dele_sta_info_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_query_dr_variable_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_rx_packet_type_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn NDIS_STATUS_SUCCESS;\r\n}\r\nint rtl8188eu_oid_rt_pro_read_efuse_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct efuse_access_struct *pefuse;\r\nu8 *data;\r\nu16 addr = 0, cnts = 0, max_available_size = 0;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(struct efuse_access_struct))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\npefuse = (struct efuse_access_struct *)poid_par_priv->information_buf;\r\naddr = pefuse->start_addr;\r\ncnts = pefuse->cnts;\r\ndata = pefuse->data;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("+rtl8188eu_oid_rt_pro_read_efuse_hd: buf_len=%d addr=%d cnts=%d\n",\r\npoid_par_priv->information_buf_len, addr, cnts));\r\nEFUSE_GetEfuseDefinition(Adapter, EFUSE_WIFI, TYPE_AVAILABLE_EFUSE_BYTES_TOTAL, (void *)&max_available_size, false);\r\nif ((addr + cnts) > max_available_size) {\r\nRT_TRACE(_module_mp_, _drv_err_, ("!rtl8188eu_oid_rt_pro_read_efuse_hdl: parameter error!\n"));\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\n}\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nif (rtw_efuse_access(Adapter, false, addr, cnts, data) == _FAIL) {\r\nRT_TRACE(_module_mp_, _drv_err_, ("!rtl8188eu_oid_rt_pro_read_efuse_hdl: rtw_efuse_access FAIL!\n"));\r\nstatus = NDIS_STATUS_FAILURE;\r\n} else {\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\n}\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_write_efuse_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct efuse_access_struct *pefuse;\r\nu8 *data;\r\nu16 addr = 0, cnts = 0, max_available_size = 0;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\npefuse = (struct efuse_access_struct *)poid_par_priv->information_buf;\r\naddr = pefuse->start_addr;\r\ncnts = pefuse->cnts;\r\ndata = pefuse->data;\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("+rtl8188eu_oid_rt_pro_write_efuse_hdl: buf_len=%d addr=0x%04x cnts=%d\n",\r\npoid_par_priv->information_buf_len, addr, cnts));\r\nEFUSE_GetEfuseDefinition(Adapter, EFUSE_WIFI, TYPE_AVAILABLE_EFUSE_BYTES_TOTAL, (void *)&max_available_size, false);\r\nif ((addr + cnts) > max_available_size) {\r\nRT_TRACE(_module_mp_, _drv_err_, ("!rtl8188eu_oid_rt_pro_write_efuse_hdl: parameter error"));\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\n}\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nif (rtw_efuse_access(Adapter, true, addr, cnts, data) == _FAIL)\r\nstatus = NDIS_STATUS_FAILURE;\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_rw_efuse_pgpkt_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct pgpkt *ppgpkt;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\n*poid_par_priv->bytes_rw = 0;\r\nif (poid_par_priv->information_buf_len < sizeof(struct pgpkt *))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\nppgpkt = (struct pgpkt *)poid_par_priv->information_buf;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nif (poid_par_priv->type_of_oid == QUERY_OID) {\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("rtl8188eu_oid_rt_pro_rw_efuse_pgpkt_hdl: Read offset=0x%x\n",\\r\nppgpkt->offset));\r\nEfuse_PowerSwitch(Adapter, false, true);\r\nif (Efuse_PgPacketRead(Adapter, ppgpkt->offset, ppgpkt->data, false) == true)\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nelse\r\nstatus = NDIS_STATUS_FAILURE;\r\nEfuse_PowerSwitch(Adapter, false, false);\r\n} else {\r\nRT_TRACE(_module_mp_, _drv_notice_,\r\n("rtl8188eu_oid_rt_pro_rw_efuse_pgpkt_hdl: Write offset=0x%x word_en=0x%x\n",\\r\nppgpkt->offset, ppgpkt->word_en));\r\nEfuse_PowerSwitch(Adapter, true, true);\r\nif (Efuse_PgPacketWrite(Adapter, ppgpkt->offset, ppgpkt->word_en, ppgpkt->data, false) == true)\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nelse\r\nstatus = NDIS_STATUS_FAILURE;\r\nEfuse_PowerSwitch(Adapter, true, false);\r\n}\r\n_irqlevel_changed_(&oldirql, RAISE);\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("-rtl8188eu_oid_rt_pro_rw_efuse_pgpkt_hdl: status=0x%08X\n", status));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_get_efuse_current_size_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu16 size;\r\nu8 ret;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nret = efuse_GetCurrentSize(Adapter, &size);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\nif (ret == _SUCCESS) {\r\n*(u32 *)poid_par_priv->information_buf = size;\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\n} else {\r\nstatus = NDIS_STATUS_FAILURE;\r\n}\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_get_efuse_max_size_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != QUERY_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(u32))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\n*(u32 *)poid_par_priv->information_buf = efuse_GetMaxSize(Adapter);\r\n*poid_par_priv->bytes_rw = poid_par_priv->information_buf_len;\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("-rtl8188eu_oid_rt_get_efuse_max_size_hdl: size=%d status=0x%08X\n",\r\n*(int *)poid_par_priv->information_buf, status));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_efuse_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status;\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_info_, ("+rtl8188eu_oid_rt_pro_efuse_hdl\n"));\r\nif (poid_par_priv->type_of_oid == QUERY_OID)\r\nstatus = rtl8188eu_oid_rt_pro_read_efuse_hdl(poid_par_priv);\r\nelse\r\nstatus = rtl8188eu_oid_rt_pro_write_efuse_hdl(poid_par_priv);\r\nRT_TRACE(_module_mp_, _drv_info_, ("-rtl8188eu_oid_rt_pro_efuse_hdl: status=0x%08X\n", status));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_efuse_map_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu8 *data;\r\nint status = NDIS_STATUS_SUCCESS;\r\nstruct adapter *Adapter = (struct adapter *)(poid_par_priv->adapter_context);\r\nu16 maplen = 0;\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_pro_efuse_map_hdl\n"));\r\nEFUSE_GetEfuseDefinition(Adapter, EFUSE_WIFI, TYPE_EFUSE_MAP_LEN, (void *)&maplen, false);\r\n*poid_par_priv->bytes_rw = 0;\r\nif (poid_par_priv->information_buf_len < maplen)\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\ndata = (u8 *)poid_par_priv->information_buf;\r\n_irqlevel_changed_(&oldirql, LOWER);\r\nif (poid_par_priv->type_of_oid == QUERY_OID) {\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("rtl8188eu_oid_rt_pro_efuse_map_hdl: READ\n"));\r\nif (rtw_efuse_map_read(Adapter, 0, maplen, data) == _SUCCESS) {\r\n*poid_par_priv->bytes_rw = maplen;\r\n} else {\r\nRT_TRACE(_module_mp_, _drv_err_,\r\n("rtl8188eu_oid_rt_pro_efuse_map_hdl: READ fail\n"));\r\nstatus = NDIS_STATUS_FAILURE;\r\n}\r\n} else {\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("rtl8188eu_oid_rt_pro_efuse_map_hdl: WRITE\n"));\r\nif (rtw_efuse_map_write(Adapter, 0, maplen, data) == _SUCCESS) {\r\n*poid_par_priv->bytes_rw = maplen;\r\n} else {\r\nRT_TRACE(_module_mp_, _drv_err_,\r\n("rtl8188eu_oid_rt_pro_efuse_map_hdl: WRITE fail\n"));\r\nstatus = NDIS_STATUS_FAILURE;\r\n}\r\n}\r\n_irqlevel_changed_(&oldirql, RAISE);\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("-rtl8188eu_oid_rt_pro_efuse_map_hdl: status=0x%08X\n", status));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_set_crystal_cap_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_set_rx_packet_type_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nu8 rx_pkt_type;\r\nint status = NDIS_STATUS_SUCCESS;\r\n_func_enter_;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+rtl8188eu_oid_rt_set_rx_packet_type_hdl\n"));\r\nif (poid_par_priv->type_of_oid != SET_OID)\r\nreturn NDIS_STATUS_NOT_ACCEPTED;\r\nif (poid_par_priv->information_buf_len < sizeof(u8))\r\nreturn NDIS_STATUS_INVALID_LENGTH;\r\nrx_pkt_type = *((u8 *)poid_par_priv->information_buf);\r\nRT_TRACE(_module_mp_, _drv_info_, ("rx_pkt_type: %x\n", rx_pkt_type));\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_tx_agc_offset_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_oid_rt_pro_set_pkt_test_mode_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}\r\nint rtl8188eu_mp_ioctl_xmit_packet_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nstruct mp_xmit_parm *pparm;\r\nstruct adapter *padapter;\r\nstruct mp_priv *pmp_priv;\r\nstruct pkt_attrib *pattrib;\r\nRT_TRACE(_module_mp_, _drv_notice_, ("+%s\n", __func__));\r\npparm = (struct mp_xmit_parm *)poid_par_priv->information_buf;\r\npadapter = (struct adapter *)poid_par_priv->adapter_context;\r\npmp_priv = &padapter->mppriv;\r\nif (poid_par_priv->type_of_oid == QUERY_OID) {\r\npparm->enable = !pmp_priv->tx.stop;\r\npparm->count = pmp_priv->tx.sended;\r\n} else {\r\nif (pparm->enable == 0) {\r\npmp_priv->tx.stop = 1;\r\n} else if (pmp_priv->tx.stop == 1) {\r\npmp_priv->tx.stop = 0;\r\npmp_priv->tx.count = pparm->count;\r\npmp_priv->tx.payload = pparm->payload_type;\r\npattrib = &pmp_priv->tx.attrib;\r\npattrib->pktlen = pparm->length;\r\nmemcpy(pattrib->dst, pparm->da, ETH_ALEN);\r\nSetPacketTx(padapter);\r\n} else {\r\nreturn NDIS_STATUS_FAILURE;\r\n}\r\n}\r\nreturn NDIS_STATUS_SUCCESS;\r\n}\r\nint rtl8188eu_oid_rt_set_power_down_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nint status = NDIS_STATUS_SUCCESS;\r\n_func_enter_;\r\nif (poid_par_priv->type_of_oid != SET_OID) {\r\nstatus = NDIS_STATUS_NOT_ACCEPTED;\r\nreturn status;\r\n}\r\nRT_TRACE(_module_mp_, _drv_info_,\r\n("\n ===> Setrtl8188eu_oid_rt_set_power_down_hdl.\n"));\r\n_irqlevel_changed_(&oldirql, LOWER);\r\n_irqlevel_changed_(&oldirql, RAISE);\r\n_func_exit_;\r\nreturn status;\r\n}\r\nint rtl8188eu_oid_rt_get_power_mode_hdl(struct oid_par_priv *poid_par_priv)\r\n{\r\nreturn 0;\r\n}
