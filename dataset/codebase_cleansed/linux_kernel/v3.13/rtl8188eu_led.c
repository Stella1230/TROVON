void SwLedOn(struct adapter *padapter, struct LED_871x *pLed)\r\n{\r\nu8 LedCfg;\r\nif (padapter->bSurpriseRemoved || padapter->bDriverStopped)\r\nreturn;\r\nLedCfg = rtw_read8(padapter, REG_LEDCFG2);\r\nswitch (pLed->LedPin) {\r\ncase LED_PIN_LED0:\r\nrtw_write8(padapter, REG_LEDCFG2, (LedCfg&0xf0)|BIT5|BIT6);\r\nbreak;\r\ncase LED_PIN_LED1:\r\nrtw_write8(padapter, REG_LEDCFG2, (LedCfg&0x0f)|BIT5);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\npLed->bLedOn = true;\r\n}\r\nvoid SwLedOff(struct adapter *padapter, struct LED_871x *pLed)\r\n{\r\nu8 LedCfg;\r\nstruct hal_data_8188e *pHalData = GET_HAL_DATA(padapter);\r\nif (padapter->bSurpriseRemoved || padapter->bDriverStopped)\r\ngoto exit;\r\nLedCfg = rtw_read8(padapter, REG_LEDCFG2);\r\nswitch (pLed->LedPin) {\r\ncase LED_PIN_LED0:\r\nif (pHalData->bLedOpenDrain) {\r\nLedCfg &= 0x90;\r\nrtw_write8(padapter, REG_LEDCFG2, (LedCfg|BIT3));\r\nLedCfg = rtw_read8(padapter, REG_MAC_PINMUX_CFG);\r\nLedCfg &= 0xFE;\r\nrtw_write8(padapter, REG_MAC_PINMUX_CFG, LedCfg);\r\n} else {\r\nrtw_write8(padapter, REG_LEDCFG2, (LedCfg|BIT3|BIT5|BIT6));\r\n}\r\nbreak;\r\ncase LED_PIN_LED1:\r\nLedCfg &= 0x0f;\r\nrtw_write8(padapter, REG_LEDCFG2, (LedCfg|BIT3));\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nexit:\r\npLed->bLedOn = false;\r\n}\r\nvoid rtl8188eu_InitSwLeds(struct adapter *padapter)\r\n{\r\nstruct led_priv *pledpriv = &(padapter->ledpriv);\r\npledpriv->LedControlHandler = LedControl8188eu;\r\nInitLed871x(padapter, &(pledpriv->SwLed0), LED_PIN_LED0);\r\nInitLed871x(padapter, &(pledpriv->SwLed1), LED_PIN_LED1);\r\n}\r\nvoid rtl8188eu_DeInitSwLeds(struct adapter *padapter)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nDeInitLed871x(&(ledpriv->SwLed0));\r\nDeInitLed871x(&(ledpriv->SwLed1));\r\n}
