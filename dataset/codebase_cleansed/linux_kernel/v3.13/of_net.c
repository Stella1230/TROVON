int of_get_phy_mode(struct device_node *np)\r\n{\r\nconst char *pm;\r\nint err, i;\r\nerr = of_property_read_string(np, "phy-mode", &pm);\r\nif (err < 0)\r\nreturn err;\r\nfor (i = 0; i < ARRAY_SIZE(phy_modes); i++)\r\nif (!strcasecmp(pm, phy_modes[i]))\r\nreturn i;\r\nreturn -ENODEV;\r\n}\r\nconst void *of_get_mac_address(struct device_node *np)\r\n{\r\nstruct property *pp;\r\npp = of_find_property(np, "mac-address", NULL);\r\nif (pp && (pp->length == 6) && is_valid_ether_addr(pp->value))\r\nreturn pp->value;\r\npp = of_find_property(np, "local-mac-address", NULL);\r\nif (pp && (pp->length == 6) && is_valid_ether_addr(pp->value))\r\nreturn pp->value;\r\npp = of_find_property(np, "address", NULL);\r\nif (pp && (pp->length == 6) && is_valid_ether_addr(pp->value))\r\nreturn pp->value;\r\nreturn NULL;\r\n}
