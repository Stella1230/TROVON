static bool wm1811_readable_register(struct device *dev, unsigned int reg)
{
switch (reg) {
case WM8994_SOFTWARE_RESET:
case WM8994_POWER_MANAGEMENT_1:
case WM8994_POWER_MANAGEMENT_2:
case WM8994_POWER_MANAGEMENT_3:
case WM8994_POWER_MANAGEMENT_4:
case WM8994_POWER_MANAGEMENT_5:
case WM8994_POWER_MANAGEMENT_6:
case WM8994_INPUT_MIXER_1:
case WM8994_LEFT_LINE_INPUT_1_2_VOLUME:
case WM8994_LEFT_LINE_INPUT_3_4_VOLUME:
case WM8994_RIGHT_LINE_INPUT_1_2_VOLUME:
case WM8994_RIGHT_LINE_INPUT_3_4_VOLUME:
case WM8994_LEFT_OUTPUT_VOLUME:
case WM8994_RIGHT_OUTPUT_VOLUME:
case WM8994_LINE_OUTPUTS_VOLUME:
case WM8994_HPOUT2_VOLUME:
case WM8994_LEFT_OPGA_VOLUME:
case WM8994_RIGHT_OPGA_VOLUME:
case WM8994_SPKMIXL_ATTENUATION:
case WM8994_SPKMIXR_ATTENUATION:
case WM8994_SPKOUT_MIXERS:
case WM8994_CLASSD:
case WM8994_SPEAKER_VOLUME_LEFT:
case WM8994_SPEAKER_VOLUME_RIGHT:
case WM8994_INPUT_MIXER_2:
case WM8994_INPUT_MIXER_3:
case WM8994_INPUT_MIXER_4:
case WM8994_INPUT_MIXER_5:
case WM8994_INPUT_MIXER_6:
case WM8994_OUTPUT_MIXER_1:
case WM8994_OUTPUT_MIXER_2:
case WM8994_OUTPUT_MIXER_3:
case WM8994_OUTPUT_MIXER_4:
case WM8994_OUTPUT_MIXER_5:
case WM8994_OUTPUT_MIXER_6:
case WM8994_HPOUT2_MIXER:
case WM8994_LINE_MIXER_1:
case WM8994_LINE_MIXER_2:
case WM8994_SPEAKER_MIXER:
case WM8994_ADDITIONAL_CONTROL:
case WM8994_ANTIPOP_1:
case WM8994_ANTIPOP_2:
case WM8994_LDO_1:
case WM8994_LDO_2:
case WM8958_MICBIAS1:
case WM8958_MICBIAS2:
case WM8994_CHARGE_PUMP_1:
case WM8958_CHARGE_PUMP_2:
case WM8994_CLASS_W_1:
case WM8994_DC_SERVO_1:
case WM8994_DC_SERVO_2:
case WM8994_DC_SERVO_READBACK:
case WM8994_DC_SERVO_4:
case WM8994_DC_SERVO_4E:
case WM8994_ANALOGUE_HP_1:
case WM8958_MIC_DETECT_1:
case WM8958_MIC_DETECT_2:
case WM8958_MIC_DETECT_3:
case WM8994_CHIP_REVISION:
case WM8994_CONTROL_INTERFACE:
case WM8994_AIF1_CLOCKING_1:
case WM8994_AIF1_CLOCKING_2:
case WM8994_AIF2_CLOCKING_1:
case WM8994_AIF2_CLOCKING_2:
case WM8994_CLOCKING_1:
case WM8994_CLOCKING_2:
case WM8994_AIF1_RATE:
case WM8994_AIF2_RATE:
case WM8994_RATE_STATUS:
case WM8994_FLL1_CONTROL_1:
case WM8994_FLL1_CONTROL_2:
case WM8994_FLL1_CONTROL_3:
case WM8994_FLL1_CONTROL_4:
case WM8994_FLL1_CONTROL_5:
case WM8958_FLL1_EFS_1:
case WM8958_FLL1_EFS_2:
case WM8994_FLL2_CONTROL_1:
case WM8994_FLL2_CONTROL_2:
case WM8994_FLL2_CONTROL_3:
case WM8994_FLL2_CONTROL_4:
case WM8994_FLL2_CONTROL_5:
case WM8958_FLL2_EFS_1:
case WM8958_FLL2_EFS_2:
case WM8994_AIF1_CONTROL_1:
case WM8994_AIF1_CONTROL_2:
case WM8994_AIF1_MASTER_SLAVE:
case WM8994_AIF1_BCLK:
case WM8994_AIF1ADC_LRCLK:
case WM8994_AIF1DAC_LRCLK:
case WM8994_AIF1DAC_DATA:
case WM8994_AIF1ADC_DATA:
case WM8994_AIF2_CONTROL_1:
case WM8994_AIF2_CONTROL_2:
case WM8994_AIF2_MASTER_SLAVE:
case WM8994_AIF2_BCLK:
case WM8994_AIF2ADC_LRCLK:
case WM8994_AIF2DAC_LRCLK:
case WM8994_AIF2DAC_DATA:
case WM8994_AIF2ADC_DATA:
case WM1811_AIF2TX_CONTROL:
case WM8958_AIF3_CONTROL_1:
case WM8958_AIF3_CONTROL_2:
case WM8958_AIF3DAC_DATA:
case WM8958_AIF3ADC_DATA:
case WM8994_AIF1_ADC1_LEFT_VOLUME:
case WM8994_AIF1_ADC1_RIGHT_VOLUME:
case WM8994_AIF1_DAC1_LEFT_VOLUME:
case WM8994_AIF1_DAC1_RIGHT_VOLUME:
case WM8994_AIF1_ADC1_FILTERS:
case WM8994_AIF1_ADC2_FILTERS:
case WM8994_AIF1_DAC1_FILTERS_1:
case WM8994_AIF1_DAC1_FILTERS_2:
case WM8994_AIF1_DAC2_FILTERS_1:
case WM8994_AIF1_DAC2_FILTERS_2:
case WM8958_AIF1_DAC1_NOISE_GATE:
case WM8958_AIF1_DAC2_NOISE_GATE:
case WM8994_AIF1_DRC1_1:
case WM8994_AIF1_DRC1_2:
case WM8994_AIF1_DRC1_3:
case WM8994_AIF1_DRC1_4:
case WM8994_AIF1_DRC1_5:
case WM8994_AIF1_DRC2_1:
case WM8994_AIF1_DRC2_2:
case WM8994_AIF1_DRC2_3:
case WM8994_AIF1_DRC2_4:
case WM8994_AIF1_DRC2_5:
case WM8994_AIF1_DAC1_EQ_GAINS_1:
case WM8994_AIF1_DAC1_EQ_GAINS_2:
case WM8994_AIF1_DAC1_EQ_BAND_1_A:
case WM8994_AIF1_DAC1_EQ_BAND_1_B:
case WM8994_AIF1_DAC1_EQ_BAND_1_PG:
case WM8994_AIF1_DAC1_EQ_BAND_2_A:
case WM8994_AIF1_DAC1_EQ_BAND_2_B:
case WM8994_AIF1_DAC1_EQ_BAND_2_C:
case WM8994_AIF1_DAC1_EQ_BAND_2_PG:
case WM8994_AIF1_DAC1_EQ_BAND_3_A:
case WM8994_AIF1_DAC1_EQ_BAND_3_B:
case WM8994_AIF1_DAC1_EQ_BAND_3_C:
case WM8994_AIF1_DAC1_EQ_BAND_3_PG:
case WM8994_AIF1_DAC1_EQ_BAND_4_A:
case WM8994_AIF1_DAC1_EQ_BAND_4_B:
case WM8994_AIF1_DAC1_EQ_BAND_4_C:
case WM8994_AIF1_DAC1_EQ_BAND_4_PG:
case WM8994_AIF1_DAC1_EQ_BAND_5_A:
case WM8994_AIF1_DAC1_EQ_BAND_5_B:
case WM8994_AIF1_DAC1_EQ_BAND_5_PG:
case WM8994_AIF1_DAC1_EQ_BAND_1_C:
case WM8994_AIF1_DAC2_EQ_GAINS_1:
case WM8994_AIF1_DAC2_EQ_GAINS_2:
case WM8994_AIF1_DAC2_EQ_BAND_1_A:
case WM8994_AIF1_DAC2_EQ_BAND_1_B:
case WM8994_AIF1_DAC2_EQ_BAND_1_PG:
case WM8994_AIF1_DAC2_EQ_BAND_2_A:
case WM8994_AIF1_DAC2_EQ_BAND_2_B:
case WM8994_AIF1_DAC2_EQ_BAND_2_C:
case WM8994_AIF1_DAC2_EQ_BAND_2_PG:
case WM8994_AIF1_DAC2_EQ_BAND_3_A:
case WM8994_AIF1_DAC2_EQ_BAND_3_B:
case WM8994_AIF1_DAC2_EQ_BAND_3_C:
case WM8994_AIF1_DAC2_EQ_BAND_3_PG:
case WM8994_AIF1_DAC2_EQ_BAND_4_A:
case WM8994_AIF1_DAC2_EQ_BAND_4_B:
case WM8994_AIF1_DAC2_EQ_BAND_4_C:
case WM8994_AIF1_DAC2_EQ_BAND_4_PG:
case WM8994_AIF1_DAC2_EQ_BAND_5_A:
case WM8994_AIF1_DAC2_EQ_BAND_5_B:
case WM8994_AIF1_DAC2_EQ_BAND_5_PG:
case WM8994_AIF1_DAC2_EQ_BAND_1_C:
case WM8994_AIF2_ADC_LEFT_VOLUME:
case WM8994_AIF2_ADC_RIGHT_VOLUME:
case WM8994_AIF2_DAC_LEFT_VOLUME:
case WM8994_AIF2_DAC_RIGHT_VOLUME:
case WM8994_AIF2_ADC_FILTERS:
case WM8994_AIF2_DAC_FILTERS_1:
case WM8994_AIF2_DAC_FILTERS_2:
case WM8958_AIF2_DAC_NOISE_GATE:
case WM8994_AIF2_DRC_1:
case WM8994_AIF2_DRC_2:
case WM8994_AIF2_DRC_3:
case WM8994_AIF2_DRC_4:
case WM8994_AIF2_DRC_5:
case WM8994_AIF2_EQ_GAINS_1:
case WM8994_AIF2_EQ_GAINS_2:
case WM8994_AIF2_EQ_BAND_1_A:
case WM8994_AIF2_EQ_BAND_1_B:
case WM8994_AIF2_EQ_BAND_1_PG:
case WM8994_AIF2_EQ_BAND_2_A:
case WM8994_AIF2_EQ_BAND_2_B:
case WM8994_AIF2_EQ_BAND_2_C:
case WM8994_AIF2_EQ_BAND_2_PG:
case WM8994_AIF2_EQ_BAND_3_A:
case WM8994_AIF2_EQ_BAND_3_B:
case WM8994_AIF2_EQ_BAND_3_C:
case WM8994_AIF2_EQ_BAND_3_PG:
case WM8994_AIF2_EQ_BAND_4_A:
case WM8994_AIF2_EQ_BAND_4_B:
case WM8994_AIF2_EQ_BAND_4_C:
case WM8994_AIF2_EQ_BAND_4_PG:
case WM8994_AIF2_EQ_BAND_5_A:
case WM8994_AIF2_EQ_BAND_5_B:
case WM8994_AIF2_EQ_BAND_5_PG:
case WM8994_AIF2_EQ_BAND_1_C:
case WM8994_DAC1_MIXER_VOLUMES:
case WM8994_DAC1_LEFT_MIXER_ROUTING:
case WM8994_DAC1_RIGHT_MIXER_ROUTING:
case WM8994_DAC2_MIXER_VOLUMES:
case WM8994_DAC2_LEFT_MIXER_ROUTING:
case WM8994_DAC2_RIGHT_MIXER_ROUTING:
case WM8994_AIF1_ADC1_LEFT_MIXER_ROUTING:
case WM8994_AIF1_ADC1_RIGHT_MIXER_ROUTING:
case WM8994_AIF1_ADC2_LEFT_MIXER_ROUTING:
case WM8994_AIF1_ADC2_RIGHT_MIXER_ROUTING:
case WM8994_DAC1_LEFT_VOLUME:
case WM8994_DAC1_RIGHT_VOLUME:
case WM8994_DAC2_LEFT_VOLUME:
case WM8994_DAC2_RIGHT_VOLUME:
case WM8994_DAC_SOFTMUTE:
case WM8994_OVERSAMPLING:
case WM8994_SIDETONE:
case WM8994_GPIO_1:
case WM8994_GPIO_2:
case WM8994_GPIO_3:
case WM8994_GPIO_4:
case WM8994_GPIO_5:
case WM8994_GPIO_6:
case WM8994_GPIO_8:
case WM8994_GPIO_9:
case WM8994_GPIO_10:
case WM8994_GPIO_11:
case WM8994_PULL_CONTROL_1:
case WM8994_PULL_CONTROL_2:
case WM8994_INTERRUPT_STATUS_1:
case WM8994_INTERRUPT_STATUS_2:
case WM8994_INTERRUPT_RAW_STATUS_2:
case WM8994_INTERRUPT_STATUS_1_MASK:
case WM8994_INTERRUPT_STATUS_2_MASK:
case WM8994_INTERRUPT_CONTROL:
case WM8994_IRQ_DEBOUNCE:
return true;
default:
return false;
}
}
static bool wm8994_readable_register(struct device *dev, unsigned int reg)
{
switch (reg) {
case WM8994_DC_SERVO_READBACK:
case WM8994_MICBIAS:
case WM8994_WRITE_SEQUENCER_CTRL_1:
case WM8994_WRITE_SEQUENCER_CTRL_2:
case WM8994_AIF1_ADC2_LEFT_VOLUME:
case WM8994_AIF1_ADC2_RIGHT_VOLUME:
case WM8994_AIF1_DAC2_LEFT_VOLUME:
case WM8994_AIF1_DAC2_RIGHT_VOLUME:
case WM8994_AIF1_ADC2_FILTERS:
case WM8994_AIF1_DAC2_FILTERS_1:
case WM8994_AIF1_DAC2_FILTERS_2:
case WM8958_AIF1_DAC2_NOISE_GATE:
case WM8994_AIF1_DRC2_1:
case WM8994_AIF1_DRC2_2:
case WM8994_AIF1_DRC2_3:
case WM8994_AIF1_DRC2_4:
case WM8994_AIF1_DRC2_5:
case WM8994_AIF1_DAC2_EQ_GAINS_1:
case WM8994_AIF1_DAC2_EQ_GAINS_2:
case WM8994_AIF1_DAC2_EQ_BAND_1_A:
case WM8994_AIF1_DAC2_EQ_BAND_1_B:
case WM8994_AIF1_DAC2_EQ_BAND_1_PG:
case WM8994_AIF1_DAC2_EQ_BAND_2_A:
case WM8994_AIF1_DAC2_EQ_BAND_2_B:
case WM8994_AIF1_DAC2_EQ_BAND_2_C:
case WM8994_AIF1_DAC2_EQ_BAND_2_PG:
case WM8994_AIF1_DAC2_EQ_BAND_3_A:
case WM8994_AIF1_DAC2_EQ_BAND_3_B:
case WM8994_AIF1_DAC2_EQ_BAND_3_C:
case WM8994_AIF1_DAC2_EQ_BAND_3_PG:
case WM8994_AIF1_DAC2_EQ_BAND_4_A:
case WM8994_AIF1_DAC2_EQ_BAND_4_B:
case WM8994_AIF1_DAC2_EQ_BAND_4_C:
case WM8994_AIF1_DAC2_EQ_BAND_4_PG:
case WM8994_AIF1_DAC2_EQ_BAND_5_A:
case WM8994_AIF1_DAC2_EQ_BAND_5_B:
case WM8994_AIF1_DAC2_EQ_BAND_5_PG:
case WM8994_AIF1_DAC2_EQ_BAND_1_C:
case WM8994_DAC2_MIXER_VOLUMES:
case WM8994_DAC2_LEFT_MIXER_ROUTING:
case WM8994_DAC2_RIGHT_MIXER_ROUTING:
case WM8994_AIF1_ADC2_LEFT_MIXER_ROUTING:
case WM8994_AIF1_ADC2_RIGHT_MIXER_ROUTING:
case WM8994_DAC2_LEFT_VOLUME:
case WM8994_DAC2_RIGHT_VOLUME:
return true;
default:
return wm1811_readable_register(dev, reg);
}
}
static bool wm8958_readable_register(struct device *dev, unsigned int reg)
{
switch (reg) {
case WM8958_DSP2_PROGRAM:
case WM8958_DSP2_CONFIG:
case WM8958_DSP2_MAGICNUM:
case WM8958_DSP2_RELEASEYEAR:
case WM8958_DSP2_RELEASEMONTHDAY:
case WM8958_DSP2_RELEASETIME:
case WM8958_DSP2_VERMAJMIN:
case WM8958_DSP2_VERBUILD:
case WM8958_DSP2_TESTREG:
case WM8958_DSP2_XORREG:
case WM8958_DSP2_SHIFTMAXX:
case WM8958_DSP2_SHIFTMAXY:
case WM8958_DSP2_SHIFTMAXZ:
case WM8958_DSP2_SHIFTMAXEXTLO:
case WM8958_DSP2_AESSELECT:
case WM8958_DSP2_EXECCONTROL:
case WM8958_DSP2_SAMPLEBREAK:
case WM8958_DSP2_COUNTBREAK:
case WM8958_DSP2_INTSTATUS:
case WM8958_DSP2_EVENTSTATUS:
case WM8958_DSP2_INTMASK:
case WM8958_DSP2_CONFIGDWIDTH:
case WM8958_DSP2_CONFIGINSTR:
case WM8958_DSP2_CONFIGDMEM:
case WM8958_DSP2_CONFIGDELAYS:
case WM8958_DSP2_CONFIGNUMIO:
case WM8958_DSP2_CONFIGEXTDEPTH:
case WM8958_DSP2_CONFIGMULTIPLIER:
case WM8958_DSP2_CONFIGCTRLDWIDTH:
case WM8958_DSP2_CONFIGPIPELINE:
case WM8958_DSP2_SHIFTMAXEXTHI:
case WM8958_DSP2_SWVERSIONREG:
case WM8958_DSP2_CONFIGXMEM:
case WM8958_DSP2_CONFIGYMEM:
case WM8958_DSP2_CONFIGZMEM:
case WM8958_FW_BUILD_1:
case WM8958_FW_BUILD_0:
case WM8958_FW_ID_1:
case WM8958_FW_ID_0:
case WM8958_FW_MAJOR_1:
case WM8958_FW_MAJOR_0:
case WM8958_FW_MINOR_1:
case WM8958_FW_MINOR_0:
case WM8958_FW_PATCH_1:
case WM8958_FW_PATCH_0:
case WM8958_MBC_BAND_1_K_1:
case WM8958_MBC_BAND_1_K_2:
case WM8958_MBC_BAND_1_N1_1:
case WM8958_MBC_BAND_1_N1_2:
case WM8958_MBC_BAND_1_N2_1:
case WM8958_MBC_BAND_1_N2_2:
case WM8958_MBC_BAND_1_N3_1:
case WM8958_MBC_BAND_1_N3_2:
case WM8958_MBC_BAND_1_N4_1:
case WM8958_MBC_BAND_1_N4_2:
case WM8958_MBC_BAND_1_N5_1:
case WM8958_MBC_BAND_1_N5_2:
case WM8958_MBC_BAND_1_X1_1:
case WM8958_MBC_BAND_1_X1_2:
case WM8958_MBC_BAND_1_X2_1:
case WM8958_MBC_BAND_1_X2_2:
case WM8958_MBC_BAND_1_X3_1:
case WM8958_MBC_BAND_1_X3_2:
case WM8958_MBC_BAND_1_ATTACK_1:
case WM8958_MBC_BAND_1_ATTACK_2:
case WM8958_MBC_BAND_1_DECAY_1:
case WM8958_MBC_BAND_1_DECAY_2:
case WM8958_MBC_BAND_2_K_1:
case WM8958_MBC_BAND_2_K_2:
case WM8958_MBC_BAND_2_N1_1:
case WM8958_MBC_BAND_2_N1_2:
case WM8958_MBC_BAND_2_N2_1:
case WM8958_MBC_BAND_2_N2_2:
case WM8958_MBC_BAND_2_N3_1:
case WM8958_MBC_BAND_2_N3_2:
case WM8958_MBC_BAND_2_N4_1:
case WM8958_MBC_BAND_2_N4_2:
case WM8958_MBC_BAND_2_N5_1:
case WM8958_MBC_BAND_2_N5_2:
case WM8958_MBC_BAND_2_X1_1:
case WM8958_MBC_BAND_2_X1_2:
case WM8958_MBC_BAND_2_X2_1:
case WM8958_MBC_BAND_2_X2_2:
case WM8958_MBC_BAND_2_X3_1:
case WM8958_MBC_BAND_2_X3_2:
case WM8958_MBC_BAND_2_ATTACK_1:
case WM8958_MBC_BAND_2_ATTACK_2:
case WM8958_MBC_BAND_2_DECAY_1:
case WM8958_MBC_BAND_2_DECAY_2:
case WM8958_MBC_B2_PG2_1:
case WM8958_MBC_B2_PG2_2:
case WM8958_MBC_B1_PG2_1:
case WM8958_MBC_B1_PG2_2:
case WM8958_MBC_CROSSOVER_1:
case WM8958_MBC_CROSSOVER_2:
case WM8958_MBC_HPF_1:
case WM8958_MBC_HPF_2:
case WM8958_MBC_LPF_1:
case WM8958_MBC_LPF_2:
case WM8958_MBC_RMS_LIMIT_1:
case WM8958_MBC_RMS_LIMIT_2:
return true;
default:
return wm8994_readable_register(dev, reg);
}
}
static bool wm8994_volatile_register(struct device *dev, unsigned int reg)
{
switch (reg) {
case WM8994_SOFTWARE_RESET:
case WM8994_DC_SERVO_1:
case WM8994_DC_SERVO_READBACK:
case WM8994_RATE_STATUS:
case WM8958_MIC_DETECT_3:
case WM8994_DC_SERVO_4E:
case WM8994_INTERRUPT_STATUS_1:
case WM8994_INTERRUPT_STATUS_2:
return true;
default:
return false;
}
}
static bool wm1811_volatile_register(struct device *dev, unsigned int reg)
{
struct wm8994 *wm8994 = dev_get_drvdata(dev);
switch (reg) {
case WM8994_GPIO_6:
if (wm8994->cust_id > 1 || wm8994->revision > 1)
return true;
else
return false;
default:
return wm8994_volatile_register(dev, reg);
}
}
static bool wm8958_volatile_register(struct device *dev, unsigned int reg)
{
switch (reg) {
case WM8958_DSP2_MAGICNUM:
case WM8958_DSP2_RELEASEYEAR:
case WM8958_DSP2_RELEASEMONTHDAY:
case WM8958_DSP2_RELEASETIME:
case WM8958_DSP2_VERMAJMIN:
case WM8958_DSP2_VERBUILD:
case WM8958_DSP2_EXECCONTROL:
case WM8958_DSP2_SWVERSIONREG:
case WM8958_DSP2_CONFIGXMEM:
case WM8958_DSP2_CONFIGYMEM:
case WM8958_DSP2_CONFIGZMEM:
case WM8958_FW_BUILD_1:
case WM8958_FW_BUILD_0:
case WM8958_FW_ID_1:
case WM8958_FW_ID_0:
case WM8958_FW_MAJOR_1:
case WM8958_FW_MAJOR_0:
case WM8958_FW_MINOR_1:
case WM8958_FW_MINOR_0:
case WM8958_FW_PATCH_1:
case WM8958_FW_PATCH_0:
return true;
default:
return wm8994_volatile_register(dev, reg);
}
}
