static int fsi_bus_match(struct device *dev, struct device_driver *drv)\r\n{\r\nstruct fsi_device *fsi_dev = to_fsi_dev(dev);\r\nstruct fsi_driver *fsi_drv = to_fsi_drv(drv);\r\nconst struct fsi_device_id *id;\r\nif (!fsi_drv->id_table)\r\nreturn 0;\r\nfor (id = fsi_drv->id_table; id->engine_type; id++) {\r\nif (id->engine_type != fsi_dev->engine_type)\r\ncontinue;\r\nif (id->version == FSI_VERSION_ANY ||\r\nid->version == fsi_dev->version)\r\nreturn 1;\r\n}\r\nreturn 0;\r\n}\r\nstatic int fsi_init(void)\r\n{\r\nreturn bus_register(&fsi_bus_type);\r\n}\r\nstatic void fsi_exit(void)\r\n{\r\nbus_unregister(&fsi_bus_type);\r\n}
