acpi_status acpi_get_type(acpi_handle handle, acpi_object_type *ret_type)\r\n{\r\nstruct acpi_namespace_node *node;\r\nacpi_status status;\r\nif (!ret_type) {\r\nreturn (AE_BAD_PARAMETER);\r\n}\r\nif (handle == ACPI_ROOT_OBJECT) {\r\n*ret_type = ACPI_TYPE_ANY;\r\nreturn (AE_OK);\r\n}\r\nstatus = acpi_ut_acquire_mutex(ACPI_MTX_NAMESPACE);\r\nif (ACPI_FAILURE(status)) {\r\nreturn (status);\r\n}\r\nnode = acpi_ns_validate_handle(handle);\r\nif (!node) {\r\n(void)acpi_ut_release_mutex(ACPI_MTX_NAMESPACE);\r\nreturn (AE_BAD_PARAMETER);\r\n}\r\n*ret_type = node->type;\r\nstatus = acpi_ut_release_mutex(ACPI_MTX_NAMESPACE);\r\nreturn (status);\r\n}\r\nacpi_status acpi_get_parent(acpi_handle handle, acpi_handle *ret_handle)\r\n{\r\nstruct acpi_namespace_node *node;\r\nstruct acpi_namespace_node *parent_node;\r\nacpi_status status;\r\nif (!ret_handle) {\r\nreturn (AE_BAD_PARAMETER);\r\n}\r\nif (handle == ACPI_ROOT_OBJECT) {\r\nreturn (AE_NULL_ENTRY);\r\n}\r\nstatus = acpi_ut_acquire_mutex(ACPI_MTX_NAMESPACE);\r\nif (ACPI_FAILURE(status)) {\r\nreturn (status);\r\n}\r\nnode = acpi_ns_validate_handle(handle);\r\nif (!node) {\r\nstatus = AE_BAD_PARAMETER;\r\ngoto unlock_and_exit;\r\n}\r\nparent_node = node->parent;\r\n*ret_handle = ACPI_CAST_PTR(acpi_handle, parent_node);\r\nif (!parent_node) {\r\nstatus = AE_NULL_ENTRY;\r\n}\r\nunlock_and_exit:\r\n(void)acpi_ut_release_mutex(ACPI_MTX_NAMESPACE);\r\nreturn (status);\r\n}\r\nacpi_status\r\nacpi_get_next_object(acpi_object_type type,\r\nacpi_handle parent,\r\nacpi_handle child, acpi_handle *ret_handle)\r\n{\r\nacpi_status status;\r\nstruct acpi_namespace_node *node;\r\nstruct acpi_namespace_node *parent_node = NULL;\r\nstruct acpi_namespace_node *child_node = NULL;\r\nif (type > ACPI_TYPE_EXTERNAL_MAX) {\r\nreturn (AE_BAD_PARAMETER);\r\n}\r\nstatus = acpi_ut_acquire_mutex(ACPI_MTX_NAMESPACE);\r\nif (ACPI_FAILURE(status)) {\r\nreturn (status);\r\n}\r\nif (!child) {\r\nparent_node = acpi_ns_validate_handle(parent);\r\nif (!parent_node) {\r\nstatus = AE_BAD_PARAMETER;\r\ngoto unlock_and_exit;\r\n}\r\n} else {\r\nchild_node = acpi_ns_validate_handle(child);\r\nif (!child_node) {\r\nstatus = AE_BAD_PARAMETER;\r\ngoto unlock_and_exit;\r\n}\r\n}\r\nnode = acpi_ns_get_next_node_typed(type, parent_node, child_node);\r\nif (!node) {\r\nstatus = AE_NOT_FOUND;\r\ngoto unlock_and_exit;\r\n}\r\nif (ret_handle) {\r\n*ret_handle = ACPI_CAST_PTR(acpi_handle, node);\r\n}\r\nunlock_and_exit:\r\n(void)acpi_ut_release_mutex(ACPI_MTX_NAMESPACE);\r\nreturn (status);\r\n}
