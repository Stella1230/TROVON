static int act8945a_pmic_probe(struct platform_device *pdev)\r\n{\r\nstruct regulator_config config = { };\r\nconst struct regulator_desc *regulators;\r\nstruct regulator_dev *rdev;\r\nint i, num_regulators;\r\nbool voltage_select;\r\nvoltage_select = of_property_read_bool(pdev->dev.parent->of_node,\r\n"active-semi,vsel-high");\r\nif (voltage_select) {\r\nregulators = act8945a_alt_regulators;\r\nnum_regulators = ARRAY_SIZE(act8945a_alt_regulators);\r\n} else {\r\nregulators = act8945a_regulators;\r\nnum_regulators = ARRAY_SIZE(act8945a_regulators);\r\n}\r\nconfig.dev = &pdev->dev;\r\nconfig.dev->of_node = pdev->dev.parent->of_node;\r\nfor (i = 0; i < num_regulators; i++) {\r\nrdev = devm_regulator_register(&pdev->dev, &regulators[i], &config);\r\nif (IS_ERR(rdev)) {\r\ndev_err(&pdev->dev,\r\n"failed to register %s regulator\n",\r\nregulators[i].name);\r\nreturn PTR_ERR(rdev);\r\n}\r\n}\r\nreturn 0;\r\n}
