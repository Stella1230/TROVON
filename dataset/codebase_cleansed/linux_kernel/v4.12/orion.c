static u32 __init mv88f5181_get_tclk_freq(void __iomem *sar)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F5181_TCLK_FREQ) &\r\nSAR_MV88F5181_TCLK_FREQ_MASK;\r\nif (opt == 0)\r\nreturn 133333333;\r\nelse if (opt == 1)\r\nreturn 150000000;\r\nelse if (opt == 2)\r\nreturn 166666667;\r\nelse\r\nreturn 0;\r\n}\r\nstatic u32 __init mv88f5181_get_cpu_freq(void __iomem *sar)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F5181_CPU_FREQ) &\r\nSAR_MV88F5181_CPU_FREQ_MASK;\r\nif (opt == 0)\r\nreturn 333333333;\r\nelse if (opt == 1 || opt == 2)\r\nreturn 400000000;\r\nelse if (opt == 3)\r\nreturn 500000000;\r\nelse\r\nreturn 0;\r\n}\r\nstatic void __init mv88f5181_get_clk_ratio(void __iomem *sar, int id,\r\nint *mult, int *div)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F5181_CPU_FREQ) &\r\nSAR_MV88F5181_CPU_FREQ_MASK;\r\nif (opt == 0 || opt == 1) {\r\n*mult = 1;\r\n*div = 2;\r\n} else if (opt == 2 || opt == 3) {\r\n*mult = 1;\r\n*div = 3;\r\n} else {\r\n*mult = 0;\r\n*div = 1;\r\n}\r\n}\r\nstatic void __init mv88f5181_clk_init(struct device_node *np)\r\n{\r\nreturn mvebu_coreclk_setup(np, &mv88f5181_coreclks);\r\n}\r\nstatic u32 __init mv88f5182_get_tclk_freq(void __iomem *sar)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F5182_TCLK_FREQ) &\r\nSAR_MV88F5182_TCLK_FREQ_MASK;\r\nif (opt == 1)\r\nreturn 150000000;\r\nelse if (opt == 2)\r\nreturn 166666667;\r\nelse\r\nreturn 0;\r\n}\r\nstatic u32 __init mv88f5182_get_cpu_freq(void __iomem *sar)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F5182_CPU_FREQ) &\r\nSAR_MV88F5182_CPU_FREQ_MASK;\r\nif (opt == 0)\r\nreturn 333333333;\r\nelse if (opt == 1 || opt == 2)\r\nreturn 400000000;\r\nelse if (opt == 3)\r\nreturn 500000000;\r\nelse\r\nreturn 0;\r\n}\r\nstatic void __init mv88f5182_get_clk_ratio(void __iomem *sar, int id,\r\nint *mult, int *div)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F5182_CPU_FREQ) &\r\nSAR_MV88F5182_CPU_FREQ_MASK;\r\nif (opt == 0 || opt == 1) {\r\n*mult = 1;\r\n*div = 2;\r\n} else if (opt == 2 || opt == 3) {\r\n*mult = 1;\r\n*div = 3;\r\n} else {\r\n*mult = 0;\r\n*div = 1;\r\n}\r\n}\r\nstatic void __init mv88f5182_clk_init(struct device_node *np)\r\n{\r\nreturn mvebu_coreclk_setup(np, &mv88f5182_coreclks);\r\n}\r\nstatic u32 __init mv88f5281_get_tclk_freq(void __iomem *sar)\r\n{\r\nreturn 166666667;\r\n}\r\nstatic u32 __init mv88f5281_get_cpu_freq(void __iomem *sar)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F5281_CPU_FREQ) &\r\nSAR_MV88F5281_CPU_FREQ_MASK;\r\nif (opt == 1 || opt == 2)\r\nreturn 400000000;\r\nelse if (opt == 3)\r\nreturn 500000000;\r\nelse\r\nreturn 0;\r\n}\r\nstatic void __init mv88f5281_get_clk_ratio(void __iomem *sar, int id,\r\nint *mult, int *div)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F5281_CPU_FREQ) &\r\nSAR_MV88F5281_CPU_FREQ_MASK;\r\nif (opt == 1) {\r\n*mult = 1;\r\n*div = 2;\r\n} else if (opt == 2 || opt == 3) {\r\n*mult = 1;\r\n*div = 3;\r\n} else {\r\n*mult = 0;\r\n*div = 1;\r\n}\r\n}\r\nstatic void __init mv88f5281_clk_init(struct device_node *np)\r\n{\r\nreturn mvebu_coreclk_setup(np, &mv88f5281_coreclks);\r\n}\r\nstatic u32 __init mv88f6183_get_tclk_freq(void __iomem *sar)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F6183_TCLK_FREQ) &\r\nSAR_MV88F6183_TCLK_FREQ_MASK;\r\nif (opt == 0)\r\nreturn 133333333;\r\nelse if (opt == 1)\r\nreturn 166666667;\r\nelse\r\nreturn 0;\r\n}\r\nstatic u32 __init mv88f6183_get_cpu_freq(void __iomem *sar)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F6183_CPU_FREQ) &\r\nSAR_MV88F6183_CPU_FREQ_MASK;\r\nif (opt == 9)\r\nreturn 333333333;\r\nelse if (opt == 17)\r\nreturn 400000000;\r\nelse\r\nreturn 0;\r\n}\r\nstatic void __init mv88f6183_get_clk_ratio(void __iomem *sar, int id,\r\nint *mult, int *div)\r\n{\r\nu32 opt = (readl(sar) >> SAR_MV88F6183_CPU_FREQ) &\r\nSAR_MV88F6183_CPU_FREQ_MASK;\r\nif (opt == 9 || opt == 17) {\r\n*mult = 1;\r\n*div = 2;\r\n} else {\r\n*mult = 0;\r\n*div = 1;\r\n}\r\n}\r\nstatic void __init mv88f6183_clk_init(struct device_node *np)\r\n{\r\nreturn mvebu_coreclk_setup(np, &mv88f6183_coreclks);\r\n}
