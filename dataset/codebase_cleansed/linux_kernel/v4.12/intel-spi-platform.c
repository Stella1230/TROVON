static int intel_spi_platform_probe(struct platform_device *pdev)\r\n{\r\nstruct intel_spi_boardinfo *info;\r\nstruct intel_spi *ispi;\r\nstruct resource *mem;\r\ninfo = dev_get_platdata(&pdev->dev);\r\nif (!info)\r\nreturn -EINVAL;\r\nmem = platform_get_resource(pdev, IORESOURCE_MEM, 0);\r\nispi = intel_spi_probe(&pdev->dev, mem, info);\r\nif (IS_ERR(ispi))\r\nreturn PTR_ERR(ispi);\r\nplatform_set_drvdata(pdev, ispi);\r\nreturn 0;\r\n}\r\nstatic int intel_spi_platform_remove(struct platform_device *pdev)\r\n{\r\nstruct intel_spi *ispi = platform_get_drvdata(pdev);\r\nreturn intel_spi_remove(ispi);\r\n}
