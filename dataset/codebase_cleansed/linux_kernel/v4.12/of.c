void brcmf_of_probe(struct device *dev, enum brcmf_bus_type bus_type,\r\nstruct brcmf_mp_device *settings)\r\n{\r\nstruct brcmfmac_sdio_pd *sdio = &settings->bus.sdio;\r\nstruct device_node *np = dev->of_node;\r\nint irq;\r\nu32 irqf;\r\nu32 val;\r\nif (!np || bus_type != BRCMF_BUSTYPE_SDIO ||\r\n!of_device_is_compatible(np, "brcm,bcm4329-fmac"))\r\nreturn;\r\nif (of_property_read_u32(np, "brcm,drive-strength", &val) == 0)\r\nsdio->drive_strength = val;\r\nif (!of_find_property(np, "interrupts", NULL))\r\nreturn;\r\nirq = irq_of_parse_and_map(np, 0);\r\nif (!irq) {\r\nbrcmf_err("interrupt could not be mapped\n");\r\nreturn;\r\n}\r\nirqf = irqd_get_trigger_type(irq_get_irq_data(irq));\r\nsdio->oob_irq_supported = true;\r\nsdio->oob_irq_nr = irq;\r\nsdio->oob_irq_flags = irqf;\r\n}
