struct resource_table *qcom_mdt_find_rsc_table(struct rproc *rproc,\r\nconst struct firmware *fw,\r\nint *tablesz)\r\n{\r\nstatic struct resource_table table = { .ver = 1, };\r\n*tablesz = sizeof(table);\r\nreturn &table;\r\n}\r\nstatic int smd_subdev_probe(struct rproc_subdev *subdev)\r\n{\r\nstruct qcom_rproc_subdev *smd = to_smd_subdev(subdev);\r\nsmd->edge = qcom_smd_register_edge(smd->dev, smd->node);\r\nreturn IS_ERR(smd->edge) ? PTR_ERR(smd->edge) : 0;\r\n}\r\nstatic void smd_subdev_remove(struct rproc_subdev *subdev)\r\n{\r\nstruct qcom_rproc_subdev *smd = to_smd_subdev(subdev);\r\nqcom_smd_unregister_edge(smd->edge);\r\nsmd->edge = NULL;\r\n}\r\nvoid qcom_add_smd_subdev(struct rproc *rproc, struct qcom_rproc_subdev *smd)\r\n{\r\nstruct device *dev = &rproc->dev;\r\nsmd->node = of_get_child_by_name(dev->parent->of_node, "smd-edge");\r\nif (!smd->node)\r\nreturn;\r\nsmd->dev = dev;\r\nrproc_add_subdev(rproc, &smd->subdev, smd_subdev_probe, smd_subdev_remove);\r\n}\r\nvoid qcom_remove_smd_subdev(struct rproc *rproc, struct qcom_rproc_subdev *smd)\r\n{\r\nrproc_remove_subdev(rproc, &smd->subdev);\r\nof_node_put(smd->node);\r\n}
