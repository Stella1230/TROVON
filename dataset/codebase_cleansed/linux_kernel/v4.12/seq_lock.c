void snd_use_lock_sync_helper(snd_use_lock_t *lockp, const char *file, int line)\r\n{\r\nint warn_count = 5 * HZ;\r\nif (atomic_read(lockp) < 0) {\r\npr_warn("ALSA: seq_lock: lock trouble [counter = %d] in %s:%d\n", atomic_read(lockp), file, line);\r\nreturn;\r\n}\r\nwhile (atomic_read(lockp) > 0) {\r\nif (warn_count-- == 0)\r\npr_warn("ALSA: seq_lock: waiting [%d left] in %s:%d\n", atomic_read(lockp), file, line);\r\nschedule_timeout_uninterruptible(1);\r\n}\r\n}
