static ssize_t write_file_dummy(struct file *file, const char __user *buf,\r\nsize_t count, loff_t *ppos)\r\n{\r\nreturn count;\r\n}\r\nstatic ssize_t sysconf_read_file(struct file *file, char __user *userbuf,\r\nsize_t count, loff_t *ppos)\r\n{\r\nchar * s = big_buffer;\r\ns += sprintf(s, "SYSCFG = %08x\n", readl(SYSCFG));\r\ns += sprintf(s, "PFBASE = %08x\n", readl(PFBASE));\r\ns += sprintf(s, "PFCEIL = %08x\n", readl(PFCEIL));\r\ns += sprintf(s, "POLLFLAG = %08x\n", readl(POLLFLAG));\r\ns += sprintf(s, "SYSRST = %08x\n", readl(SYSRST));\r\nreturn simple_read_from_buffer(userbuf, count, ppos,\r\nbig_buffer, s-big_buffer);\r\n}\r\nstatic ssize_t gsctl_read_file(struct file *file, char __user *userbuf,\r\nsize_t count, loff_t *ppos)\r\n{\r\nchar * s = big_buffer;\r\ns += sprintf(s, "GSCTRL = %08x\n", readl(GSCTRL));\r\ns += sprintf(s, "VSCTRL = %08x\n", readl(VSCTRL));\r\ns += sprintf(s, "GBBASE = %08x\n", readl(GBBASE));\r\ns += sprintf(s, "VBBASE = %08x\n", readl(VBBASE));\r\ns += sprintf(s, "GDRCTRL = %08x\n", readl(GDRCTRL));\r\ns += sprintf(s, "VCMSK = %08x\n", readl(VCMSK));\r\ns += sprintf(s, "GSCADR = %08x\n", readl(GSCADR));\r\ns += sprintf(s, "VSCADR = %08x\n", readl(VSCADR));\r\ns += sprintf(s, "VUBASE = %08x\n", readl(VUBASE));\r\ns += sprintf(s, "VVBASE = %08x\n", readl(VVBASE));\r\ns += sprintf(s, "GSADR = %08x\n", readl(GSADR));\r\ns += sprintf(s, "VSADR = %08x\n", readl(VSADR));\r\ns += sprintf(s, "HCCTRL = %08x\n", readl(HCCTRL));\r\ns += sprintf(s, "HCSIZE = %08x\n", readl(HCSIZE));\r\ns += sprintf(s, "HCPOS = %08x\n", readl(HCPOS));\r\ns += sprintf(s, "HCBADR = %08x\n", readl(HCBADR));\r\ns += sprintf(s, "HCCKMSK = %08x\n", readl(HCCKMSK));\r\ns += sprintf(s, "GPLUT = %08x\n", readl(GPLUT));\r\nreturn simple_read_from_buffer(userbuf, count, ppos,\r\nbig_buffer, s-big_buffer);\r\n}\r\nstatic ssize_t display_read_file(struct file *file, char __user *userbuf,\r\nsize_t count, loff_t *ppos)\r\n{\r\nchar * s = big_buffer;\r\ns += sprintf(s, "DSCTRL = %08x\n", readl(DSCTRL));\r\ns += sprintf(s, "DHT01 = %08x\n", readl(DHT01));\r\ns += sprintf(s, "DHT02 = %08x\n", readl(DHT02));\r\ns += sprintf(s, "DHT03 = %08x\n", readl(DHT03));\r\ns += sprintf(s, "DVT01 = %08x\n", readl(DVT01));\r\ns += sprintf(s, "DVT02 = %08x\n", readl(DVT02));\r\ns += sprintf(s, "DVT03 = %08x\n", readl(DVT03));\r\ns += sprintf(s, "DBCOL = %08x\n", readl(DBCOL));\r\ns += sprintf(s, "BGCOLOR = %08x\n", readl(BGCOLOR));\r\ns += sprintf(s, "DINTRS = %08x\n", readl(DINTRS));\r\ns += sprintf(s, "DINTRE = %08x\n", readl(DINTRE));\r\ns += sprintf(s, "DINTRCNT = %08x\n", readl(DINTRCNT));\r\ns += sprintf(s, "DSIG = %08x\n", readl(DSIG));\r\ns += sprintf(s, "DMCTRL = %08x\n", readl(DMCTRL));\r\ns += sprintf(s, "CLIPCTRL = %08x\n", readl(CLIPCTRL));\r\ns += sprintf(s, "SPOCTRL = %08x\n", readl(SPOCTRL));\r\ns += sprintf(s, "SVCTRL = %08x\n", readl(SVCTRL));\r\ns += sprintf(s, "DLSTS = %08x\n", readl(DLSTS));\r\ns += sprintf(s, "DLLCTRL = %08x\n", readl(DLLCTRL));\r\ns += sprintf(s, "DVLNUM = %08x\n", readl(DVLNUM));\r\ns += sprintf(s, "DUCTRL = %08x\n", readl(DUCTRL));\r\ns += sprintf(s, "DVECTRL = %08x\n", readl(DVECTRL));\r\ns += sprintf(s, "DHDET = %08x\n", readl(DHDET));\r\ns += sprintf(s, "DVDET = %08x\n", readl(DVDET));\r\ns += sprintf(s, "DODMSK = %08x\n", readl(DODMSK));\r\ns += sprintf(s, "CSC01 = %08x\n", readl(CSC01));\r\ns += sprintf(s, "CSC02 = %08x\n", readl(CSC02));\r\ns += sprintf(s, "CSC03 = %08x\n", readl(CSC03));\r\ns += sprintf(s, "CSC04 = %08x\n", readl(CSC04));\r\ns += sprintf(s, "CSC05 = %08x\n", readl(CSC05));\r\nreturn simple_read_from_buffer(userbuf, count, ppos,\r\nbig_buffer, s-big_buffer);\r\n}\r\nstatic ssize_t clock_read_file(struct file *file, char __user *userbuf,\r\nsize_t count, loff_t *ppos)\r\n{\r\nchar * s = big_buffer;\r\ns += sprintf(s, "SYSCLKSRC = %08x\n", readl(SYSCLKSRC));\r\ns += sprintf(s, "PIXCLKSRC = %08x\n", readl(PIXCLKSRC));\r\ns += sprintf(s, "CLKSLEEP = %08x\n", readl(CLKSLEEP));\r\ns += sprintf(s, "COREPLL = %08x\n", readl(COREPLL));\r\ns += sprintf(s, "DISPPLL = %08x\n", readl(DISPPLL));\r\ns += sprintf(s, "PLLSTAT = %08x\n", readl(PLLSTAT));\r\ns += sprintf(s, "VOVRCLK = %08x\n", readl(VOVRCLK));\r\ns += sprintf(s, "PIXCLK = %08x\n", readl(PIXCLK));\r\ns += sprintf(s, "MEMCLK = %08x\n", readl(MEMCLK));\r\ns += sprintf(s, "M24CLK = %08x\n", readl(M24CLK));\r\ns += sprintf(s, "MBXCLK = %08x\n", readl(MBXCLK));\r\ns += sprintf(s, "SDCLK = %08x\n", readl(SDCLK));\r\ns += sprintf(s, "PIXCLKDIV = %08x\n", readl(PIXCLKDIV));\r\nreturn simple_read_from_buffer(userbuf, count, ppos,\r\nbig_buffer, s-big_buffer);\r\n}\r\nstatic ssize_t sdram_read_file(struct file *file, char __user *userbuf,\r\nsize_t count, loff_t *ppos)\r\n{\r\nchar * s = big_buffer;\r\ns += sprintf(s, "LMRST = %08x\n", readl(LMRST));\r\ns += sprintf(s, "LMCFG = %08x\n", readl(LMCFG));\r\ns += sprintf(s, "LMPWR = %08x\n", readl(LMPWR));\r\ns += sprintf(s, "LMPWRSTAT = %08x\n", readl(LMPWRSTAT));\r\ns += sprintf(s, "LMCEMR = %08x\n", readl(LMCEMR));\r\ns += sprintf(s, "LMTYPE = %08x\n", readl(LMTYPE));\r\ns += sprintf(s, "LMTIM = %08x\n", readl(LMTIM));\r\ns += sprintf(s, "LMREFRESH = %08x\n", readl(LMREFRESH));\r\ns += sprintf(s, "LMPROTMIN = %08x\n", readl(LMPROTMIN));\r\ns += sprintf(s, "LMPROTMAX = %08x\n", readl(LMPROTMAX));\r\ns += sprintf(s, "LMPROTCFG = %08x\n", readl(LMPROTCFG));\r\ns += sprintf(s, "LMPROTERR = %08x\n", readl(LMPROTERR));\r\nreturn simple_read_from_buffer(userbuf, count, ppos,\r\nbig_buffer, s-big_buffer);\r\n}\r\nstatic ssize_t misc_read_file(struct file *file, char __user *userbuf,\r\nsize_t count, loff_t *ppos)\r\n{\r\nchar * s = big_buffer;\r\ns += sprintf(s, "LCD_CONFIG = %08x\n", readl(LCD_CONFIG));\r\ns += sprintf(s, "ODFBPWR = %08x\n", readl(ODFBPWR));\r\ns += sprintf(s, "ODFBSTAT = %08x\n", readl(ODFBSTAT));\r\ns += sprintf(s, "ID = %08x\n", readl(ID));\r\nreturn simple_read_from_buffer(userbuf, count, ppos,\r\nbig_buffer, s-big_buffer);\r\n}\r\nstatic void mbxfb_debugfs_init(struct fb_info *fbi)\r\n{\r\nstruct mbxfb_info *mfbi = fbi->par;\r\nstruct mbxfb_debugfs_data *dbg;\r\ndbg = kzalloc(sizeof(struct mbxfb_debugfs_data), GFP_KERNEL);\r\nmfbi->debugfs_data = dbg;\r\ndbg->dir = debugfs_create_dir("mbxfb", NULL);\r\ndbg->sysconf = debugfs_create_file("sysconf", 0444, dbg->dir,\r\nfbi, &sysconf_fops);\r\ndbg->clock = debugfs_create_file("clock", 0444, dbg->dir,\r\nfbi, &clock_fops);\r\ndbg->display = debugfs_create_file("display", 0444, dbg->dir,\r\nfbi, &display_fops);\r\ndbg->gsctl = debugfs_create_file("gsctl", 0444, dbg->dir,\r\nfbi, &gsctl_fops);\r\ndbg->sdram = debugfs_create_file("sdram", 0444, dbg->dir,\r\nfbi, &sdram_fops);\r\ndbg->misc = debugfs_create_file("misc", 0444, dbg->dir,\r\nfbi, &misc_fops);\r\n}\r\nstatic void mbxfb_debugfs_remove(struct fb_info *fbi)\r\n{\r\nstruct mbxfb_info *mfbi = fbi->par;\r\nstruct mbxfb_debugfs_data *dbg = mfbi->debugfs_data;\r\ndebugfs_remove(dbg->misc);\r\ndebugfs_remove(dbg->sdram);\r\ndebugfs_remove(dbg->gsctl);\r\ndebugfs_remove(dbg->display);\r\ndebugfs_remove(dbg->clock);\r\ndebugfs_remove(dbg->sysconf);\r\ndebugfs_remove(dbg->dir);\r\n}
