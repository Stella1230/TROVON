static int gyration_input_mapping(struct hid_device *hdev, struct hid_input *hi,\r\nstruct hid_field *field, struct hid_usage *usage,\r\nunsigned long **bit, int *max)\r\n{\r\nif ((usage->hid & HID_USAGE_PAGE) != HID_UP_LOGIVENDOR)\r\nreturn 0;\r\nset_bit(EV_REP, hi->input->evbit);\r\nswitch (usage->hid & HID_USAGE) {\r\ncase 0x00d: gy_map_key_clear(KEY_HOME); break;\r\ncase 0x024: gy_map_key_clear(KEY_DVD); break;\r\ncase 0x025: gy_map_key_clear(KEY_PVR); break;\r\ncase 0x046: gy_map_key_clear(KEY_MEDIA); break;\r\ncase 0x047: gy_map_key_clear(KEY_MP3); break;\r\ncase 0x048: gy_map_key_clear(KEY_MEDIA); break;\r\ncase 0x049: gy_map_key_clear(KEY_CAMERA); break;\r\ncase 0x04a: gy_map_key_clear(KEY_VIDEO); break;\r\ncase 0x05a: gy_map_key_clear(KEY_TEXT); break;\r\ncase 0x05b: gy_map_key_clear(KEY_RED); break;\r\ncase 0x05c: gy_map_key_clear(KEY_GREEN); break;\r\ncase 0x05d: gy_map_key_clear(KEY_YELLOW); break;\r\ncase 0x05e: gy_map_key_clear(KEY_BLUE); break;\r\ndefault:\r\nreturn 0;\r\n}\r\nreturn 1;\r\n}\r\nstatic int gyration_event(struct hid_device *hdev, struct hid_field *field,\r\nstruct hid_usage *usage, __s32 value)\r\n{\r\nif (!(hdev->claimed & HID_CLAIMED_INPUT) || !field->hidinput)\r\nreturn 0;\r\nif ((usage->hid & HID_USAGE_PAGE) == HID_UP_GENDESK &&\r\n(usage->hid & 0xff) == 0x82) {\r\nstruct input_dev *input = field->hidinput->input;\r\ninput_event(input, usage->type, usage->code, 1);\r\ninput_sync(input);\r\ninput_event(input, usage->type, usage->code, 0);\r\ninput_sync(input);\r\nreturn 1;\r\n}\r\nreturn 0;\r\n}
