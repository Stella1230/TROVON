int blk_mq_virtio_map_queues(struct blk_mq_tag_set *set,\r\nstruct virtio_device *vdev, int first_vec)\r\n{\r\nconst struct cpumask *mask;\r\nunsigned int queue, cpu;\r\nif (!vdev->config->get_vq_affinity)\r\ngoto fallback;\r\nfor (queue = 0; queue < set->nr_hw_queues; queue++) {\r\nmask = vdev->config->get_vq_affinity(vdev, first_vec + queue);\r\nif (!mask)\r\ngoto fallback;\r\nfor_each_cpu(cpu, mask)\r\nset->mq_map[cpu] = queue;\r\n}\r\nreturn 0;\r\nfallback:\r\nreturn blk_mq_map_queues(set);\r\n}
