const struct nand_sdr_timings *onfi_async_timing_mode_to_sdr_timings(int mode)\r\n{\r\nif (mode < 0 || mode >= ARRAY_SIZE(onfi_sdr_timings))\r\nreturn ERR_PTR(-EINVAL);\r\nreturn &onfi_sdr_timings[mode].timings.sdr;\r\n}\r\nint onfi_init_data_interface(struct nand_chip *chip,\r\nstruct nand_data_interface *iface,\r\nenum nand_data_interface_type type,\r\nint timing_mode)\r\n{\r\nif (type != NAND_SDR_IFACE)\r\nreturn -EINVAL;\r\nif (timing_mode < 0 || timing_mode >= ARRAY_SIZE(onfi_sdr_timings))\r\nreturn -EINVAL;\r\n*iface = onfi_sdr_timings[timing_mode];\r\nif (chip->onfi_version) {\r\nstruct nand_onfi_params *params = &chip->onfi_params;\r\nstruct nand_sdr_timings *timings = &iface->timings.sdr;\r\ntimings->tPROG_max = 1000000UL * le16_to_cpu(params->t_prog);\r\ntimings->tBERS_max = 1000000UL * le16_to_cpu(params->t_bers);\r\ntimings->tR_max = 1000000UL * le16_to_cpu(params->t_r);\r\ntimings->tCCS_min = 1000UL * le16_to_cpu(params->t_ccs);\r\n}\r\nreturn 0;\r\n}\r\nconst struct nand_data_interface *nand_get_default_data_interface(void)\r\n{\r\nreturn &onfi_sdr_timings[0];\r\n}
