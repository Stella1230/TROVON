int arcpgu_drm_hdmi_init(struct drm_device *drm, struct device_node *np)\r\n{\r\nstruct drm_encoder *encoder;\r\nstruct drm_bridge *bridge;\r\nint ret = 0;\r\nencoder = devm_kzalloc(drm->dev, sizeof(*encoder), GFP_KERNEL);\r\nif (encoder == NULL)\r\nreturn -ENOMEM;\r\nbridge = of_drm_find_bridge(np);\r\nif (!bridge)\r\nreturn -EPROBE_DEFER;\r\nencoder->possible_crtcs = 1;\r\nencoder->possible_clones = 0;\r\nret = drm_encoder_init(drm, encoder, &arcpgu_drm_encoder_funcs,\r\nDRM_MODE_ENCODER_TMDS, NULL);\r\nif (ret)\r\nreturn ret;\r\nret = drm_bridge_attach(encoder, bridge, NULL);\r\nif (ret)\r\ndrm_encoder_cleanup(encoder);\r\nreturn ret;\r\n}
