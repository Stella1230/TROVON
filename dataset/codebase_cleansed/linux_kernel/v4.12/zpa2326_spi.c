static int zpa2326_probe_spi(struct spi_device *spi)\r\n{\r\nstruct regmap *regmap;\r\nint err;\r\nregmap = devm_regmap_init_spi(spi, &zpa2326_regmap_spi_config);\r\nif (IS_ERR(regmap)) {\r\ndev_err(&spi->dev, "failed to init registers map");\r\nreturn PTR_ERR(regmap);\r\n}\r\nspi->mode = SPI_MODE_3;\r\nspi->max_speed_hz = min(spi->max_speed_hz, 1000000U);\r\nspi->bits_per_word = 8;\r\nerr = spi_setup(spi);\r\nif (err < 0)\r\nreturn err;\r\nreturn zpa2326_probe(&spi->dev, spi_get_device_id(spi)->name,\r\nspi->irq, ZPA2326_DEVICE_ID, regmap);\r\n}\r\nstatic int zpa2326_remove_spi(struct spi_device *spi)\r\n{\r\nzpa2326_remove(&spi->dev);\r\nreturn 0;\r\n}
