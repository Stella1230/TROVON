struct clk_hw *uniphier_clk_register_fixed_rate(struct device *dev,\r\nconst char *name,\r\nconst struct uniphier_clk_fixed_rate_data *data)\r\n{\r\nstruct clk_fixed_rate *fixed;\r\nstruct clk_init_data init;\r\nint ret;\r\nfixed = devm_kzalloc(dev, sizeof(*fixed), GFP_KERNEL);\r\nif (!fixed)\r\nreturn ERR_PTR(-ENOMEM);\r\ninit.name = name;\r\ninit.ops = &clk_fixed_rate_ops;\r\ninit.parent_names = NULL;\r\ninit.num_parents = 0;\r\nfixed->fixed_rate = data->fixed_rate;\r\nfixed->hw.init = &init;\r\nret = devm_clk_hw_register(dev, &fixed->hw);\r\nif (ret)\r\nreturn ERR_PTR(ret);\r\nreturn &fixed->hw;\r\n}
