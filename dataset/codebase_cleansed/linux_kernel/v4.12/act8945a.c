static int act8945a_i2c_probe(struct i2c_client *i2c,\r\nconst struct i2c_device_id *id)\r\n{\r\nint ret;\r\nstruct regmap *regmap;\r\nregmap = devm_regmap_init_i2c(i2c, &act8945a_regmap_config);\r\nif (IS_ERR(regmap)) {\r\nret = PTR_ERR(regmap);\r\ndev_err(&i2c->dev, "regmap init failed: %d\n", ret);\r\nreturn ret;\r\n}\r\ni2c_set_clientdata(i2c, regmap);\r\nret = devm_mfd_add_devices(&i2c->dev, PLATFORM_DEVID_NONE,\r\nact8945a_devs, ARRAY_SIZE(act8945a_devs),\r\nNULL, 0, NULL);\r\nif (ret) {\r\ndev_err(&i2c->dev, "Failed to add sub devices\n");\r\nreturn ret;\r\n}\r\nreturn 0;\r\n}\r\nstatic int __init act8945a_i2c_init(void)\r\n{\r\nreturn i2c_add_driver(&act8945a_i2c_driver);\r\n}\r\nstatic void __exit act8945a_i2c_exit(void)\r\n{\r\ni2c_del_driver(&act8945a_i2c_driver);\r\n}
