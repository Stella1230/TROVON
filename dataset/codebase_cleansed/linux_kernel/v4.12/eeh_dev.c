struct eeh_dev *eeh_dev_init(struct pci_dn *pdn)\r\n{\r\nstruct pci_controller *phb = pdn->phb;\r\nstruct eeh_dev *edev;\r\nedev = kzalloc(sizeof(*edev), GFP_KERNEL);\r\nif (!edev) {\r\npr_warn("%s: out of memory\n",\r\n__func__);\r\nreturn NULL;\r\n}\r\npdn->edev = edev;\r\nedev->pdn = pdn;\r\nedev->phb = phb;\r\nINIT_LIST_HEAD(&edev->list);\r\nINIT_LIST_HEAD(&edev->rmv_list);\r\nreturn edev;\r\n}\r\nvoid eeh_dev_phb_init_dynamic(struct pci_controller *phb)\r\n{\r\neeh_phb_pe_create(phb);\r\n}\r\nstatic int __init eeh_dev_phb_init(void)\r\n{\r\nstruct pci_controller *phb, *tmp;\r\nlist_for_each_entry_safe(phb, tmp, &hose_list, list_node)\r\neeh_dev_phb_init_dynamic(phb);\r\nreturn 0;\r\n}
