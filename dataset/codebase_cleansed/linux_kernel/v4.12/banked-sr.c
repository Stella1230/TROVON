void __hyp_text __banked_save_state(struct kvm_cpu_context *ctxt)\r\n{\r\nctxt->gp_regs.usr_regs.ARM_sp = read_special(SP_usr);\r\nctxt->gp_regs.usr_regs.ARM_pc = read_special(ELR_hyp);\r\nctxt->gp_regs.usr_regs.ARM_cpsr = read_special(SPSR);\r\nctxt->gp_regs.KVM_ARM_SVC_sp = read_special(SP_svc);\r\nctxt->gp_regs.KVM_ARM_SVC_lr = read_special(LR_svc);\r\nctxt->gp_regs.KVM_ARM_SVC_spsr = read_special(SPSR_svc);\r\nctxt->gp_regs.KVM_ARM_ABT_sp = read_special(SP_abt);\r\nctxt->gp_regs.KVM_ARM_ABT_lr = read_special(LR_abt);\r\nctxt->gp_regs.KVM_ARM_ABT_spsr = read_special(SPSR_abt);\r\nctxt->gp_regs.KVM_ARM_UND_sp = read_special(SP_und);\r\nctxt->gp_regs.KVM_ARM_UND_lr = read_special(LR_und);\r\nctxt->gp_regs.KVM_ARM_UND_spsr = read_special(SPSR_und);\r\nctxt->gp_regs.KVM_ARM_IRQ_sp = read_special(SP_irq);\r\nctxt->gp_regs.KVM_ARM_IRQ_lr = read_special(LR_irq);\r\nctxt->gp_regs.KVM_ARM_IRQ_spsr = read_special(SPSR_irq);\r\nctxt->gp_regs.KVM_ARM_FIQ_r8 = read_special(R8_fiq);\r\nctxt->gp_regs.KVM_ARM_FIQ_r9 = read_special(R9_fiq);\r\nctxt->gp_regs.KVM_ARM_FIQ_r10 = read_special(R10_fiq);\r\nctxt->gp_regs.KVM_ARM_FIQ_fp = read_special(R11_fiq);\r\nctxt->gp_regs.KVM_ARM_FIQ_ip = read_special(R12_fiq);\r\nctxt->gp_regs.KVM_ARM_FIQ_sp = read_special(SP_fiq);\r\nctxt->gp_regs.KVM_ARM_FIQ_lr = read_special(LR_fiq);\r\nctxt->gp_regs.KVM_ARM_FIQ_spsr = read_special(SPSR_fiq);\r\n}\r\nvoid __hyp_text __banked_restore_state(struct kvm_cpu_context *ctxt)\r\n{\r\nwrite_special(ctxt->gp_regs.usr_regs.ARM_sp, SP_usr);\r\nwrite_special(ctxt->gp_regs.usr_regs.ARM_pc, ELR_hyp);\r\nwrite_special(ctxt->gp_regs.usr_regs.ARM_cpsr, SPSR_cxsf);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_SVC_sp, SP_svc);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_SVC_lr, LR_svc);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_SVC_spsr, SPSR_svc);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_ABT_sp, SP_abt);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_ABT_lr, LR_abt);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_ABT_spsr, SPSR_abt);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_UND_sp, SP_und);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_UND_lr, LR_und);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_UND_spsr, SPSR_und);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_IRQ_sp, SP_irq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_IRQ_lr, LR_irq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_IRQ_spsr, SPSR_irq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_FIQ_r8, R8_fiq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_FIQ_r9, R9_fiq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_FIQ_r10, R10_fiq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_FIQ_fp, R11_fiq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_FIQ_ip, R12_fiq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_FIQ_sp, SP_fiq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_FIQ_lr, LR_fiq);\r\nwrite_special(ctxt->gp_regs.KVM_ARM_FIQ_spsr, SPSR_fiq);\r\n}
