int omap_hwmod_aess_preprogram(struct omap_hwmod *oh)\r\n{\r\nvoid __iomem *va;\r\nva = omap_hwmod_get_mpu_rt_va(oh);\r\nif (!va)\r\nreturn -EINVAL;\r\naess_enable_autogating(va);\r\nreturn 0;\r\n}\r\nstatic void omap_rtc_wait_not_busy(struct omap_hwmod *oh)\r\n{\r\nint i;\r\nomap_test_timeout(omap_hwmod_read(oh, OMAP_RTC_STATUS_REG)\r\n& OMAP_RTC_STATUS_BUSY, OMAP_RTC_MAX_READY_TIME, i);\r\n}\r\nvoid omap_hwmod_rtc_unlock(struct omap_hwmod *oh)\r\n{\r\nlocal_irq_disable();\r\nomap_rtc_wait_not_busy(oh);\r\nomap_hwmod_write(OMAP_RTC_KICK0_VALUE, oh, OMAP_RTC_KICK0_REG);\r\nomap_hwmod_write(OMAP_RTC_KICK1_VALUE, oh, OMAP_RTC_KICK1_REG);\r\nlocal_irq_enable();\r\n}\r\nvoid omap_hwmod_rtc_lock(struct omap_hwmod *oh)\r\n{\r\nlocal_irq_disable();\r\nomap_rtc_wait_not_busy(oh);\r\nomap_hwmod_write(0x0, oh, OMAP_RTC_KICK0_REG);\r\nomap_hwmod_write(0x0, oh, OMAP_RTC_KICK1_REG);\r\nlocal_irq_enable();\r\n}
