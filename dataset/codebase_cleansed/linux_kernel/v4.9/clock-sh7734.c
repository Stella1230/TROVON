static unsigned long pll_recalc(struct clk *clk)\r\n{\r\nint mode = 12;\r\nu32 r = __raw_readl(MODEMR);\r\nif ((r & MODEMR_MASK) & MODEMR_533MHZ)\r\nmode = 16;\r\nreturn clk->parent->rate * mode;\r\n}\r\nint __init arch_clk_init(void)\r\n{\r\nint i, ret = 0;\r\nfor (i = 0; i < ARRAY_SIZE(main_clks); i++)\r\nret |= clk_register(main_clks[i]);\r\nclkdev_add_table(lookups, ARRAY_SIZE(lookups));\r\nif (!ret)\r\nret = sh_clk_div4_register(div4_clks, ARRAY_SIZE(div4_clks),\r\n&div4_table);\r\nif (!ret)\r\nret = sh_clk_mstp_register(mstp_clks, MSTP_NR);\r\nreturn ret;\r\n}
