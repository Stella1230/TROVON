int __next_node_in(int node, const nodemask_t *srcp)\r\n{\r\nint ret = __next_node(node, srcp);\r\nif (ret == MAX_NUMNODES)\r\nret = __first_node(srcp);\r\nreturn ret;\r\n}\r\nint node_random(const nodemask_t *maskp)\r\n{\r\nint w, bit = NUMA_NO_NODE;\r\nw = nodes_weight(*maskp);\r\nif (w)\r\nbit = bitmap_ord_to_pos(maskp->bits,\r\nget_random_int() % w, MAX_NUMNODES);\r\nreturn bit;\r\n}
