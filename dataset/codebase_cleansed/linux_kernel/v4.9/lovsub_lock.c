static void lovsub_lock_fini(const struct lu_env *env,\r\nstruct cl_lock_slice *slice)\r\n{\r\nstruct lovsub_lock *lsl;\r\nlsl = cl2lovsub_lock(slice);\r\nLASSERT(list_empty(&lsl->lss_parents));\r\nkmem_cache_free(lovsub_lock_kmem, lsl);\r\n}\r\nint lovsub_lock_init(const struct lu_env *env, struct cl_object *obj,\r\nstruct cl_lock *lock, const struct cl_io *io)\r\n{\r\nstruct lovsub_lock *lsk;\r\nint result;\r\nlsk = kmem_cache_zalloc(lovsub_lock_kmem, GFP_NOFS);\r\nif (lsk) {\r\nINIT_LIST_HEAD(&lsk->lss_parents);\r\ncl_lock_slice_add(lock, &lsk->lss_cl, obj, &lovsub_lock_ops);\r\nresult = 0;\r\n} else {\r\nresult = -ENOMEM;\r\n}\r\nreturn result;\r\n}
