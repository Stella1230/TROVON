void coda_set_gdi_regs(struct coda_ctx *ctx)\r\n{\r\nstruct coda_dev *dev = ctx->dev;\r\nconst u16 *xy2ca_map;\r\nu32 xy2rbc_config;\r\nint i;\r\nswitch (ctx->tiled_map_type) {\r\ncase GDI_LINEAR_FRAME_MAP:\r\ndefault:\r\nxy2ca_map = xy2ca_zero_map;\r\nxy2rbc_config = 0;\r\nbreak;\r\ncase GDI_TILED_FRAME_MB_RASTER_MAP:\r\nxy2ca_map = xy2ca_tiled_map;\r\nxy2rbc_config = CODA9_XY2RBC_TILED_MAP |\r\nCODA9_XY2RBC_CA_INC_HOR |\r\n(16 - 1) << 12 | (8 - 1) << 4;\r\nbreak;\r\n}\r\nfor (i = 0; i < 16; i++)\r\ncoda_write(dev, xy2ca_map[i],\r\nCODA9_GDI_XY2_CAS_0 + 4 * i);\r\nfor (i = 0; i < 4; i++)\r\ncoda_write(dev, XY2(ZERO, 0, ZERO, 0),\r\nCODA9_GDI_XY2_BA_0 + 4 * i);\r\nfor (i = 0; i < 16; i++)\r\ncoda_write(dev, XY2(ZERO, 0, ZERO, 0),\r\nCODA9_GDI_XY2_RAS_0 + 4 * i);\r\ncoda_write(dev, xy2rbc_config, CODA9_GDI_XY2_RBC_CONFIG);\r\nif (xy2rbc_config) {\r\nfor (i = 0; i < 32; i++)\r\ncoda_write(dev, rbc2axi_tiled_map[i],\r\nCODA9_GDI_RBC2_AXI_0 + 4 * i);\r\n}\r\n}
