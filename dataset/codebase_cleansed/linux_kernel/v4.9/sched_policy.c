static size_t syscall_arg__scnprintf_sched_policy(char *bf, size_t size,\r\nstruct syscall_arg *arg)\r\n{\r\nconst char *policies[] = {\r\n"NORMAL", "FIFO", "RR", "BATCH", "ISO", "IDLE", "DEADLINE",\r\n};\r\nsize_t printed;\r\nint policy = arg->val,\r\nflags = policy & ~SCHED_POLICY_MASK;\r\npolicy &= SCHED_POLICY_MASK;\r\nif (policy <= SCHED_DEADLINE)\r\nprinted = scnprintf(bf, size, "%s", policies[policy]);\r\nelse\r\nprinted = scnprintf(bf, size, "%#x", policy);\r\n#define P_POLICY_FLAG(n) \\r\nif (flags & SCHED_##n) { \\r\nprinted += scnprintf(bf + printed, size - printed, "|%s", #n); \\r\nflags &= ~SCHED_##n; \\r\n}\r\nP_POLICY_FLAG(RESET_ON_FORK);\r\n#undef P_POLICY_FLAG\r\nif (flags)\r\nprinted += scnprintf(bf + printed, size - printed, "|%#x", flags);\r\nreturn printed;\r\n}
