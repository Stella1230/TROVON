static int init_display(struct fbtft_par *par)\r\n{\r\npar->fbtftops.reset(par);\r\nif (par->gpio.cs != -1)\r\ngpio_set_value(par->gpio.cs, 0);\r\nwrite_reg(par, 0x0003, 0x0001);\r\nwrite_reg(par, 0x003A, 0x0001);\r\nudelay(100);\r\nwrite_reg(par, 0x0024, 0x007B);\r\nudelay(10);\r\nwrite_reg(par, 0x0025, 0x003B);\r\nwrite_reg(par, 0x0026, 0x0034);\r\nudelay(10);\r\nwrite_reg(par, 0x0027, 0x0004);\r\nwrite_reg(par, 0x0052, 0x0025);\r\nudelay(10);\r\nwrite_reg(par, 0x0053, 0x0033);\r\nwrite_reg(par, 0x0061, 0x001C);\r\nudelay(10);\r\nwrite_reg(par, 0x0062, 0x002C);\r\nwrite_reg(par, 0x0063, 0x0022);\r\nudelay(10);\r\nwrite_reg(par, 0x0064, 0x0027);\r\nudelay(10);\r\nwrite_reg(par, 0x0065, 0x0014);\r\nudelay(10);\r\nwrite_reg(par, 0x0066, 0x0010);\r\nwrite_reg(par, 0x002E, 0x002D);\r\nwrite_reg(par, 0x0019, 0x0000);\r\nudelay(200);\r\nwrite_reg(par, 0x001A, 0x1000);\r\nwrite_reg(par, 0x001B, 0x0023);\r\nwrite_reg(par, 0x001C, 0x0C01);\r\nwrite_reg(par, 0x001D, 0x0000);\r\nwrite_reg(par, 0x001E, 0x0009);\r\nwrite_reg(par, 0x001F, 0x0035);\r\nwrite_reg(par, 0x0020, 0x0015);\r\nwrite_reg(par, 0x0018, 0x1E7B);\r\nwrite_reg(par, 0x0008, 0x0000);\r\nwrite_reg(par, 0x0009, 0x00EF);\r\nwrite_reg(par, 0x000a, 0x0000);\r\nwrite_reg(par, 0x000b, 0x013F);\r\nwrite_reg(par, 0x0029, 0x0000);\r\nwrite_reg(par, 0x002A, 0x0000);\r\nwrite_reg(par, 0x002B, 0x00EF);\r\nwrite_reg(par, 0x002C, 0x013F);\r\nwrite_reg(par, 0x0032, 0x0002);\r\nwrite_reg(par, 0x0033, 0x0000);\r\nwrite_reg(par, 0x0037, 0x0000);\r\nwrite_reg(par, 0x003B, 0x0001);\r\nwrite_reg(par, 0x0004, 0x0000);\r\nwrite_reg(par, 0x0005, 0x0000);\r\nwrite_reg(par, 0x0001, 0x0000);\r\nwrite_reg(par, 0x0000, 0x0000);\r\nreturn 0;\r\n}\r\nstatic void set_addr_win(struct fbtft_par *par, int xs, int ys, int xe, int ye)\r\n{\r\nswitch (par->info->var.rotate) {\r\ncase 0:\r\nwrite_reg(par, 0x0006, xs);\r\nwrite_reg(par, 0x0007, ys);\r\nbreak;\r\ncase 180:\r\nwrite_reg(par, 0x0006, WIDTH - 1 - xs);\r\nwrite_reg(par, 0x0007, HEIGHT - 1 - ys);\r\nbreak;\r\ncase 270:\r\nwrite_reg(par, 0x0006, WIDTH - 1 - ys);\r\nwrite_reg(par, 0x0007, xs);\r\nbreak;\r\ncase 90:\r\nwrite_reg(par, 0x0006, ys);\r\nwrite_reg(par, 0x0007, HEIGHT - 1 - xs);\r\nbreak;\r\n}\r\nwrite_reg(par, 0x0e);\r\n}\r\nstatic int set_var(struct fbtft_par *par)\r\n{\r\nswitch (par->info->var.rotate) {\r\ncase 0:\r\nwrite_reg(par, 0x01, 0x0000);\r\nwrite_reg(par, 0x05, 0x0000);\r\nbreak;\r\ncase 180:\r\nwrite_reg(par, 0x01, 0x00C0);\r\nwrite_reg(par, 0x05, 0x0000);\r\nbreak;\r\ncase 270:\r\nwrite_reg(par, 0x01, 0x0080);\r\nwrite_reg(par, 0x05, 0x0001);\r\nbreak;\r\ncase 90:\r\nwrite_reg(par, 0x01, 0x0040);\r\nwrite_reg(par, 0x05, 0x0001);\r\nbreak;\r\n}\r\nreturn 0;\r\n}
