static int rn5t618_regulator_probe(struct platform_device *pdev)\r\n{\r\nstruct rn5t618 *rn5t618 = dev_get_drvdata(pdev->dev.parent);\r\nstruct regulator_config config = { };\r\nstruct regulator_dev *rdev;\r\nstruct regulator_desc *regulators;\r\nint i;\r\nswitch (rn5t618->variant) {\r\ncase RN5T567:\r\nregulators = rn5t567_regulators;\r\nbreak;\r\ncase RN5T618:\r\nregulators = rn5t618_regulators;\r\nbreak;\r\ndefault:\r\nreturn -EINVAL;\r\n}\r\nconfig.dev = pdev->dev.parent;\r\nconfig.regmap = rn5t618->regmap;\r\nfor (i = 0; i < RN5T618_REG_NUM; i++) {\r\nif (!regulators[i].name)\r\ncontinue;\r\nrdev = devm_regulator_register(&pdev->dev,\r\n&regulators[i],\r\n&config);\r\nif (IS_ERR(rdev)) {\r\ndev_err(&pdev->dev, "failed to register %s regulator\n",\r\nregulators[i].name);\r\nreturn PTR_ERR(rdev);\r\n}\r\n}\r\nreturn 0;\r\n}
