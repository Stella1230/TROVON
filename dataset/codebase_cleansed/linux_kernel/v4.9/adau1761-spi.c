static void adau1761_spi_switch_mode(struct device *dev)\r\n{\r\nstruct spi_device *spi = to_spi_device(dev);\r\nspi_w8r8(spi, 0x00);\r\nspi_w8r8(spi, 0x00);\r\nspi_w8r8(spi, 0x00);\r\n}\r\nstatic int adau1761_spi_probe(struct spi_device *spi)\r\n{\r\nconst struct spi_device_id *id = spi_get_device_id(spi);\r\nstruct regmap_config config;\r\nif (!id)\r\nreturn -EINVAL;\r\nconfig = adau1761_regmap_config;\r\nconfig.val_bits = 8;\r\nconfig.reg_bits = 24;\r\nconfig.read_flag_mask = 0x1;\r\nreturn adau1761_probe(&spi->dev,\r\ndevm_regmap_init_spi(spi, &config),\r\nid->driver_data, adau1761_spi_switch_mode);\r\n}\r\nstatic int adau1761_spi_remove(struct spi_device *spi)\r\n{\r\nadau17x1_remove(&spi->dev);\r\nreturn 0;\r\n}
