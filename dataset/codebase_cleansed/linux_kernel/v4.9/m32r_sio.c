static int puts(const char *s)\r\n{\r\nchar c;\r\nwhile ((c = *s++))\r\nm32r_putc(c);\r\nreturn 0;\r\n}\r\nstatic void m32r_putc(char c)\r\n{\r\nwhile ((*BOOT_SIO0STS & 0x3) != 0x3)\r\ncpu_relax();\r\nif (c == '\n') {\r\n*BOOT_SIO0TXB = '\r';\r\nwhile ((*BOOT_SIO0STS & 0x3) != 0x3)\r\ncpu_relax();\r\n}\r\n*BOOT_SIO0TXB = c;\r\n}\r\nstatic void m32r_putc(char c)\r\n{\r\nwhile ((*SIO0STS & 0x1) == 0)\r\ncpu_relax();\r\nif (c == '\n') {\r\n*SIO0TXB = '\r';\r\nwhile ((*SIO0STS & 0x1) == 0)\r\ncpu_relax();\r\n}\r\n*SIO0TXB = c;\r\n}
