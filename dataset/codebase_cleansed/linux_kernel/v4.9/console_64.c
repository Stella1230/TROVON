static int __prom_console_write_buf(const char *buf, int len)\r\n{\r\nunsigned long args[7];\r\nint ret;\r\nargs[0] = (unsigned long) "write";\r\nargs[1] = 3;\r\nargs[2] = 1;\r\nargs[3] = (unsigned int) prom_stdout;\r\nargs[4] = (unsigned long) buf;\r\nargs[5] = (unsigned int) len;\r\nargs[6] = (unsigned long) -1;\r\np1275_cmd_direct(args);\r\nret = (int) args[6];\r\nif (ret < 0)\r\nreturn -1;\r\nreturn ret;\r\n}\r\nvoid prom_console_write_buf(const char *buf, int len)\r\n{\r\nwhile (len) {\r\nint n = __prom_console_write_buf(buf, len);\r\nif (n < 0)\r\ncontinue;\r\nlen -= n;\r\nbuf += len;\r\n}\r\n}
