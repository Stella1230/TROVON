static void hpi_init_message(struct hpi_message *phm, u16 object,\r\nu16 function)\r\n{\r\nu16 size;\r\nif ((object > 0) && (object <= HPI_OBJ_MAXINDEX))\r\nsize = msg_size[object];\r\nelse\r\nsize = sizeof(*phm);\r\nmemset(phm, 0, size);\r\nphm->size = size;\r\nif (gwSSX2_bypass)\r\nphm->type = HPI_TYPE_SSX2BYPASS_MESSAGE;\r\nelse\r\nphm->type = HPI_TYPE_REQUEST;\r\nphm->object = object;\r\nphm->function = function;\r\nphm->version = 0;\r\nphm->adapter_index = HPI_ADAPTER_INDEX_INVALID;\r\n}\r\nvoid hpi_init_response(struct hpi_response *phr, u16 object, u16 function,\r\nu16 error)\r\n{\r\nu16 size;\r\nif ((object > 0) && (object <= HPI_OBJ_MAXINDEX))\r\nsize = res_size[object];\r\nelse\r\nsize = sizeof(*phr);\r\nmemset(phr, 0, sizeof(*phr));\r\nphr->size = size;\r\nphr->type = HPI_TYPE_RESPONSE;\r\nphr->object = object;\r\nphr->function = function;\r\nphr->error = error;\r\nphr->specific_error = 0;\r\nphr->version = 0;\r\n}\r\nvoid hpi_init_message_response(struct hpi_message *phm,\r\nstruct hpi_response *phr, u16 object, u16 function)\r\n{\r\nhpi_init_message(phm, object, function);\r\nhpi_init_response(phr, object, function,\r\nHPI_ERROR_PROCESSING_MESSAGE);\r\n}\r\nstatic void hpi_init_messageV1(struct hpi_message_header *phm, u16 size,\r\nu16 object, u16 function)\r\n{\r\nmemset(phm, 0, size);\r\nif ((object > 0) && (object <= HPI_OBJ_MAXINDEX)) {\r\nphm->size = size;\r\nphm->type = HPI_TYPE_REQUEST;\r\nphm->object = object;\r\nphm->function = function;\r\nphm->version = 1;\r\n}\r\n}\r\nvoid hpi_init_responseV1(struct hpi_response_header *phr, u16 size,\r\nu16 object, u16 function)\r\n{\r\n(void)object;\r\n(void)function;\r\nmemset(phr, 0, size);\r\nphr->size = size;\r\nphr->version = 1;\r\nphr->type = HPI_TYPE_RESPONSE;\r\nphr->error = HPI_ERROR_PROCESSING_MESSAGE;\r\n}\r\nvoid hpi_init_message_responseV1(struct hpi_message_header *phm, u16 msg_size,\r\nstruct hpi_response_header *phr, u16 res_size, u16 object,\r\nu16 function)\r\n{\r\nhpi_init_messageV1(phm, msg_size, object, function);\r\nhpi_init_responseV1(phr, res_size, object, function);\r\n}
