static unsigned long mpll_recalc_rate(struct clk_hw *hw,\r\nunsigned long parent_rate)\r\n{\r\nstruct meson_clk_mpll *mpll = to_meson_clk_mpll(hw);\r\nstruct parm *p;\r\nunsigned long rate = 0;\r\nunsigned long reg, sdm, n2;\r\np = &mpll->sdm;\r\nreg = readl(mpll->base + p->reg_off);\r\nsdm = PARM_GET(p->width, p->shift, reg);\r\np = &mpll->n2;\r\nreg = readl(mpll->base + p->reg_off);\r\nn2 = PARM_GET(p->width, p->shift, reg);\r\nrate = (parent_rate * SDM_MAX) / ((SDM_MAX * n2) + sdm);\r\nreturn rate;\r\n}
