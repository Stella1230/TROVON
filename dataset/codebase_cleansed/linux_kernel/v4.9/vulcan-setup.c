static void __init vulcan_init(void)\r\n{\r\nixp4xx_sys_init();\r\nvulcan_flash_resource.start = IXP4XX_EXP_BUS_BASE(0);\r\nvulcan_flash_resource.end = IXP4XX_EXP_BUS_BASE(0) + SZ_32M - 1;\r\n*IXP4XX_EXP_CS0 = IXP4XX_EXP_BUS_CS_EN |\r\nIXP4XX_EXP_BUS_STROBE_T(3) |\r\nIXP4XX_EXP_BUS_SIZE(0xF) |\r\nIXP4XX_EXP_BUS_BYTE_RD16 |\r\nIXP4XX_EXP_BUS_WR_EN;\r\n*IXP4XX_EXP_CS1 = *IXP4XX_EXP_CS0;\r\nvulcan_sram_resource.start = IXP4XX_EXP_BUS_BASE(2);\r\nvulcan_sram_resource.end = IXP4XX_EXP_BUS_BASE(2) + SZ_256K - 1;\r\n*IXP4XX_EXP_CS2 = IXP4XX_EXP_BUS_CS_EN |\r\nIXP4XX_EXP_BUS_STROBE_T(1) |\r\nIXP4XX_EXP_BUS_HOLD_T(2) |\r\nIXP4XX_EXP_BUS_SIZE(9) |\r\nIXP4XX_EXP_BUS_SPLT_EN |\r\nIXP4XX_EXP_BUS_WR_EN |\r\nIXP4XX_EXP_BUS_BYTE_EN;\r\nvulcan_uart_resources[2].start = IXP4XX_EXP_BUS_BASE(3);\r\nvulcan_uart_resources[2].end = IXP4XX_EXP_BUS_BASE(3) + 16 - 1;\r\nvulcan_uart_data[2].mapbase = vulcan_uart_resources[2].start;\r\nvulcan_uart_data[3].mapbase = vulcan_uart_data[2].mapbase + 8;\r\n*IXP4XX_EXP_CS3 = IXP4XX_EXP_BUS_CS_EN |\r\nIXP4XX_EXP_BUS_STROBE_T(3) |\r\nIXP4XX_EXP_BUS_CYCLES(IXP4XX_EXP_BUS_CYCLES_MOTOROLA)|\r\nIXP4XX_EXP_BUS_WR_EN |\r\nIXP4XX_EXP_BUS_BYTE_EN;\r\n*IXP4XX_EXP_CS4 = IXP4XX_EXP_BUS_CS_EN |\r\nIXP4XX_EXP_BUS_WR_EN |\r\nIXP4XX_EXP_BUS_BYTE_EN;\r\nvulcan_max6369_resource.start = IXP4XX_EXP_BUS_BASE(5);\r\nvulcan_max6369_resource.end = IXP4XX_EXP_BUS_BASE(5);\r\n*IXP4XX_EXP_CS5 = IXP4XX_EXP_BUS_CS_EN |\r\nIXP4XX_EXP_BUS_WR_EN |\r\nIXP4XX_EXP_BUS_BYTE_EN;\r\nplatform_add_devices(vulcan_devices, ARRAY_SIZE(vulcan_devices));\r\n}
