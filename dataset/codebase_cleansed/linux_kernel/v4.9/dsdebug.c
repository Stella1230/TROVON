static void\r\nacpi_ds_print_node_pathname(struct acpi_namespace_node *node,\r\nconst char *message)\r\n{\r\nstruct acpi_buffer buffer;\r\nacpi_status status;\r\nACPI_FUNCTION_TRACE(ds_print_node_pathname);\r\nif (!node) {\r\nACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH, "[NULL NAME]"));\r\nreturn_VOID;\r\n}\r\nbuffer.length = ACPI_ALLOCATE_LOCAL_BUFFER;\r\nstatus = acpi_ns_handle_to_pathname(node, &buffer, TRUE);\r\nif (ACPI_SUCCESS(status)) {\r\nif (message) {\r\nACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH, "%s ",\r\nmessage));\r\n}\r\nACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH, "[%s] (Node %p)",\r\n(char *)buffer.pointer, node));\r\nACPI_FREE(buffer.pointer);\r\n}\r\nreturn_VOID;\r\n}\r\nvoid\r\nacpi_ds_dump_method_stack(acpi_status status,\r\nstruct acpi_walk_state *walk_state,\r\nunion acpi_parse_object *op)\r\n{\r\nunion acpi_parse_object *next;\r\nstruct acpi_thread_state *thread;\r\nstruct acpi_walk_state *next_walk_state;\r\nstruct acpi_namespace_node *previous_method = NULL;\r\nunion acpi_operand_object *method_desc;\r\nACPI_FUNCTION_TRACE(ds_dump_method_stack);\r\nif ((status & AE_CODE_MASK) == AE_CODE_CONTROL) {\r\nreturn_VOID;\r\n}\r\nif (walk_state->deferred_node) {\r\nACPI_DEBUG_PRINT((ACPI_DB_DISPATCH,\r\n"Executing subtree for Buffer/Package/Region\n"));\r\nreturn_VOID;\r\n}\r\nthread = walk_state->thread;\r\nif (!thread) {\r\nreturn_VOID;\r\n}\r\nACPI_DEBUG_PRINT((ACPI_DB_DISPATCH,\r\n"\n**** Exception %s during execution of method ",\r\nacpi_format_exception(status)));\r\nacpi_ds_print_node_pathname(walk_state->method_node, NULL);\r\nACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH,\r\n"\n\nMethod Execution Stack:\n"));\r\nnext_walk_state = thread->walk_state_list;\r\nwhile (next_walk_state) {\r\nmethod_desc = next_walk_state->method_desc;\r\nif (method_desc) {\r\nacpi_ex_stop_trace_method((struct acpi_namespace_node *)\r\nmethod_desc->method.node,\r\nmethod_desc, walk_state);\r\n}\r\nACPI_DEBUG_PRINT((ACPI_DB_DISPATCH,\r\n" Method [%4.4s] executing: ",\r\nacpi_ut_get_node_name(next_walk_state->\r\nmethod_node)));\r\nif (next_walk_state == walk_state) {\r\nif (op) {\r\nnext = op->common.next;\r\nop->common.next = NULL;\r\n#ifdef ACPI_DISASSEMBLER\r\nacpi_dm_disassemble(next_walk_state, op,\r\nACPI_UINT32_MAX);\r\n#endif\r\nop->common.next = next;\r\n}\r\n} else {\r\nACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH,\r\n"Call to method "));\r\nacpi_ds_print_node_pathname(previous_method, NULL);\r\n}\r\nprevious_method = next_walk_state->method_node;\r\nnext_walk_state = next_walk_state->next;\r\nACPI_DEBUG_PRINT_RAW((ACPI_DB_DISPATCH, "\n"));\r\n}\r\nreturn_VOID;\r\n}\r\nvoid\r\nacpi_ds_dump_method_stack(acpi_status status,\r\nstruct acpi_walk_state *walk_state,\r\nunion acpi_parse_object *op)\r\n{\r\nreturn;\r\n}
