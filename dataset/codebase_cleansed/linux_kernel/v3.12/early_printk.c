static void early_write(const char *s, unsigned n)\r\n{\r\nwhile (n-- > 0) {\r\nif (*s == '\n')\r\nprintch('\r');\r\nprintch(*s);\r\ns++;\r\n}\r\n}\r\nstatic void early_console_write(struct console *con, const char *s, unsigned n)\r\n{\r\nearly_write(s, n);\r\n}\r\nstatic int __init setup_early_printk(char *buf)\r\n{\r\nearly_console = &early_console_dev;\r\nregister_console(&early_console_dev);\r\nreturn 0;\r\n}
