static int __init smp_spin_table_init_cpu(struct device_node *dn, int cpu)\r\n{\r\nif (of_property_read_u64(dn, "cpu-release-addr",\r\n&cpu_release_addr[cpu])) {\r\npr_err("CPU %d: missing or invalid cpu-release-addr property\n",\r\ncpu);\r\nreturn -1;\r\n}\r\nreturn 0;\r\n}\r\nstatic int __init smp_spin_table_prepare_cpu(int cpu)\r\n{\r\nvoid **release_addr;\r\nif (!cpu_release_addr[cpu])\r\nreturn -ENODEV;\r\nrelease_addr = __va(cpu_release_addr[cpu]);\r\nrelease_addr[0] = (void *)__pa(secondary_holding_pen);\r\n__flush_dcache_area(release_addr, sizeof(release_addr[0]));\r\nsev();\r\nreturn 0;\r\n}
