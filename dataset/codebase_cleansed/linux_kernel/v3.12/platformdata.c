void __init *s3c_set_platdata(void *pd, size_t pdsize,\r\nstruct platform_device *pdev)\r\n{\r\nvoid *npd;\r\nif (!pd) {\r\nprintk(KERN_ERR "%s: no platform data supplied\n", pdev->name);\r\nreturn NULL;\r\n}\r\nnpd = kmemdup(pd, pdsize, GFP_KERNEL);\r\nif (!npd) {\r\nprintk(KERN_ERR "%s: cannot clone platform data\n", pdev->name);\r\nreturn NULL;\r\n}\r\npdev->dev.platform_data = npd;\r\nreturn npd;\r\n}\r\nvoid s3c_sdhci_set_platdata(struct s3c_sdhci_platdata *pd,\r\nstruct s3c_sdhci_platdata *set)\r\n{\r\nset->cd_type = pd->cd_type;\r\nset->ext_cd_init = pd->ext_cd_init;\r\nset->ext_cd_cleanup = pd->ext_cd_cleanup;\r\nset->ext_cd_gpio = pd->ext_cd_gpio;\r\nset->ext_cd_gpio_invert = pd->ext_cd_gpio_invert;\r\nif (pd->max_width)\r\nset->max_width = pd->max_width;\r\nif (pd->cfg_gpio)\r\nset->cfg_gpio = pd->cfg_gpio;\r\nif (pd->host_caps)\r\nset->host_caps |= pd->host_caps;\r\nif (pd->host_caps2)\r\nset->host_caps2 |= pd->host_caps2;\r\nif (pd->pm_caps)\r\nset->pm_caps |= pd->pm_caps;\r\n}
