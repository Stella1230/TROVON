static void psr2_spin(void)\r\n{\r\nhard_irq_disable();\r\nfor (;;)\r\ncontinue;\r\n}\r\nstatic void psr2_restart(char *cmd)\r\n{\r\npsr2_spin();\r\n}\r\nstatic int __init psr2_probe(void)\r\n{\r\nunsigned long root = of_get_flat_dt_root();\r\nif (of_flat_dt_is_compatible(root, "ibm,wsp-chroma")) {\r\nreturn 0;\r\n}\r\nif (!of_flat_dt_is_compatible(root, "ibm,psr2"))\r\nreturn 0;\r\nreturn 1;\r\n}
