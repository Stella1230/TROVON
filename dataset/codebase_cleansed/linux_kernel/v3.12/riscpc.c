static int __init parse_tag_acorn(const struct tag *tag)\r\n{\r\nmemc_ctrl_reg = tag->u.acorn.memc_control_reg;\r\nnumber_mfm_drives = tag->u.acorn.adfsdrives;\r\nswitch (tag->u.acorn.vram_pages) {\r\ncase 512:\r\nvram_size += PAGE_SIZE * 256;\r\ncase 256:\r\nvram_size += PAGE_SIZE * 256;\r\ndefault:\r\nbreak;\r\n}\r\n#if 0\r\nif (vram_size) {\r\ndesc->video_start = 0x02000000;\r\ndesc->video_end = 0x02000000 + vram_size;\r\n}\r\n#endif\r\nreturn 0;\r\n}\r\nstatic void __init rpc_map_io(void)\r\n{\r\niotable_init(rpc_io_desc, ARRAY_SIZE(rpc_io_desc));\r\nwriteb(0xc, PCIO_BASE + (0x3f2 << 2));\r\nelf_hwcap &= ~HWCAP_HALF;\r\n}\r\nstatic int __init rpc_init(void)\r\n{\r\ni2c_register_board_info(0, &i2c_rtc, 1);\r\nreturn platform_add_devices(devs, ARRAY_SIZE(devs));\r\n}\r\nstatic void rpc_restart(enum reboot_mode mode, const char *cmd)\r\n{\r\niomd_writeb(0, IOMD_ROMCR0);\r\nsoft_restart(0);\r\n}
