static void __init cm_t3517_init_leds(void)\r\n{\r\nplatform_device_register(&cm_t3517_led_device);\r\n}\r\nstatic inline void cm_t3517_init_leds(void) {}\r\nstatic void cm_t3517_init_hecc(void)\r\n{\r\nplatform_device_register(&cm_t3517_hecc_device);\r\n}\r\nstatic inline void cm_t3517_init_hecc(void) {}\r\nstatic void __init cm_t3517_init_rtc(void)\r\n{\r\nint err;\r\nerr = gpio_request_one(RTC_CS_EN_GPIO, GPIOF_OUT_INIT_HIGH,\r\n"rtc cs en");\r\nif (err) {\r\npr_err("CM-T3517: rtc cs en gpio request failed: %d\n", err);\r\nreturn;\r\n}\r\nplatform_device_register(&cm_t3517_rtc_device);\r\n}\r\nstatic inline void cm_t3517_init_rtc(void) {}\r\nstatic int __init cm_t3517_init_usbh(void)\r\n{\r\nint err;\r\nerr = gpio_request_one(USB_HUB_RESET_GPIO, GPIOF_OUT_INIT_LOW,\r\n"usb hub rst");\r\nif (err) {\r\npr_err("CM-T3517: usb hub rst gpio request failed: %d\n", err);\r\n} else {\r\nudelay(10);\r\ngpio_set_value(USB_HUB_RESET_GPIO, 1);\r\nmsleep(1);\r\n}\r\nusbhs_init_phys(phy_data, ARRAY_SIZE(phy_data));\r\nusbhs_init(&cm_t3517_ehci_pdata);\r\nreturn 0;\r\n}\r\nstatic inline int cm_t3517_init_usbh(void)\r\n{\r\nreturn 0;\r\n}\r\nstatic void __init cm_t3517_init_nand(void)\r\n{\r\nif (gpmc_nand_init(&cm_t3517_nand_data, NULL) < 0)\r\npr_err("CM-T3517: NAND initialization failed\n");\r\n}\r\nstatic inline void cm_t3517_init_nand(void) {}\r\nstatic void __init cm_t3517_init(void)\r\n{\r\nomap3_mux_init(board_mux, OMAP_PACKAGE_CBB);\r\nomap_serial_init();\r\nomap_sdrc_init(NULL, NULL);\r\ncm_t3517_init_leds();\r\ncm_t3517_init_nand();\r\ncm_t3517_init_rtc();\r\ncm_t3517_init_usbh();\r\ncm_t3517_init_hecc();\r\nam35xx_emac_init(AM35XX_DEFAULT_MDIO_FREQUENCY, 1);\r\nomap_hsmmc_init(cm_t3517_mmc);\r\n}
