static void __init pleb_init(void)\r\n{\r\nsa11x0_register_mtd(&pleb_flash_data, pleb_flash_resources,\r\nARRAY_SIZE(pleb_flash_resources));\r\nplatform_add_devices(devices, ARRAY_SIZE(devices));\r\n}\r\nstatic void __init pleb_map_io(void)\r\n{\r\nsa1100_map_io();\r\nsa1100_register_uart(0, 3);\r\nsa1100_register_uart(1, 1);\r\nGAFR |= (GPIO_UART_TXD | GPIO_UART_RXD);\r\nGPDR |= GPIO_UART_TXD;\r\nGPDR &= ~GPIO_UART_RXD;\r\nPPAR |= PPAR_UPR;\r\nMECR = ((2<<10) | (2<<5) | (2<<0));\r\nGPDR |= GPIO_ETH0_EN;\r\nGPCR = GPIO_ETH0_EN;\r\nGPDR &= ~GPIO_ETH0_IRQ;\r\nirq_set_irq_type(GPIO_ETH0_IRQ, IRQ_TYPE_EDGE_FALLING);\r\n}
