static void __init at91rm9200_register_clocks(void)\r\n{\r\nint i;\r\nfor (i = 0; i < ARRAY_SIZE(periph_clocks); i++)\r\nclk_register(periph_clocks[i]);\r\nclkdev_add_table(periph_clocks_lookups,\r\nARRAY_SIZE(periph_clocks_lookups));\r\nclkdev_add_table(usart_clocks_lookups,\r\nARRAY_SIZE(usart_clocks_lookups));\r\nclk_register(&pck0);\r\nclk_register(&pck1);\r\nclk_register(&pck2);\r\nclk_register(&pck3);\r\n}\r\nstatic void at91rm9200_idle(void)\r\n{\r\nat91_pmc_write(AT91_PMC_SCDR, AT91_PMC_PCK);\r\n}\r\nstatic void at91rm9200_restart(enum reboot_mode reboot_mode, const char *cmd)\r\n{\r\nat91_st_write(AT91_ST_WDMR, AT91_ST_RSTEN | AT91_ST_EXTEN | 1);\r\nat91_st_write(AT91_ST_CR, AT91_ST_WDRST);\r\n}\r\nstatic void __init at91rm9200_map_io(void)\r\n{\r\nat91_init_sram(0, AT91RM9200_SRAM_BASE, AT91RM9200_SRAM_SIZE);\r\n}\r\nstatic void __init at91rm9200_ioremap_registers(void)\r\n{\r\nat91rm9200_ioremap_st(AT91RM9200_BASE_ST);\r\nat91_ioremap_ramc(0, AT91RM9200_BASE_MC, 256);\r\n}\r\nstatic void __init at91rm9200_initialize(void)\r\n{\r\narm_pm_idle = at91rm9200_idle;\r\narm_pm_restart = at91rm9200_restart;\r\nat91_gpio_init(at91rm9200_gpio,\r\ncpu_is_at91rm9200_bga() ? AT91RM9200_BGA : AT91RM9200_PQFP);\r\n}
