static int zynq_enter_idle(struct cpuidle_device *dev,\r\nstruct cpuidle_driver *drv, int index)\r\n{\r\ncpu_pm_enter();\r\ncpu_do_idle();\r\ncpu_pm_exit();\r\nreturn index;\r\n}\r\nstatic int __init zynq_cpuidle_init(void)\r\n{\r\nif (!of_machine_is_compatible("xlnx,zynq-7000"))\r\nreturn -ENODEV;\r\npr_info("Xilinx Zynq CpuIdle Driver started\n");\r\nreturn cpuidle_register(&zynq_idle_driver, NULL);\r\n}
