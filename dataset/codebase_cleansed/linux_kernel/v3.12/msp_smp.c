static void ipi_resched_dispatch(void)\r\n{\r\ndo_IRQ(MIPS_CPU_IPI_RESCHED_IRQ);\r\n}\r\nstatic void ipi_call_dispatch(void)\r\n{\r\ndo_IRQ(MIPS_CPU_IPI_CALL_IRQ);\r\n}\r\nstatic irqreturn_t ipi_resched_interrupt(int irq, void *dev_id)\r\n{\r\nreturn IRQ_HANDLED;\r\n}\r\nstatic irqreturn_t ipi_call_interrupt(int irq, void *dev_id)\r\n{\r\nsmp_call_function_interrupt();\r\nreturn IRQ_HANDLED;\r\n}\r\nvoid __init arch_init_ipiirq(int irq, struct irqaction *action)\r\n{\r\nsetup_irq(irq, action);\r\nirq_set_handler(irq, handle_percpu_irq);\r\n}\r\nvoid __init msp_vsmp_int_init(void)\r\n{\r\nset_vi_handler(MIPS_CPU_IPI_RESCHED_IRQ, ipi_resched_dispatch);\r\nset_vi_handler(MIPS_CPU_IPI_CALL_IRQ, ipi_call_dispatch);\r\narch_init_ipiirq(MIPS_CPU_IPI_RESCHED_IRQ, &irq_resched);\r\narch_init_ipiirq(MIPS_CPU_IPI_CALL_IRQ, &irq_call);\r\n}
