static int usbhs_rcar2_hardware_init(struct platform_device *pdev)\r\n{\r\nstruct usbhs_priv *priv = usbhs_pdev_to_priv(pdev);\r\nstruct usb_phy *phy;\r\nphy = usb_get_phy_dev(&pdev->dev, 0);\r\nif (IS_ERR(phy))\r\nreturn PTR_ERR(phy);\r\npriv->phy = phy;\r\nreturn 0;\r\n}\r\nstatic int usbhs_rcar2_hardware_exit(struct platform_device *pdev)\r\n{\r\nstruct usbhs_priv *priv = usbhs_pdev_to_priv(pdev);\r\nif (!priv->phy)\r\nreturn 0;\r\nusb_put_phy(priv->phy);\r\npriv->phy = NULL;\r\nreturn 0;\r\n}\r\nstatic int usbhs_rcar2_power_ctrl(struct platform_device *pdev,\r\nvoid __iomem *base, int enable)\r\n{\r\nstruct usbhs_priv *priv = usbhs_pdev_to_priv(pdev);\r\nif (!priv->phy)\r\nreturn -ENODEV;\r\nif (enable) {\r\nint retval = usb_phy_init(priv->phy);\r\nif (!retval)\r\nretval = usb_phy_set_suspend(priv->phy, 0);\r\nreturn retval;\r\n}\r\nusb_phy_set_suspend(priv->phy, 1);\r\nusb_phy_shutdown(priv->phy);\r\nreturn 0;\r\n}\r\nstatic int usbhs_rcar2_get_id(struct platform_device *pdev)\r\n{\r\nreturn USBHS_GADGET;\r\n}
