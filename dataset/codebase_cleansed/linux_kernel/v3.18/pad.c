int\r\n_nvkm_i2c_pad_fini(struct nouveau_object *object, bool suspend)\r\n{\r\nstruct nvkm_i2c_pad *pad = (void *)object;\r\nDBG("-> NULL\n");\r\npad->port = NULL;\r\nreturn nouveau_object_fini(&pad->base, suspend);\r\n}\r\nint\r\n_nvkm_i2c_pad_init(struct nouveau_object *object)\r\n{\r\nstruct nvkm_i2c_pad *pad = (void *)object;\r\nDBG("-> PORT:%02x\n", pad->next->index);\r\npad->port = pad->next;\r\nreturn nouveau_object_init(&pad->base);\r\n}\r\nint\r\nnvkm_i2c_pad_create_(struct nouveau_object *parent,\r\nstruct nouveau_object *engine,\r\nstruct nouveau_oclass *oclass, int index,\r\nint size, void **pobject)\r\n{\r\nstruct nouveau_i2c *i2c = (void *)engine;\r\nstruct nouveau_i2c_port *port;\r\nstruct nvkm_i2c_pad *pad;\r\nint ret;\r\nlist_for_each_entry(port, &i2c->ports, head) {\r\npad = nvkm_i2c_pad(port);\r\nif (pad->index == index) {\r\natomic_inc(&nv_object(pad)->refcount);\r\n*pobject = pad;\r\nreturn 1;\r\n}\r\n}\r\nret = nouveau_object_create_(parent, engine, oclass, 0, size, pobject);\r\npad = *pobject;\r\nif (ret)\r\nreturn ret;\r\npad->index = index;\r\nreturn 0;\r\n}\r\nint\r\n_nvkm_i2c_pad_ctor(struct nouveau_object *parent, struct nouveau_object *engine,\r\nstruct nouveau_oclass *oclass, void *data, u32 index,\r\nstruct nouveau_object **pobject)\r\n{\r\nstruct nvkm_i2c_pad *pad;\r\nint ret;\r\nret = nvkm_i2c_pad_create(parent, engine, oclass, index, &pad);\r\n*pobject = nv_object(pad);\r\nreturn ret;\r\n}
