static int emev2_boot_secondary(unsigned int cpu, struct task_struct *idle)\r\n{\r\narch_send_wakeup_ipi_mask(cpumask_of(cpu_logical_map(cpu)));\r\nreturn 0;\r\n}\r\nstatic void __init emev2_smp_prepare_cpus(unsigned int max_cpus)\r\n{\r\nvoid __iomem *smu;\r\nsmu = ioremap(EMEV2_SMU_BASE, PAGE_SIZE);\r\nif (smu) {\r\niowrite32(__pa(shmobile_boot_vector), smu + SMU_GENERAL_REG0);\r\niounmap(smu);\r\n}\r\nshmobile_scu_base = ioremap(EMEV2_SCU_BASE, PAGE_SIZE);\r\nshmobile_smp_scu_prepare_cpus(max_cpus);\r\n}
