bool IEEE11hbMSRRepTx(void *pMgmtHandle)\r\n{\r\nPSMgmtObject pMgmt = (PSMgmtObject) pMgmtHandle;\r\nPWLAN_FRAME_MSRREP pMSRRep = (PWLAN_FRAME_MSRREP)\r\n(pMgmt->abyCurrentMSRRep + sizeof(STxMgmtPacket));\r\nsize_t uLength = 0;\r\nPSTxMgmtPacket pTxPacket = NULL;\r\npTxPacket = (PSTxMgmtPacket)pMgmt->abyCurrentMSRRep;\r\nmemset(pTxPacket, 0, sizeof(STxMgmtPacket) + WLAN_A3FR_MAXLEN);\r\npTxPacket->p80211Header = (PUWLAN_80211HDR)((unsigned char *)pTxPacket +\r\nsizeof(STxMgmtPacket));\r\npMSRRep->Header.wFrameCtl = (WLAN_SET_FC_FTYPE(WLAN_FTYPE_MGMT) |\r\nWLAN_SET_FC_FSTYPE(WLAN_FSTYPE_ACTION)\r\n);\r\nmemcpy(pMSRRep->Header.abyAddr1, ((PWLAN_FRAME_MSRREQ)\r\n(pMgmt->abyCurrentMSRReq))->Header.abyAddr2, WLAN_ADDR_LEN);\r\nmemcpy(pMSRRep->Header.abyAddr2,\r\nCARDpGetCurrentAddress(pMgmt->pAdapter), WLAN_ADDR_LEN);\r\nmemcpy(pMSRRep->Header.abyAddr3, pMgmt->abyCurrBSSID, WLAN_BSSID_LEN);\r\npMSRRep->byCategory = 0;\r\npMSRRep->byAction = 1;\r\npMSRRep->byDialogToken = ((PWLAN_FRAME_MSRREQ)\r\n(pMgmt->abyCurrentMSRReq))->byDialogToken;\r\nuLength = pMgmt->uLengthOfRepEIDs + offsetof(WLAN_FRAME_MSRREP,\r\nsMSRRepEIDs);\r\npTxPacket->cbMPDULen = uLength;\r\npTxPacket->cbPayloadLen = uLength - WLAN_HDR_ADDR3_LEN;\r\nif (csMgmt_xmit(pMgmt->pAdapter, pTxPacket) != CMD_STATUS_PENDING)\r\nreturn false;\r\nreturn true;\r\n}
