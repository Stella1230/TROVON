int\r\nsgl_fcmp (sgl_floating_point * leftptr, sgl_floating_point * rightptr,\r\nunsigned int cond, unsigned int *status)\r\n{\r\nregister unsigned int left, right;\r\nregister int xorresult;\r\nleft = *leftptr;\r\nright = *rightptr;\r\nif( (Sgl_exponent(left) == SGL_INFINITY_EXPONENT)\r\n|| (Sgl_exponent(right) == SGL_INFINITY_EXPONENT) )\r\n{\r\nif( ( (Sgl_exponent(left) == SGL_INFINITY_EXPONENT)\r\n&& Sgl_isnotzero_mantissa(left)\r\n&& (Exception(cond) || Sgl_isone_signaling(left)))\r\n||\r\n( (Sgl_exponent(right) == SGL_INFINITY_EXPONENT)\r\n&& Sgl_isnotzero_mantissa(right)\r\n&& (Exception(cond) || Sgl_isone_signaling(right)) ) )\r\n{\r\nif( Is_invalidtrap_enabled() ) {\r\nSet_status_cbit(Unordered(cond));\r\nreturn(INVALIDEXCEPTION);\r\n}\r\nelse Set_invalidflag();\r\nSet_status_cbit(Unordered(cond));\r\nreturn(NOEXCEPTION);\r\n}\r\nelse if( ((Sgl_exponent(left) == SGL_INFINITY_EXPONENT)\r\n&& Sgl_isnotzero_mantissa(left))\r\n||\r\n((Sgl_exponent(right) == SGL_INFINITY_EXPONENT)\r\n&& Sgl_isnotzero_mantissa(right)) )\r\n{\r\nSet_status_cbit(Unordered(cond));\r\nreturn(NOEXCEPTION);\r\n}\r\n}\r\nSgl_xortointp1(left,right,xorresult);\r\nif( xorresult < 0 )\r\n{\r\nif( Sgl_iszero_exponentmantissa(left)\r\n&& Sgl_iszero_exponentmantissa(right) )\r\n{\r\nSet_status_cbit(Equal(cond));\r\n}\r\nelse if( Sgl_isone_sign(left) )\r\n{\r\nSet_status_cbit(Lessthan(cond));\r\n}\r\nelse\r\n{\r\nSet_status_cbit(Greaterthan(cond));\r\n}\r\n}\r\nelse if( Sgl_all(left) == Sgl_all(right) )\r\n{\r\nSet_status_cbit(Equal(cond));\r\n}\r\nelse if( Sgl_iszero_sign(left) )\r\n{\r\nif( Sgl_all(left) < Sgl_all(right) )\r\n{\r\nSet_status_cbit(Lessthan(cond));\r\n}\r\nelse\r\n{\r\nSet_status_cbit(Greaterthan(cond));\r\n}\r\n}\r\nelse\r\n{\r\nif( Sgl_all(left) > Sgl_all(right) )\r\n{\r\nSet_status_cbit(Lessthan(cond));\r\n}\r\nelse\r\n{\r\nSet_status_cbit(Greaterthan(cond));\r\n}\r\n}\r\nreturn(NOEXCEPTION);\r\n}
