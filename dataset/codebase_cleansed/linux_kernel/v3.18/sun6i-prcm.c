static int sun6i_prcm_probe(struct platform_device *pdev)\r\n{\r\nstruct device_node *np = pdev->dev.of_node;\r\nconst struct of_device_id *match;\r\nconst struct prcm_data *data;\r\nstruct resource *res;\r\nint ret;\r\nmatch = of_match_node(sun6i_prcm_dt_ids, np);\r\nif (!match)\r\nreturn -EINVAL;\r\ndata = match->data;\r\nres = platform_get_resource(pdev, IORESOURCE_MEM, 0);\r\nif (!res) {\r\ndev_err(&pdev->dev, "no prcm memory region provided\n");\r\nreturn -ENOENT;\r\n}\r\nret = mfd_add_devices(&pdev->dev, 0, data->subdevs, data->nsubdevs,\r\nres, -1, NULL);\r\nif (ret) {\r\ndev_err(&pdev->dev, "failed to add subdevices\n");\r\nreturn ret;\r\n}\r\nreturn 0;\r\n}
