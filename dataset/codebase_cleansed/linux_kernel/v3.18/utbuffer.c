void acpi_ut_dump_buffer(u8 *buffer, u32 count, u32 display, u32 base_offset)\r\n{\r\nu32 i = 0;\r\nu32 j;\r\nu32 temp32;\r\nu8 buf_char;\r\nif (!buffer) {\r\nacpi_os_printf("Null Buffer Pointer in DumpBuffer!\n");\r\nreturn;\r\n}\r\nif ((count < 4) || (count & 0x01)) {\r\ndisplay = DB_BYTE_DISPLAY;\r\n}\r\nwhile (i < count) {\r\nacpi_os_printf("%6.4X: ", (base_offset + i));\r\nfor (j = 0; j < 16;) {\r\nif (i + j >= count) {\r\nacpi_os_printf("%*s", ((display * 2) + 1), " ");\r\nj += display;\r\ncontinue;\r\n}\r\nswitch (display) {\r\ncase DB_BYTE_DISPLAY:\r\ndefault:\r\nacpi_os_printf("%02X ",\r\nbuffer[(acpi_size) i + j]);\r\nbreak;\r\ncase DB_WORD_DISPLAY:\r\nACPI_MOVE_16_TO_32(&temp32,\r\n&buffer[(acpi_size) i + j]);\r\nacpi_os_printf("%04X ", temp32);\r\nbreak;\r\ncase DB_DWORD_DISPLAY:\r\nACPI_MOVE_32_TO_32(&temp32,\r\n&buffer[(acpi_size) i + j]);\r\nacpi_os_printf("%08X ", temp32);\r\nbreak;\r\ncase DB_QWORD_DISPLAY:\r\nACPI_MOVE_32_TO_32(&temp32,\r\n&buffer[(acpi_size) i + j]);\r\nacpi_os_printf("%08X", temp32);\r\nACPI_MOVE_32_TO_32(&temp32,\r\n&buffer[(acpi_size) i + j +\r\n4]);\r\nacpi_os_printf("%08X ", temp32);\r\nbreak;\r\n}\r\nj += display;\r\n}\r\nacpi_os_printf(" ");\r\nfor (j = 0; j < 16; j++) {\r\nif (i + j >= count) {\r\nacpi_os_printf("\n");\r\nreturn;\r\n}\r\nbuf_char = buffer[(acpi_size) i + j];\r\nif (ACPI_IS_PRINT(buf_char)) {\r\nacpi_os_printf("%c", buf_char);\r\n} else {\r\nacpi_os_printf(".");\r\n}\r\n}\r\nacpi_os_printf("\n");\r\ni += 16;\r\n}\r\nreturn;\r\n}\r\nvoid\r\nacpi_ut_debug_dump_buffer(u8 *buffer, u32 count, u32 display, u32 component_id)\r\n{\r\nif (!((ACPI_LV_TABLES & acpi_dbg_level) &&\r\n(component_id & acpi_dbg_layer))) {\r\nreturn;\r\n}\r\nacpi_ut_dump_buffer(buffer, count, display, 0);\r\n}\r\nvoid\r\nacpi_ut_dump_buffer_to_file(ACPI_FILE file,\r\nu8 *buffer, u32 count, u32 display, u32 base_offset)\r\n{\r\nu32 i = 0;\r\nu32 j;\r\nu32 temp32;\r\nu8 buf_char;\r\nif (!buffer) {\r\nacpi_ut_file_printf(file,\r\n"Null Buffer Pointer in DumpBuffer!\n");\r\nreturn;\r\n}\r\nif ((count < 4) || (count & 0x01)) {\r\ndisplay = DB_BYTE_DISPLAY;\r\n}\r\nwhile (i < count) {\r\nacpi_ut_file_printf(file, "%6.4X: ", (base_offset + i));\r\nfor (j = 0; j < 16;) {\r\nif (i + j >= count) {\r\nacpi_ut_file_printf(file, "%*s",\r\n((display * 2) + 1), " ");\r\nj += display;\r\ncontinue;\r\n}\r\nswitch (display) {\r\ncase DB_BYTE_DISPLAY:\r\ndefault:\r\nacpi_ut_file_printf(file, "%02X ",\r\nbuffer[(acpi_size) i + j]);\r\nbreak;\r\ncase DB_WORD_DISPLAY:\r\nACPI_MOVE_16_TO_32(&temp32,\r\n&buffer[(acpi_size) i + j]);\r\nacpi_ut_file_printf(file, "%04X ", temp32);\r\nbreak;\r\ncase DB_DWORD_DISPLAY:\r\nACPI_MOVE_32_TO_32(&temp32,\r\n&buffer[(acpi_size) i + j]);\r\nacpi_ut_file_printf(file, "%08X ", temp32);\r\nbreak;\r\ncase DB_QWORD_DISPLAY:\r\nACPI_MOVE_32_TO_32(&temp32,\r\n&buffer[(acpi_size) i + j]);\r\nacpi_ut_file_printf(file, "%08X", temp32);\r\nACPI_MOVE_32_TO_32(&temp32,\r\n&buffer[(acpi_size) i + j +\r\n4]);\r\nacpi_ut_file_printf(file, "%08X ", temp32);\r\nbreak;\r\n}\r\nj += display;\r\n}\r\nacpi_ut_file_printf(file, " ");\r\nfor (j = 0; j < 16; j++) {\r\nif (i + j >= count) {\r\nacpi_ut_file_printf(file, "\n");\r\nreturn;\r\n}\r\nbuf_char = buffer[(acpi_size) i + j];\r\nif (ACPI_IS_PRINT(buf_char)) {\r\nacpi_ut_file_printf(file, "%c", buf_char);\r\n} else {\r\nacpi_ut_file_printf(file, ".");\r\n}\r\n}\r\nacpi_ut_file_printf(file, "\n");\r\ni += 16;\r\n}\r\nreturn;\r\n}
