void s3c2410_cpufreq_setrefresh(struct s3c_cpufreq_config *cfg)\r\n{\r\nstruct s3c_cpufreq_board *board = cfg->board;\r\nunsigned long refresh;\r\nunsigned long refval;\r\nrefresh = (cfg->freq.hclk / 100) * (board->refresh / 10);\r\nrefresh = DIV_ROUND_UP(refresh, (1000 * 1000));\r\nrefresh = (1 << 11) + 1 - refresh;\r\ns3c_freq_dbg("%s: refresh value %lu\n", __func__, refresh);\r\nrefval = __raw_readl(S3C2410_REFRESH);\r\nrefval &= ~((1 << 12) - 1);\r\nrefval |= refresh;\r\n__raw_writel(refval, S3C2410_REFRESH);\r\n}\r\nvoid s3c2410_set_fvco(struct s3c_cpufreq_config *cfg)\r\n{\r\nif (!IS_ERR(cfg->mpll))\r\nclk_set_rate(cfg->mpll, cfg->pll.frequency);\r\n}
