static ssize_t show_voltage(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nstruct wm8350 *wm8350 = dev_get_drvdata(dev);\r\nint channel = to_sensor_dev_attr(attr)->index;\r\nint val;\r\nval = wm8350_read_auxadc(wm8350, channel, 0, 0) * WM8350_AUX_COEFF;\r\nval = DIV_ROUND_CLOSEST(val, 1000);\r\nreturn sprintf(buf, "%d\n", val);\r\n}\r\nstatic ssize_t show_label(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nint channel = to_sensor_dev_attr(attr)->index;\r\nreturn sprintf(buf, "%s\n", input_names[channel]);\r\n}\r\nstatic int wm8350_hwmon_probe(struct platform_device *pdev)\r\n{\r\nstruct wm8350 *wm8350 = platform_get_drvdata(pdev);\r\nstruct device *hwmon_dev;\r\nhwmon_dev = devm_hwmon_device_register_with_groups(&pdev->dev, "wm8350",\r\nwm8350,\r\nwm8350_groups);\r\nreturn PTR_ERR_OR_ZERO(hwmon_dev);\r\n}
