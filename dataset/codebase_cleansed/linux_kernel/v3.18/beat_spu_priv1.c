static inline void _int_mask_set(struct spu *spu, int class, u64 mask)\r\n{\r\nspu->shadow_int_mask_RW[class] = mask;\r\nbeat_set_irq_mask_for_spe(spu->spe_id, class, mask);\r\n}\r\nstatic inline u64 _int_mask_get(struct spu *spu, int class)\r\n{\r\nreturn spu->shadow_int_mask_RW[class];\r\n}\r\nstatic void int_mask_set(struct spu *spu, int class, u64 mask)\r\n{\r\n_int_mask_set(spu, class, mask);\r\n}\r\nstatic u64 int_mask_get(struct spu *spu, int class)\r\n{\r\nreturn _int_mask_get(spu, class);\r\n}\r\nstatic void int_mask_and(struct spu *spu, int class, u64 mask)\r\n{\r\nu64 old_mask;\r\nold_mask = _int_mask_get(spu, class);\r\n_int_mask_set(spu, class, old_mask & mask);\r\n}\r\nstatic void int_mask_or(struct spu *spu, int class, u64 mask)\r\n{\r\nu64 old_mask;\r\nold_mask = _int_mask_get(spu, class);\r\n_int_mask_set(spu, class, old_mask | mask);\r\n}\r\nstatic void int_stat_clear(struct spu *spu, int class, u64 stat)\r\n{\r\nbeat_clear_interrupt_status_of_spe(spu->spe_id, class, stat);\r\n}\r\nstatic u64 int_stat_get(struct spu *spu, int class)\r\n{\r\nu64 int_stat;\r\nbeat_get_interrupt_status_of_spe(spu->spe_id, class, &int_stat);\r\nreturn int_stat;\r\n}\r\nstatic void cpu_affinity_set(struct spu *spu, int cpu)\r\n{\r\nreturn;\r\n}\r\nstatic u64 mfc_dar_get(struct spu *spu)\r\n{\r\nu64 dar;\r\nbeat_get_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, mfc_dar_RW), &dar);\r\nreturn dar;\r\n}\r\nstatic u64 mfc_dsisr_get(struct spu *spu)\r\n{\r\nu64 dsisr;\r\nbeat_get_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, mfc_dsisr_RW), &dsisr);\r\nreturn dsisr;\r\n}\r\nstatic void mfc_dsisr_set(struct spu *spu, u64 dsisr)\r\n{\r\nbeat_set_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, mfc_dsisr_RW), dsisr);\r\n}\r\nstatic void mfc_sdr_setup(struct spu *spu)\r\n{\r\nreturn;\r\n}\r\nstatic void mfc_sr1_set(struct spu *spu, u64 sr1)\r\n{\r\nbeat_set_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, mfc_sr1_RW), sr1);\r\n}\r\nstatic u64 mfc_sr1_get(struct spu *spu)\r\n{\r\nu64 sr1;\r\nbeat_get_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, mfc_sr1_RW), &sr1);\r\nreturn sr1;\r\n}\r\nstatic void mfc_tclass_id_set(struct spu *spu, u64 tclass_id)\r\n{\r\nbeat_set_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, mfc_tclass_id_RW), tclass_id);\r\n}\r\nstatic u64 mfc_tclass_id_get(struct spu *spu)\r\n{\r\nu64 tclass_id;\r\nbeat_get_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, mfc_tclass_id_RW), &tclass_id);\r\nreturn tclass_id;\r\n}\r\nstatic void tlb_invalidate(struct spu *spu)\r\n{\r\nbeat_set_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, tlb_invalidate_entry_W), 0ul);\r\n}\r\nstatic void resource_allocation_groupID_set(struct spu *spu, u64 id)\r\n{\r\nbeat_set_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, resource_allocation_groupID_RW),\r\nid);\r\n}\r\nstatic u64 resource_allocation_groupID_get(struct spu *spu)\r\n{\r\nu64 id;\r\nbeat_get_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, resource_allocation_groupID_RW),\r\n&id);\r\nreturn id;\r\n}\r\nstatic void resource_allocation_enable_set(struct spu *spu, u64 enable)\r\n{\r\nbeat_set_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, resource_allocation_enable_RW),\r\nenable);\r\n}\r\nstatic u64 resource_allocation_enable_get(struct spu *spu)\r\n{\r\nu64 enable;\r\nbeat_get_spe_privileged_state_1_registers(\r\nspu->spe_id,\r\noffsetof(struct spu_priv1, resource_allocation_enable_RW),\r\n&enable);\r\nreturn enable;\r\n}
