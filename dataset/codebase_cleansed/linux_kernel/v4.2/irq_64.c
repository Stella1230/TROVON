void notrace arch_local_irq_restore(unsigned long flags)\r\n{\r\nunsigned long long __dummy;\r\nif (flags == ARCH_IRQ_DISABLED) {\r\n__asm__ __volatile__ (\r\n"getcon " __SR ", %0\n\t"\r\n"or %0, %1, %0\n\t"\r\n"putcon %0, " __SR "\n\t"\r\n: "=&r" (__dummy)\r\n: "r" (ARCH_IRQ_DISABLED)\r\n);\r\n} else {\r\n__asm__ __volatile__ (\r\n"getcon " __SR ", %0\n\t"\r\n"and %0, %1, %0\n\t"\r\n"putcon %0, " __SR "\n\t"\r\n: "=&r" (__dummy)\r\n: "r" (~ARCH_IRQ_DISABLED)\r\n);\r\n}\r\n}\r\nunsigned long notrace arch_local_save_flags(void)\r\n{\r\nunsigned long flags;\r\n__asm__ __volatile__ (\r\n"getcon " __SR ", %0\n\t"\r\n"and %0, %1, %0"\r\n: "=&r" (flags)\r\n: "r" (ARCH_IRQ_DISABLED)\r\n);\r\nreturn flags;\r\n}
