static inline bool\r\nnouveau_acpi_rom_supported(struct pci_dev *pdev)\r\n{\r\nreturn false;\r\n}\r\nstatic inline int\r\nnouveau_acpi_get_bios_chunk(uint8_t *bios, int offset, int len)\r\n{\r\nreturn -EINVAL;\r\n}\r\nstatic u32\r\nacpi_read_fast(void *data, u32 offset, u32 length, struct nvkm_bios *bios)\r\n{\r\nu32 limit = (offset + length + 0xfff) & ~0xfff;\r\nu32 start = offset & ~0x00000fff;\r\nu32 fetch = limit - start;\r\nif (nvbios_extend(bios, limit) >= 0) {\r\nint ret = nouveau_acpi_get_bios_chunk(bios->data, start, fetch);\r\nif (ret == fetch)\r\nreturn fetch;\r\n}\r\nreturn 0;\r\n}\r\nstatic u32\r\nacpi_read_slow(void *data, u32 offset, u32 length, struct nvkm_bios *bios)\r\n{\r\nu32 limit = (offset + length + 0xfff) & ~0xfff;\r\nu32 start = offset & ~0xfff;\r\nu32 fetch = 0;\r\nif (nvbios_extend(bios, limit) >= 0) {\r\nwhile (start + fetch < limit) {\r\nint ret = nouveau_acpi_get_bios_chunk(bios->data,\r\nstart + fetch,\r\n0x1000);\r\nif (ret != 0x1000)\r\nbreak;\r\nfetch += 0x1000;\r\n}\r\n}\r\nreturn fetch;\r\n}\r\nstatic void *\r\nacpi_init(struct nvkm_bios *bios, const char *name)\r\n{\r\nif (!nouveau_acpi_rom_supported(nv_device(bios)->pdev))\r\nreturn ERR_PTR(-ENODEV);\r\nreturn NULL;\r\n}
