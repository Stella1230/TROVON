static int atmel_ramc_probe(struct platform_device *pdev)\r\n{\r\nconst struct of_device_id *match;\r\nconst struct at91_ramc_caps *caps;\r\nstruct clk *clk;\r\nmatch = of_match_device(atmel_ramc_of_match, &pdev->dev);\r\ncaps = match->data;\r\nif (caps->has_ddrck) {\r\nclk = devm_clk_get(&pdev->dev, "ddrck");\r\nif (IS_ERR(clk))\r\nreturn PTR_ERR(clk);\r\nclk_prepare_enable(clk);\r\n}\r\nif (caps->has_mpddr_clk) {\r\nclk = devm_clk_get(&pdev->dev, "mpddr");\r\nif (IS_ERR(clk)) {\r\npr_err("AT91 RAMC: couldn't get mpddr clock\n");\r\nreturn PTR_ERR(clk);\r\n}\r\nclk_prepare_enable(clk);\r\n}\r\nreturn 0;\r\n}\r\nstatic int __init atmel_ramc_init(void)\r\n{\r\nreturn platform_driver_register(&atmel_ramc_driver);\r\n}
