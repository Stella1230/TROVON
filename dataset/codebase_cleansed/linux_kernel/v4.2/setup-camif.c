static void camif_get_gpios(int *gpio_start, int *gpio_reset)\r\n{\r\n#ifdef CONFIG_ARCH_S3C24XX\r\n*gpio_start = S3C2410_GPJ(0);\r\n*gpio_reset = S3C2410_GPJ(12);\r\n#else\r\n*gpio_start = S3C64XX_GPF(0);\r\n*gpio_reset = S3C64XX_GPF(3);\r\n#endif\r\n}\r\nint s3c_camif_gpio_get(void)\r\n{\r\nint gpio_start, gpio_reset;\r\nint ret, i;\r\ncamif_get_gpios(&gpio_start, &gpio_reset);\r\nfor (i = 0; i < S3C_CAMIF_NUM_GPIOS; i++) {\r\nint gpio = gpio_start + i;\r\nif (gpio == gpio_reset)\r\ncontinue;\r\nret = gpio_request(gpio, "camif");\r\nif (!ret)\r\nret = s3c_gpio_cfgpin(gpio, S3C_GPIO_SFN(2));\r\nif (ret) {\r\npr_err("failed to configure GPIO %d\n", gpio);\r\nfor (--i; i >= 0; i--)\r\ngpio_free(gpio--);\r\nreturn ret;\r\n}\r\ns3c_gpio_setpull(gpio, S3C_GPIO_PULL_NONE);\r\n}\r\nreturn 0;\r\n}\r\nvoid s3c_camif_gpio_put(void)\r\n{\r\nint i, gpio_start, gpio_reset;\r\ncamif_get_gpios(&gpio_start, &gpio_reset);\r\nfor (i = 0; i < S3C_CAMIF_NUM_GPIOS; i++) {\r\nint gpio = gpio_start + i;\r\nif (gpio != gpio_reset)\r\ngpio_free(gpio);\r\n}\r\n}
