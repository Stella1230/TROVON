static void mpc837x_rdb_sd_cfg(void)\r\n{\r\nvoid __iomem *im;\r\nim = ioremap(get_immrbase(), 0x1000);\r\nif (!im) {\r\nWARN_ON(1);\r\nreturn;\r\n}\r\nclrsetbits_be32(im + MPC83XX_SICRL_OFFS, MPC837X_SICRL_USBB_MASK,\r\nMPC837X_SICRL_SD);\r\nclrsetbits_be32(im + MPC83XX_SICRH_OFFS, MPC837X_SICRH_SPI_MASK,\r\nMPC837X_SICRH_SD);\r\niounmap(im);\r\n}\r\nstatic void __init mpc837x_rdb_setup_arch(void)\r\n{\r\nif (ppc_md.progress)\r\nppc_md.progress("mpc837x_rdb_setup_arch()", 0);\r\nmpc83xx_setup_pci();\r\nmpc837x_usb_cfg();\r\nmpc837x_rdb_sd_cfg();\r\n}\r\nstatic int __init mpc837x_rdb_probe(void)\r\n{\r\nreturn of_flat_dt_match(of_get_flat_dt_root(), board);\r\n}
