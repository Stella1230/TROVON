void mfp_set_groupf(struct device *dev)\r\n{\r\nunsigned long mfpen;\r\nconst char *dev_id;\r\nBUG_ON(!dev);\r\nmutex_lock(&mfp_mutex);\r\ndev_id = dev_name(dev);\r\nmfpen = __raw_readl(REG_MFSEL);\r\nif (strcmp(dev_id, "nuc900-emc") == 0)\r\nmfpen |= GPSELF;\r\nelse\r\nmfpen &= ~GPSELF;\r\n__raw_writel(mfpen, REG_MFSEL);\r\nmutex_unlock(&mfp_mutex);\r\n}\r\nvoid mfp_set_groupc(struct device *dev)\r\n{\r\nunsigned long mfpen;\r\nconst char *dev_id;\r\nBUG_ON(!dev);\r\nmutex_lock(&mfp_mutex);\r\ndev_id = dev_name(dev);\r\nmfpen = __raw_readl(REG_MFSEL);\r\nif (strcmp(dev_id, "nuc900-lcd") == 0)\r\nmfpen |= GPSELC;\r\nelse if (strcmp(dev_id, "nuc900-kpi") == 0) {\r\nmfpen &= (~GPSELC);\r\nmfpen |= ENKPI;\r\n} else if (strcmp(dev_id, "nuc900-nand") == 0) {\r\nmfpen &= (~GPSELC);\r\nmfpen |= ENNAND;\r\n} else\r\nmfpen &= (~GPSELC);\r\n__raw_writel(mfpen, REG_MFSEL);\r\nmutex_unlock(&mfp_mutex);\r\n}\r\nvoid mfp_set_groupi(struct device *dev)\r\n{\r\nunsigned long mfpen;\r\nconst char *dev_id;\r\nBUG_ON(!dev);\r\nmutex_lock(&mfp_mutex);\r\ndev_id = dev_name(dev);\r\nmfpen = __raw_readl(REG_MFSEL);\r\nmfpen &= ~GPSELEI1;\r\nif (strcmp(dev_id, "nuc900-wdog") == 0)\r\nmfpen |= GPSELEI1;\r\nelse if (strcmp(dev_id, "nuc900-atapi") == 0)\r\nmfpen |= GPSELEI0;\r\nelse if (strcmp(dev_id, "nuc900-keypad") == 0)\r\nmfpen &= ~GPSELEI0;\r\n__raw_writel(mfpen, REG_MFSEL);\r\nmutex_unlock(&mfp_mutex);\r\n}\r\nvoid mfp_set_groupg(struct device *dev, const char *subname)\r\n{\r\nunsigned long mfpen;\r\nconst char *dev_id;\r\nBUG_ON((!dev) && (!subname));\r\nmutex_lock(&mfp_mutex);\r\nif (subname != NULL)\r\ndev_id = subname;\r\nelse\r\ndev_id = dev_name(dev);\r\nmfpen = __raw_readl(REG_MFSEL);\r\nif (strcmp(dev_id, "nuc900-spi") == 0) {\r\nmfpen &= ~(GPIOG0TO1 | GPIOG2TO3);\r\nmfpen |= ENSPI;\r\n} else if (strcmp(dev_id, "nuc900-i2c0") == 0) {\r\nmfpen &= ~(GPIOG0TO1);\r\nmfpen |= ENI2C0;\r\n} else if (strcmp(dev_id, "nuc900-i2c1") == 0) {\r\nmfpen &= ~(GPIOG2TO3);\r\nmfpen |= ENI2C1;\r\n} else if (strcmp(dev_id, "nuc900-ac97") == 0) {\r\nmfpen &= ~(GPIOG22TO23);\r\nmfpen |= ENAC97;\r\n} else if (strcmp(dev_id, "nuc900-mmc-port1") == 0) {\r\nmfpen &= ~(GPIOG18TO20);\r\nmfpen |= (ENSD1 | 0x01);\r\n} else {\r\nmfpen &= ~(GPIOG0TO1 | GPIOG2TO3);\r\n}\r\n__raw_writel(mfpen, REG_MFSEL);\r\nmutex_unlock(&mfp_mutex);\r\n}\r\nvoid mfp_set_groupd(struct device *dev, const char *subname)\r\n{\r\nunsigned long mfpen;\r\nconst char *dev_id;\r\nBUG_ON((!dev) && (!subname));\r\nmutex_lock(&mfp_mutex);\r\nif (subname != NULL)\r\ndev_id = subname;\r\nelse\r\ndev_id = dev_name(dev);\r\nmfpen = __raw_readl(REG_MFSEL);\r\nif (strcmp(dev_id, "nuc900-mmc-port0") == 0) {\r\nmfpen &= ~GPSELD;\r\nmfpen |= ENSD0;\r\n} else\r\nmfpen &= (~GPSELD);\r\n__raw_writel(mfpen, REG_MFSEL);\r\nmutex_unlock(&mfp_mutex);\r\n}
