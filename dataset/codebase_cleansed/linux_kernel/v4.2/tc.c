int tc_preadb(u8 *valp, void __iomem *addr)\r\n{\r\nreturn get_dbe(*valp, (u8 *)addr);\r\n}\r\nint __init tc_bus_get_info(struct tc_bus *tbus)\r\n{\r\nif (!dec_tc_bus)\r\nreturn -ENXIO;\r\nmemcpy(&tbus->info, rex_gettcinfo(), sizeof(tbus->info));\r\ntbus->slot_base = CPHYSADDR((long)rex_slot_address(0));\r\nswitch (mips_machtype) {\r\ncase MACH_DS5000_200:\r\ntbus->num_tcslots = 7;\r\nbreak;\r\ncase MACH_DS5000_2X0:\r\ncase MACH_DS5900:\r\ntbus->ext_slot_base = 0x20000000;\r\ntbus->ext_slot_size = 0x20000000;\r\ncase MACH_DS5000_1XX:\r\ntbus->num_tcslots = 3;\r\nbreak;\r\ncase MACH_DS5000_XX:\r\ntbus->num_tcslots = 2;\r\ndefault:\r\nbreak;\r\n}\r\nreturn 0;\r\n}\r\nvoid __init tc_device_get_irq(struct tc_dev *tdev)\r\n{\r\nswitch (tdev->slot) {\r\ncase 0:\r\ntdev->interrupt = dec_interrupt[DEC_IRQ_TC0];\r\nbreak;\r\ncase 1:\r\ntdev->interrupt = dec_interrupt[DEC_IRQ_TC1];\r\nbreak;\r\ncase 2:\r\ntdev->interrupt = dec_interrupt[DEC_IRQ_TC2];\r\nbreak;\r\ncase 5:\r\ntdev->interrupt = dec_interrupt[DEC_IRQ_TC5];\r\nbreak;\r\ncase 6:\r\ntdev->interrupt = dec_interrupt[DEC_IRQ_TC6];\r\nbreak;\r\ndefault:\r\ntdev->interrupt = -1;\r\nbreak;\r\n}\r\n}
