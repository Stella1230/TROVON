int\r\nprom_startcpu(int cpunode, struct linux_prom_registers *ctable_reg, int ctx, char *pc)\r\n{\r\nint ret;\r\nunsigned long flags;\r\nspin_lock_irqsave(&prom_lock, flags);\r\nswitch(prom_vers) {\r\ncase PROM_V0:\r\ncase PROM_V2:\r\ndefault:\r\nret = -1;\r\nbreak;\r\ncase PROM_V3:\r\nret = (*(romvec->v3_cpustart))(cpunode, (int) ctable_reg, ctx, pc);\r\nbreak;\r\n}\r\nrestore_current();\r\nspin_unlock_irqrestore(&prom_lock, flags);\r\nreturn ret;\r\n}
