void\r\ngk110_pmu_pgob(struct nvkm_pmu *pmu, bool enable)\r\n{\r\nstatic const struct {\r\nu32 addr;\r\nu32 data;\r\n} magic[] = {\r\n{ 0x020520, 0xfffffffc },\r\n{ 0x020524, 0xfffffffe },\r\n{ 0x020524, 0xfffffffc },\r\n{ 0x020524, 0xfffffff8 },\r\n{ 0x020524, 0xffffffe0 },\r\n{ 0x020530, 0xfffffffe },\r\n{ 0x02052c, 0xfffffffa },\r\n{ 0x02052c, 0xfffffff0 },\r\n{ 0x02052c, 0xffffffc0 },\r\n{ 0x02052c, 0xffffff00 },\r\n{ 0x02052c, 0xfffffc00 },\r\n{ 0x02052c, 0xfffcfc00 },\r\n{ 0x02052c, 0xfff0fc00 },\r\n{ 0x02052c, 0xff80fc00 },\r\n{ 0x020528, 0xfffffffe },\r\n{ 0x020528, 0xfffffffc },\r\n};\r\nint i;\r\nnv_mask(pmu, 0x000200, 0x00001000, 0x00000000);\r\nnv_rd32(pmu, 0x000200);\r\nnv_mask(pmu, 0x000200, 0x08000000, 0x08000000);\r\nmsleep(50);\r\nnv_mask(pmu, 0x10a78c, 0x00000002, 0x00000002);\r\nnv_mask(pmu, 0x10a78c, 0x00000001, 0x00000001);\r\nnv_mask(pmu, 0x10a78c, 0x00000001, 0x00000000);\r\nnv_mask(pmu, 0x0206b4, 0x00000000, 0x00000000);\r\nfor (i = 0; i < ARRAY_SIZE(magic); i++) {\r\nnv_wr32(pmu, magic[i].addr, magic[i].data);\r\nnv_wait(pmu, magic[i].addr, 0x80000000, 0x00000000);\r\n}\r\nnv_mask(pmu, 0x10a78c, 0x00000002, 0x00000000);\r\nnv_mask(pmu, 0x10a78c, 0x00000001, 0x00000001);\r\nnv_mask(pmu, 0x10a78c, 0x00000001, 0x00000000);\r\nnv_mask(pmu, 0x000200, 0x08000000, 0x00000000);\r\nnv_mask(pmu, 0x000200, 0x00001000, 0x00001000);\r\nnv_rd32(pmu, 0x000200);\r\n}
