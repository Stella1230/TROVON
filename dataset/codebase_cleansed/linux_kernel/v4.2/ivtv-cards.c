const struct ivtv_card *ivtv_get_card(u16 index)\r\n{\r\nif (index >= ARRAY_SIZE(ivtv_card_list))\r\nreturn NULL;\r\nreturn ivtv_card_list[index];\r\n}\r\nint ivtv_get_input(struct ivtv *itv, u16 index, struct v4l2_input *input)\r\n{\r\nconst struct ivtv_card_video_input *card_input = itv->card->video_inputs + index;\r\nstatic const char * const input_strs[] = {\r\n"Tuner 1",\r\n"S-Video 1",\r\n"S-Video 2",\r\n"Composite 1",\r\n"Composite 2",\r\n"Composite 3"\r\n};\r\nif (index >= itv->nof_inputs)\r\nreturn -EINVAL;\r\ninput->index = index;\r\nstrlcpy(input->name, input_strs[card_input->video_type - 1],\r\nsizeof(input->name));\r\ninput->type = (card_input->video_type == IVTV_CARD_INPUT_VID_TUNER ?\r\nV4L2_INPUT_TYPE_TUNER : V4L2_INPUT_TYPE_CAMERA);\r\ninput->audioset = (1 << itv->nof_audio_inputs) - 1;\r\ninput->std = (input->type == V4L2_INPUT_TYPE_TUNER) ?\r\nitv->tuner_std : V4L2_STD_ALL;\r\nreturn 0;\r\n}\r\nint ivtv_get_output(struct ivtv *itv, u16 index, struct v4l2_output *output)\r\n{\r\nconst struct ivtv_card_output *card_output = itv->card->video_outputs + index;\r\nif (index >= itv->card->nof_outputs)\r\nreturn -EINVAL;\r\noutput->index = index;\r\nstrlcpy(output->name, card_output->name, sizeof(output->name));\r\noutput->type = V4L2_OUTPUT_TYPE_ANALOG;\r\noutput->audioset = 1;\r\noutput->std = V4L2_STD_ALL;\r\nreturn 0;\r\n}\r\nint ivtv_get_audio_input(struct ivtv *itv, u16 index, struct v4l2_audio *audio)\r\n{\r\nconst struct ivtv_card_audio_input *aud_input = itv->card->audio_inputs + index;\r\nstatic const char * const input_strs[] = {\r\n"Tuner 1",\r\n"Line In 1",\r\n"Line In 2"\r\n};\r\nmemset(audio, 0, sizeof(*audio));\r\nif (index >= itv->nof_audio_inputs)\r\nreturn -EINVAL;\r\nstrlcpy(audio->name, input_strs[aud_input->audio_type - 1],\r\nsizeof(audio->name));\r\naudio->index = index;\r\naudio->capability = V4L2_AUDCAP_STEREO;\r\nreturn 0;\r\n}\r\nint ivtv_get_audio_output(struct ivtv *itv, u16 index, struct v4l2_audioout *aud_output)\r\n{\r\nmemset(aud_output, 0, sizeof(*aud_output));\r\nif (itv->card->video_outputs == NULL || index != 0)\r\nreturn -EINVAL;\r\nstrlcpy(aud_output->name, "A/V Audio Out", sizeof(aud_output->name));\r\nreturn 0;\r\n}
