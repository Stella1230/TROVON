void SwLedOn(struct adapter *padapter, struct LED_871x *pLed)\r\n{\r\nu8 LedCfg;\r\nif (padapter->bSurpriseRemoved || padapter->bDriverStopped)\r\nreturn;\r\nLedCfg = usb_read8(padapter, REG_LEDCFG2);\r\nusb_write8(padapter, REG_LEDCFG2, (LedCfg&0xf0)|BIT5|BIT6);\r\npLed->bLedOn = true;\r\n}\r\nvoid SwLedOff(struct adapter *padapter, struct LED_871x *pLed)\r\n{\r\nu8 LedCfg;\r\nstruct hal_data_8188e *pHalData = GET_HAL_DATA(padapter);\r\nif (padapter->bSurpriseRemoved || padapter->bDriverStopped)\r\ngoto exit;\r\nLedCfg = usb_read8(padapter, REG_LEDCFG2);\r\nif (pHalData->bLedOpenDrain) {\r\nLedCfg &= 0x90;\r\nusb_write8(padapter, REG_LEDCFG2, (LedCfg|BIT3));\r\nLedCfg = usb_read8(padapter, REG_MAC_PINMUX_CFG);\r\nLedCfg &= 0xFE;\r\nusb_write8(padapter, REG_MAC_PINMUX_CFG, LedCfg);\r\n} else {\r\nusb_write8(padapter, REG_LEDCFG2, (LedCfg|BIT3|BIT5|BIT6));\r\n}\r\nexit:\r\npLed->bLedOn = false;\r\n}\r\nvoid rtl8188eu_InitSwLeds(struct adapter *padapter)\r\n{\r\nstruct led_priv *pledpriv = &(padapter->ledpriv);\r\nstruct hal_data_8188e *haldata = GET_HAL_DATA(padapter);\r\npledpriv->bRegUseLed = true;\r\npledpriv->LedControlHandler = LedControl8188eu;\r\nhaldata->bLedOpenDrain = true;\r\nInitLed871x(padapter, &(pledpriv->SwLed0));\r\n}\r\nvoid rtl8188eu_DeInitSwLeds(struct adapter *padapter)\r\n{\r\nstruct led_priv *ledpriv = &(padapter->ledpriv);\r\nDeInitLed871x(&(ledpriv->SwLed0));\r\n}
