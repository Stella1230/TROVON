static int clps711x_cpuidle_halt(struct cpuidle_device *dev,\r\nstruct cpuidle_driver *drv, int index)\r\n{\r\nwritel(0xaa, clps711x_halt);\r\nreturn index;\r\n}\r\nstatic int __init clps711x_cpuidle_probe(struct platform_device *pdev)\r\n{\r\nstruct resource *res;\r\nres = platform_get_resource(pdev, IORESOURCE_MEM, 0);\r\nclps711x_halt = devm_ioremap_resource(&pdev->dev, res);\r\nif (IS_ERR(clps711x_halt))\r\nreturn PTR_ERR(clps711x_halt);\r\nreturn cpuidle_register(&clps711x_idle_driver, NULL);\r\n}
