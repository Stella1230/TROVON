u32\r\nnvbios_P0260Te(struct nvkm_bios *bios,\r\nu8 *ver, u8 *hdr, u8 *cnt, u8 *len, u8 *xnr, u8 *xsz)\r\n{\r\nstruct bit_entry bit_P;\r\nu32 data = 0x00000000;\r\nif (!bit_entry(bios, 'P', &bit_P)) {\r\nif (bit_P.version == 2 && bit_P.length > 0x63)\r\ndata = nv_ro32(bios, bit_P.offset + 0x60);\r\nif (data) {\r\n*ver = nv_ro08(bios, data + 0);\r\nswitch (*ver) {\r\ncase 0x10:\r\n*hdr = nv_ro08(bios, data + 1);\r\n*cnt = nv_ro08(bios, data + 2);\r\n*len = 4;\r\n*xnr = nv_ro08(bios, data + 3);\r\n*xsz = 4;\r\nreturn data;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\n}\r\nreturn 0x00000000;\r\n}\r\nu32\r\nnvbios_P0260Ee(struct nvkm_bios *bios, int idx, u8 *ver, u8 *len)\r\n{\r\nu8 hdr, cnt, xnr, xsz;\r\nu32 data = nvbios_P0260Te(bios, ver, &hdr, &cnt, len, &xnr, &xsz);\r\nif (data && idx < cnt)\r\nreturn data + hdr + (idx * *len);\r\nreturn 0x00000000;\r\n}\r\nu32\r\nnvbios_P0260Ep(struct nvkm_bios *bios, int idx, u8 *ver, u8 *len,\r\nstruct nvbios_P0260E *info)\r\n{\r\nu32 data = nvbios_P0260Ee(bios, idx, ver, len);\r\nmemset(info, 0x00, sizeof(*info));\r\nswitch (!!data * *ver) {\r\ncase 0x10:\r\ninfo->data = nv_ro32(bios, data);\r\nreturn data;\r\ndefault:\r\nbreak;\r\n}\r\nreturn 0x00000000;\r\n}\r\nu32\r\nnvbios_P0260Xe(struct nvkm_bios *bios, int idx, u8 *ver, u8 *xsz)\r\n{\r\nu8 hdr, cnt, len, xnr;\r\nu32 data = nvbios_P0260Te(bios, ver, &hdr, &cnt, &len, &xnr, xsz);\r\nif (data && idx < xnr)\r\nreturn data + hdr + (cnt * len) + (idx * *xsz);\r\nreturn 0x00000000;\r\n}\r\nu32\r\nnvbios_P0260Xp(struct nvkm_bios *bios, int idx, u8 *ver, u8 *hdr,\r\nstruct nvbios_P0260X *info)\r\n{\r\nu32 data = nvbios_P0260Xe(bios, idx, ver, hdr);\r\nmemset(info, 0x00, sizeof(*info));\r\nswitch (!!data * *ver) {\r\ncase 0x10:\r\ninfo->data = nv_ro32(bios, data);\r\nreturn data;\r\ndefault:\r\nbreak;\r\n}\r\nreturn 0x00000000;\r\n}
