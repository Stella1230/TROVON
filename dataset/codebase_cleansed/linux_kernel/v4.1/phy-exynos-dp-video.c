static int exynos_dp_video_phy_power_on(struct phy *phy)\r\n{\r\nstruct exynos_dp_video_phy *state = phy_get_drvdata(phy);\r\nreturn regmap_update_bits(state->regs, state->drvdata->phy_ctrl_offset,\r\nEXYNOS5_PHY_ENABLE, EXYNOS5_PHY_ENABLE);\r\n}\r\nstatic int exynos_dp_video_phy_power_off(struct phy *phy)\r\n{\r\nstruct exynos_dp_video_phy *state = phy_get_drvdata(phy);\r\nreturn regmap_update_bits(state->regs, state->drvdata->phy_ctrl_offset,\r\nEXYNOS5_PHY_ENABLE, 0);\r\n}\r\nstatic int exynos_dp_video_phy_probe(struct platform_device *pdev)\r\n{\r\nstruct exynos_dp_video_phy *state;\r\nstruct device *dev = &pdev->dev;\r\nconst struct of_device_id *match;\r\nstruct phy_provider *phy_provider;\r\nstruct phy *phy;\r\nstate = devm_kzalloc(dev, sizeof(*state), GFP_KERNEL);\r\nif (!state)\r\nreturn -ENOMEM;\r\nstate->regs = syscon_regmap_lookup_by_phandle(dev->of_node,\r\n"samsung,pmu-syscon");\r\nif (IS_ERR(state->regs)) {\r\ndev_err(dev, "Failed to lookup PMU regmap\n");\r\nreturn PTR_ERR(state->regs);\r\n}\r\nmatch = of_match_node(exynos_dp_video_phy_of_match, dev->of_node);\r\nstate->drvdata = match->data;\r\nphy = devm_phy_create(dev, NULL, &exynos_dp_video_phy_ops);\r\nif (IS_ERR(phy)) {\r\ndev_err(dev, "failed to create Display Port PHY\n");\r\nreturn PTR_ERR(phy);\r\n}\r\nphy_set_drvdata(phy, state);\r\nphy_provider = devm_of_phy_provider_register(dev, of_phy_simple_xlate);\r\nreturn PTR_ERR_OR_ZERO(phy_provider);\r\n}
