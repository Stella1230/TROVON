static int __init qt2410_tft_setup(char *str)\r\n{\r\ntft_type = str[0];\r\nreturn 1;\r\n}\r\nstatic void __init qt2410_map_io(void)\r\n{\r\ns3c24xx_init_io(qt2410_iodesc, ARRAY_SIZE(qt2410_iodesc));\r\ns3c24xx_init_uarts(smdk2410_uartcfgs, ARRAY_SIZE(smdk2410_uartcfgs));\r\nsamsung_set_timer_source(SAMSUNG_PWM3, SAMSUNG_PWM4);\r\n}\r\nstatic void __init qt2410_init_time(void)\r\n{\r\ns3c2410_init_clocks(12000000);\r\nsamsung_timer_init();\r\n}\r\nstatic void __init qt2410_machine_init(void)\r\n{\r\ns3c_nand_set_platdata(&qt2410_nand_info);\r\nswitch (tft_type) {\r\ncase 'p':\r\nqt2410_fb_info.default_display = 1;\r\nbreak;\r\ncase 'b':\r\nqt2410_fb_info.default_display = 0;\r\nbreak;\r\ncase 's':\r\ndefault:\r\nqt2410_fb_info.default_display = 2;\r\nbreak;\r\n}\r\ns3c24xx_fb_set_platdata(&qt2410_fb_info);\r\nWARN_ON(gpio_request_one(S3C2410_GPB(0), GPIOF_OUT_INIT_HIGH, NULL));\r\ngpio_free(S3C2410_GPB(0));\r\ns3c24xx_udc_set_platdata(&qt2410_udc_cfg);\r\ns3c_i2c0_set_platdata(NULL);\r\nWARN_ON(gpio_request(S3C2410_GPB(5), "spi cs"));\r\ngpio_direction_output(S3C2410_GPB(5), 1);\r\nplatform_add_devices(qt2410_devices, ARRAY_SIZE(qt2410_devices));\r\ns3c_pm_init();\r\n}
