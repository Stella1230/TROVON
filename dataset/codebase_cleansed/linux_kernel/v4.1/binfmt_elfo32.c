static inline void\r\njiffies_to_compat_timeval(unsigned long jiffies, struct compat_timeval *value)\r\n{\r\nu64 nsec = (u64)jiffies * TICK_NSEC;\r\nu32 rem;\r\nvalue->tv_sec = div_u64_rem(nsec, NSEC_PER_SEC, &rem);\r\nvalue->tv_usec = rem / NSEC_PER_USEC;\r\n}\r\nstatic __inline__ void\r\ncputime_to_compat_timeval(const cputime_t cputime, struct compat_timeval *value)\r\n{\r\nunsigned long jiffies = cputime_to_jiffies(cputime);\r\nvalue->tv_usec = (jiffies % HZ) * (1000000L / HZ);\r\nvalue->tv_sec = jiffies / HZ;\r\n}
