int\r\nnv50_sor_power(NV50_DISP_MTHD_V1)\r\n{\r\nunion {\r\nstruct nv50_disp_sor_pwr_v0 v0;\r\n} *args = data;\r\nconst u32 soff = outp->or * 0x800;\r\nu32 stat;\r\nint ret;\r\nnv_ioctl(object, "disp sor pwr size %d\n", size);\r\nif (nvif_unpack(args->v0, 0, 0, false)) {\r\nnv_ioctl(object, "disp sor pwr vers %d state %d\n",\r\nargs->v0.version, args->v0.state);\r\nstat = !!args->v0.state;\r\n} else\r\nreturn ret;\r\nnv_wait(priv, 0x61c004 + soff, 0x80000000, 0x00000000);\r\nnv_mask(priv, 0x61c004 + soff, 0x80000001, 0x80000000 | stat);\r\nnv_wait(priv, 0x61c004 + soff, 0x80000000, 0x00000000);\r\nnv_wait(priv, 0x61c030 + soff, 0x10000000, 0x00000000);\r\nreturn 0;\r\n}
