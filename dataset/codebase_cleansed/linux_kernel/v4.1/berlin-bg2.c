static int berlin2_pinctrl_probe(struct platform_device *pdev)\r\n{\r\nconst struct of_device_id *match =\r\nof_match_device(berlin2_pinctrl_match, &pdev->dev);\r\nstruct regmap_config *rmconfig;\r\nstruct regmap *regmap;\r\nstruct resource *res;\r\nvoid __iomem *base;\r\nrmconfig = devm_kzalloc(&pdev->dev, sizeof(*rmconfig), GFP_KERNEL);\r\nif (!rmconfig)\r\nreturn -ENOMEM;\r\nres = platform_get_resource(pdev, IORESOURCE_MEM, 0);\r\nbase = devm_ioremap_resource(&pdev->dev, res);\r\nif (IS_ERR(base))\r\nreturn PTR_ERR(base);\r\nrmconfig->reg_bits = 32,\r\nrmconfig->val_bits = 32,\r\nrmconfig->reg_stride = 4,\r\nrmconfig->max_register = resource_size(res);\r\nregmap = devm_regmap_init_mmio(&pdev->dev, base, rmconfig);\r\nif (IS_ERR(regmap))\r\nreturn PTR_ERR(regmap);\r\nreturn berlin_pinctrl_probe(pdev, match->data);\r\n}
