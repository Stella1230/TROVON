static unsigned long long\r\nprocess_jbd2_dev_to_name(struct trace_seq *s, unsigned long long *args)\r\n{\r\nunsigned int dev = args[0];\r\ntrace_seq_printf(s, "%d:%d", MAJOR(dev), MINOR(dev));\r\nreturn 0;\r\n}\r\nstatic unsigned long long\r\nprocess_jiffies_to_msecs(struct trace_seq *s, unsigned long long *args)\r\n{\r\nunsigned long long jiffies = args[0];\r\ntrace_seq_printf(s, "%lld", jiffies);\r\nreturn jiffies;\r\n}\r\nint PEVENT_PLUGIN_LOADER(struct pevent *pevent)\r\n{\r\npevent_register_print_function(pevent,\r\nprocess_jbd2_dev_to_name,\r\nPEVENT_FUNC_ARG_STRING,\r\n"jbd2_dev_to_name",\r\nPEVENT_FUNC_ARG_INT,\r\nPEVENT_FUNC_ARG_VOID);\r\npevent_register_print_function(pevent,\r\nprocess_jiffies_to_msecs,\r\nPEVENT_FUNC_ARG_LONG,\r\n"jiffies_to_msecs",\r\nPEVENT_FUNC_ARG_LONG,\r\nPEVENT_FUNC_ARG_VOID);\r\nreturn 0;\r\n}\r\nvoid PEVENT_PLUGIN_UNLOADER(struct pevent *pevent)\r\n{\r\npevent_unregister_print_function(pevent, process_jbd2_dev_to_name,\r\n"jbd2_dev_to_name");\r\npevent_unregister_print_function(pevent, process_jiffies_to_msecs,\r\n"jiffies_to_msecs");\r\n}
