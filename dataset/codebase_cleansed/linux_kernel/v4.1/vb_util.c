void xgifb_reg_set(unsigned long port, u8 index, u8 data)\r\n{\r\noutb(index, port);\r\noutb(data, port + 1);\r\n}\r\nu8 xgifb_reg_get(unsigned long port, u8 index)\r\n{\r\noutb(index, port);\r\nreturn inb(port + 1);\r\n}\r\nvoid xgifb_reg_and_or(unsigned long port, u8 index,\r\nunsigned data_and, unsigned data_or)\r\n{\r\nu8 temp;\r\ntemp = xgifb_reg_get(port, index);\r\ntemp = (temp & data_and) | data_or;\r\nxgifb_reg_set(port, index, temp);\r\n}\r\nvoid xgifb_reg_and(unsigned long port, u8 index, unsigned data_and)\r\n{\r\nu8 temp;\r\ntemp = xgifb_reg_get(port, index);\r\ntemp &= data_and;\r\nxgifb_reg_set(port, index, temp);\r\n}\r\nvoid xgifb_reg_or(unsigned long port, u8 index, unsigned data_or)\r\n{\r\nu8 temp;\r\ntemp = xgifb_reg_get(port, index);\r\ntemp |= data_or;\r\nxgifb_reg_set(port, index, temp);\r\n}
