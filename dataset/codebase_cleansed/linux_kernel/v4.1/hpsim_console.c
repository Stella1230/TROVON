static int\r\nsimcons_init (struct console *cons, char *options)\r\n{\r\nreturn 0;\r\n}\r\nstatic void\r\nsimcons_write (struct console *cons, const char *buf, unsigned count)\r\n{\r\nunsigned long ch;\r\nwhile (count-- > 0) {\r\nch = *buf++;\r\nia64_ssc(ch, 0, 0, 0, SSC_PUTCHAR);\r\nif (ch == '\n')\r\nia64_ssc('\r', 0, 0, 0, SSC_PUTCHAR);\r\n}\r\n}\r\nstatic struct tty_driver *simcons_console_device (struct console *c, int *index)\r\n{\r\n*index = c->index;\r\nreturn hp_simserial_driver;\r\n}\r\nint simcons_register(void)\r\n{\r\nif (!ia64_platform_is("hpsim"))\r\nreturn 1;\r\nif (hpsim_cons.flags & CON_ENABLED)\r\nreturn 1;\r\nregister_console(&hpsim_cons);\r\nreturn 0;\r\n}
