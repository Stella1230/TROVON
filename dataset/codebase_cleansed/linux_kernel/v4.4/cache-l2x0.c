static int __init ux500_l2x0_unlock(void)\r\n{\r\nint i;\r\nstruct device_node *np;\r\nvoid __iomem *l2x0_base;\r\nnp = of_find_compatible_node(NULL, NULL, "arm,pl310-cache");\r\nl2x0_base = of_iomap(np, 0);\r\nof_node_put(np);\r\nif (!l2x0_base)\r\nreturn -ENODEV;\r\nfor (i = 0; i < 8; i++) {\r\nwritel_relaxed(0x0, l2x0_base + L2X0_LOCKDOWN_WAY_D_BASE +\r\ni * L2X0_LOCKDOWN_STRIDE);\r\nwritel_relaxed(0x0, l2x0_base + L2X0_LOCKDOWN_WAY_I_BASE +\r\ni * L2X0_LOCKDOWN_STRIDE);\r\n}\r\niounmap(l2x0_base);\r\nreturn 0;\r\n}\r\nstatic void ux500_l2c310_write_sec(unsigned long val, unsigned reg)\r\n{\r\n}\r\nstatic int __init ux500_l2x0_init(void)\r\n{\r\nif (!((cpu_is_u8500_family() || cpu_is_ux540_family())))\r\nreturn -ENODEV;\r\nux500_l2x0_unlock();\r\nouter_cache.write_sec = ux500_l2c310_write_sec;\r\nl2x0_of_init(0, ~0);\r\nreturn 0;\r\n}
