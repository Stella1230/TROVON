static void asd_dump_cseq_state(struct asd_ha_struct *asd_ha)\r\n{\r\nint mode;\r\nasd_printk("CSEQ STATE\n");\r\nasd_printk("ARP2 REGISTERS\n");\r\nPRINT_CREG_32bit(asd_ha, ARP2CTL);\r\nPRINT_CREG_32bit(asd_ha, ARP2INT);\r\nPRINT_CREG_32bit(asd_ha, ARP2INTEN);\r\nPRINT_CREG_8bit(asd_ha, MODEPTR);\r\nPRINT_CREG_8bit(asd_ha, ALTMODE);\r\nPRINT_CREG_8bit(asd_ha, FLAG);\r\nPRINT_CREG_8bit(asd_ha, ARP2INTCTL);\r\nPRINT_CREG_16bit(asd_ha, STACK);\r\nPRINT_CREG_16bit(asd_ha, PRGMCNT);\r\nPRINT_CREG_16bit(asd_ha, ACCUM);\r\nPRINT_CREG_16bit(asd_ha, SINDEX);\r\nPRINT_CREG_16bit(asd_ha, DINDEX);\r\nPRINT_CREG_8bit(asd_ha, SINDIR);\r\nPRINT_CREG_8bit(asd_ha, DINDIR);\r\nPRINT_CREG_8bit(asd_ha, JUMLDIR);\r\nPRINT_CREG_8bit(asd_ha, ARP2HALTCODE);\r\nPRINT_CREG_16bit(asd_ha, CURRADDR);\r\nPRINT_CREG_16bit(asd_ha, LASTADDR);\r\nPRINT_CREG_16bit(asd_ha, NXTLADDR);\r\nasd_printk("IOP REGISTERS\n");\r\nPRINT_REG_32bit(asd_ha, BISTCTL1, CBISTCTL);\r\nPRINT_CREG_32bit(asd_ha, MAPPEDSCR);\r\nasd_printk("CIO REGISTERS\n");\r\nfor (mode = 0; mode < 9; mode++)\r\nPRINT_MREG_16bit(asd_ha, mode, MnSCBPTR, CMnSCBPTR(mode));\r\nPRINT_MREG_16bit(asd_ha, 15, MnSCBPTR, CMnSCBPTR(15));\r\nfor (mode = 0; mode < 9; mode++)\r\nPRINT_MREG_16bit(asd_ha, mode, MnDDBPTR, CMnDDBPTR(mode));\r\nPRINT_MREG_16bit(asd_ha, 15, MnDDBPTR, CMnDDBPTR(15));\r\nfor (mode = 0; mode < 8; mode++)\r\nPRINT_MREG_32bit(asd_ha, mode, MnREQMBX, CMnREQMBX(mode));\r\nfor (mode = 0; mode < 8; mode++)\r\nPRINT_MREG_32bit(asd_ha, mode, MnRSPMBX, CMnRSPMBX(mode));\r\nfor (mode = 0; mode < 8; mode++)\r\nPRINT_MREG_32bit(asd_ha, mode, MnINT, CMnINT(mode));\r\nfor (mode = 0; mode < 8; mode++)\r\nPRINT_MREG_32bit(asd_ha, mode, MnINTEN, CMnINTEN(mode));\r\nPRINT_CREG_8bit(asd_ha, SCRATCHPAGE);\r\nfor (mode = 0; mode < 8; mode++)\r\nPRINT_MREG_8bit(asd_ha, mode, MnSCRATCHPAGE,\r\nCMnSCRATCHPAGE(mode));\r\nPRINT_REG_32bit(asd_ha, CLINKCON, CLINKCON);\r\nPRINT_REG_8bit(asd_ha, CCONMSK, CCONMSK);\r\nPRINT_REG_8bit(asd_ha, CCONEXIST, CCONEXIST);\r\nPRINT_REG_16bit(asd_ha, CCONMODE, CCONMODE);\r\nPRINT_REG_32bit(asd_ha, CTIMERCALC, CTIMERCALC);\r\nPRINT_REG_8bit(asd_ha, CINTDIS, CINTDIS);\r\nasd_printk("SCRATCH MEMORY\n");\r\nasd_printk("MIP 4 >>>>>\n");\r\nPRINT_MIS_word(asd_ha, Q_EXE_HEAD);\r\nPRINT_MIS_word(asd_ha, Q_EXE_TAIL);\r\nPRINT_MIS_word(asd_ha, Q_DONE_HEAD);\r\nPRINT_MIS_word(asd_ha, Q_DONE_TAIL);\r\nPRINT_MIS_word(asd_ha, Q_SEND_HEAD);\r\nPRINT_MIS_word(asd_ha, Q_SEND_TAIL);\r\nPRINT_MIS_word(asd_ha, Q_DMA2CHIM_HEAD);\r\nPRINT_MIS_word(asd_ha, Q_DMA2CHIM_TAIL);\r\nPRINT_MIS_word(asd_ha, Q_COPY_HEAD);\r\nPRINT_MIS_word(asd_ha, Q_COPY_TAIL);\r\nPRINT_MIS_word(asd_ha, REG0);\r\nPRINT_MIS_word(asd_ha, REG1);\r\nPRINT_MIS_dword(asd_ha, REG2);\r\nPRINT_MIS_byte(asd_ha, LINK_CTL_Q_MAP);\r\nPRINT_MIS_byte(asd_ha, MAX_CSEQ_MODE);\r\nPRINT_MIS_byte(asd_ha, FREE_LIST_HACK_COUNT);\r\nasd_printk("MIP 5 >>>>\n");\r\nPRINT_MIS_qword(asd_ha, EST_NEXUS_REQ_QUEUE);\r\nPRINT_MIS_qword(asd_ha, EST_NEXUS_REQ_COUNT);\r\nPRINT_MIS_word(asd_ha, Q_EST_NEXUS_HEAD);\r\nPRINT_MIS_word(asd_ha, Q_EST_NEXUS_TAIL);\r\nPRINT_MIS_word(asd_ha, NEED_EST_NEXUS_SCB);\r\nPRINT_MIS_byte(asd_ha, EST_NEXUS_REQ_HEAD);\r\nPRINT_MIS_byte(asd_ha, EST_NEXUS_REQ_TAIL);\r\nPRINT_MIS_byte(asd_ha, EST_NEXUS_SCB_OFFSET);\r\nasd_printk("MIP 6 >>>>\n");\r\nPRINT_MIS_word(asd_ha, INT_ROUT_RET_ADDR0);\r\nPRINT_MIS_word(asd_ha, INT_ROUT_RET_ADDR1);\r\nPRINT_MIS_word(asd_ha, INT_ROUT_SCBPTR);\r\nPRINT_MIS_byte(asd_ha, INT_ROUT_MODE);\r\nPRINT_MIS_byte(asd_ha, ISR_SCRATCH_FLAGS);\r\nPRINT_MIS_word(asd_ha, ISR_SAVE_SINDEX);\r\nPRINT_MIS_word(asd_ha, ISR_SAVE_DINDEX);\r\nPRINT_MIS_word(asd_ha, Q_MONIRTT_HEAD);\r\nPRINT_MIS_word(asd_ha, Q_MONIRTT_TAIL);\r\nPRINT_MIS_byte(asd_ha, FREE_SCB_MASK);\r\nPRINT_MIS_word(asd_ha, BUILTIN_FREE_SCB_HEAD);\r\nPRINT_MIS_word(asd_ha, BUILTIN_FREE_SCB_TAIL);\r\nPRINT_MIS_word(asd_ha, EXTENDED_FREE_SCB_HEAD);\r\nPRINT_MIS_word(asd_ha, EXTENDED_FREE_SCB_TAIL);\r\nasd_printk("MIP 7 >>>>\n");\r\nPRINT_MIS_qword(asd_ha, EMPTY_REQ_QUEUE);\r\nPRINT_MIS_qword(asd_ha, EMPTY_REQ_COUNT);\r\nPRINT_MIS_word(asd_ha, Q_EMPTY_HEAD);\r\nPRINT_MIS_word(asd_ha, Q_EMPTY_TAIL);\r\nPRINT_MIS_word(asd_ha, NEED_EMPTY_SCB);\r\nPRINT_MIS_byte(asd_ha, EMPTY_REQ_HEAD);\r\nPRINT_MIS_byte(asd_ha, EMPTY_REQ_TAIL);\r\nPRINT_MIS_byte(asd_ha, EMPTY_SCB_OFFSET);\r\nPRINT_MIS_word(asd_ha, PRIMITIVE_DATA);\r\nPRINT_MIS_dword(asd_ha, TIMEOUT_CONST);\r\nasd_printk("MDP 0 >>>>\n");\r\nasd_printk("%-20s %6s %6s %6s %6s %6s %6s %6s %6s\n",\r\n"Mode: ", "0", "1", "2", "3", "4", "5", "6", "7");\r\nPRINT_CMDP_word(asd_ha, LRM_SAVE_SINDEX);\r\nPRINT_CMDP_word(asd_ha, LRM_SAVE_SCBPTR);\r\nPRINT_CMDP_word(asd_ha, Q_LINK_HEAD);\r\nPRINT_CMDP_word(asd_ha, Q_LINK_TAIL);\r\nPRINT_CMDP_byte(asd_ha, LRM_SAVE_SCRPAGE);\r\nasd_printk("MDP 0 Mode 8 >>>>\n");\r\nPRINT_MIS_word(asd_ha, RET_ADDR);\r\nPRINT_MIS_word(asd_ha, RET_SCBPTR);\r\nPRINT_MIS_word(asd_ha, SAVE_SCBPTR);\r\nPRINT_MIS_word(asd_ha, EMPTY_TRANS_CTX);\r\nPRINT_MIS_word(asd_ha, RESP_LEN);\r\nPRINT_MIS_word(asd_ha, TMF_SCBPTR);\r\nPRINT_MIS_word(asd_ha, GLOBAL_PREV_SCB);\r\nPRINT_MIS_word(asd_ha, GLOBAL_HEAD);\r\nPRINT_MIS_word(asd_ha, CLEAR_LU_HEAD);\r\nPRINT_MIS_byte(asd_ha, TMF_OPCODE);\r\nPRINT_MIS_byte(asd_ha, SCRATCH_FLAGS);\r\nPRINT_MIS_word(asd_ha, HSB_SITE);\r\nPRINT_MIS_word(asd_ha, FIRST_INV_SCB_SITE);\r\nPRINT_MIS_word(asd_ha, FIRST_INV_DDB_SITE);\r\nasd_printk("MDP 1 Mode 8 >>>>\n");\r\nPRINT_MIS_qword(asd_ha, LUN_TO_CLEAR);\r\nPRINT_MIS_qword(asd_ha, LUN_TO_CHECK);\r\nasd_printk("MDP 2 Mode 8 >>>>\n");\r\nPRINT_MIS_qword(asd_ha, HQ_NEW_POINTER);\r\nPRINT_MIS_qword(asd_ha, HQ_DONE_BASE);\r\nPRINT_MIS_dword(asd_ha, HQ_DONE_POINTER);\r\nPRINT_MIS_byte(asd_ha, HQ_DONE_PASS);\r\n}\r\nstatic void asd_print_lseq_cio_reg(struct asd_ha_struct *asd_ha,\r\nu32 lseq_cio_addr, int i)\r\n{\r\nswitch (LSEQmCIOREGS[i].width) {\r\ncase 8:\r\nasd_printk("%20s[0x%x]: 0x%02x\n", LSEQmCIOREGS[i].name,\r\nLSEQmCIOREGS[i].offs,\r\nasd_read_reg_byte(asd_ha, lseq_cio_addr +\r\nLSEQmCIOREGS[i].offs));\r\nbreak;\r\ncase 16:\r\nasd_printk("%20s[0x%x]: 0x%04x\n", LSEQmCIOREGS[i].name,\r\nLSEQmCIOREGS[i].offs,\r\nasd_read_reg_word(asd_ha, lseq_cio_addr +\r\nLSEQmCIOREGS[i].offs));\r\nbreak;\r\ncase 32:\r\nasd_printk("%20s[0x%x]: 0x%08x\n", LSEQmCIOREGS[i].name,\r\nLSEQmCIOREGS[i].offs,\r\nasd_read_reg_dword(asd_ha, lseq_cio_addr +\r\nLSEQmCIOREGS[i].offs));\r\nbreak;\r\n}\r\n}\r\nstatic void asd_dump_lseq_state(struct asd_ha_struct *asd_ha, int lseq)\r\n{\r\nu32 moffs;\r\nint mode;\r\nasd_printk("LSEQ %d STATE\n", lseq);\r\nasd_printk("LSEQ%d: ARP2 REGISTERS\n", lseq);\r\nPRINT_LREG_32bit(asd_ha, lseq, ARP2CTL);\r\nPRINT_LREG_32bit(asd_ha, lseq, ARP2INT);\r\nPRINT_LREG_32bit(asd_ha, lseq, ARP2INTEN);\r\nPRINT_LREG_8bit(asd_ha, lseq, MODEPTR);\r\nPRINT_LREG_8bit(asd_ha, lseq, ALTMODE);\r\nPRINT_LREG_8bit(asd_ha, lseq, FLAG);\r\nPRINT_LREG_8bit(asd_ha, lseq, ARP2INTCTL);\r\nPRINT_LREG_16bit(asd_ha, lseq, STACK);\r\nPRINT_LREG_16bit(asd_ha, lseq, PRGMCNT);\r\nPRINT_LREG_16bit(asd_ha, lseq, ACCUM);\r\nPRINT_LREG_16bit(asd_ha, lseq, SINDEX);\r\nPRINT_LREG_16bit(asd_ha, lseq, DINDEX);\r\nPRINT_LREG_8bit(asd_ha, lseq, SINDIR);\r\nPRINT_LREG_8bit(asd_ha, lseq, DINDIR);\r\nPRINT_LREG_8bit(asd_ha, lseq, JUMLDIR);\r\nPRINT_LREG_8bit(asd_ha, lseq, ARP2HALTCODE);\r\nPRINT_LREG_16bit(asd_ha, lseq, CURRADDR);\r\nPRINT_LREG_16bit(asd_ha, lseq, LASTADDR);\r\nPRINT_LREG_16bit(asd_ha, lseq, NXTLADDR);\r\nasd_printk("LSEQ%d: IOP REGISTERS\n", lseq);\r\nPRINT_LREG_32bit(asd_ha, lseq, MODECTL);\r\nPRINT_LREG_32bit(asd_ha, lseq, DBGMODE);\r\nPRINT_LREG_32bit(asd_ha, lseq, CONTROL);\r\nPRINT_REG_32bit(asd_ha, BISTCTL0, LmBISTCTL0(lseq));\r\nPRINT_REG_32bit(asd_ha, BISTCTL1, LmBISTCTL1(lseq));\r\nasd_printk("LSEQ%d: CIO REGISTERS\n", lseq);\r\nasd_printk("Mode common:\n");\r\nfor (mode = 0; mode < 8; mode++) {\r\nu32 lseq_cio_addr = LmSEQ_PHY_BASE(mode, lseq);\r\nint i;\r\nfor (i = 0; LSEQmCIOREGS[i].name; i++)\r\nif (LSEQmCIOREGS[i].mode == MODE_COMMON)\r\nasd_print_lseq_cio_reg(asd_ha,lseq_cio_addr,i);\r\n}\r\nasd_printk("Mode unique:\n");\r\nfor (mode = 0; mode < 8; mode++) {\r\nu32 lseq_cio_addr = LmSEQ_PHY_BASE(mode, lseq);\r\nint i;\r\nasd_printk("Mode %d\n", mode);\r\nfor (i = 0; LSEQmCIOREGS[i].name; i++) {\r\nif (!(LSEQmCIOREGS[i].mode & (1 << mode)))\r\ncontinue;\r\nasd_print_lseq_cio_reg(asd_ha, lseq_cio_addr, i);\r\n}\r\n}\r\nasd_printk("SCRATCH MEMORY\n");\r\nasd_printk("LSEQ%d MIP 0 >>>>\n", lseq);\r\nPRINT_LMIP_word(asd_ha, lseq, Q_TGTXFR_HEAD);\r\nPRINT_LMIP_word(asd_ha, lseq, Q_TGTXFR_TAIL);\r\nPRINT_LMIP_byte(asd_ha, lseq, LINK_NUMBER);\r\nPRINT_LMIP_byte(asd_ha, lseq, SCRATCH_FLAGS);\r\nPRINT_LMIP_dword(asd_ha, lseq, CONNECTION_STATE);\r\nPRINT_LMIP_word(asd_ha, lseq, CONCTL);\r\nPRINT_LMIP_byte(asd_ha, lseq, CONSTAT);\r\nPRINT_LMIP_byte(asd_ha, lseq, CONNECTION_MODES);\r\nPRINT_LMIP_word(asd_ha, lseq, REG1_ISR);\r\nPRINT_LMIP_word(asd_ha, lseq, REG2_ISR);\r\nPRINT_LMIP_word(asd_ha, lseq, REG3_ISR);\r\nPRINT_LMIP_qword(asd_ha, lseq,REG0_ISR);\r\nasd_printk("LSEQ%d MIP 1 >>>>\n", lseq);\r\nPRINT_LMIP_word(asd_ha, lseq, EST_NEXUS_SCBPTR0);\r\nPRINT_LMIP_word(asd_ha, lseq, EST_NEXUS_SCBPTR1);\r\nPRINT_LMIP_word(asd_ha, lseq, EST_NEXUS_SCBPTR2);\r\nPRINT_LMIP_word(asd_ha, lseq, EST_NEXUS_SCBPTR3);\r\nPRINT_LMIP_byte(asd_ha, lseq, EST_NEXUS_SCB_OPCODE0);\r\nPRINT_LMIP_byte(asd_ha, lseq, EST_NEXUS_SCB_OPCODE1);\r\nPRINT_LMIP_byte(asd_ha, lseq, EST_NEXUS_SCB_OPCODE2);\r\nPRINT_LMIP_byte(asd_ha, lseq, EST_NEXUS_SCB_OPCODE3);\r\nPRINT_LMIP_byte(asd_ha, lseq, EST_NEXUS_SCB_HEAD);\r\nPRINT_LMIP_byte(asd_ha, lseq, EST_NEXUS_SCB_TAIL);\r\nPRINT_LMIP_byte(asd_ha, lseq, EST_NEXUS_BUF_AVAIL);\r\nPRINT_LMIP_dword(asd_ha, lseq, TIMEOUT_CONST);\r\nPRINT_LMIP_word(asd_ha, lseq, ISR_SAVE_SINDEX);\r\nPRINT_LMIP_word(asd_ha, lseq, ISR_SAVE_DINDEX);\r\nasd_printk("LSEQ%d MIP 2 >>>>\n", lseq);\r\nPRINT_LMIP_word(asd_ha, lseq, EMPTY_SCB_PTR0);\r\nPRINT_LMIP_word(asd_ha, lseq, EMPTY_SCB_PTR1);\r\nPRINT_LMIP_word(asd_ha, lseq, EMPTY_SCB_PTR2);\r\nPRINT_LMIP_word(asd_ha, lseq, EMPTY_SCB_PTR3);\r\nPRINT_LMIP_byte(asd_ha, lseq, EMPTY_SCB_OPCD0);\r\nPRINT_LMIP_byte(asd_ha, lseq, EMPTY_SCB_OPCD1);\r\nPRINT_LMIP_byte(asd_ha, lseq, EMPTY_SCB_OPCD2);\r\nPRINT_LMIP_byte(asd_ha, lseq, EMPTY_SCB_OPCD3);\r\nPRINT_LMIP_byte(asd_ha, lseq, EMPTY_SCB_HEAD);\r\nPRINT_LMIP_byte(asd_ha, lseq, EMPTY_SCB_TAIL);\r\nPRINT_LMIP_byte(asd_ha, lseq, EMPTY_BUFS_AVAIL);\r\nasd_printk("LSEQ%d MIP 3 >>>>\n", lseq);\r\nPRINT_LMIP_dword(asd_ha, lseq, DEV_PRES_TMR_TOUT_CONST);\r\nPRINT_LMIP_dword(asd_ha, lseq, SATA_INTERLOCK_TIMEOUT);\r\nPRINT_LMIP_dword(asd_ha, lseq, SRST_ASSERT_TIMEOUT);\r\nPRINT_LMIP_dword(asd_ha, lseq, RCV_FIS_TIMEOUT);\r\nPRINT_LMIP_dword(asd_ha, lseq, ONE_MILLISEC_TIMEOUT);\r\nPRINT_LMIP_dword(asd_ha, lseq, TEN_MS_COMINIT_TIMEOUT);\r\nPRINT_LMIP_dword(asd_ha, lseq, SMP_RCV_TIMEOUT);\r\nfor (mode = 0; mode < 3; mode++) {\r\nasd_printk("LSEQ%d MDP 0 MODE %d >>>>\n", lseq, mode);\r\nmoffs = mode * LSEQ_MODE_SCRATCH_SIZE;\r\nasd_printk(STR_16BIT, "RET_ADDR", 0,\r\nasd_read_reg_word(asd_ha, LmSEQ_RET_ADDR(lseq)\r\n+ moffs));\r\nasd_printk(STR_16BIT, "REG0_MODE", 2,\r\nasd_read_reg_word(asd_ha, LmSEQ_REG0_MODE(lseq)\r\n+ moffs));\r\nasd_printk(STR_16BIT, "MODE_FLAGS", 4,\r\nasd_read_reg_word(asd_ha, LmSEQ_MODE_FLAGS(lseq)\r\n+ moffs));\r\nasd_printk(STR_16BIT, "RET_ADDR2", 0x6,\r\nasd_read_reg_word(asd_ha, LmSEQ_RET_ADDR2(lseq)\r\n+ moffs));\r\nasd_printk(STR_16BIT, "RET_ADDR1", 0x8,\r\nasd_read_reg_word(asd_ha, LmSEQ_RET_ADDR1(lseq)\r\n+ moffs));\r\nasd_printk(STR_8BIT, "OPCODE_TO_CSEQ", 0xB,\r\nasd_read_reg_byte(asd_ha, LmSEQ_OPCODE_TO_CSEQ(lseq)\r\n+ moffs));\r\nasd_printk(STR_16BIT, "DATA_TO_CSEQ", 0xC,\r\nasd_read_reg_word(asd_ha, LmSEQ_DATA_TO_CSEQ(lseq)\r\n+ moffs));\r\n}\r\nasd_printk("LSEQ%d MDP 0 MODE 5 >>>>\n", lseq);\r\nmoffs = LSEQ_MODE5_PAGE0_OFFSET;\r\nasd_printk(STR_16BIT, "RET_ADDR", 0,\r\nasd_read_reg_word(asd_ha, LmSEQ_RET_ADDR(lseq) + moffs));\r\nasd_printk(STR_16BIT, "REG0_MODE", 2,\r\nasd_read_reg_word(asd_ha, LmSEQ_REG0_MODE(lseq) + moffs));\r\nasd_printk(STR_16BIT, "MODE_FLAGS", 4,\r\nasd_read_reg_word(asd_ha, LmSEQ_MODE_FLAGS(lseq) + moffs));\r\nasd_printk(STR_16BIT, "RET_ADDR2", 0x6,\r\nasd_read_reg_word(asd_ha, LmSEQ_RET_ADDR2(lseq) + moffs));\r\nasd_printk(STR_16BIT, "RET_ADDR1", 0x8,\r\nasd_read_reg_word(asd_ha, LmSEQ_RET_ADDR1(lseq) + moffs));\r\nasd_printk(STR_8BIT, "OPCODE_TO_CSEQ", 0xB,\r\nasd_read_reg_byte(asd_ha, LmSEQ_OPCODE_TO_CSEQ(lseq) + moffs));\r\nasd_printk(STR_16BIT, "DATA_TO_CSEQ", 0xC,\r\nasd_read_reg_word(asd_ha, LmSEQ_DATA_TO_CSEQ(lseq) + moffs));\r\nasd_printk("LSEQ%d MDP 0 MODE 0 >>>>\n", lseq);\r\nPRINT_LMIP_word(asd_ha, lseq, FIRST_INV_DDB_SITE);\r\nPRINT_LMIP_word(asd_ha, lseq, EMPTY_TRANS_CTX);\r\nPRINT_LMIP_word(asd_ha, lseq, RESP_LEN);\r\nPRINT_LMIP_word(asd_ha, lseq, FIRST_INV_SCB_SITE);\r\nPRINT_LMIP_dword(asd_ha, lseq, INTEN_SAVE);\r\nPRINT_LMIP_byte(asd_ha, lseq, LINK_RST_FRM_LEN);\r\nPRINT_LMIP_byte(asd_ha, lseq, LINK_RST_PROTOCOL);\r\nPRINT_LMIP_byte(asd_ha, lseq, RESP_STATUS);\r\nPRINT_LMIP_byte(asd_ha, lseq, LAST_LOADED_SGE);\r\nPRINT_LMIP_byte(asd_ha, lseq, SAVE_SCBPTR);\r\nasd_printk("LSEQ%d MDP 0 MODE 1 >>>>\n", lseq);\r\nPRINT_LMIP_word(asd_ha, lseq, Q_XMIT_HEAD);\r\nPRINT_LMIP_word(asd_ha, lseq, M1_EMPTY_TRANS_CTX);\r\nPRINT_LMIP_word(asd_ha, lseq, INI_CONN_TAG);\r\nPRINT_LMIP_byte(asd_ha, lseq, FAILED_OPEN_STATUS);\r\nPRINT_LMIP_byte(asd_ha, lseq, XMIT_REQUEST_TYPE);\r\nPRINT_LMIP_byte(asd_ha, lseq, M1_RESP_STATUS);\r\nPRINT_LMIP_byte(asd_ha, lseq, M1_LAST_LOADED_SGE);\r\nPRINT_LMIP_word(asd_ha, lseq, M1_SAVE_SCBPTR);\r\nasd_printk("LSEQ%d MDP 0 MODE 2 >>>>\n", lseq);\r\nPRINT_LMIP_word(asd_ha, lseq, PORT_COUNTER);\r\nPRINT_LMIP_word(asd_ha, lseq, PM_TABLE_PTR);\r\nPRINT_LMIP_word(asd_ha, lseq, SATA_INTERLOCK_TMR_SAVE);\r\nPRINT_LMIP_word(asd_ha, lseq, IP_BITL);\r\nPRINT_LMIP_word(asd_ha, lseq, COPY_SMP_CONN_TAG);\r\nPRINT_LMIP_byte(asd_ha, lseq, P0M2_OFFS1AH);\r\nasd_printk("LSEQ%d MDP 0 MODE 4/5 >>>>\n", lseq);\r\nPRINT_LMIP_byte(asd_ha, lseq, SAVED_OOB_STATUS);\r\nPRINT_LMIP_byte(asd_ha, lseq, SAVED_OOB_MODE);\r\nPRINT_LMIP_word(asd_ha, lseq, Q_LINK_HEAD);\r\nPRINT_LMIP_byte(asd_ha, lseq, LINK_RST_ERR);\r\nPRINT_LMIP_byte(asd_ha, lseq, SAVED_OOB_SIGNALS);\r\nPRINT_LMIP_byte(asd_ha, lseq, SAS_RESET_MODE);\r\nPRINT_LMIP_byte(asd_ha, lseq, LINK_RESET_RETRY_COUNT);\r\nPRINT_LMIP_byte(asd_ha, lseq, NUM_LINK_RESET_RETRIES);\r\nPRINT_LMIP_word(asd_ha, lseq, OOB_INT_ENABLES);\r\nPRINT_LMIP_word(asd_ha, lseq, NOTIFY_TIMER_TIMEOUT);\r\nPRINT_LMIP_word(asd_ha, lseq, NOTIFY_TIMER_DOWN_COUNT);\r\nasd_printk("LSEQ%d MDP 1 MODE 0 >>>>\n", lseq);\r\nPRINT_LMIP_qword(asd_ha, lseq, SG_LIST_PTR_ADDR0);\r\nPRINT_LMIP_qword(asd_ha, lseq, SG_LIST_PTR_ADDR1);\r\nasd_printk("LSEQ%d MDP 1 MODE 1 >>>>\n", lseq);\r\nPRINT_LMIP_qword(asd_ha, lseq, M1_SG_LIST_PTR_ADDR0);\r\nPRINT_LMIP_qword(asd_ha, lseq, M1_SG_LIST_PTR_ADDR1);\r\nasd_printk("LSEQ%d MDP 1 MODE 2 >>>>\n", lseq);\r\nPRINT_LMIP_dword(asd_ha, lseq, INVALID_DWORD_COUNT);\r\nPRINT_LMIP_dword(asd_ha, lseq, DISPARITY_ERROR_COUNT);\r\nPRINT_LMIP_dword(asd_ha, lseq, LOSS_OF_SYNC_COUNT);\r\nasd_printk("LSEQ%d MDP 1 MODE 4/5 >>>>\n", lseq);\r\nPRINT_LMIP_dword(asd_ha, lseq, FRAME_TYPE_MASK);\r\nPRINT_LMIP_dword(asd_ha, lseq, HASHED_SRC_ADDR_MASK_PRINT);\r\nPRINT_LMIP_byte(asd_ha, lseq, NUM_FILL_BYTES_MASK);\r\nPRINT_LMIP_word(asd_ha, lseq, TAG_MASK);\r\nPRINT_LMIP_word(asd_ha, lseq, TARGET_PORT_XFER_TAG);\r\nPRINT_LMIP_dword(asd_ha, lseq, DATA_OFFSET);\r\nasd_printk("LSEQ%d MDP 2 MODE 0 >>>>\n", lseq);\r\nPRINT_LMIP_dword(asd_ha, lseq, SMP_RCV_TIMER_TERM_TS);\r\nPRINT_LMIP_byte(asd_ha, lseq, DEVICE_BITS);\r\nPRINT_LMIP_word(asd_ha, lseq, SDB_DDB);\r\nPRINT_LMIP_word(asd_ha, lseq, SDB_NUM_TAGS);\r\nPRINT_LMIP_word(asd_ha, lseq, SDB_CURR_TAG);\r\nasd_printk("LSEQ%d MDP 2 MODE 1 >>>>\n", lseq);\r\nPRINT_LMIP_qword(asd_ha, lseq, TX_ID_ADDR_FRAME);\r\nPRINT_LMIP_dword(asd_ha, lseq, OPEN_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, SRST_AS_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, LAST_LOADED_SG_EL);\r\nasd_printk("LSEQ%d MDP 2 MODE 2 >>>>\n", lseq);\r\nPRINT_LMIP_dword(asd_ha, lseq, CLOSE_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, BREAK_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, DWS_RESET_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, SATA_INTERLOCK_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, MCTL_TIMER_TERM_TS);\r\nasd_printk("LSEQ%d MDP 2 MODE 4/5 >>>>\n", lseq);\r\nPRINT_LMIP_dword(asd_ha, lseq, COMINIT_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, RCV_ID_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, RCV_FIS_TIMER_TERM_TS);\r\nPRINT_LMIP_dword(asd_ha, lseq, DEV_PRES_TIMER_TERM_TS);\r\n}\r\nvoid asd_dump_seq_state(struct asd_ha_struct *asd_ha, u8 lseq_mask)\r\n{\r\nint lseq;\r\nasd_dump_cseq_state(asd_ha);\r\nif (lseq_mask != 0)\r\nfor_each_sequencer(lseq_mask, lseq_mask, lseq)\r\nasd_dump_lseq_state(asd_ha, lseq);\r\n}\r\nvoid asd_dump_frame_rcvd(struct asd_phy *phy,\r\nstruct done_list_struct *dl)\r\n{\r\nunsigned long flags;\r\nint i;\r\nswitch ((dl->status_block[1] & 0x70) >> 3) {\r\ncase SAS_PROTOCOL_STP:\r\nASD_DPRINTK("STP proto device-to-host FIS:\n");\r\nbreak;\r\ndefault:\r\ncase SAS_PROTOCOL_SSP:\r\nASD_DPRINTK("SAS proto IDENTIFY:\n");\r\nbreak;\r\n}\r\nspin_lock_irqsave(&phy->sas_phy.frame_rcvd_lock, flags);\r\nfor (i = 0; i < phy->sas_phy.frame_rcvd_size; i+=4)\r\nASD_DPRINTK("%02x: %02x %02x %02x %02x\n",\r\ni,\r\nphy->frame_rcvd[i],\r\nphy->frame_rcvd[i+1],\r\nphy->frame_rcvd[i+2],\r\nphy->frame_rcvd[i+3]);\r\nspin_unlock_irqrestore(&phy->sas_phy.frame_rcvd_lock, flags);\r\n}
