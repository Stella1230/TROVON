static void fsg_led_wlan_set(struct led_classdev *led_cdev,\r\nenum led_brightness value)\r\n{\r\nif (value) {\r\nlatch_value &= ~(1 << FSG_LED_WLAN_BIT);\r\n*latch_address = latch_value;\r\n} else {\r\nlatch_value |= (1 << FSG_LED_WLAN_BIT);\r\n*latch_address = latch_value;\r\n}\r\n}\r\nstatic void fsg_led_wan_set(struct led_classdev *led_cdev,\r\nenum led_brightness value)\r\n{\r\nif (value) {\r\nlatch_value &= ~(1 << FSG_LED_WAN_BIT);\r\n*latch_address = latch_value;\r\n} else {\r\nlatch_value |= (1 << FSG_LED_WAN_BIT);\r\n*latch_address = latch_value;\r\n}\r\n}\r\nstatic void fsg_led_sata_set(struct led_classdev *led_cdev,\r\nenum led_brightness value)\r\n{\r\nif (value) {\r\nlatch_value &= ~(1 << FSG_LED_SATA_BIT);\r\n*latch_address = latch_value;\r\n} else {\r\nlatch_value |= (1 << FSG_LED_SATA_BIT);\r\n*latch_address = latch_value;\r\n}\r\n}\r\nstatic void fsg_led_usb_set(struct led_classdev *led_cdev,\r\nenum led_brightness value)\r\n{\r\nif (value) {\r\nlatch_value &= ~(1 << FSG_LED_USB_BIT);\r\n*latch_address = latch_value;\r\n} else {\r\nlatch_value |= (1 << FSG_LED_USB_BIT);\r\n*latch_address = latch_value;\r\n}\r\n}\r\nstatic void fsg_led_sync_set(struct led_classdev *led_cdev,\r\nenum led_brightness value)\r\n{\r\nif (value) {\r\nlatch_value &= ~(1 << FSG_LED_SYNC_BIT);\r\n*latch_address = latch_value;\r\n} else {\r\nlatch_value |= (1 << FSG_LED_SYNC_BIT);\r\n*latch_address = latch_value;\r\n}\r\n}\r\nstatic void fsg_led_ring_set(struct led_classdev *led_cdev,\r\nenum led_brightness value)\r\n{\r\nif (value) {\r\nlatch_value &= ~(1 << FSG_LED_RING_BIT);\r\n*latch_address = latch_value;\r\n} else {\r\nlatch_value |= (1 << FSG_LED_RING_BIT);\r\n*latch_address = latch_value;\r\n}\r\n}\r\nstatic int fsg_led_probe(struct platform_device *pdev)\r\n{\r\nint ret;\r\nlatch_address = (unsigned short *) devm_ioremap(&pdev->dev,\r\nIXP4XX_EXP_BUS_BASE(2), 512);\r\nif (!latch_address)\r\nreturn -ENOMEM;\r\nlatch_value = 0xffff;\r\n*latch_address = latch_value;\r\nret = devm_led_classdev_register(&pdev->dev, &fsg_wlan_led);\r\nif (ret < 0)\r\nreturn ret;\r\nret = devm_led_classdev_register(&pdev->dev, &fsg_wan_led);\r\nif (ret < 0)\r\nreturn ret;\r\nret = devm_led_classdev_register(&pdev->dev, &fsg_sata_led);\r\nif (ret < 0)\r\nreturn ret;\r\nret = devm_led_classdev_register(&pdev->dev, &fsg_usb_led);\r\nif (ret < 0)\r\nreturn ret;\r\nret = devm_led_classdev_register(&pdev->dev, &fsg_sync_led);\r\nif (ret < 0)\r\nreturn ret;\r\nret = devm_led_classdev_register(&pdev->dev, &fsg_ring_led);\r\nif (ret < 0)\r\nreturn ret;\r\nreturn ret;\r\n}
