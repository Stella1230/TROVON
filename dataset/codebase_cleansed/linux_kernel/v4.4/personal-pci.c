static int __init personal_server_map_irq(const struct pci_dev *dev, u8 slot,\r\nu8 pin)\r\n{\r\nunsigned char line;\r\npci_read_config_byte(dev, PCI_INTERRUPT_LINE, &line);\r\nif (line > 0x40 && line <= 0x5f) {\r\nreturn irqmap_personal_server[(line & 0x1f) - 8];\r\n} else if (line == 0) {\r\nreturn 0;\r\n} else\r\nreturn irqmap_personal_server[(line - 1) & 3];\r\n}\r\nstatic int __init personal_pci_init(void)\r\n{\r\nif (machine_is_personal_server())\r\npci_common_init(&personal_server_pci);\r\nreturn 0;\r\n}
