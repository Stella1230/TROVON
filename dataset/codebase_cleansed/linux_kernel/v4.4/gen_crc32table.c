static void crc32init_le(void)\r\n{\r\ncrc32init_le_generic(CRCPOLY_LE, crc32table_le);\r\n}\r\nstatic void crc32cinit_le(void)\r\n{\r\ncrc32init_le_generic(CRC32C_POLY_LE, crc32ctable_le);\r\n}\r\nstatic void crc32init_be(void)\r\n{\r\nunsigned i, j;\r\nuint32_t crc = 0x80000000;\r\ncrc32table_be[0][0] = 0;\r\nfor (i = 1; i < BE_TABLE_SIZE; i <<= 1) {\r\ncrc = (crc << 1) ^ ((crc & 0x80000000) ? CRCPOLY_BE : 0);\r\nfor (j = 0; j < i; j++)\r\ncrc32table_be[0][i + j] = crc ^ crc32table_be[0][j];\r\n}\r\nfor (i = 0; i < BE_TABLE_SIZE; i++) {\r\ncrc = crc32table_be[0][i];\r\nfor (j = 1; j < BE_TABLE_ROWS; j++) {\r\ncrc = crc32table_be[0][(crc >> 24) & 0xff] ^ (crc << 8);\r\ncrc32table_be[j][i] = crc;\r\n}\r\n}\r\n}\r\nint main(int argc, char** argv)\r\n{\r\nprintf("/* this file is generated - do not edit */\n\n");\r\nif (CRC_LE_BITS > 1) {\r\ncrc32init_le();\r\nprintf("static const u32 ____cacheline_aligned "\r\n"crc32table_le[%d][%d] = {",\r\nLE_TABLE_ROWS, LE_TABLE_SIZE);\r\noutput_table(crc32table_le, LE_TABLE_ROWS,\r\nLE_TABLE_SIZE, "tole");\r\nprintf("};\n");\r\n}\r\nif (CRC_BE_BITS > 1) {\r\ncrc32init_be();\r\nprintf("static const u32 ____cacheline_aligned "\r\n"crc32table_be[%d][%d] = {",\r\nBE_TABLE_ROWS, BE_TABLE_SIZE);\r\noutput_table(crc32table_be, LE_TABLE_ROWS,\r\nBE_TABLE_SIZE, "tobe");\r\nprintf("};\n");\r\n}\r\nif (CRC_LE_BITS > 1) {\r\ncrc32cinit_le();\r\nprintf("static const u32 ____cacheline_aligned "\r\n"crc32ctable_le[%d][%d] = {",\r\nLE_TABLE_ROWS, LE_TABLE_SIZE);\r\noutput_table(crc32ctable_le, LE_TABLE_ROWS,\r\nLE_TABLE_SIZE, "tole");\r\nprintf("};\n");\r\n}\r\nreturn 0;\r\n}
