bool qid_eq(struct kqid left, struct kqid right)\r\n{\r\nif (left.type != right.type)\r\nreturn false;\r\nswitch(left.type) {\r\ncase USRQUOTA:\r\nreturn uid_eq(left.uid, right.uid);\r\ncase GRPQUOTA:\r\nreturn gid_eq(left.gid, right.gid);\r\ncase PRJQUOTA:\r\nreturn projid_eq(left.projid, right.projid);\r\ndefault:\r\nBUG();\r\n}\r\n}\r\nbool qid_lt(struct kqid left, struct kqid right)\r\n{\r\nif (left.type < right.type)\r\nreturn true;\r\nif (left.type > right.type)\r\nreturn false;\r\nswitch (left.type) {\r\ncase USRQUOTA:\r\nreturn uid_lt(left.uid, right.uid);\r\ncase GRPQUOTA:\r\nreturn gid_lt(left.gid, right.gid);\r\ncase PRJQUOTA:\r\nreturn projid_lt(left.projid, right.projid);\r\ndefault:\r\nBUG();\r\n}\r\n}\r\nqid_t from_kqid(struct user_namespace *targ, struct kqid kqid)\r\n{\r\nswitch (kqid.type) {\r\ncase USRQUOTA:\r\nreturn from_kuid(targ, kqid.uid);\r\ncase GRPQUOTA:\r\nreturn from_kgid(targ, kqid.gid);\r\ncase PRJQUOTA:\r\nreturn from_kprojid(targ, kqid.projid);\r\ndefault:\r\nBUG();\r\n}\r\n}\r\nqid_t from_kqid_munged(struct user_namespace *targ, struct kqid kqid)\r\n{\r\nswitch (kqid.type) {\r\ncase USRQUOTA:\r\nreturn from_kuid_munged(targ, kqid.uid);\r\ncase GRPQUOTA:\r\nreturn from_kgid_munged(targ, kqid.gid);\r\ncase PRJQUOTA:\r\nreturn from_kprojid_munged(targ, kqid.projid);\r\ndefault:\r\nBUG();\r\n}\r\n}\r\nbool qid_valid(struct kqid qid)\r\n{\r\nswitch (qid.type) {\r\ncase USRQUOTA:\r\nreturn uid_valid(qid.uid);\r\ncase GRPQUOTA:\r\nreturn gid_valid(qid.gid);\r\ncase PRJQUOTA:\r\nreturn projid_valid(qid.projid);\r\ndefault:\r\nBUG();\r\n}\r\n}
