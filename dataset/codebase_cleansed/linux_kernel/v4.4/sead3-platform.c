static int __init sead3_platforms_device_init(void)\r\n{\r\nif (gic_present) {\r\nuart8250_data[0].irq = MIPS_GIC_IRQ_BASE + GIC_INT_UART0;\r\nuart8250_data[1].irq = MIPS_GIC_IRQ_BASE + GIC_INT_UART1;\r\nehci_resources[1].start = MIPS_GIC_IRQ_BASE + GIC_INT_EHCI;\r\nsead3_net_resources[1].start = MIPS_GIC_IRQ_BASE + GIC_INT_NET;\r\n} else {\r\nuart8250_data[0].irq = MIPS_CPU_IRQ_BASE + CPU_INT_UART0;\r\nuart8250_data[1].irq = MIPS_CPU_IRQ_BASE + CPU_INT_UART1;\r\nehci_resources[1].start = MIPS_CPU_IRQ_BASE + CPU_INT_EHCI;\r\nsead3_net_resources[1].start = MIPS_CPU_IRQ_BASE + CPU_INT_NET;\r\n}\r\nreturn platform_add_devices(sead3_platform_devices,\r\nARRAY_SIZE(sead3_platform_devices));\r\n}
