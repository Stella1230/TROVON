static unsigned int netcell_read_id(struct ata_device *adev,\r\nstruct ata_taskfile *tf, u16 *id)\r\n{\r\nunsigned int err_mask = ata_do_dev_read_id(adev, tf, id);\r\nif (err_mask == 0)\r\nid[ATA_ID_CSF_DEFAULT] |= 0x4000;\r\nreturn err_mask;\r\n}\r\nstatic int netcell_init_one (struct pci_dev *pdev, const struct pci_device_id *ent)\r\n{\r\nstatic const struct ata_port_info info = {\r\n.flags = ATA_FLAG_SLAVE_POSS,\r\n.pio_mask = ATA_PIO4,\r\n.mwdma_mask = ATA_MWDMA2,\r\n.udma_mask = ATA_UDMA5,\r\n.port_ops = &netcell_ops,\r\n};\r\nconst struct ata_port_info *port_info[] = { &info, NULL };\r\nint rc;\r\nata_print_version_once(&pdev->dev, DRV_VERSION);\r\nrc = pcim_enable_device(pdev);\r\nif (rc)\r\nreturn rc;\r\nata_pci_bmdma_clear_simplex(pdev);\r\nreturn ata_pci_bmdma_init_one(pdev, port_info, &netcell_sht, NULL, 0);\r\n}
