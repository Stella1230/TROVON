int hvc_get_chars(uint32_t vtermno, char *buf, int count)\r\n{\r\nlong ret;\r\nunsigned long retbuf[PLPAR_HCALL_BUFSIZE];\r\nunsigned long *lbuf = (unsigned long *)buf;\r\nret = plpar_hcall(H_GET_TERM_CHAR, retbuf, vtermno);\r\nlbuf[0] = be64_to_cpu(retbuf[1]);\r\nlbuf[1] = be64_to_cpu(retbuf[2]);\r\nif (ret == H_SUCCESS)\r\nreturn retbuf[0];\r\nreturn 0;\r\n}\r\nint hvc_put_chars(uint32_t vtermno, const char *buf, int count)\r\n{\r\nunsigned long *lbuf = (unsigned long *) buf;\r\nlong ret;\r\nif (count > MAX_VIO_PUT_CHARS)\r\ncount = MAX_VIO_PUT_CHARS;\r\nret = plpar_hcall_norets(H_PUT_TERM_CHAR, vtermno, count,\r\ncpu_to_be64(lbuf[0]),\r\ncpu_to_be64(lbuf[1]));\r\nif (ret == H_SUCCESS)\r\nreturn count;\r\nif (ret == H_BUSY)\r\nreturn -EAGAIN;\r\nreturn -EIO;\r\n}
