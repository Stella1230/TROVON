static int labpc_auto_attach(struct comedi_device *dev,\r\nunsigned long context)\r\n{\r\nstruct pcmcia_device *link = comedi_to_pcmcia_dev(dev);\r\nstruct labpc_private *devpriv;\r\nint ret;\r\ndev->board_ptr = &labpc_cs_boards[0];\r\nlink->config_flags |= CONF_AUTO_SET_IO |\r\nCONF_ENABLE_IRQ | CONF_ENABLE_PULSE_IRQ;\r\nret = comedi_pcmcia_enable(dev, NULL);\r\nif (ret)\r\nreturn ret;\r\ndev->iobase = link->resource[0]->start;\r\nif (!link->irq)\r\nreturn -EINVAL;\r\ndevpriv = comedi_alloc_devpriv(dev, sizeof(*devpriv));\r\nif (!devpriv)\r\nreturn -ENOMEM;\r\nreturn labpc_common_attach(dev, link->irq, IRQF_SHARED);\r\n}\r\nstatic int labpc_cs_attach(struct pcmcia_device *link)\r\n{\r\nreturn comedi_pcmcia_auto_config(link, &driver_labpc_cs);\r\n}
