static int has_required_endpoints(const struct usb_host_interface *interface)\r\n{\r\n__u8 i;\r\nint has_bulk_in = 0;\r\nint has_bulk_out = 0;\r\nfor (i = 0; i < interface->desc.bNumEndpoints; ++i) {\r\nif (usb_endpoint_is_bulk_in(&interface->endpoint[i].desc))\r\nhas_bulk_in = 1;\r\nelse if (usb_endpoint_is_bulk_out(&interface->endpoint[i].desc))\r\nhas_bulk_out = 1;\r\n}\r\nreturn has_bulk_in && has_bulk_out;\r\n}\r\nstatic int xsens_mt_probe(struct usb_serial *serial,\r\nconst struct usb_device_id *id)\r\n{\r\nif (!has_required_endpoints(serial->interface->cur_altsetting))\r\nreturn -ENODEV;\r\nreturn 0;\r\n}
