static inline void __init omap3stalker_init_eth(void)\r\n{\r\nomap_mux_init_gpio(19, OMAP_PIN_INPUT_PULLUP);\r\ngpmc_smsc911x_init(&smsc911x_cfg);\r\n}\r\nstatic inline void __init omap3stalker_init_eth(void)\r\n{\r\nreturn;\r\n}\r\nstatic void __init omap3_stalker_display_init(void)\r\n{\r\nreturn;\r\n}\r\nstatic int\r\nomap3stalker_twl_gpio_setup(struct device *dev,\r\nunsigned gpio, unsigned ngpio)\r\n{\r\nmmc[0].gpio_cd = gpio + 0;\r\nomap_hsmmc_late_init(mmc);\r\ngpio_request_one(gpio + TWL4030_GPIO_MAX, GPIOF_OUT_INIT_LOW,\r\n"EN_LCD_BKL");\r\ngpio_request_one(gpio + 7, GPIOF_OUT_INIT_LOW, "EN_DVI");\r\ngpio_leds[2].gpio = gpio + TWL4030_GPIO_MAX + 1;\r\ngpio_leds[3].gpio = gpio + 13;\r\nplatform_device_register(&leds_gpio);\r\nreturn 0;\r\n}\r\nstatic int __init omap3_stalker_i2c_init(void)\r\n{\r\nomap3_pmic_get_config(&omap3stalker_twldata,\r\nTWL_COMMON_PDATA_USB | TWL_COMMON_PDATA_MADC |\r\nTWL_COMMON_PDATA_AUDIO,\r\nTWL_COMMON_REGULATOR_VDAC | TWL_COMMON_REGULATOR_VPLL2);\r\nomap3stalker_twldata.vdac->constraints.apply_uV = true;\r\nomap3stalker_twldata.vpll2->constraints.apply_uV = true;\r\nomap3stalker_twldata.vpll2->constraints.name = "VDVI";\r\nomap3_pmic_init("twl4030", &omap3stalker_twldata);\r\nomap_register_i2c_bus(2, 400, NULL, 0);\r\nomap_register_i2c_bus(3, 400, omap3stalker_i2c_boardinfo3,\r\nARRAY_SIZE(omap3stalker_i2c_boardinfo3));\r\nreturn 0;\r\n}\r\nstatic void __init omap3_stalker_init(void)\r\n{\r\nregulator_register_fixed(0, dummy_supplies, ARRAY_SIZE(dummy_supplies));\r\nomap3_mux_init(board_mux, OMAP_PACKAGE_CUS);\r\nomap_mux_init_gpio(23, OMAP_PIN_INPUT);\r\nomap_hsmmc_init(mmc);\r\nomap3_stalker_i2c_init();\r\nplatform_add_devices(omap3_stalker_devices,\r\nARRAY_SIZE(omap3_stalker_devices));\r\nomap_display_init(&omap3_stalker_dss_data);\r\nomap_serial_init();\r\nomap_sdrc_init(mt46h32m32lf6_sdrc_params, NULL);\r\nusb_bind_phy("musb-hdrc.0.auto", 0, "twl4030_usb");\r\nusb_musb_init(NULL);\r\nusbhs_init_phys(phy_data, ARRAY_SIZE(phy_data));\r\nusbhs_init(&usbhs_bdata);\r\nomap_ads7846_init(1, OMAP3_STALKER_TS_GPIO, 310, NULL);\r\nomap_mux_init_gpio(21, OMAP_PIN_OUTPUT);\r\nomap_mux_init_gpio(18, OMAP_PIN_INPUT_PULLUP);\r\nomap3stalker_init_eth();\r\nomap3_stalker_display_init();\r\nomap_mux_init_signal("sdr_cke0", OMAP_PIN_OUTPUT);\r\nomap_mux_init_signal("sdr_cke1", OMAP_PIN_OUTPUT);\r\n}
