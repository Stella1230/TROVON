static void simtec_audio_startup_lrroute(void)\r\n{\r\nunsigned int tmp;\r\nunsigned long flags;\r\nlocal_irq_save(flags);\r\ntmp = __raw_readb(BAST_VA_CTRL1);\r\ntmp &= ~BAST_CPLD_CTRL1_LRMASK;\r\ntmp |= BAST_CPLD_CTRL1_LRCDAC;\r\n__raw_writeb(tmp, BAST_VA_CTRL1);\r\nlocal_irq_restore(flags);\r\n}\r\nint __init simtec_audio_add(const char *name, bool has_lr_routing,\r\nstruct s3c24xx_audio_simtec_pdata *spd)\r\n{\r\nif (!name)\r\nname = "tlv320aic23";\r\nsnprintf(our_name, sizeof(our_name)-1, "s3c24xx-simtec-%s", name);\r\nif (spd)\r\nsimtec_audio_platdata = *spd;\r\nif (has_lr_routing)\r\nsimtec_audio_platdata.startup = simtec_audio_startup_lrroute;\r\nplatform_device_register(&s3c_device_iis);\r\nplatform_device_register(&simtec_audio_dev);\r\nreturn 0;\r\n}
