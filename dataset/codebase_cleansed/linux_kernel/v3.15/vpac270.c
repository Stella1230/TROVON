static void __init vpac270_nor_init(void)\r\n{\r\nplatform_device_register(&vpac270_flash);\r\n}\r\nstatic inline void vpac270_nor_init(void) {}\r\nstatic void __init vpac270_onenand_init(void)\r\n{\r\nplatform_device_register(&vpac270_onenand);\r\n}\r\nstatic void __init vpac270_onenand_init(void) {}\r\nstatic void __init vpac270_mmc_init(void)\r\n{\r\npxa_set_mci_info(&vpac270_mci_platform_data);\r\n}\r\nstatic inline void vpac270_mmc_init(void) {}\r\nstatic void __init vpac270_keys_init(void)\r\n{\r\nplatform_device_register(&vpac270_pxa_keys);\r\n}\r\nstatic inline void vpac270_keys_init(void) {}\r\nstatic void __init vpac270_leds_init(void)\r\n{\r\nplatform_device_register(&vpac270_leds);\r\n}\r\nstatic inline void vpac270_leds_init(void) {}\r\nstatic int vpac270_ohci_init(struct device *dev)\r\n{\r\nUP2OCR = UP2OCR_HXS | UP2OCR_HXOE | UP2OCR_DPPDE | UP2OCR_DMPDE;\r\nreturn 0;\r\n}\r\nstatic void __init vpac270_uhc_init(void)\r\n{\r\npxa_set_ohci_info(&vpac270_ohci_info);\r\n}\r\nstatic inline void vpac270_uhc_init(void) {}\r\nstatic void vpac270_udc_command(int cmd)\r\n{\r\nif (cmd == PXA2XX_UDC_CMD_CONNECT)\r\nUP2OCR = UP2OCR_HXOE | UP2OCR_DPPUE;\r\nelse if (cmd == PXA2XX_UDC_CMD_DISCONNECT)\r\nUP2OCR = UP2OCR_HXOE;\r\n}\r\nstatic void __init vpac270_udc_init(void)\r\n{\r\npxa_set_udc_info(&vpac270_udc_info);\r\nplatform_device_register(&vpac270_gpio_vbus);\r\n}\r\nstatic inline void vpac270_udc_init(void) {}\r\nstatic void __init vpac270_eth_init(void)\r\n{\r\nplatform_device_register(&vpac270_dm9000_device);\r\n}\r\nstatic inline void vpac270_eth_init(void) {}\r\nstatic void __init vpac270_ts_init(void)\r\n{\r\npxa_set_ac97_info(&vpac270_ac97_pdata);\r\nplatform_device_register(&vpac270_ucb1400_device);\r\n}\r\nstatic inline void vpac270_ts_init(void) {}\r\nstatic void __init vpac270_rtc_init(void)\r\n{\r\ni2c_register_board_info(0, ARRAY_AND_SIZE(vpac270_i2c_devs));\r\n}\r\nstatic inline void vpac270_rtc_init(void) {}\r\nstatic void vpac270_lcd_power(int on, struct fb_var_screeninfo *info)\r\n{\r\ngpio_set_value(GPIO81_VPAC270_BKL_ON, on);\r\n}\r\nstatic void __init vpac270_lcd_init(void)\r\n{\r\nint ret;\r\nret = gpio_request(GPIO81_VPAC270_BKL_ON, "BKL-ON");\r\nif (ret) {\r\npr_err("Requesting BKL-ON GPIO failed!\n");\r\ngoto err;\r\n}\r\nret = gpio_direction_output(GPIO81_VPAC270_BKL_ON, 1);\r\nif (ret) {\r\npr_err("Setting BKL-ON GPIO direction failed!\n");\r\ngoto err2;\r\n}\r\nvpac270_lcd_screen.pxafb_lcd_power = vpac270_lcd_power;\r\npxa_set_fb_info(NULL, &vpac270_lcd_screen);\r\nreturn;\r\nerr2:\r\ngpio_free(GPIO81_VPAC270_BKL_ON);\r\nerr:\r\nreturn;\r\n}\r\nstatic inline void vpac270_lcd_init(void) {}\r\nstatic void __init vpac270_ide_init(void)\r\n{\r\nplatform_device_register(&vpac270_ide_device);\r\n}\r\nstatic inline void vpac270_ide_init(void) {}\r\nstatic void __init vpac270_pmic_init(void)\r\n{\r\ni2c_register_board_info(1, ARRAY_AND_SIZE(vpac270_pi2c_board_info));\r\n}\r\nstatic inline void vpac270_pmic_init(void) {}\r\nstatic void __init vpac270_init(void)\r\n{\r\npxa2xx_mfp_config(ARRAY_AND_SIZE(vpac270_pin_config));\r\npxa_set_ffuart_info(NULL);\r\npxa_set_btuart_info(NULL);\r\npxa_set_stuart_info(NULL);\r\npxa_set_i2c_info(NULL);\r\npxa27x_set_i2c_power_info(NULL);\r\nvpac270_pmic_init();\r\nvpac270_lcd_init();\r\nvpac270_mmc_init();\r\nvpac270_nor_init();\r\nvpac270_onenand_init();\r\nvpac270_leds_init();\r\nvpac270_keys_init();\r\nvpac270_uhc_init();\r\nvpac270_udc_init();\r\nvpac270_eth_init();\r\nvpac270_ts_init();\r\nvpac270_rtc_init();\r\nvpac270_ide_init();\r\n}
