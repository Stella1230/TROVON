int vlan_mvrp_request_join(const struct net_device *dev)\r\n{\r\nconst struct vlan_dev_priv *vlan = vlan_dev_priv(dev);\r\n__be16 vlan_id = htons(vlan->vlan_id);\r\nif (vlan->vlan_proto != htons(ETH_P_8021Q))\r\nreturn 0;\r\nreturn mrp_request_join(vlan->real_dev, &vlan_mrp_app,\r\n&vlan_id, sizeof(vlan_id), MVRP_ATTR_VID);\r\n}\r\nvoid vlan_mvrp_request_leave(const struct net_device *dev)\r\n{\r\nconst struct vlan_dev_priv *vlan = vlan_dev_priv(dev);\r\n__be16 vlan_id = htons(vlan->vlan_id);\r\nif (vlan->vlan_proto != htons(ETH_P_8021Q))\r\nreturn;\r\nmrp_request_leave(vlan->real_dev, &vlan_mrp_app,\r\n&vlan_id, sizeof(vlan_id), MVRP_ATTR_VID);\r\n}\r\nint vlan_mvrp_init_applicant(struct net_device *dev)\r\n{\r\nreturn mrp_init_applicant(dev, &vlan_mrp_app);\r\n}\r\nvoid vlan_mvrp_uninit_applicant(struct net_device *dev)\r\n{\r\nmrp_uninit_applicant(dev, &vlan_mrp_app);\r\n}\r\nint __init vlan_mvrp_init(void)\r\n{\r\nreturn mrp_register_application(&vlan_mrp_app);\r\n}\r\nvoid vlan_mvrp_uninit(void)\r\n{\r\nmrp_unregister_application(&vlan_mrp_app);\r\n}
