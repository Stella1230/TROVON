static int am335x_child_probe(struct platform_device *pdev)\r\n{\r\nint ret;\r\npm_runtime_enable(&pdev->dev);\r\nret = of_platform_populate(pdev->dev.of_node, NULL, NULL, &pdev->dev);\r\nif (ret)\r\ngoto err;\r\nreturn 0;\r\nerr:\r\npm_runtime_disable(&pdev->dev);\r\nreturn ret;\r\n}\r\nstatic int of_remove_populated_child(struct device *dev, void *d)\r\n{\r\nstruct platform_device *pdev = to_platform_device(dev);\r\nof_device_unregister(pdev);\r\nreturn 0;\r\n}\r\nstatic int am335x_child_remove(struct platform_device *pdev)\r\n{\r\ndevice_for_each_child(&pdev->dev, NULL, of_remove_populated_child);\r\npm_runtime_disable(&pdev->dev);\r\nreturn 0;\r\n}
