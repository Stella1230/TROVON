void set_cpuinfo_pvr_full(struct cpuinfo *ci, struct device_node *cpu)\r\n{\r\nstruct pvr_s pvr;\r\nint temp;\r\nget_pvr(&pvr);\r\nCI(ver_code, VERSION);\r\nif (!ci->ver_code) {\r\npr_err("ERROR: MB has broken PVR regs -> use DTS setting\n");\r\nreturn;\r\n}\r\ntemp = PVR_USE_BARREL(pvr) | PVR_USE_MSR_INSTR(pvr) |\r\nPVR_USE_PCMP_INSTR(pvr) | PVR_USE_DIV(pvr);\r\nif (ci->use_instr != temp)\r\nerr_printk("BARREL, MSR, PCMP or DIV");\r\nci->use_instr = temp;\r\ntemp = PVR_USE_HW_MUL(pvr) | PVR_USE_MUL64(pvr);\r\nif (ci->use_mult != temp)\r\nerr_printk("HW_MUL");\r\nci->use_mult = temp;\r\ntemp = PVR_USE_FPU(pvr) | PVR_USE_FPU2(pvr);\r\nif (ci->use_fpu != temp)\r\nerr_printk("HW_FPU");\r\nci->use_fpu = temp;\r\nci->use_exc = PVR_OPCODE_0x0_ILLEGAL(pvr) |\r\nPVR_UNALIGNED_EXCEPTION(pvr) |\r\nPVR_ILL_OPCODE_EXCEPTION(pvr) |\r\nPVR_IOPB_BUS_EXCEPTION(pvr) |\r\nPVR_DOPB_BUS_EXCEPTION(pvr) |\r\nPVR_DIV_ZERO_EXCEPTION(pvr) |\r\nPVR_FPU_EXCEPTION(pvr) |\r\nPVR_FSL_EXCEPTION(pvr);\r\nCI(pvr_user1, USER1);\r\nCI(pvr_user2, USER2);\r\nCI(mmu, USE_MMU);\r\nCI(mmu_privins, MMU_PRIVINS);\r\nCI(endian, ENDIAN);\r\nCI(use_icache, USE_ICACHE);\r\nCI(icache_tagbits, ICACHE_ADDR_TAG_BITS);\r\nCI(icache_write, ICACHE_ALLOW_WR);\r\nci->icache_line_length = PVR_ICACHE_LINE_LEN(pvr) << 2;\r\nCI(icache_size, ICACHE_BYTE_SIZE);\r\nCI(icache_base, ICACHE_BASEADDR);\r\nCI(icache_high, ICACHE_HIGHADDR);\r\nCI(use_dcache, USE_DCACHE);\r\nCI(dcache_tagbits, DCACHE_ADDR_TAG_BITS);\r\nCI(dcache_write, DCACHE_ALLOW_WR);\r\nci->dcache_line_length = PVR_DCACHE_LINE_LEN(pvr) << 2;\r\nCI(dcache_size, DCACHE_BYTE_SIZE);\r\nCI(dcache_base, DCACHE_BASEADDR);\r\nCI(dcache_high, DCACHE_HIGHADDR);\r\ntemp = PVR_DCACHE_USE_WRITEBACK(pvr);\r\nif (ci->dcache_wb != temp)\r\nerr_printk("DCACHE WB");\r\nci->dcache_wb = temp;\r\nCI(use_dopb, D_OPB);\r\nCI(use_iopb, I_OPB);\r\nCI(use_dlmb, D_LMB);\r\nCI(use_ilmb, I_LMB);\r\nCI(num_fsl, FSL_LINKS);\r\nCI(irq_edge, INTERRUPT_IS_EDGE);\r\nCI(irq_positive, EDGE_IS_POSITIVE);\r\nCI(area_optimised, AREA_OPTIMISED);\r\nCI(hw_debug, DEBUG_ENABLED);\r\nCI(num_pc_brk, NUMBER_OF_PC_BRK);\r\nCI(num_rd_brk, NUMBER_OF_RD_ADDR_BRK);\r\nCI(num_wr_brk, NUMBER_OF_WR_ADDR_BRK);\r\nCI(fpga_family_code, TARGET_FAMILY);\r\n}
