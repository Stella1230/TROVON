static ssize_t show_version(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->version);\r\n}\r\nstatic ssize_t show_status(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->status);\r\n}\r\nstatic ssize_t show_type(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->image_type);\r\n}\r\nstatic ssize_t show_xoffset(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->image_offset_x);\r\n}\r\nstatic ssize_t show_yoffset(struct device *dev,\r\nstruct device_attribute *attr, char *buf)\r\n{\r\nreturn snprintf(buf, PAGE_SIZE, "%d\n", bgrt_tab->image_offset_y);\r\n}\r\nstatic ssize_t image_read(struct file *file, struct kobject *kobj,\r\nstruct bin_attribute *attr, char *buf, loff_t off, size_t count)\r\n{\r\nmemcpy(buf, attr->private + off, count);\r\nreturn count;\r\n}\r\nstatic int __init bgrt_init(void)\r\n{\r\nint ret;\r\nif (!bgrt_image)\r\nreturn -ENODEV;\r\nbin_attr_image.private = bgrt_image;\r\nbin_attr_image.size = bgrt_image_size;\r\nbgrt_kobj = kobject_create_and_add("bgrt", acpi_kobj);\r\nif (!bgrt_kobj)\r\nreturn -EINVAL;\r\nret = sysfs_create_group(bgrt_kobj, &bgrt_attribute_group);\r\nif (ret)\r\ngoto out_kobject;\r\nreturn 0;\r\nout_kobject:\r\nkobject_put(bgrt_kobj);\r\nreturn ret;\r\n}
