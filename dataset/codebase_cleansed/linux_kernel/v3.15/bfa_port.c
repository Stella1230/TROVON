static void\r\nbfa_port_stats_swap(struct bfa_port_s *port, union bfa_port_stats_u *stats)\r\n{\r\nu32 *dip = (u32 *) stats;\r\n__be32 t0, t1;\r\nint i;\r\nfor (i = 0; i < sizeof(union bfa_port_stats_u)/sizeof(u32);\r\ni += 2) {\r\nt0 = dip[i];\r\nt1 = dip[i + 1];\r\n#ifdef __BIG_ENDIAN\r\ndip[i] = be32_to_cpu(t0);\r\ndip[i + 1] = be32_to_cpu(t1);\r\n#else\r\ndip[i] = be32_to_cpu(t1);\r\ndip[i + 1] = be32_to_cpu(t0);\r\n#endif\r\n}\r\n}\r\nstatic void\r\nbfa_port_enable_isr(struct bfa_port_s *port, bfa_status_t status)\r\n{\r\nbfa_trc(port, status);\r\nport->endis_pending = BFA_FALSE;\r\nport->endis_cbfn(port->endis_cbarg, status);\r\n}\r\nstatic void\r\nbfa_port_disable_isr(struct bfa_port_s *port, bfa_status_t status)\r\n{\r\nbfa_trc(port, status);\r\nport->endis_pending = BFA_FALSE;\r\nport->endis_cbfn(port->endis_cbarg, status);\r\n}\r\nstatic void\r\nbfa_port_get_stats_isr(struct bfa_port_s *port, bfa_status_t status)\r\n{\r\nport->stats_status = status;\r\nport->stats_busy = BFA_FALSE;\r\nif (status == BFA_STATUS_OK) {\r\nstruct timeval tv;\r\nmemcpy(port->stats, port->stats_dma.kva,\r\nsizeof(union bfa_port_stats_u));\r\nbfa_port_stats_swap(port, port->stats);\r\ndo_gettimeofday(&tv);\r\nport->stats->fc.secs_reset = tv.tv_sec - port->stats_reset_time;\r\n}\r\nif (port->stats_cbfn) {\r\nport->stats_cbfn(port->stats_cbarg, status);\r\nport->stats_cbfn = NULL;\r\n}\r\n}\r\nstatic void\r\nbfa_port_clear_stats_isr(struct bfa_port_s *port, bfa_status_t status)\r\n{\r\nstruct timeval tv;\r\nport->stats_status = status;\r\nport->stats_busy = BFA_FALSE;\r\ndo_gettimeofday(&tv);\r\nport->stats_reset_time = tv.tv_sec;\r\nif (port->stats_cbfn) {\r\nport->stats_cbfn(port->stats_cbarg, status);\r\nport->stats_cbfn = NULL;\r\n}\r\n}\r\nstatic void\r\nbfa_port_isr(void *cbarg, struct bfi_mbmsg_s *m)\r\n{\r\nstruct bfa_port_s *port = (struct bfa_port_s *) cbarg;\r\nunion bfi_port_i2h_msg_u *i2hmsg;\r\ni2hmsg = (union bfi_port_i2h_msg_u *) m;\r\nbfa_trc(port, m->mh.msg_id);\r\nswitch (m->mh.msg_id) {\r\ncase BFI_PORT_I2H_ENABLE_RSP:\r\nif (port->endis_pending == BFA_FALSE)\r\nbreak;\r\nbfa_port_enable_isr(port, i2hmsg->enable_rsp.status);\r\nbreak;\r\ncase BFI_PORT_I2H_DISABLE_RSP:\r\nif (port->endis_pending == BFA_FALSE)\r\nbreak;\r\nbfa_port_disable_isr(port, i2hmsg->disable_rsp.status);\r\nbreak;\r\ncase BFI_PORT_I2H_GET_STATS_RSP:\r\nif (port->stats_busy == BFA_FALSE)\r\nbreak;\r\nbfa_port_get_stats_isr(port, i2hmsg->getstats_rsp.status);\r\nbreak;\r\ncase BFI_PORT_I2H_CLEAR_STATS_RSP:\r\nif (port->stats_busy == BFA_FALSE)\r\nbreak;\r\nbfa_port_clear_stats_isr(port, i2hmsg->clearstats_rsp.status);\r\nbreak;\r\ndefault:\r\nWARN_ON(1);\r\n}\r\n}\r\nu32\r\nbfa_port_meminfo(void)\r\n{\r\nreturn BFA_ROUNDUP(sizeof(union bfa_port_stats_u), BFA_DMA_ALIGN_SZ);\r\n}\r\nvoid\r\nbfa_port_mem_claim(struct bfa_port_s *port, u8 *dma_kva, u64 dma_pa)\r\n{\r\nport->stats_dma.kva = dma_kva;\r\nport->stats_dma.pa = dma_pa;\r\n}\r\nbfa_status_t\r\nbfa_port_enable(struct bfa_port_s *port, bfa_port_endis_cbfn_t cbfn,\r\nvoid *cbarg)\r\n{\r\nstruct bfi_port_generic_req_s *m;\r\nif (port->pbc_disabled) {\r\nbfa_trc(port, BFA_STATUS_PBC);\r\nreturn BFA_STATUS_PBC;\r\n}\r\nif (bfa_ioc_is_disabled(port->ioc)) {\r\nbfa_trc(port, BFA_STATUS_IOC_DISABLED);\r\nreturn BFA_STATUS_IOC_DISABLED;\r\n}\r\nif (!bfa_ioc_is_operational(port->ioc)) {\r\nbfa_trc(port, BFA_STATUS_IOC_FAILURE);\r\nreturn BFA_STATUS_IOC_FAILURE;\r\n}\r\nif (port->dport_enabled) {\r\nbfa_trc(port, BFA_STATUS_DPORT_ERR);\r\nreturn BFA_STATUS_DPORT_ERR;\r\n}\r\nif (port->endis_pending) {\r\nbfa_trc(port, BFA_STATUS_DEVBUSY);\r\nreturn BFA_STATUS_DEVBUSY;\r\n}\r\nm = (struct bfi_port_generic_req_s *) port->endis_mb.msg;\r\nport->msgtag++;\r\nport->endis_cbfn = cbfn;\r\nport->endis_cbarg = cbarg;\r\nport->endis_pending = BFA_TRUE;\r\nbfi_h2i_set(m->mh, BFI_MC_PORT, BFI_PORT_H2I_ENABLE_REQ,\r\nbfa_ioc_portid(port->ioc));\r\nbfa_ioc_mbox_queue(port->ioc, &port->endis_mb);\r\nreturn BFA_STATUS_OK;\r\n}\r\nbfa_status_t\r\nbfa_port_disable(struct bfa_port_s *port, bfa_port_endis_cbfn_t cbfn,\r\nvoid *cbarg)\r\n{\r\nstruct bfi_port_generic_req_s *m;\r\nif (port->pbc_disabled) {\r\nbfa_trc(port, BFA_STATUS_PBC);\r\nreturn BFA_STATUS_PBC;\r\n}\r\nif (bfa_ioc_is_disabled(port->ioc)) {\r\nbfa_trc(port, BFA_STATUS_IOC_DISABLED);\r\nreturn BFA_STATUS_IOC_DISABLED;\r\n}\r\nif (!bfa_ioc_is_operational(port->ioc)) {\r\nbfa_trc(port, BFA_STATUS_IOC_FAILURE);\r\nreturn BFA_STATUS_IOC_FAILURE;\r\n}\r\nif (port->dport_enabled) {\r\nbfa_trc(port, BFA_STATUS_DPORT_ERR);\r\nreturn BFA_STATUS_DPORT_ERR;\r\n}\r\nif (port->endis_pending) {\r\nbfa_trc(port, BFA_STATUS_DEVBUSY);\r\nreturn BFA_STATUS_DEVBUSY;\r\n}\r\nm = (struct bfi_port_generic_req_s *) port->endis_mb.msg;\r\nport->msgtag++;\r\nport->endis_cbfn = cbfn;\r\nport->endis_cbarg = cbarg;\r\nport->endis_pending = BFA_TRUE;\r\nbfi_h2i_set(m->mh, BFI_MC_PORT, BFI_PORT_H2I_DISABLE_REQ,\r\nbfa_ioc_portid(port->ioc));\r\nbfa_ioc_mbox_queue(port->ioc, &port->endis_mb);\r\nreturn BFA_STATUS_OK;\r\n}\r\nbfa_status_t\r\nbfa_port_get_stats(struct bfa_port_s *port, union bfa_port_stats_u *stats,\r\nbfa_port_stats_cbfn_t cbfn, void *cbarg)\r\n{\r\nstruct bfi_port_get_stats_req_s *m;\r\nif (!bfa_ioc_is_operational(port->ioc)) {\r\nbfa_trc(port, BFA_STATUS_IOC_FAILURE);\r\nreturn BFA_STATUS_IOC_FAILURE;\r\n}\r\nif (port->stats_busy) {\r\nbfa_trc(port, BFA_STATUS_DEVBUSY);\r\nreturn BFA_STATUS_DEVBUSY;\r\n}\r\nm = (struct bfi_port_get_stats_req_s *) port->stats_mb.msg;\r\nport->stats = stats;\r\nport->stats_cbfn = cbfn;\r\nport->stats_cbarg = cbarg;\r\nport->stats_busy = BFA_TRUE;\r\nbfa_dma_be_addr_set(m->dma_addr, port->stats_dma.pa);\r\nbfi_h2i_set(m->mh, BFI_MC_PORT, BFI_PORT_H2I_GET_STATS_REQ,\r\nbfa_ioc_portid(port->ioc));\r\nbfa_ioc_mbox_queue(port->ioc, &port->stats_mb);\r\nreturn BFA_STATUS_OK;\r\n}\r\nbfa_status_t\r\nbfa_port_clear_stats(struct bfa_port_s *port, bfa_port_stats_cbfn_t cbfn,\r\nvoid *cbarg)\r\n{\r\nstruct bfi_port_generic_req_s *m;\r\nif (!bfa_ioc_is_operational(port->ioc)) {\r\nbfa_trc(port, BFA_STATUS_IOC_FAILURE);\r\nreturn BFA_STATUS_IOC_FAILURE;\r\n}\r\nif (port->stats_busy) {\r\nbfa_trc(port, BFA_STATUS_DEVBUSY);\r\nreturn BFA_STATUS_DEVBUSY;\r\n}\r\nm = (struct bfi_port_generic_req_s *) port->stats_mb.msg;\r\nport->stats_cbfn = cbfn;\r\nport->stats_cbarg = cbarg;\r\nport->stats_busy = BFA_TRUE;\r\nbfi_h2i_set(m->mh, BFI_MC_PORT, BFI_PORT_H2I_CLEAR_STATS_REQ,\r\nbfa_ioc_portid(port->ioc));\r\nbfa_ioc_mbox_queue(port->ioc, &port->stats_mb);\r\nreturn BFA_STATUS_OK;\r\n}\r\nvoid\r\nbfa_port_notify(void *arg, enum bfa_ioc_event_e event)\r\n{\r\nstruct bfa_port_s *port = (struct bfa_port_s *) arg;\r\nswitch (event) {\r\ncase BFA_IOC_E_DISABLED:\r\ncase BFA_IOC_E_FAILED:\r\nif (port->stats_busy) {\r\nif (port->stats_cbfn)\r\nport->stats_cbfn(port->stats_cbarg,\r\nBFA_STATUS_FAILED);\r\nport->stats_cbfn = NULL;\r\nport->stats_busy = BFA_FALSE;\r\n}\r\nif (port->endis_pending) {\r\nif (port->endis_cbfn)\r\nport->endis_cbfn(port->endis_cbarg,\r\nBFA_STATUS_FAILED);\r\nport->endis_cbfn = NULL;\r\nport->endis_pending = BFA_FALSE;\r\n}\r\nif (port->dport_enabled)\r\nbfa_port_set_dportenabled(port, BFA_FALSE);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nvoid\r\nbfa_port_attach(struct bfa_port_s *port, struct bfa_ioc_s *ioc,\r\nvoid *dev, struct bfa_trc_mod_s *trcmod)\r\n{\r\nstruct timeval tv;\r\nWARN_ON(!port);\r\nport->dev = dev;\r\nport->ioc = ioc;\r\nport->trcmod = trcmod;\r\nport->stats_busy = BFA_FALSE;\r\nport->endis_pending = BFA_FALSE;\r\nport->stats_cbfn = NULL;\r\nport->endis_cbfn = NULL;\r\nport->pbc_disabled = BFA_FALSE;\r\nport->dport_enabled = BFA_FALSE;\r\nbfa_ioc_mbox_regisr(port->ioc, BFI_MC_PORT, bfa_port_isr, port);\r\nbfa_q_qe_init(&port->ioc_notify);\r\nbfa_ioc_notify_init(&port->ioc_notify, bfa_port_notify, port);\r\nlist_add_tail(&port->ioc_notify.qe, &port->ioc->notify_q);\r\ndo_gettimeofday(&tv);\r\nport->stats_reset_time = tv.tv_sec;\r\nbfa_trc(port, 0);\r\n}\r\nvoid\r\nbfa_port_set_dportenabled(struct bfa_port_s *port, bfa_boolean_t enabled)\r\n{\r\nport->dport_enabled = enabled;\r\n}\r\nstatic void\r\nbfa_cee_get_attr_isr(struct bfa_cee_s *cee, bfa_status_t status)\r\n{\r\nstruct bfa_cee_lldp_cfg_s *lldp_cfg = &cee->attr->lldp_remote;\r\ncee->get_attr_status = status;\r\nbfa_trc(cee, 0);\r\nif (status == BFA_STATUS_OK) {\r\nbfa_trc(cee, 0);\r\nmemcpy(cee->attr, cee->attr_dma.kva,\r\nsizeof(struct bfa_cee_attr_s));\r\nlldp_cfg->time_to_live = be16_to_cpu(lldp_cfg->time_to_live);\r\nlldp_cfg->enabled_system_cap =\r\nbe16_to_cpu(lldp_cfg->enabled_system_cap);\r\n}\r\ncee->get_attr_pending = BFA_FALSE;\r\nif (cee->cbfn.get_attr_cbfn) {\r\nbfa_trc(cee, 0);\r\ncee->cbfn.get_attr_cbfn(cee->cbfn.get_attr_cbarg, status);\r\n}\r\n}\r\nstatic void\r\nbfa_cee_get_stats_isr(struct bfa_cee_s *cee, bfa_status_t status)\r\n{\r\nu32 *buffer;\r\nint i;\r\ncee->get_stats_status = status;\r\nbfa_trc(cee, 0);\r\nif (status == BFA_STATUS_OK) {\r\nbfa_trc(cee, 0);\r\nmemcpy(cee->stats, cee->stats_dma.kva,\r\nsizeof(struct bfa_cee_stats_s));\r\nbuffer = (u32 *)cee->stats;\r\nfor (i = 0; i < (sizeof(struct bfa_cee_stats_s) /\r\nsizeof(u32)); i++)\r\nbuffer[i] = cpu_to_be32(buffer[i]);\r\n}\r\ncee->get_stats_pending = BFA_FALSE;\r\nbfa_trc(cee, 0);\r\nif (cee->cbfn.get_stats_cbfn) {\r\nbfa_trc(cee, 0);\r\ncee->cbfn.get_stats_cbfn(cee->cbfn.get_stats_cbarg, status);\r\n}\r\n}\r\nstatic void\r\nbfa_cee_reset_stats_isr(struct bfa_cee_s *cee, bfa_status_t status)\r\n{\r\ncee->reset_stats_status = status;\r\ncee->reset_stats_pending = BFA_FALSE;\r\nif (cee->cbfn.reset_stats_cbfn)\r\ncee->cbfn.reset_stats_cbfn(cee->cbfn.reset_stats_cbarg, status);\r\n}\r\nu32\r\nbfa_cee_meminfo(void)\r\n{\r\nreturn BFA_ROUNDUP(sizeof(struct bfa_cee_attr_s), BFA_DMA_ALIGN_SZ) +\r\nBFA_ROUNDUP(sizeof(struct bfa_cee_stats_s), BFA_DMA_ALIGN_SZ);\r\n}\r\nvoid\r\nbfa_cee_mem_claim(struct bfa_cee_s *cee, u8 *dma_kva, u64 dma_pa)\r\n{\r\ncee->attr_dma.kva = dma_kva;\r\ncee->attr_dma.pa = dma_pa;\r\ncee->stats_dma.kva = dma_kva + BFA_ROUNDUP(\r\nsizeof(struct bfa_cee_attr_s), BFA_DMA_ALIGN_SZ);\r\ncee->stats_dma.pa = dma_pa + BFA_ROUNDUP(\r\nsizeof(struct bfa_cee_attr_s), BFA_DMA_ALIGN_SZ);\r\ncee->attr = (struct bfa_cee_attr_s *) dma_kva;\r\ncee->stats = (struct bfa_cee_stats_s *) (dma_kva + BFA_ROUNDUP(\r\nsizeof(struct bfa_cee_attr_s), BFA_DMA_ALIGN_SZ));\r\n}\r\nbfa_status_t\r\nbfa_cee_get_attr(struct bfa_cee_s *cee, struct bfa_cee_attr_s *attr,\r\nbfa_cee_get_attr_cbfn_t cbfn, void *cbarg)\r\n{\r\nstruct bfi_cee_get_req_s *cmd;\r\nWARN_ON((cee == NULL) || (cee->ioc == NULL));\r\nbfa_trc(cee, 0);\r\nif (!bfa_ioc_is_operational(cee->ioc)) {\r\nbfa_trc(cee, 0);\r\nreturn BFA_STATUS_IOC_FAILURE;\r\n}\r\nif (cee->get_attr_pending == BFA_TRUE) {\r\nbfa_trc(cee, 0);\r\nreturn BFA_STATUS_DEVBUSY;\r\n}\r\ncee->get_attr_pending = BFA_TRUE;\r\ncmd = (struct bfi_cee_get_req_s *) cee->get_cfg_mb.msg;\r\ncee->attr = attr;\r\ncee->cbfn.get_attr_cbfn = cbfn;\r\ncee->cbfn.get_attr_cbarg = cbarg;\r\nbfi_h2i_set(cmd->mh, BFI_MC_CEE, BFI_CEE_H2I_GET_CFG_REQ,\r\nbfa_ioc_portid(cee->ioc));\r\nbfa_dma_be_addr_set(cmd->dma_addr, cee->attr_dma.pa);\r\nbfa_ioc_mbox_queue(cee->ioc, &cee->get_cfg_mb);\r\nreturn BFA_STATUS_OK;\r\n}\r\nbfa_status_t\r\nbfa_cee_get_stats(struct bfa_cee_s *cee, struct bfa_cee_stats_s *stats,\r\nbfa_cee_get_stats_cbfn_t cbfn, void *cbarg)\r\n{\r\nstruct bfi_cee_get_req_s *cmd;\r\nWARN_ON((cee == NULL) || (cee->ioc == NULL));\r\nif (!bfa_ioc_is_operational(cee->ioc)) {\r\nbfa_trc(cee, 0);\r\nreturn BFA_STATUS_IOC_FAILURE;\r\n}\r\nif (cee->get_stats_pending == BFA_TRUE) {\r\nbfa_trc(cee, 0);\r\nreturn BFA_STATUS_DEVBUSY;\r\n}\r\ncee->get_stats_pending = BFA_TRUE;\r\ncmd = (struct bfi_cee_get_req_s *) cee->get_stats_mb.msg;\r\ncee->stats = stats;\r\ncee->cbfn.get_stats_cbfn = cbfn;\r\ncee->cbfn.get_stats_cbarg = cbarg;\r\nbfi_h2i_set(cmd->mh, BFI_MC_CEE, BFI_CEE_H2I_GET_STATS_REQ,\r\nbfa_ioc_portid(cee->ioc));\r\nbfa_dma_be_addr_set(cmd->dma_addr, cee->stats_dma.pa);\r\nbfa_ioc_mbox_queue(cee->ioc, &cee->get_stats_mb);\r\nreturn BFA_STATUS_OK;\r\n}\r\nbfa_status_t\r\nbfa_cee_reset_stats(struct bfa_cee_s *cee,\r\nbfa_cee_reset_stats_cbfn_t cbfn, void *cbarg)\r\n{\r\nstruct bfi_cee_reset_stats_s *cmd;\r\nWARN_ON((cee == NULL) || (cee->ioc == NULL));\r\nif (!bfa_ioc_is_operational(cee->ioc)) {\r\nbfa_trc(cee, 0);\r\nreturn BFA_STATUS_IOC_FAILURE;\r\n}\r\nif (cee->reset_stats_pending == BFA_TRUE) {\r\nbfa_trc(cee, 0);\r\nreturn BFA_STATUS_DEVBUSY;\r\n}\r\ncee->reset_stats_pending = BFA_TRUE;\r\ncmd = (struct bfi_cee_reset_stats_s *) cee->reset_stats_mb.msg;\r\ncee->cbfn.reset_stats_cbfn = cbfn;\r\ncee->cbfn.reset_stats_cbarg = cbarg;\r\nbfi_h2i_set(cmd->mh, BFI_MC_CEE, BFI_CEE_H2I_RESET_STATS,\r\nbfa_ioc_portid(cee->ioc));\r\nbfa_ioc_mbox_queue(cee->ioc, &cee->reset_stats_mb);\r\nreturn BFA_STATUS_OK;\r\n}\r\nvoid\r\nbfa_cee_isr(void *cbarg, struct bfi_mbmsg_s *m)\r\n{\r\nunion bfi_cee_i2h_msg_u *msg;\r\nstruct bfi_cee_get_rsp_s *get_rsp;\r\nstruct bfa_cee_s *cee = (struct bfa_cee_s *) cbarg;\r\nmsg = (union bfi_cee_i2h_msg_u *) m;\r\nget_rsp = (struct bfi_cee_get_rsp_s *) m;\r\nbfa_trc(cee, msg->mh.msg_id);\r\nswitch (msg->mh.msg_id) {\r\ncase BFI_CEE_I2H_GET_CFG_RSP:\r\nbfa_trc(cee, get_rsp->cmd_status);\r\nbfa_cee_get_attr_isr(cee, get_rsp->cmd_status);\r\nbreak;\r\ncase BFI_CEE_I2H_GET_STATS_RSP:\r\nbfa_cee_get_stats_isr(cee, get_rsp->cmd_status);\r\nbreak;\r\ncase BFI_CEE_I2H_RESET_STATS_RSP:\r\nbfa_cee_reset_stats_isr(cee, get_rsp->cmd_status);\r\nbreak;\r\ndefault:\r\nWARN_ON(1);\r\n}\r\n}\r\nvoid\r\nbfa_cee_notify(void *arg, enum bfa_ioc_event_e event)\r\n{\r\nstruct bfa_cee_s *cee = (struct bfa_cee_s *) arg;\r\nbfa_trc(cee, event);\r\nswitch (event) {\r\ncase BFA_IOC_E_DISABLED:\r\ncase BFA_IOC_E_FAILED:\r\nif (cee->get_attr_pending == BFA_TRUE) {\r\ncee->get_attr_status = BFA_STATUS_FAILED;\r\ncee->get_attr_pending = BFA_FALSE;\r\nif (cee->cbfn.get_attr_cbfn) {\r\ncee->cbfn.get_attr_cbfn(\r\ncee->cbfn.get_attr_cbarg,\r\nBFA_STATUS_FAILED);\r\n}\r\n}\r\nif (cee->get_stats_pending == BFA_TRUE) {\r\ncee->get_stats_status = BFA_STATUS_FAILED;\r\ncee->get_stats_pending = BFA_FALSE;\r\nif (cee->cbfn.get_stats_cbfn) {\r\ncee->cbfn.get_stats_cbfn(\r\ncee->cbfn.get_stats_cbarg,\r\nBFA_STATUS_FAILED);\r\n}\r\n}\r\nif (cee->reset_stats_pending == BFA_TRUE) {\r\ncee->reset_stats_status = BFA_STATUS_FAILED;\r\ncee->reset_stats_pending = BFA_FALSE;\r\nif (cee->cbfn.reset_stats_cbfn) {\r\ncee->cbfn.reset_stats_cbfn(\r\ncee->cbfn.reset_stats_cbarg,\r\nBFA_STATUS_FAILED);\r\n}\r\n}\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nvoid\r\nbfa_cee_attach(struct bfa_cee_s *cee, struct bfa_ioc_s *ioc,\r\nvoid *dev)\r\n{\r\nWARN_ON(cee == NULL);\r\ncee->dev = dev;\r\ncee->ioc = ioc;\r\nbfa_ioc_mbox_regisr(cee->ioc, BFI_MC_CEE, bfa_cee_isr, cee);\r\nbfa_q_qe_init(&cee->ioc_notify);\r\nbfa_ioc_notify_init(&cee->ioc_notify, bfa_cee_notify, cee);\r\nlist_add_tail(&cee->ioc_notify.qe, &cee->ioc->notify_q);\r\n}
