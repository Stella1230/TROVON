static inline unsigned int serial_in(int offset)\r\n{\r\nreturn *((volatile IOTYPE *)PORT(offset)) & 0xFF;\r\n}\r\nstatic inline void serial_out(int offset, int value)\r\n{\r\n*((volatile IOTYPE *)PORT(offset)) = value & 0xFF;\r\n}\r\nvoid putc(char c)\r\n{\r\nint timeout = 1000000;\r\nwhile (((serial_in(UART_LSR) & UART_LSR_THRE) == 0) && (timeout-- > 0))\r\n;\r\nserial_out(UART_TX, c);\r\n}
