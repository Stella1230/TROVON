static int mxl111sf_set_gpo_state(struct mxl111sf_state *state, u8 pin, u8 val)\r\n{\r\nint ret;\r\nu8 tmp;\r\nmxl_debug_adv("(%d, %d)", pin, val);\r\nif ((pin > 0) && (pin < 8)) {\r\nret = mxl111sf_read_reg(state, 0x19, &tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\ntmp &= ~(1 << (pin - 1));\r\ntmp |= (val << (pin - 1));\r\nret = mxl111sf_write_reg(state, 0x19, tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\n} else if (pin <= 10) {\r\nif (pin == 0)\r\npin += 7;\r\nret = mxl111sf_read_reg(state, 0x30, &tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\ntmp &= ~(1 << (pin - 3));\r\ntmp |= (val << (pin - 3));\r\nret = mxl111sf_write_reg(state, 0x30, tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\n} else\r\nret = -EINVAL;\r\nfail:\r\nreturn ret;\r\n}\r\nstatic int mxl111sf_get_gpi_state(struct mxl111sf_state *state, u8 pin, u8 *val)\r\n{\r\nint ret;\r\nu8 tmp;\r\nmxl_debug("(0x%02x)", pin);\r\n*val = 0;\r\nswitch (pin) {\r\ncase 0:\r\ncase 1:\r\ncase 2:\r\ncase 3:\r\nret = mxl111sf_read_reg(state, 0x23, &tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\n*val = (tmp >> (pin + 4)) & 0x01;\r\nbreak;\r\ncase 4:\r\ncase 5:\r\ncase 6:\r\ncase 7:\r\nret = mxl111sf_read_reg(state, 0x2f, &tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\n*val = (tmp >> pin) & 0x01;\r\nbreak;\r\ncase 8:\r\ncase 9:\r\ncase 10:\r\nret = mxl111sf_read_reg(state, 0x22, &tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\n*val = (tmp >> (pin - 3)) & 0x01;\r\nbreak;\r\ndefault:\r\nreturn -EINVAL;\r\n}\r\nfail:\r\nreturn ret;\r\n}\r\nstatic int mxl111sf_config_gpio_pins(struct mxl111sf_state *state,\r\nstruct mxl_gpio_cfg *gpio_cfg)\r\n{\r\nint ret;\r\nu8 tmp;\r\nmxl_debug_adv("(%d, %d)", gpio_cfg->pin, gpio_cfg->dir);\r\nswitch (gpio_cfg->pin) {\r\ncase 0:\r\ncase 1:\r\ncase 2:\r\ncase 3:\r\nret = mxl111sf_read_reg(state, MXL_GPIO_MUX_REG_0, &tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\ntmp &= ~(1 << (gpio_cfg->pin + 4));\r\ntmp |= (gpio_cfg->dir << (gpio_cfg->pin + 4));\r\nret = mxl111sf_write_reg(state, MXL_GPIO_MUX_REG_0, tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nbreak;\r\ncase 4:\r\ncase 5:\r\ncase 6:\r\ncase 7:\r\nret = mxl111sf_read_reg(state, MXL_GPIO_MUX_REG_1, &tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\ntmp &= ~(1 << gpio_cfg->pin);\r\ntmp |= (gpio_cfg->dir << gpio_cfg->pin);\r\nret = mxl111sf_write_reg(state, MXL_GPIO_MUX_REG_1, tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nbreak;\r\ncase 8:\r\ncase 9:\r\ncase 10:\r\nret = mxl111sf_read_reg(state, MXL_GPIO_MUX_REG_2, &tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\ntmp &= ~(1 << (gpio_cfg->pin - 3));\r\ntmp |= (gpio_cfg->dir << (gpio_cfg->pin - 3));\r\nret = mxl111sf_write_reg(state, MXL_GPIO_MUX_REG_2, tmp);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nbreak;\r\ndefault:\r\nreturn -EINVAL;\r\n}\r\nret = (MXL_GPIO_DIR_OUTPUT == gpio_cfg->dir) ?\r\nmxl111sf_set_gpo_state(state,\r\ngpio_cfg->pin, gpio_cfg->val) :\r\nmxl111sf_get_gpi_state(state,\r\ngpio_cfg->pin, &gpio_cfg->val);\r\nmxl_fail(ret);\r\nfail:\r\nreturn ret;\r\n}\r\nstatic int mxl111sf_hw_do_set_gpio(struct mxl111sf_state *state,\r\nint gpio, int direction, int val)\r\n{\r\nstruct mxl_gpio_cfg gpio_config = {\r\n.pin = gpio,\r\n.dir = direction,\r\n.val = val,\r\n};\r\nmxl_debug("(%d, %d, %d)", gpio, direction, val);\r\nreturn mxl111sf_config_gpio_pins(state, &gpio_config);\r\n}\r\nint mxl111sf_config_pin_mux_modes(struct mxl111sf_state *state,\r\nenum mxl111sf_mux_config pin_mux_config)\r\n{\r\nu8 r12, r15, r17, r18, r3D, r82, r84, r89;\r\nint ret;\r\nmxl_debug("(%d)", pin_mux_config);\r\nret = mxl111sf_read_reg(state, 0x17, &r17);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_read_reg(state, 0x18, &r18);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_read_reg(state, 0x12, &r12);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_read_reg(state, 0x15, &r15);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_read_reg(state, 0x82, &r82);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_read_reg(state, 0x84, &r84);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_read_reg(state, 0x89, &r89);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_read_reg(state, 0x3D, &r3D);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nswitch (pin_mux_config) {\r\ncase PIN_MUX_TS_OUT_PARALLEL:\r\nr17 |= PIN_MUX_MPEG_MODE_MASK;\r\nr18 |= PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 &= ~PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D &= ~PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 &= ~PIN_MUX_I2S_ENABLE_MASK;\r\nr3D &= ~PIN_MUX_SPI_MODE_MASK;\r\nr82 |= PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 |= PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 |= PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 |= PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 |= 0xF0;\r\nr89 |= 0xF0;\r\nbreak;\r\ncase PIN_MUX_TS_OUT_SERIAL:\r\nr17 |= PIN_MUX_MPEG_MODE_MASK;\r\nr18 &= ~PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 |= PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D &= ~PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 &= ~PIN_MUX_I2S_ENABLE_MASK;\r\nr3D &= ~PIN_MUX_SPI_MODE_MASK;\r\nr82 |= PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 |= PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 |= PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 |= PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 |= 0xF0;\r\nr89 |= 0xF0;\r\nbreak;\r\ncase PIN_MUX_GPIO_MODE:\r\nr17 &= ~PIN_MUX_MPEG_MODE_MASK;\r\nr18 &= ~PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 &= ~PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D &= ~PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 &= ~PIN_MUX_I2S_ENABLE_MASK;\r\nr3D &= ~PIN_MUX_SPI_MODE_MASK;\r\nr82 &= ~PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 &= 0x0F;\r\nr89 &= 0x0F;\r\nbreak;\r\ncase PIN_MUX_TS_SERIAL_IN_MODE_0:\r\nr17 &= ~PIN_MUX_MPEG_MODE_MASK;\r\nr18 &= ~PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 |= PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D &= ~PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 &= ~PIN_MUX_I2S_ENABLE_MASK;\r\nr3D &= ~PIN_MUX_SPI_MODE_MASK;\r\nr82 &= ~PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 &= 0x0F;\r\nr89 &= 0x0F;\r\nbreak;\r\ncase PIN_MUX_TS_SERIAL_IN_MODE_1:\r\nr17 &= ~PIN_MUX_MPEG_MODE_MASK;\r\nr18 &= ~PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 |= PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D |= PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 &= ~PIN_MUX_I2S_ENABLE_MASK;\r\nr3D &= ~PIN_MUX_SPI_MODE_MASK;\r\nr82 &= ~PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 &= 0x0F;\r\nr89 &= 0x0F;\r\nbreak;\r\ncase PIN_MUX_TS_SPI_IN_MODE_1:\r\nr17 &= ~PIN_MUX_MPEG_MODE_MASK;\r\nr18 &= ~PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 |= PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D |= PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 |= PIN_MUX_I2S_ENABLE_MASK;\r\nr3D |= PIN_MUX_SPI_MODE_MASK;\r\nr82 &= ~PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 &= 0x0F;\r\nr89 &= 0x0F;\r\nbreak;\r\ncase PIN_MUX_TS_SPI_IN_MODE_0:\r\nr17 &= ~PIN_MUX_MPEG_MODE_MASK;\r\nr18 &= ~PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 |= PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D &= ~PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 |= PIN_MUX_I2S_ENABLE_MASK;\r\nr3D |= PIN_MUX_SPI_MODE_MASK;\r\nr82 &= ~PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 &= 0x0F;\r\nr89 &= 0x0F;\r\nbreak;\r\ncase PIN_MUX_TS_PARALLEL_IN:\r\nr17 &= ~PIN_MUX_MPEG_MODE_MASK;\r\nr18 |= PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 &= ~PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D &= ~PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 &= ~PIN_MUX_I2S_ENABLE_MASK;\r\nr3D &= ~PIN_MUX_SPI_MODE_MASK;\r\nr82 &= ~PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 &= 0x0F;\r\nr89 &= 0x0F;\r\nbreak;\r\ncase PIN_MUX_BT656_I2S_MODE:\r\nr17 &= ~PIN_MUX_MPEG_MODE_MASK;\r\nr18 &= ~PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 &= ~PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D &= ~PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 |= PIN_MUX_BT656_ENABLE_MASK;\r\nr15 |= PIN_MUX_I2S_ENABLE_MASK;\r\nr3D &= ~PIN_MUX_SPI_MODE_MASK;\r\nr82 &= ~PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 &= 0x0F;\r\nr89 &= 0x0F;\r\nbreak;\r\ncase PIN_MUX_DEFAULT:\r\ndefault:\r\nr17 |= PIN_MUX_MPEG_MODE_MASK;\r\nr18 &= ~PIN_MUX_MPEG_PAR_EN_MASK;\r\nr18 &= ~PIN_MUX_MPEG_SER_EN_MASK;\r\nr3D &= ~PIN_MUX_MPG_IN_MUX_MASK;\r\nr12 &= ~PIN_MUX_BT656_ENABLE_MASK;\r\nr15 &= ~PIN_MUX_I2S_ENABLE_MASK;\r\nr3D &= ~PIN_MUX_SPI_MODE_MASK;\r\nr82 &= ~PIN_MUX_MCLK_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPERR_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MDVAL_EN_CTRL_MASK;\r\nr82 &= ~PIN_MUX_MPSYN_EN_CTRL_MASK;\r\nr84 &= 0x0F;\r\nr89 &= 0x0F;\r\nbreak;\r\n}\r\nret = mxl111sf_write_reg(state, 0x17, r17);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_write_reg(state, 0x18, r18);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_write_reg(state, 0x12, r12);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_write_reg(state, 0x15, r15);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_write_reg(state, 0x82, r82);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_write_reg(state, 0x84, r84);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_write_reg(state, 0x89, r89);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nret = mxl111sf_write_reg(state, 0x3D, r3D);\r\nif (mxl_fail(ret))\r\ngoto fail;\r\nfail:\r\nreturn ret;\r\n}\r\nstatic int mxl111sf_hw_set_gpio(struct mxl111sf_state *state, int gpio, int val)\r\n{\r\nreturn mxl111sf_hw_do_set_gpio(state, gpio, MXL_GPIO_DIR_OUTPUT, val);\r\n}\r\nstatic int mxl111sf_hw_gpio_initialize(struct mxl111sf_state *state)\r\n{\r\nu8 gpioval = 0x07;\r\nint i, ret;\r\nmxl_debug("()");\r\nfor (i = 3; i < 8; i++) {\r\nret = mxl111sf_hw_set_gpio(state, i, (gpioval >> i) & 0x01);\r\nif (mxl_fail(ret))\r\nbreak;\r\n}\r\nreturn ret;\r\n}\r\nstatic int pca9534_set_gpio(struct mxl111sf_state *state, int gpio, int val)\r\n{\r\nu8 w[2] = { 1, 0 };\r\nu8 r = 0;\r\nstruct i2c_msg msg[] = {\r\n{ .addr = PCA9534_I2C_ADDR,\r\n.flags = 0, .buf = w, .len = 1 },\r\n{ .addr = PCA9534_I2C_ADDR,\r\n.flags = I2C_M_RD, .buf = &r, .len = 1 },\r\n};\r\nmxl_debug("(%d, %d)", gpio, val);\r\ni2c_transfer(&state->d->i2c_adap, msg, 2);\r\nmsg[0].len = 2;\r\n#if 0\r\nw[0] = 1;\r\n#endif\r\nw[1] = r;\r\nw[1] &= ~(1 << gpio);\r\nw[1] |= ((val ? 1 : 0) << gpio);\r\ni2c_transfer(&state->d->i2c_adap, &msg[0], 1);\r\nreturn 0;\r\n}\r\nstatic int pca9534_init_port_expander(struct mxl111sf_state *state)\r\n{\r\nu8 w[2] = { 1, 0x07 };\r\nstruct i2c_msg msg = {\r\n.addr = PCA9534_I2C_ADDR,\r\n.flags = 0, .buf = w, .len = 2\r\n};\r\nmxl_debug("()");\r\ni2c_transfer(&state->d->i2c_adap, &msg, 1);\r\nw[0] = 3;\r\nw[1] = 0;\r\ni2c_transfer(&state->d->i2c_adap, &msg, 1);\r\nreturn 0;\r\n}\r\nint mxl111sf_set_gpio(struct mxl111sf_state *state, int gpio, int val)\r\n{\r\nmxl_debug("(%d, %d)", gpio, val);\r\nswitch (state->gpio_port_expander) {\r\ndefault:\r\nmxl_printk(KERN_ERR,\r\n"gpio_port_expander undefined, assuming PCA9534");\r\ncase mxl111sf_PCA9534:\r\nreturn pca9534_set_gpio(state, gpio, val);\r\ncase mxl111sf_gpio_hw:\r\nreturn mxl111sf_hw_set_gpio(state, gpio, val);\r\n}\r\n}\r\nstatic int mxl111sf_probe_port_expander(struct mxl111sf_state *state)\r\n{\r\nint ret;\r\nu8 w = 1;\r\nu8 r = 0;\r\nstruct i2c_msg msg[] = {\r\n{ .flags = 0, .buf = &w, .len = 1 },\r\n{ .flags = I2C_M_RD, .buf = &r, .len = 1 },\r\n};\r\nmxl_debug("()");\r\nmsg[0].addr = 0x70 >> 1;\r\nmsg[1].addr = 0x70 >> 1;\r\nret = i2c_transfer(&state->d->i2c_adap, msg, 2);\r\nif (ret == 2) {\r\nstate->port_expander_addr = msg[0].addr;\r\nstate->gpio_port_expander = mxl111sf_PCA9534;\r\nmxl_debug("found port expander at 0x%02x",\r\nstate->port_expander_addr);\r\nreturn 0;\r\n}\r\nmsg[0].addr = 0x40 >> 1;\r\nmsg[1].addr = 0x40 >> 1;\r\nret = i2c_transfer(&state->d->i2c_adap, msg, 2);\r\nif (ret == 2) {\r\nstate->port_expander_addr = msg[0].addr;\r\nstate->gpio_port_expander = mxl111sf_PCA9534;\r\nmxl_debug("found port expander at 0x%02x",\r\nstate->port_expander_addr);\r\nreturn 0;\r\n}\r\nstate->port_expander_addr = 0xff;\r\nstate->gpio_port_expander = mxl111sf_gpio_hw;\r\nmxl_debug("using hardware gpio");\r\nreturn 0;\r\n}\r\nint mxl111sf_init_port_expander(struct mxl111sf_state *state)\r\n{\r\nmxl_debug("()");\r\nif (0x00 == state->port_expander_addr)\r\nmxl111sf_probe_port_expander(state);\r\nswitch (state->gpio_port_expander) {\r\ndefault:\r\nmxl_printk(KERN_ERR,\r\n"gpio_port_expander undefined, assuming PCA9534");\r\ncase mxl111sf_PCA9534:\r\nreturn pca9534_init_port_expander(state);\r\ncase mxl111sf_gpio_hw:\r\nreturn mxl111sf_hw_gpio_initialize(state);\r\n}\r\n}\r\nint mxl111sf_gpio_mode_switch(struct mxl111sf_state *state, unsigned int mode)\r\n{\r\nmxl_debug("(%d)", mode);\r\nswitch (mode) {\r\ncase MXL111SF_GPIO_MOD_MH:\r\nmxl111sf_set_gpio(state, 4, 0);\r\nmxl111sf_set_gpio(state, 5, 0);\r\nmsleep(50);\r\nmxl111sf_set_gpio(state, 7, 1);\r\nmsleep(50);\r\nmxl111sf_set_gpio(state, 6, 1);\r\nmsleep(50);\r\nmxl111sf_set_gpio(state, 3, 0);\r\nbreak;\r\ncase MXL111SF_GPIO_MOD_ATSC:\r\nmxl111sf_set_gpio(state, 6, 0);\r\nmxl111sf_set_gpio(state, 7, 0);\r\nmsleep(50);\r\nmxl111sf_set_gpio(state, 5, 1);\r\nmsleep(50);\r\nmxl111sf_set_gpio(state, 4, 1);\r\nmsleep(50);\r\nmxl111sf_set_gpio(state, 3, 1);\r\nbreak;\r\ndefault:\r\nmxl111sf_init_port_expander(state);\r\nbreak;\r\n}\r\nreturn 0;\r\n}
