int ieee754dp_cmp(union ieee754dp x, union ieee754dp y, int cmp, int sig)\r\n{\r\ns64 vx;\r\ns64 vy;\r\nCOMPXDP;\r\nCOMPYDP;\r\nEXPLODEXDP;\r\nEXPLODEYDP;\r\nFLUSHXDP;\r\nFLUSHYDP;\r\nieee754_clearcx();\r\nif (ieee754_class_nan(xc) || ieee754_class_nan(yc)) {\r\nif (sig ||\r\nxc == IEEE754_CLASS_SNAN || yc == IEEE754_CLASS_SNAN)\r\nieee754_setcx(IEEE754_INVALID_OPERATION);\r\nreturn (cmp & IEEE754_CUN) != 0;\r\n} else {\r\nvx = x.bits;\r\nvy = y.bits;\r\nif (vx < 0)\r\nvx = -vx ^ DP_SIGN_BIT;\r\nif (vy < 0)\r\nvy = -vy ^ DP_SIGN_BIT;\r\nif (vx < vy)\r\nreturn (cmp & IEEE754_CLT) != 0;\r\nelse if (vx == vy)\r\nreturn (cmp & IEEE754_CEQ) != 0;\r\nelse\r\nreturn (cmp & IEEE754_CGT) != 0;\r\n}\r\n}
