static void *zcomp_lz4_create(gfp_t flags)\r\n{\r\nvoid *ret;\r\nret = kmalloc(LZ4_MEM_COMPRESS, flags);\r\nif (!ret)\r\nret = __vmalloc(LZ4_MEM_COMPRESS,\r\nflags | __GFP_HIGHMEM,\r\nPAGE_KERNEL);\r\nreturn ret;\r\n}\r\nstatic void zcomp_lz4_destroy(void *private)\r\n{\r\nkvfree(private);\r\n}\r\nstatic int zcomp_lz4_compress(const unsigned char *src, unsigned char *dst,\r\nsize_t *dst_len, void *private)\r\n{\r\nreturn lz4_compress(src, PAGE_SIZE, dst, dst_len, private);\r\n}\r\nstatic int zcomp_lz4_decompress(const unsigned char *src, size_t src_len,\r\nunsigned char *dst)\r\n{\r\nsize_t dst_len = PAGE_SIZE;\r\nreturn lz4_decompress_unknownoutputsize(src, src_len, dst, &dst_len);\r\n}
