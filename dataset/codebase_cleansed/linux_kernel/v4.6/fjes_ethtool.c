static void fjes_get_ethtool_stats(struct net_device *netdev,\r\nstruct ethtool_stats *stats, u64 *data)\r\n{\r\nstruct fjes_adapter *adapter = netdev_priv(netdev);\r\nchar *p;\r\nint i;\r\nfor (i = 0; i < ARRAY_SIZE(fjes_gstrings_stats); i++) {\r\np = (char *)adapter + fjes_gstrings_stats[i].stat_offset;\r\ndata[i] = (fjes_gstrings_stats[i].sizeof_stat == sizeof(u64))\r\n? *(u64 *)p : *(u32 *)p;\r\n}\r\n}\r\nstatic void fjes_get_strings(struct net_device *netdev,\r\nu32 stringset, u8 *data)\r\n{\r\nu8 *p = data;\r\nint i;\r\nswitch (stringset) {\r\ncase ETH_SS_STATS:\r\nfor (i = 0; i < ARRAY_SIZE(fjes_gstrings_stats); i++) {\r\nmemcpy(p, fjes_gstrings_stats[i].stat_string,\r\nETH_GSTRING_LEN);\r\np += ETH_GSTRING_LEN;\r\n}\r\nbreak;\r\n}\r\n}\r\nstatic int fjes_get_sset_count(struct net_device *netdev, int sset)\r\n{\r\nswitch (sset) {\r\ncase ETH_SS_STATS:\r\nreturn ARRAY_SIZE(fjes_gstrings_stats);\r\ndefault:\r\nreturn -EOPNOTSUPP;\r\n}\r\n}\r\nstatic void fjes_get_drvinfo(struct net_device *netdev,\r\nstruct ethtool_drvinfo *drvinfo)\r\n{\r\nstruct fjes_adapter *adapter = netdev_priv(netdev);\r\nstruct platform_device *plat_dev;\r\nplat_dev = adapter->plat_dev;\r\nstrlcpy(drvinfo->driver, fjes_driver_name, sizeof(drvinfo->driver));\r\nstrlcpy(drvinfo->version, fjes_driver_version,\r\nsizeof(drvinfo->version));\r\nstrlcpy(drvinfo->fw_version, "none", sizeof(drvinfo->fw_version));\r\nsnprintf(drvinfo->bus_info, sizeof(drvinfo->bus_info),\r\n"platform:%s", plat_dev->name);\r\n}\r\nstatic int fjes_get_settings(struct net_device *netdev,\r\nstruct ethtool_cmd *ecmd)\r\n{\r\necmd->supported = 0;\r\necmd->advertising = 0;\r\necmd->duplex = DUPLEX_FULL;\r\necmd->autoneg = AUTONEG_DISABLE;\r\necmd->transceiver = XCVR_DUMMY1;\r\necmd->port = PORT_NONE;\r\nethtool_cmd_speed_set(ecmd, 20000);\r\nreturn 0;\r\n}\r\nvoid fjes_set_ethtool_ops(struct net_device *netdev)\r\n{\r\nnetdev->ethtool_ops = &fjes_ethtool_ops;\r\n}
