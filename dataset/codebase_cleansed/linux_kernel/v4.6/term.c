void get_term_dimensions(struct winsize *ws)\r\n{\r\nchar *s = getenv("LINES");\r\nif (s != NULL) {\r\nws->ws_row = atoi(s);\r\ns = getenv("COLUMNS");\r\nif (s != NULL) {\r\nws->ws_col = atoi(s);\r\nif (ws->ws_row && ws->ws_col)\r\nreturn;\r\n}\r\n}\r\n#ifdef TIOCGWINSZ\r\nif (ioctl(1, TIOCGWINSZ, ws) == 0 &&\r\nws->ws_row && ws->ws_col)\r\nreturn;\r\n#endif\r\nws->ws_row = 25;\r\nws->ws_col = 80;\r\n}\r\nvoid set_term_quiet_input(struct termios *old)\r\n{\r\nstruct termios tc;\r\ntcgetattr(0, old);\r\ntc = *old;\r\ntc.c_lflag &= ~(ICANON | ECHO);\r\ntc.c_cc[VMIN] = 0;\r\ntc.c_cc[VTIME] = 0;\r\ntcsetattr(0, TCSANOW, &tc);\r\n}
