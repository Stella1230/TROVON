int iio_triggered_event_setup(struct iio_dev *indio_dev,\r\nirqreturn_t (*h)(int irq, void *p),\r\nirqreturn_t (*thread)(int irq, void *p))\r\n{\r\nindio_dev->pollfunc_event = iio_alloc_pollfunc(h,\r\nthread,\r\nIRQF_ONESHOT,\r\nindio_dev,\r\n"%s_consumer%d",\r\nindio_dev->name,\r\nindio_dev->id);\r\nif (indio_dev->pollfunc_event == NULL)\r\nreturn -ENOMEM;\r\nindio_dev->modes |= INDIO_EVENT_TRIGGERED;\r\nreturn 0;\r\n}\r\nvoid iio_triggered_event_cleanup(struct iio_dev *indio_dev)\r\n{\r\nindio_dev->modes &= ~INDIO_EVENT_TRIGGERED;\r\niio_dealloc_pollfunc(indio_dev->pollfunc_event);\r\n}
