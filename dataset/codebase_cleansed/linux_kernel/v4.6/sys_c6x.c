int _access_ok(unsigned long addr, unsigned long size)\r\n{\r\nif (!size)\r\nreturn 1;\r\nif (!addr || addr > (0xffffffffUL - (size - 1)))\r\ngoto _bad_access;\r\nif (segment_eq(get_fs(), KERNEL_DS))\r\nreturn 1;\r\nif (memory_start <= addr && (addr + size - 1) < memory_end)\r\nreturn 1;\r\n_bad_access:\r\npr_debug("Bad access attempt: pid[%d] addr[%08lx] size[0x%lx]\n",\r\ncurrent->pid, addr, size);\r\nreturn 0;\r\n}\r\nasmlinkage int sys_cache_sync(unsigned long s, unsigned long e)\r\n{\r\nL1D_cache_block_writeback_invalidate(s, e);\r\nL1P_cache_block_invalidate(s, e);\r\nreturn 0;\r\n}
