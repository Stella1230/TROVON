int\r\nnv49_ram_new(struct nvkm_fb *fb, struct nvkm_ram **pram)\r\n{\r\nstruct nvkm_device *device = fb->subdev.device;\r\nu32 size = nvkm_rd32(device, 0x10020c) & 0xff000000;\r\nu32 tags = nvkm_rd32(device, 0x100320);\r\nu32 fb914 = nvkm_rd32(device, 0x100914);\r\nenum nvkm_ram_type type = NVKM_RAM_TYPE_UNKNOWN;\r\nint ret;\r\nswitch (fb914 & 0x00000003) {\r\ncase 0x00000000: type = NVKM_RAM_TYPE_DDR1 ; break;\r\ncase 0x00000001: type = NVKM_RAM_TYPE_DDR2 ; break;\r\ncase 0x00000002: type = NVKM_RAM_TYPE_GDDR3; break;\r\ncase 0x00000003: break;\r\n}\r\nret = nv40_ram_new_(fb, type, size, tags, pram);\r\nif (ret)\r\nreturn ret;\r\n(*pram)->parts = (nvkm_rd32(device, 0x100200) & 0x00000003) + 1;\r\nreturn 0;\r\n}
