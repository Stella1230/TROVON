void __init xen_efi_init(void)\r\n{\r\nefi_system_table_t *efi_systab_xen;\r\nefi_systab_xen = xen_efi_probe();\r\nif (efi_systab_xen == NULL)\r\nreturn;\r\nstrncpy((char *)&boot_params.efi_info.efi_loader_signature, "Xen",\r\nsizeof(boot_params.efi_info.efi_loader_signature));\r\nboot_params.efi_info.efi_systab = (__u32)__pa(efi_systab_xen);\r\nboot_params.efi_info.efi_systab_hi = (__u32)(__pa(efi_systab_xen) >> 32);\r\nset_bit(EFI_BOOT, &efi.flags);\r\nset_bit(EFI_PARAVIRT, &efi.flags);\r\nset_bit(EFI_64BIT, &efi.flags);\r\n}
