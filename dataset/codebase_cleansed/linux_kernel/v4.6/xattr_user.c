static int\r\nuser_get(const struct xattr_handler *handler, struct dentry *dentry,\r\nconst char *name, void *buffer, size_t size)\r\n{\r\nif (strlen(name) < sizeof(XATTR_USER_PREFIX))\r\nreturn -EINVAL;\r\nif (!reiserfs_xattrs_user(dentry->d_sb))\r\nreturn -EOPNOTSUPP;\r\nreturn reiserfs_xattr_get(d_inode(dentry), name, buffer, size);\r\n}\r\nstatic int\r\nuser_set(const struct xattr_handler *handler, struct dentry *dentry,\r\nconst char *name, const void *buffer, size_t size, int flags)\r\n{\r\nif (strlen(name) < sizeof(XATTR_USER_PREFIX))\r\nreturn -EINVAL;\r\nif (!reiserfs_xattrs_user(dentry->d_sb))\r\nreturn -EOPNOTSUPP;\r\nreturn reiserfs_xattr_set(d_inode(dentry), name, buffer, size, flags);\r\n}\r\nstatic bool user_list(struct dentry *dentry)\r\n{\r\nreturn reiserfs_xattrs_user(dentry->d_sb);\r\n}
