int fiji_phm_disable_clock_power_gating(struct pp_hwmgr *hwmgr)\r\n{\r\nstruct fiji_hwmgr *data = (struct fiji_hwmgr *)(hwmgr->backend);\r\ndata->uvd_power_gated = false;\r\ndata->vce_power_gated = false;\r\ndata->samu_power_gated = false;\r\ndata->acp_power_gated = false;\r\nreturn 0;\r\n}\r\nint fiji_phm_powergate_uvd(struct pp_hwmgr *hwmgr, bool bgate)\r\n{\r\nstruct fiji_hwmgr *data = (struct fiji_hwmgr *)(hwmgr->backend);\r\nif (data->uvd_power_gated == bgate)\r\nreturn 0;\r\ndata->uvd_power_gated = bgate;\r\nif (bgate)\r\nfiji_update_uvd_dpm(hwmgr, true);\r\nelse\r\nfiji_update_uvd_dpm(hwmgr, false);\r\nreturn 0;\r\n}\r\nint fiji_phm_powergate_vce(struct pp_hwmgr *hwmgr, bool bgate)\r\n{\r\nstruct fiji_hwmgr *data = (struct fiji_hwmgr *)(hwmgr->backend);\r\nstruct phm_set_power_state_input states;\r\nconst struct pp_power_state *pcurrent;\r\nstruct pp_power_state *requested;\r\nif (data->vce_power_gated == bgate)\r\nreturn 0;\r\ndata->vce_power_gated = bgate;\r\npcurrent = hwmgr->current_ps;\r\nrequested = hwmgr->request_ps;\r\nstates.pcurrent_state = &(pcurrent->hardware);\r\nstates.pnew_state = &(requested->hardware);\r\nfiji_update_vce_dpm(hwmgr, &states);\r\nfiji_enable_disable_vce_dpm(hwmgr, !bgate);\r\nreturn 0;\r\n}\r\nint fiji_phm_powergate_samu(struct pp_hwmgr *hwmgr, bool bgate)\r\n{\r\nstruct fiji_hwmgr *data = (struct fiji_hwmgr *)(hwmgr->backend);\r\nif (data->samu_power_gated == bgate)\r\nreturn 0;\r\ndata->samu_power_gated = bgate;\r\nif (bgate)\r\nfiji_update_samu_dpm(hwmgr, true);\r\nelse\r\nfiji_update_samu_dpm(hwmgr, false);\r\nreturn 0;\r\n}\r\nint fiji_phm_powergate_acp(struct pp_hwmgr *hwmgr, bool bgate)\r\n{\r\nstruct fiji_hwmgr *data = (struct fiji_hwmgr *)(hwmgr->backend);\r\nif (data->acp_power_gated == bgate)\r\nreturn 0;\r\ndata->acp_power_gated = bgate;\r\nif (bgate)\r\nfiji_update_acp_dpm(hwmgr, true);\r\nelse\r\nfiji_update_acp_dpm(hwmgr, false);\r\nreturn 0;\r\n}
