void acpi_ut_print_string(char *string, u16 max_length)\r\n{\r\nu32 i;\r\nif (!string) {\r\nacpi_os_printf("<\"NULL STRING PTR\">");\r\nreturn;\r\n}\r\nacpi_os_printf("\"");\r\nfor (i = 0; (i < max_length) && string[i]; i++) {\r\nswitch (string[i]) {\r\ncase 0x07:\r\nacpi_os_printf("\\a");\r\nbreak;\r\ncase 0x08:\r\nacpi_os_printf("\\b");\r\nbreak;\r\ncase 0x0C:\r\nacpi_os_printf("\\f");\r\nbreak;\r\ncase 0x0A:\r\nacpi_os_printf("\\n");\r\nbreak;\r\ncase 0x0D:\r\nacpi_os_printf("\\r");\r\nbreak;\r\ncase 0x09:\r\nacpi_os_printf("\\t");\r\nbreak;\r\ncase 0x0B:\r\nacpi_os_printf("\\v");\r\nbreak;\r\ncase '\'':\r\ncase '\"':\r\ncase '\\':\r\nacpi_os_printf("\\%c", (int)string[i]);\r\nbreak;\r\ndefault:\r\nif (isprint((int)string[i])) {\r\nacpi_os_printf("%c", (int)string[i]);\r\n} else {\r\nacpi_os_printf("\\x%2.2X", (s32) string[i]);\r\n}\r\nbreak;\r\n}\r\n}\r\nacpi_os_printf("\"");\r\nif (i == max_length && string[i]) {\r\nacpi_os_printf("...");\r\n}\r\n}\r\nu8 acpi_ut_valid_acpi_char(char character, u32 position)\r\n{\r\nif (!((character >= 'A' && character <= 'Z') ||\r\n(character >= '0' && character <= '9') || (character == '_'))) {\r\nif (character == '!' && position == 3) {\r\nreturn (TRUE);\r\n}\r\nreturn (FALSE);\r\n}\r\nreturn (TRUE);\r\n}\r\nu8 acpi_ut_valid_acpi_name(char *name)\r\n{\r\nu32 i;\r\nACPI_FUNCTION_ENTRY();\r\nfor (i = 0; i < ACPI_NAME_SIZE; i++) {\r\nif (!acpi_ut_valid_acpi_char(name[i], i)) {\r\nreturn (FALSE);\r\n}\r\n}\r\nreturn (TRUE);\r\n}\r\nvoid acpi_ut_repair_name(char *name)\r\n{\r\nu32 i;\r\nu8 found_bad_char = FALSE;\r\nu32 original_name;\r\nACPI_FUNCTION_NAME(ut_repair_name);\r\nif (ACPI_COMPARE_NAME(name, "\\___")) {\r\nreturn;\r\n}\r\nACPI_MOVE_NAME(&original_name, name);\r\nfor (i = 0; i < ACPI_NAME_SIZE; i++) {\r\nif (acpi_ut_valid_acpi_char(name[i], i)) {\r\ncontinue;\r\n}\r\nname[i] = '*';\r\nfound_bad_char = TRUE;\r\n}\r\nif (found_bad_char) {\r\nif (!acpi_gbl_enable_interpreter_slack) {\r\nACPI_WARNING((AE_INFO,\r\n"Invalid character(s) in name (0x%.8X), repaired: [%4.4s]",\r\noriginal_name, name));\r\n} else {\r\nACPI_DEBUG_PRINT((ACPI_DB_INFO,\r\n"Invalid character(s) in name (0x%.8X), repaired: [%4.4s]",\r\noriginal_name, name));\r\n}\r\n}\r\n}\r\nvoid ut_convert_backslashes(char *pathname)\r\n{\r\nif (!pathname) {\r\nreturn;\r\n}\r\nwhile (*pathname) {\r\nif (*pathname == '\\') {\r\n*pathname = '/';\r\n}\r\npathname++;\r\n}\r\n}
