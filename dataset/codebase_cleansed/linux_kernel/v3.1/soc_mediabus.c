int soc_mbus_samples_per_pixel(const struct soc_mbus_pixelfmt *mf,\r\nunsigned int *numerator, unsigned int *denominator)\r\n{\r\nswitch (mf->packing) {\r\ncase SOC_MBUS_PACKING_NONE:\r\ncase SOC_MBUS_PACKING_EXTEND16:\r\n*numerator = 1;\r\n*denominator = 1;\r\nreturn 0;\r\ncase SOC_MBUS_PACKING_2X8_PADHI:\r\ncase SOC_MBUS_PACKING_2X8_PADLO:\r\n*numerator = 2;\r\n*denominator = 1;\r\nreturn 0;\r\ncase SOC_MBUS_PACKING_1_5X8:\r\n*numerator = 3;\r\n*denominator = 2;\r\nreturn 0;\r\ncase SOC_MBUS_PACKING_VARIABLE:\r\n*numerator = 0;\r\n*denominator = 1;\r\nreturn 0;\r\n}\r\nreturn -EINVAL;\r\n}\r\ns32 soc_mbus_bytes_per_line(u32 width, const struct soc_mbus_pixelfmt *mf)\r\n{\r\nswitch (mf->packing) {\r\ncase SOC_MBUS_PACKING_NONE:\r\nreturn width * mf->bits_per_sample / 8;\r\ncase SOC_MBUS_PACKING_2X8_PADHI:\r\ncase SOC_MBUS_PACKING_2X8_PADLO:\r\ncase SOC_MBUS_PACKING_EXTEND16:\r\nreturn width * 2;\r\ncase SOC_MBUS_PACKING_1_5X8:\r\nreturn width * 3 / 2;\r\ncase SOC_MBUS_PACKING_VARIABLE:\r\nreturn 0;\r\n}\r\nreturn -EINVAL;\r\n}\r\nconst struct soc_mbus_pixelfmt *soc_mbus_find_fmtdesc(\r\nenum v4l2_mbus_pixelcode code,\r\nconst struct soc_mbus_lookup *lookup,\r\nint n)\r\n{\r\nint i;\r\nfor (i = 0; i < n; i++)\r\nif (lookup[i].code == code)\r\nreturn &lookup[i].fmt;\r\nreturn NULL;\r\n}\r\nconst struct soc_mbus_pixelfmt *soc_mbus_get_fmtdesc(\r\nenum v4l2_mbus_pixelcode code)\r\n{\r\nreturn soc_mbus_find_fmtdesc(code, mbus_fmt, ARRAY_SIZE(mbus_fmt));\r\n}\r\nstatic int __init soc_mbus_init(void)\r\n{\r\nreturn 0;\r\n}\r\nstatic void __exit soc_mbus_exit(void)\r\n{\r\n}
