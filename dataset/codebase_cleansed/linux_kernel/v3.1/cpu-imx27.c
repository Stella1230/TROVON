static void query_silicon_parameter(void)\r\n{\r\nu32 val;\r\nval = __raw_readl(MX27_IO_ADDRESS(MX27_SYSCTRL_BASE_ADDR\r\n+ SYS_CHIP_ID));\r\nswitch (val >> 28) {\r\ncase 0:\r\ncpu_silicon_rev = IMX_CHIP_REVISION_1_0;\r\nbreak;\r\ncase 1:\r\ncpu_silicon_rev = IMX_CHIP_REVISION_2_0;\r\nbreak;\r\ncase 2:\r\ncpu_silicon_rev = IMX_CHIP_REVISION_2_1;\r\nbreak;\r\ndefault:\r\ncpu_silicon_rev = IMX_CHIP_REVISION_UNKNOWN;\r\n}\r\ncpu_partnumber = (int)((val >> 12) & 0xFFFF);\r\n}\r\nint mx27_revision(void)\r\n{\r\nif (cpu_silicon_rev == -1)\r\nquery_silicon_parameter();\r\nif (cpu_partnumber != 0x8821)\r\nreturn -EINVAL;\r\nreturn cpu_silicon_rev;\r\n}
