static void psr2_spin(void)\r\n{\r\nhard_irq_disable();\r\nfor (;;) ;\r\n}\r\nstatic void psr2_restart(char *cmd)\r\n{\r\npsr2_spin();\r\n}\r\nstatic int psr2_probe_devices(void)\r\n{\r\nstruct device_node *np;\r\nnp = of_find_compatible_node(NULL, NULL, "dallas,ds1500");\r\nif (np != NULL) {\r\nstruct resource res;\r\nif (of_address_to_resource(np, 0, &res) == 0)\r\nplatform_device_register_simple("ds1511", 0, &res, 1);\r\n}\r\nreturn 0;\r\n}\r\nstatic void __init psr2_setup_arch(void)\r\n{\r\nloops_per_jiffy = 50000000;\r\nscom_init_wsp();\r\n#ifdef CONFIG_SMP\r\na2_setup_smp();\r\n#endif\r\n}\r\nstatic int __init psr2_probe(void)\r\n{\r\nunsigned long root = of_get_flat_dt_root();\r\nif (!of_flat_dt_is_compatible(root, "ibm,psr2"))\r\nreturn 0;\r\nreturn 1;\r\n}\r\nstatic void __init psr2_init_irq(void)\r\n{\r\nwsp_init_irq();\r\nopb_pic_init();\r\n}
