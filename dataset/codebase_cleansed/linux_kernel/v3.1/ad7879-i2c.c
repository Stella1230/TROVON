static int ad7879_i2c_suspend(struct device *dev)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nstruct ad7879 *ts = i2c_get_clientdata(client);\r\nad7879_suspend(ts);\r\nreturn 0;\r\n}\r\nstatic int ad7879_i2c_resume(struct device *dev)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nstruct ad7879 *ts = i2c_get_clientdata(client);\r\nad7879_resume(ts);\r\nreturn 0;\r\n}\r\nstatic int ad7879_i2c_read(struct device *dev, u8 reg)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nreturn swab16(i2c_smbus_read_word_data(client, reg));\r\n}\r\nstatic int ad7879_i2c_multi_read(struct device *dev,\r\nu8 first_reg, u8 count, u16 *buf)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nu8 idx;\r\ni2c_smbus_read_i2c_block_data(client, first_reg, count * 2, (u8 *)buf);\r\nfor (idx = 0; idx < count; ++idx)\r\nbuf[idx] = swab16(buf[idx]);\r\nreturn 0;\r\n}\r\nstatic int ad7879_i2c_write(struct device *dev, u8 reg, u16 val)\r\n{\r\nstruct i2c_client *client = to_i2c_client(dev);\r\nreturn i2c_smbus_write_word_data(client, reg, swab16(val));\r\n}\r\nstatic int __devinit ad7879_i2c_probe(struct i2c_client *client,\r\nconst struct i2c_device_id *id)\r\n{\r\nstruct ad7879 *ts;\r\nif (!i2c_check_functionality(client->adapter,\r\nI2C_FUNC_SMBUS_WORD_DATA)) {\r\ndev_err(&client->dev, "SMBUS Word Data not Supported\n");\r\nreturn -EIO;\r\n}\r\nts = ad7879_probe(&client->dev, AD7879_DEVID, client->irq,\r\n&ad7879_i2c_bus_ops);\r\nif (IS_ERR(ts))\r\nreturn PTR_ERR(ts);\r\ni2c_set_clientdata(client, ts);\r\nreturn 0;\r\n}\r\nstatic int __devexit ad7879_i2c_remove(struct i2c_client *client)\r\n{\r\nstruct ad7879 *ts = i2c_get_clientdata(client);\r\nad7879_remove(ts);\r\nreturn 0;\r\n}\r\nstatic int __init ad7879_i2c_init(void)\r\n{\r\nreturn i2c_add_driver(&ad7879_i2c_driver);\r\n}\r\nstatic void __exit ad7879_i2c_exit(void)\r\n{\r\ni2c_del_driver(&ad7879_i2c_driver);\r\n}
