static int simtec_tlv320aic23_init(struct snd_soc_pcm_runtime *rtd)\r\n{\r\nstruct snd_soc_codec *codec = rtd->codec;\r\nstruct snd_soc_dapm_context *dapm = &codec->dapm;\r\nsnd_soc_dapm_new_controls(dapm, dapm_widgets,\r\nARRAY_SIZE(dapm_widgets));\r\nsnd_soc_dapm_add_routes(dapm, base_map, ARRAY_SIZE(base_map));\r\nsnd_soc_dapm_enable_pin(dapm, "Headphone Jack");\r\nsnd_soc_dapm_enable_pin(dapm, "Line In");\r\nsnd_soc_dapm_enable_pin(dapm, "Line Out");\r\nsnd_soc_dapm_enable_pin(dapm, "Mic Jack");\r\nsimtec_audio_init(rtd);\r\nsnd_soc_dapm_sync(dapm);\r\nreturn 0;\r\n}\r\nstatic int __devinit simtec_audio_tlv320aic23_probe(struct platform_device *pd)\r\n{\r\nreturn simtec_audio_core_probe(pd, &snd_soc_machine_simtec_aic23);\r\n}\r\nstatic int __init simtec_tlv320aic23_modinit(void)\r\n{\r\nreturn platform_driver_register(&simtec_audio_tlv320aic23_platdrv);\r\n}\r\nstatic void __exit simtec_tlv320aic23_modexit(void)\r\n{\r\nplatform_driver_unregister(&simtec_audio_tlv320aic23_platdrv);\r\n}
