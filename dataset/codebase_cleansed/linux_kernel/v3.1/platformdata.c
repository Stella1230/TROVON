void __init *s3c_set_platdata(void *pd, size_t pdsize,\r\nstruct platform_device *pdev)\r\n{\r\nvoid *npd;\r\nif (!pd) {\r\nprintk(KERN_ERR "%s: no platform data supplied\n", pdev->name);\r\nreturn NULL;\r\n}\r\nnpd = kmemdup(pd, pdsize, GFP_KERNEL);\r\nif (!npd) {\r\nprintk(KERN_ERR "%s: cannot clone platform data\n", pdev->name);\r\nreturn NULL;\r\n}\r\npdev->dev.platform_data = npd;\r\nreturn npd;\r\n}
