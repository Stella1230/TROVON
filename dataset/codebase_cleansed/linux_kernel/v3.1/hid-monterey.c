static __u8 *mr_report_fixup(struct hid_device *hdev, __u8 *rdesc,\r\nunsigned int *rsize)\r\n{\r\nif (*rsize >= 30 && rdesc[29] == 0x05 && rdesc[30] == 0x09) {\r\nhid_info(hdev, "fixing up button/consumer in HID report descriptor\n");\r\nrdesc[30] = 0x0c;\r\n}\r\nreturn rdesc;\r\n}\r\nstatic int mr_input_mapping(struct hid_device *hdev, struct hid_input *hi,\r\nstruct hid_field *field, struct hid_usage *usage,\r\nunsigned long **bit, int *max)\r\n{\r\nif ((usage->hid & HID_USAGE_PAGE) != HID_UP_CONSUMER)\r\nreturn 0;\r\nswitch (usage->hid & HID_USAGE) {\r\ncase 0x156: mr_map_key_clear(KEY_WORDPROCESSOR); break;\r\ncase 0x157: mr_map_key_clear(KEY_SPREADSHEET); break;\r\ncase 0x158: mr_map_key_clear(KEY_PRESENTATION); break;\r\ncase 0x15c: mr_map_key_clear(KEY_STOP); break;\r\ndefault:\r\nreturn 0;\r\n}\r\nreturn 1;\r\n}\r\nstatic int __init mr_init(void)\r\n{\r\nreturn hid_register_driver(&mr_driver);\r\n}\r\nstatic void __exit mr_exit(void)\r\n{\r\nhid_unregister_driver(&mr_driver);\r\n}
