static int mxc_init_l2x0(void)\r\n{\r\nvoid __iomem *l2x0_base;\r\nvoid __iomem *clkctl_base;\r\nif (!cpu_is_mx31() && !cpu_is_mx35())\r\nreturn 0;\r\n#define L2_MEM_VAL 0x10\r\nclkctl_base = ioremap(MX35_CLKCTL_BASE_ADDR, 4096);\r\nif (clkctl_base != NULL) {\r\nwritel(0x00000515, clkctl_base + L2_MEM_VAL);\r\niounmap(clkctl_base);\r\n} else {\r\npr_err("L2 cache: Cannot fix timing. Trying to continue without\n");\r\n}\r\nl2x0_base = ioremap(MX3x_L2CC_BASE_ADDR, 4096);\r\nif (IS_ERR(l2x0_base)) {\r\nprintk(KERN_ERR "remapping L2 cache area failed with %ld\n",\r\nPTR_ERR(l2x0_base));\r\nreturn 0;\r\n}\r\nl2x0_init(l2x0_base, 0x00030024, 0x00000000);\r\nreturn 0;\r\n}
