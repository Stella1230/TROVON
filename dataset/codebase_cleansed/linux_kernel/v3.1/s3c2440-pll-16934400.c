static int s3c2440_plls169344_add(struct sys_device *dev)\r\n{\r\nstruct clk *xtal_clk;\r\nunsigned long xtal;\r\nxtal_clk = clk_get(NULL, "xtal");\r\nif (IS_ERR(xtal_clk))\r\nreturn PTR_ERR(xtal_clk);\r\nxtal = clk_get_rate(xtal_clk);\r\nclk_put(xtal_clk);\r\nif (xtal == 169344000) {\r\nprintk(KERN_INFO "Using PLL table for 16.9344MHz crystal\n");\r\nreturn s3c_plltab_register(s3c2440_plls_169344,\r\nARRAY_SIZE(s3c2440_plls_169344));\r\n}\r\nreturn 0;\r\n}\r\nstatic int __init s3c2440_pll_16934400(void)\r\n{\r\nreturn sysdev_driver_register(&s3c2440_sysclass,\r\n&s3c2440_plls169344_drv);\r\n}\r\nstatic int __init s3c2442_pll_16934400(void)\r\n{\r\nreturn sysdev_driver_register(&s3c2442_sysclass,\r\n&s3c2442_plls169344_drv);\r\n}
