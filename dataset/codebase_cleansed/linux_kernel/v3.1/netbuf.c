void a_netbuf_enqueue(A_NETBUF_QUEUE_T *q, void *pkt)\r\n{\r\nskb_queue_tail((struct sk_buff_head *) q, (struct sk_buff *) pkt);\r\n}\r\nvoid a_netbuf_prequeue(A_NETBUF_QUEUE_T *q, void *pkt)\r\n{\r\nskb_queue_head((struct sk_buff_head *) q, (struct sk_buff *) pkt);\r\n}\r\nvoid *a_netbuf_dequeue(A_NETBUF_QUEUE_T *q)\r\n{\r\nreturn((void *) skb_dequeue((struct sk_buff_head *) q));\r\n}\r\nint a_netbuf_queue_size(A_NETBUF_QUEUE_T *q)\r\n{\r\nreturn(skb_queue_len((struct sk_buff_head *) q));\r\n}\r\nint a_netbuf_queue_empty(A_NETBUF_QUEUE_T *q)\r\n{\r\nreturn(skb_queue_empty((struct sk_buff_head *) q));\r\n}\r\nvoid a_netbuf_queue_init(A_NETBUF_QUEUE_T *q)\r\n{\r\nskb_queue_head_init((struct sk_buff_head *) q);\r\n}\r\nvoid *\r\na_netbuf_alloc(int size)\r\n{\r\nstruct sk_buff *skb;\r\nsize += 2 * (A_GET_CACHE_LINE_BYTES());\r\nskb = dev_alloc_skb(AR6000_DATA_OFFSET + sizeof(struct htc_packet) + size);\r\nskb_reserve(skb, AR6000_DATA_OFFSET + sizeof(struct htc_packet) + A_GET_CACHE_LINE_BYTES());\r\nreturn ((void *)skb);\r\n}\r\nvoid *\r\na_netbuf_alloc_raw(int size)\r\n{\r\nstruct sk_buff *skb;\r\nskb = dev_alloc_skb(size);\r\nreturn ((void *)skb);\r\n}\r\nvoid\r\na_netbuf_free(void *bufPtr)\r\n{\r\nstruct sk_buff *skb = (struct sk_buff *)bufPtr;\r\ndev_kfree_skb(skb);\r\n}\r\nu32 a_netbuf_to_len(void *bufPtr)\r\n{\r\nreturn (((struct sk_buff *)bufPtr)->len);\r\n}\r\nvoid *\r\na_netbuf_to_data(void *bufPtr)\r\n{\r\nreturn (((struct sk_buff *)bufPtr)->data);\r\n}\r\nint\r\na_netbuf_push(void *bufPtr, s32 len)\r\n{\r\nskb_push((struct sk_buff *)bufPtr, len);\r\nreturn 0;\r\n}\r\nint\r\na_netbuf_push_data(void *bufPtr, char *srcPtr, s32 len)\r\n{\r\nskb_push((struct sk_buff *) bufPtr, len);\r\nmemcpy(((struct sk_buff *)bufPtr)->data, srcPtr, len);\r\nreturn 0;\r\n}\r\nint\r\na_netbuf_put(void *bufPtr, s32 len)\r\n{\r\nskb_put((struct sk_buff *)bufPtr, len);\r\nreturn 0;\r\n}\r\nint\r\na_netbuf_put_data(void *bufPtr, char *srcPtr, s32 len)\r\n{\r\nchar *start = (char*)(((struct sk_buff *)bufPtr)->data +\r\n((struct sk_buff *)bufPtr)->len);\r\nskb_put((struct sk_buff *)bufPtr, len);\r\nmemcpy(start, srcPtr, len);\r\nreturn 0;\r\n}\r\nint\r\na_netbuf_setlen(void *bufPtr, s32 len)\r\n{\r\nskb_trim((struct sk_buff *)bufPtr, len);\r\nreturn 0;\r\n}\r\nint\r\na_netbuf_trim(void *bufPtr, s32 len)\r\n{\r\nskb_trim((struct sk_buff *)bufPtr, ((struct sk_buff *)bufPtr)->len - len);\r\nreturn 0;\r\n}\r\nint\r\na_netbuf_trim_data(void *bufPtr, char *dstPtr, s32 len)\r\n{\r\nchar *start = (char*)(((struct sk_buff *)bufPtr)->data +\r\n(((struct sk_buff *)bufPtr)->len - len));\r\nmemcpy(dstPtr, start, len);\r\nskb_trim((struct sk_buff *)bufPtr, ((struct sk_buff *)bufPtr)->len - len);\r\nreturn 0;\r\n}\r\ns32 a_netbuf_headroom(void *bufPtr)\r\n{\r\nreturn (skb_headroom((struct sk_buff *)bufPtr));\r\n}\r\nint\r\na_netbuf_pull(void *bufPtr, s32 len)\r\n{\r\nskb_pull((struct sk_buff *)bufPtr, len);\r\nreturn 0;\r\n}\r\nint\r\na_netbuf_pull_data(void *bufPtr, char *dstPtr, s32 len)\r\n{\r\nmemcpy(dstPtr, ((struct sk_buff *)bufPtr)->data, len);\r\nskb_pull((struct sk_buff *)bufPtr, len);\r\nreturn 0;\r\n}
