int __init hwspinlocks_init(void)\r\n{\r\nint retval = 0;\r\nstruct omap_hwmod *oh;\r\nstruct omap_device *od;\r\nconst char *oh_name = "spinlock";\r\nconst char *dev_name = "omap_hwspinlock";\r\noh = omap_hwmod_lookup(oh_name);\r\nif (oh == NULL)\r\nreturn -EINVAL;\r\nod = omap_device_build(dev_name, 0, oh, NULL, 0,\r\nomap_spinlock_latency,\r\nARRAY_SIZE(omap_spinlock_latency), false);\r\nif (IS_ERR(od)) {\r\npr_err("Can't build omap_device for %s:%s\n", dev_name,\r\noh_name);\r\nretval = PTR_ERR(od);\r\n}\r\nreturn retval;\r\n}
