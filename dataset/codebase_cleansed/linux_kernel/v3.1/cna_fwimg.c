static u32 *\r\ncna_read_firmware(struct pci_dev *pdev, u32 **bfi_image,\r\nu32 *bfi_image_size, char *fw_name)\r\n{\r\nconst struct firmware *fw;\r\nif (request_firmware(&fw, fw_name, &pdev->dev)) {\r\npr_alert("Can't locate firmware %s\n", fw_name);\r\ngoto error;\r\n}\r\n*bfi_image = (u32 *)fw->data;\r\n*bfi_image_size = fw->size/sizeof(u32);\r\nbfi_fw = fw;\r\nreturn *bfi_image;\r\nerror:\r\nreturn NULL;\r\n}\r\nu32 *\r\ncna_get_firmware_buf(struct pci_dev *pdev)\r\n{\r\nif (bfi_image_ct_cna_size == 0)\r\ncna_read_firmware(pdev, &bfi_image_ct_cna,\r\n&bfi_image_ct_cna_size, CNA_FW_FILE_CT);\r\nreturn bfi_image_ct_cna;\r\n}\r\nu32 *\r\nbfa_cb_image_get_chunk(int type, u32 off)\r\n{\r\nreturn (u32 *)(bfi_image_ct_cna + off);\r\n}\r\nu32\r\nbfa_cb_image_get_size(int type)\r\n{\r\nreturn bfi_image_ct_cna_size;\r\n}
