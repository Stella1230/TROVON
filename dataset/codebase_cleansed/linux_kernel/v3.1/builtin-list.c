int cmd_list(int argc, const char **argv, const char *prefix __used)\r\n{\r\nsetup_pager();\r\nif (argc == 1)\r\nprint_events(NULL);\r\nelse {\r\nint i;\r\nfor (i = 1; i < argc; ++i) {\r\nif (i > 1)\r\nputchar('\n');\r\nif (strncmp(argv[i], "tracepoint", 10) == 0)\r\nprint_tracepoint_events(NULL, NULL);\r\nelse if (strcmp(argv[i], "hw") == 0 ||\r\nstrcmp(argv[i], "hardware") == 0)\r\nprint_events_type(PERF_TYPE_HARDWARE);\r\nelse if (strcmp(argv[i], "sw") == 0 ||\r\nstrcmp(argv[i], "software") == 0)\r\nprint_events_type(PERF_TYPE_SOFTWARE);\r\nelse if (strcmp(argv[i], "cache") == 0 ||\r\nstrcmp(argv[i], "hwcache") == 0)\r\nprint_hwcache_events(NULL);\r\nelse {\r\nchar *sep = strchr(argv[i], ':'), *s;\r\nint sep_idx;\r\nif (sep == NULL) {\r\nprint_events(argv[i]);\r\ncontinue;\r\n}\r\nsep_idx = sep - argv[i];\r\ns = strdup(argv[i]);\r\nif (s == NULL)\r\nreturn -1;\r\ns[sep_idx] = '\0';\r\nprint_tracepoint_events(s, s + sep_idx + 1);\r\nfree(s);\r\n}\r\n}\r\n}\r\nreturn 0;\r\n}
