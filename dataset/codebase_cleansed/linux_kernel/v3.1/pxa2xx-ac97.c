static void pxa2xx_ac97_warm_reset(struct snd_ac97 *ac97)\r\n{\r\npxa2xx_ac97_try_warm_reset(ac97);\r\npxa2xx_ac97_finish_reset(ac97);\r\n}\r\nstatic void pxa2xx_ac97_cold_reset(struct snd_ac97 *ac97)\r\n{\r\npxa2xx_ac97_try_cold_reset(ac97);\r\npxa2xx_ac97_finish_reset(ac97);\r\n}\r\nstatic int pxa2xx_ac97_suspend(struct snd_soc_dai *dai)\r\n{\r\nreturn pxa2xx_ac97_hw_suspend();\r\n}\r\nstatic int pxa2xx_ac97_resume(struct snd_soc_dai *dai)\r\n{\r\nreturn pxa2xx_ac97_hw_resume();\r\n}\r\nstatic int pxa2xx_ac97_probe(struct snd_soc_dai *dai)\r\n{\r\nreturn pxa2xx_ac97_hw_probe(to_platform_device(dai->dev));\r\n}\r\nstatic int pxa2xx_ac97_remove(struct snd_soc_dai *dai)\r\n{\r\npxa2xx_ac97_hw_remove(to_platform_device(dai->dev));\r\nreturn 0;\r\n}\r\nstatic int pxa2xx_ac97_hw_params(struct snd_pcm_substream *substream,\r\nstruct snd_pcm_hw_params *params,\r\nstruct snd_soc_dai *cpu_dai)\r\n{\r\nstruct pxa2xx_pcm_dma_params *dma_data;\r\nif (substream->stream == SNDRV_PCM_STREAM_PLAYBACK)\r\ndma_data = &pxa2xx_ac97_pcm_stereo_out;\r\nelse\r\ndma_data = &pxa2xx_ac97_pcm_stereo_in;\r\nsnd_soc_dai_set_dma_data(cpu_dai, substream, dma_data);\r\nreturn 0;\r\n}\r\nstatic int pxa2xx_ac97_hw_aux_params(struct snd_pcm_substream *substream,\r\nstruct snd_pcm_hw_params *params,\r\nstruct snd_soc_dai *cpu_dai)\r\n{\r\nstruct pxa2xx_pcm_dma_params *dma_data;\r\nif (substream->stream == SNDRV_PCM_STREAM_PLAYBACK)\r\ndma_data = &pxa2xx_ac97_pcm_aux_mono_out;\r\nelse\r\ndma_data = &pxa2xx_ac97_pcm_aux_mono_in;\r\nsnd_soc_dai_set_dma_data(cpu_dai, substream, dma_data);\r\nreturn 0;\r\n}\r\nstatic int pxa2xx_ac97_hw_mic_params(struct snd_pcm_substream *substream,\r\nstruct snd_pcm_hw_params *params,\r\nstruct snd_soc_dai *cpu_dai)\r\n{\r\nif (substream->stream == SNDRV_PCM_STREAM_PLAYBACK)\r\nreturn -ENODEV;\r\nelse\r\nsnd_soc_dai_set_dma_data(cpu_dai, substream,\r\n&pxa2xx_ac97_pcm_mic_mono_in);\r\nreturn 0;\r\n}\r\nstatic __devinit int pxa2xx_ac97_dev_probe(struct platform_device *pdev)\r\n{\r\nif (pdev->id != -1) {\r\ndev_err(&pdev->dev, "PXA2xx has only one AC97 port.\n");\r\nreturn -ENXIO;\r\n}\r\nreturn snd_soc_register_dais(&pdev->dev, pxa_ac97_dai,\r\nARRAY_SIZE(pxa_ac97_dai));\r\n}\r\nstatic int __devexit pxa2xx_ac97_dev_remove(struct platform_device *pdev)\r\n{\r\nsnd_soc_unregister_dais(&pdev->dev, ARRAY_SIZE(pxa_ac97_dai));\r\nreturn 0;\r\n}\r\nstatic int __init pxa_ac97_init(void)\r\n{\r\nreturn platform_driver_register(&pxa2xx_ac97_driver);\r\n}\r\nstatic void __exit pxa_ac97_exit(void)\r\n{\r\nplatform_driver_unregister(&pxa2xx_ac97_driver);\r\n}
