static int a800_power_ctrl(struct dvb_usb_device *d, int onoff)\r\n{\r\nreturn 0;\r\n}\r\nstatic int a800_identify_state(struct usb_device *udev, struct dvb_usb_device_properties *props,\r\nstruct dvb_usb_device_description **desc, int *cold)\r\n{\r\n*cold = udev->descriptor.iManufacturer != 1;\r\nreturn 0;\r\n}\r\nstatic int a800_rc_query(struct dvb_usb_device *d, u32 *event, int *state)\r\n{\r\nint ret;\r\nu8 *key = kmalloc(5, GFP_KERNEL);\r\nif (!key)\r\nreturn -ENOMEM;\r\nif (usb_control_msg(d->udev,usb_rcvctrlpipe(d->udev,0),\r\n0x04, USB_TYPE_VENDOR | USB_DIR_IN, 0, 0, key, 5,\r\n2000) != 5) {\r\nret = -ENODEV;\r\ngoto out;\r\n}\r\ndvb_usb_nec_rc_key_to_event(d,key,event,state);\r\nif (key[0] != 0)\r\ndeb_rc("key: %x %x %x %x %x\n",key[0],key[1],key[2],key[3],key[4]);\r\nret = 0;\r\nout:\r\nkfree(key);\r\nreturn ret;\r\n}\r\nstatic int a800_probe(struct usb_interface *intf,\r\nconst struct usb_device_id *id)\r\n{\r\nreturn dvb_usb_device_init(intf, &a800_properties,\r\nTHIS_MODULE, NULL, adapter_nr);\r\n}\r\nstatic int __init a800_module_init(void)\r\n{\r\nint result;\r\nif ((result = usb_register(&a800_driver))) {\r\nerr("usb_register failed. Error number %d",result);\r\nreturn result;\r\n}\r\nreturn 0;\r\n}\r\nstatic void __exit a800_module_exit(void)\r\n{\r\nusb_deregister(&a800_driver);\r\n}
