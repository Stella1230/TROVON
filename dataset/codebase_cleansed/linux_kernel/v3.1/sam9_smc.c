void __init sam9_smc_configure(int cs, struct sam9_smc_config* config)\r\n{\r\nat91_sys_write(AT91_SMC_SETUP(cs),\r\nAT91_SMC_NWESETUP_(config->nwe_setup)\r\n| AT91_SMC_NCS_WRSETUP_(config->ncs_write_setup)\r\n| AT91_SMC_NRDSETUP_(config->nrd_setup)\r\n| AT91_SMC_NCS_RDSETUP_(config->ncs_read_setup)\r\n);\r\nat91_sys_write(AT91_SMC_PULSE(cs),\r\nAT91_SMC_NWEPULSE_(config->nwe_pulse)\r\n| AT91_SMC_NCS_WRPULSE_(config->ncs_write_pulse)\r\n| AT91_SMC_NRDPULSE_(config->nrd_pulse)\r\n| AT91_SMC_NCS_RDPULSE_(config->ncs_read_pulse)\r\n);\r\nat91_sys_write(AT91_SMC_CYCLE(cs),\r\nAT91_SMC_NWECYCLE_(config->write_cycle)\r\n| AT91_SMC_NRDCYCLE_(config->read_cycle)\r\n);\r\nat91_sys_write(AT91_SMC_MODE(cs),\r\nconfig->mode\r\n| AT91_SMC_TDF_(config->tdf_cycles)\r\n);\r\n}
