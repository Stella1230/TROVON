BOOL\r\nChannelValid(unsigned int CountryCode, unsigned int ChannelIndex)\r\n{\r\nBOOL bValid;\r\nbValid = FALSE;\r\nif ((ChannelIndex > CB_MAX_CHANNEL) ||\r\n(ChannelIndex == 0))\r\n{\r\nbValid = FALSE;\r\ngoto exit;\r\n}\r\nbValid = sChannelTbl[ChannelIndex].bValid;\r\nexit:\r\nreturn (bValid);\r\n}\r\nBOOL\r\nCHvChannelGetList (\r\nunsigned int uCountryCodeIdx,\r\nPBYTE pbyChannelTable\r\n)\r\n{\r\nif (uCountryCodeIdx >= CCODE_MAX) {\r\nreturn (FALSE);\r\n}\r\nmemcpy(pbyChannelTable, ChannelRuleTab[uCountryCodeIdx].bChannelIdxList, CB_MAX_CHANNEL);\r\nreturn (TRUE);\r\n}\r\nvoid CHvInitChannelTable(void *pDeviceHandler)\r\n{\r\nPSDevice pDevice = (PSDevice) pDeviceHandler;\r\nBOOL bMultiBand = FALSE;\r\nunsigned int ii;\r\nfor (ii = 1; ii <= CB_MAX_CHANNEL; ii++)\r\nsChannelTbl[ii].bValid = FALSE;\r\nswitch (pDevice->byRFType) {\r\ncase RF_AL2230:\r\ncase RF_AL2230S:\r\ncase RF_VT3226:\r\ncase RF_VT3226D0:\r\nbMultiBand = FALSE;\r\nbreak;\r\ncase RF_AIROHA7230:\r\ncase RF_VT3342A0:\r\ndefault :\r\nbMultiBand = TRUE;\r\nbreak;\r\n}\r\nif ((pDevice->dwDiagRefCount != 0) ||\r\n(pDevice->b11hEable == TRUE)) {\r\nif (bMultiBand == TRUE) {\r\nfor (ii = 0; ii < CB_MAX_CHANNEL; ii++) {\r\nsChannelTbl[ii+1].bValid = TRUE;\r\n}\r\nfor (ii = 0; ii < CB_MAX_CHANNEL_24G; ii++) {\r\n}\r\n} else {\r\nfor (ii = 0; ii < CB_MAX_CHANNEL_24G; ii++) {\r\nsChannelTbl[ii+1].bValid = TRUE;\r\n}\r\n}\r\n} else if (pDevice->byZoneType <= CCODE_MAX) {\r\nif (bMultiBand == TRUE) {\r\nfor (ii = 0; ii < CB_MAX_CHANNEL; ii++) {\r\nif (ChannelRuleTab[pDevice->byZoneType].bChannelIdxList[ii] != 0) {\r\nsChannelTbl[ii+1].bValid = TRUE;\r\n}\r\n}\r\n} else {\r\nfor (ii = 0; ii < CB_MAX_CHANNEL_24G; ii++) {\r\nif (ChannelRuleTab[pDevice->byZoneType].bChannelIdxList[ii] != 0) {\r\nsChannelTbl[ii+1].bValid = TRUE;\r\n}\r\n}\r\n}\r\n}\r\nDBG_PRT(MSG_LEVEL_NOTICE, KERN_INFO"Zone=[%d][%c][%c]!!\n",pDevice->byZoneType,ChannelRuleTab[pDevice->byZoneType].chCountryCode[0],ChannelRuleTab[pDevice->byZoneType].chCountryCode[1]);\r\nfor (ii = 0; ii < CB_MAX_CHANNEL; ii++) {\r\nDBG_PRT(MSG_LEVEL_DEBUG, KERN_INFO"Channel[%d] is [%d]\n",sChannelTbl[ii].byChannelNumber,sChannelTbl[ii+1].bValid);\r\n}\r\n}\r\nBYTE CHbyGetChannelMapping(BYTE byChannelNumber)\r\n{\r\nBYTE ii;\r\nBYTE byCHMapping = 0;\r\nfor (ii = 1; ii <= CB_MAX_CHANNEL; ii++) {\r\nif (sChannelTbl[ii].byChannelNumber == byChannelNumber)\r\nbyCHMapping = ii;\r\n}\r\nreturn byCHMapping;\r\n}
