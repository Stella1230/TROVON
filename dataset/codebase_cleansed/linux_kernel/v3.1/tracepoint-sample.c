static int my_open(struct inode *inode, struct file *file)\r\n{\r\nint i;\r\ntrace_subsys_event(inode, file);\r\nfor (i = 0; i < 10; i++)\r\ntrace_subsys_eventb();\r\nreturn -EPERM;\r\n}\r\nstatic int __init sample_init(void)\r\n{\r\nprintk(KERN_ALERT "sample init\n");\r\npentry_sample = proc_create("tracepoint-sample", 0444, NULL,\r\n&mark_ops);\r\nif (!pentry_sample)\r\nreturn -EPERM;\r\nreturn 0;\r\n}\r\nstatic void __exit sample_exit(void)\r\n{\r\nprintk(KERN_ALERT "sample exit\n");\r\nremove_proc_entry("tracepoint-sample", NULL);\r\n}
