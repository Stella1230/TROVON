static void set_oem_spec_val(struct s_smc *smc)\r\n{\r\nstruct fddi_mib *mib ;\r\nmib = &smc->mib ;\r\nif (OEMID(smc,0) == 'I') {\r\nmib->fddiSMTConnectionPolicy = POLICY_MM ;\r\n}\r\n}\r\nint init_smt(struct s_smc *smc, u_char *mac_addr)\r\n{\r\nint p ;\r\n#if defined(DEBUG) && !defined(DEBUG_BRD)\r\ndebug.d_smt = 0 ;\r\ndebug.d_smtf = 0 ;\r\ndebug.d_rmt = 0 ;\r\ndebug.d_ecm = 0 ;\r\ndebug.d_pcm = 0 ;\r\ndebug.d_cfm = 0 ;\r\ndebug.d_plc = 0 ;\r\n#ifdef ESS\r\ndebug.d_ess = 0 ;\r\n#endif\r\n#ifdef SBA\r\ndebug.d_sba = 0 ;\r\n#endif\r\n#endif\r\nfor ( p = 0; p < NUMPHYS; p ++ ) {\r\nsmc->y[p].mib = & smc->mib.p[p] ;\r\n}\r\nset_oem_spec_val(smc) ;\r\n(void) smt_set_mac_opvalues(smc) ;\r\ninit_fddi_driver(smc,mac_addr) ;\r\nsmt_fixup_mib(smc) ;\r\nev_init(smc) ;\r\n#ifndef SLIM_SMT\r\nsmt_init_evc(smc) ;\r\n#endif\r\nsmt_timer_init(smc) ;\r\nsmt_agent_init(smc) ;\r\npcm_init(smc) ;\r\necm_init(smc) ;\r\ncfm_init(smc) ;\r\nrmt_init(smc) ;\r\nfor (p = 0 ; p < NUMPHYS ; p++) {\r\npcm(smc,p,0) ;\r\n}\r\necm(smc,0) ;\r\ncfm(smc,0) ;\r\nrmt(smc,0) ;\r\nsmt_agent_task(smc) ;\r\nPNMI_INIT(smc) ;\r\nreturn 0;\r\n}
