static int umt_mt352_demod_init(struct dvb_frontend *fe)\r\n{\r\nstatic u8 mt352_clock_config[] = { 0x89, 0xb8, 0x2d };\r\nstatic u8 mt352_reset[] = { 0x50, 0x80 };\r\nstatic u8 mt352_mclk_ratio[] = { 0x8b, 0x00 };\r\nstatic u8 mt352_adc_ctl_1_cfg[] = { 0x8E, 0x40 };\r\nstatic u8 mt352_agc_cfg[] = { 0x67, 0x10, 0xa0 };\r\nstatic u8 mt352_sec_agc_cfg1[] = { 0x6a, 0xff };\r\nstatic u8 mt352_sec_agc_cfg2[] = { 0x6d, 0xff };\r\nstatic u8 mt352_sec_agc_cfg3[] = { 0x70, 0x40 };\r\nstatic u8 mt352_sec_agc_cfg4[] = { 0x7b, 0x03 };\r\nstatic u8 mt352_sec_agc_cfg5[] = { 0x7d, 0x0f };\r\nstatic u8 mt352_acq_ctl[] = { 0x53, 0x50 };\r\nstatic u8 mt352_input_freq_1[] = { 0x56, 0x31, 0x06 };\r\nmt352_write(fe, mt352_clock_config, sizeof(mt352_clock_config));\r\nudelay(2000);\r\nmt352_write(fe, mt352_reset, sizeof(mt352_reset));\r\nmt352_write(fe, mt352_mclk_ratio, sizeof(mt352_mclk_ratio));\r\nmt352_write(fe, mt352_adc_ctl_1_cfg, sizeof(mt352_adc_ctl_1_cfg));\r\nmt352_write(fe, mt352_agc_cfg, sizeof(mt352_agc_cfg));\r\nmt352_write(fe, mt352_sec_agc_cfg1, sizeof(mt352_sec_agc_cfg1));\r\nmt352_write(fe, mt352_sec_agc_cfg2, sizeof(mt352_sec_agc_cfg2));\r\nmt352_write(fe, mt352_sec_agc_cfg3, sizeof(mt352_sec_agc_cfg3));\r\nmt352_write(fe, mt352_sec_agc_cfg4, sizeof(mt352_sec_agc_cfg4));\r\nmt352_write(fe, mt352_sec_agc_cfg5, sizeof(mt352_sec_agc_cfg5));\r\nmt352_write(fe, mt352_acq_ctl, sizeof(mt352_acq_ctl));\r\nmt352_write(fe, mt352_input_freq_1, sizeof(mt352_input_freq_1));\r\nreturn 0;\r\n}\r\nstatic int umt_mt352_frontend_attach(struct dvb_usb_adapter *adap)\r\n{\r\nstruct mt352_config umt_config;\r\nmemset(&umt_config,0,sizeof(struct mt352_config));\r\numt_config.demod_init = umt_mt352_demod_init;\r\numt_config.demod_address = 0xf;\r\nadap->fe = dvb_attach(mt352_attach, &umt_config, &adap->dev->i2c_adap);\r\nreturn 0;\r\n}\r\nstatic int umt_tuner_attach (struct dvb_usb_adapter *adap)\r\n{\r\ndvb_attach(dvb_pll_attach, adap->fe, 0x61, NULL, DVB_PLL_TUA6034);\r\nreturn 0;\r\n}\r\nstatic int umt_probe(struct usb_interface *intf,\r\nconst struct usb_device_id *id)\r\n{\r\nif (0 == dvb_usb_device_init(intf, &umt_properties,\r\nTHIS_MODULE, NULL, adapter_nr))\r\nreturn 0;\r\nreturn -EINVAL;\r\n}\r\nstatic int __init umt_module_init(void)\r\n{\r\nint result;\r\nif ((result = usb_register(&umt_driver))) {\r\nerr("usb_register failed. Error number %d",result);\r\nreturn result;\r\n}\r\nreturn 0;\r\n}\r\nstatic void __exit umt_module_exit(void)\r\n{\r\nusb_deregister(&umt_driver);\r\n}
