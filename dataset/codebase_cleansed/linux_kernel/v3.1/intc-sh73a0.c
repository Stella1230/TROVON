static irqreturn_t sh73a0_intcs_demux(int irq, void *dev_id)\r\n{\r\nunsigned int evtcodeas = ioread32((void __iomem *)dev_id);\r\ngeneric_handle_irq(intcs_evt2irq(evtcodeas));\r\nreturn IRQ_HANDLED;\r\n}\r\nstatic int sh73a0_set_wake(struct irq_data *data, unsigned int on)\r\n{\r\nreturn 0;\r\n}\r\nvoid __init sh73a0_init_irq(void)\r\n{\r\nvoid __iomem *gic_dist_base = __io(0xf0001000);\r\nvoid __iomem *gic_cpu_base = __io(0xf0000100);\r\nvoid __iomem *intevtsa = ioremap_nocache(0xffd20100, PAGE_SIZE);\r\ngic_init(0, 29, gic_dist_base, gic_cpu_base);\r\ngic_arch_extn.irq_set_wake = sh73a0_set_wake;\r\nregister_intc_controller(&intcs_desc);\r\nsh73a0_intcs_cascade.name = "INTCS cascade";\r\nsh73a0_intcs_cascade.handler = sh73a0_intcs_demux;\r\nsh73a0_intcs_cascade.dev_id = intevtsa;\r\nsetup_irq(gic_spi(50), &sh73a0_intcs_cascade);\r\n}
