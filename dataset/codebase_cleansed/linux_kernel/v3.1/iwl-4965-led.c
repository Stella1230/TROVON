static int\r\niwl4965_send_led_cmd(struct iwl_priv *priv, struct iwl_led_cmd *led_cmd)\r\n{\r\nstruct iwl_host_cmd cmd = {\r\n.id = REPLY_LEDS_CMD,\r\n.len = sizeof(struct iwl_led_cmd),\r\n.data = led_cmd,\r\n.flags = CMD_ASYNC,\r\n.callback = NULL,\r\n};\r\nu32 reg;\r\nreg = iwl_read32(priv, CSR_LED_REG);\r\nif (reg != (reg & CSR_LED_BSM_CTRL_MSK))\r\niwl_write32(priv, CSR_LED_REG, reg & CSR_LED_BSM_CTRL_MSK);\r\nreturn iwl_legacy_send_cmd(priv, &cmd);\r\n}\r\nvoid iwl4965_led_enable(struct iwl_priv *priv)\r\n{\r\niwl_write32(priv, CSR_LED_REG, CSR_LED_REG_TRUN_ON);\r\n}
