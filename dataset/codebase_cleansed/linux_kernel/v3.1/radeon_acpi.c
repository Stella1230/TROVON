static int radeon_atif_call(acpi_handle handle)\r\n{\r\nacpi_status status;\r\nunion acpi_object atif_arg_elements[2];\r\nstruct acpi_object_list atif_arg;\r\nstruct acpi_buffer buffer = { ACPI_ALLOCATE_BUFFER, NULL};\r\natif_arg.count = 2;\r\natif_arg.pointer = &atif_arg_elements[0];\r\natif_arg_elements[0].type = ACPI_TYPE_INTEGER;\r\natif_arg_elements[0].integer.value = 0;\r\natif_arg_elements[1].type = ACPI_TYPE_INTEGER;\r\natif_arg_elements[1].integer.value = 0;\r\nstatus = acpi_evaluate_object(handle, "ATIF", &atif_arg, &buffer);\r\nif (ACPI_FAILURE(status) && status != AE_NOT_FOUND) {\r\nprintk(KERN_DEBUG "failed to evaluate ATIF got %s\n", acpi_format_exception(status));\r\nkfree(buffer.pointer);\r\nreturn 1;\r\n}\r\nkfree(buffer.pointer);\r\nreturn 0;\r\n}\r\nint radeon_acpi_init(struct radeon_device *rdev)\r\n{\r\nacpi_handle handle;\r\nint ret;\r\nif (!ASIC_IS_AVIVO(rdev) || !rdev->bios)\r\nreturn 0;\r\nhandle = DEVICE_ACPI_HANDLE(&rdev->pdev->dev);\r\nret = radeon_atif_call(handle);\r\nif (ret)\r\nreturn ret;\r\nreturn 0;\r\n}
