static int s3c2440_plls12_add(struct sys_device *dev)\r\n{\r\nstruct clk *xtal_clk;\r\nunsigned long xtal;\r\nxtal_clk = clk_get(NULL, "xtal");\r\nif (IS_ERR(xtal_clk))\r\nreturn PTR_ERR(xtal_clk);\r\nxtal = clk_get_rate(xtal_clk);\r\nclk_put(xtal_clk);\r\nif (xtal == 12000000) {\r\nprintk(KERN_INFO "Using PLL table for 12MHz crystal\n");\r\nreturn s3c_plltab_register(s3c2440_plls_12,\r\nARRAY_SIZE(s3c2440_plls_12));\r\n}\r\nreturn 0;\r\n}\r\nstatic int __init s3c2440_pll_12mhz(void)\r\n{\r\nreturn sysdev_driver_register(&s3c2440_sysclass, &s3c2440_plls12_drv);\r\n}\r\nstatic int __init s3c2442_pll_12mhz(void)\r\n{\r\nreturn sysdev_driver_register(&s3c2442_sysclass, &s3c2442_plls12_drv);\r\n}
