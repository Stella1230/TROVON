static int teranetics_config_init(struct phy_device *phydev)\r\n{\r\nphydev->supported = SUPPORTED_10000baseT_Full;\r\nphydev->advertising = SUPPORTED_10000baseT_Full;\r\nreturn 0;\r\n}\r\nstatic int teranetics_soft_reset(struct phy_device *phydev)\r\n{\r\nreturn 0;\r\n}\r\nstatic int teranetics_aneg_done(struct phy_device *phydev)\r\n{\r\nint reg;\r\nif (!phy_read_mmd(phydev, MDIO_MMD_VEND1, 93)) {\r\nreg = phy_read_mmd(phydev, MDIO_MMD_AN, MDIO_STAT1);\r\nreturn (reg < 0) ? reg : (reg & BMSR_ANEGCOMPLETE);\r\n}\r\nreturn 1;\r\n}\r\nstatic int teranetics_config_aneg(struct phy_device *phydev)\r\n{\r\nreturn 0;\r\n}\r\nstatic int teranetics_read_status(struct phy_device *phydev)\r\n{\r\nint reg;\r\nphydev->link = 1;\r\nphydev->speed = SPEED_10000;\r\nphydev->duplex = DUPLEX_FULL;\r\nif (!phy_read_mmd(phydev, MDIO_MMD_VEND1, 93)) {\r\nreg = phy_read_mmd(phydev, MDIO_MMD_PHYXS, MDIO_PHYXS_LNSTAT);\r\nif (reg < 0 ||\r\n!((reg & MDIO_PHYXS_LANE_READY) == MDIO_PHYXS_LANE_READY)) {\r\nphydev->link = 0;\r\nreturn 0;\r\n}\r\nreg = phy_read_mmd(phydev, MDIO_MMD_AN, MDIO_STAT1);\r\nif (reg < 0 || !(reg & MDIO_STAT1_LSTATUS))\r\nphydev->link = 0;\r\n}\r\nreturn 0;\r\n}\r\nstatic int teranetics_match_phy_device(struct phy_device *phydev)\r\n{\r\nreturn phydev->c45_ids.device_ids[3] == PHY_ID_TN2020;\r\n}
