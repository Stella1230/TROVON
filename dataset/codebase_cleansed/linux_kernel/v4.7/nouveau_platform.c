static int nouveau_platform_probe(struct platform_device *pdev)\r\n{\r\nconst struct nvkm_device_tegra_func *func;\r\nstruct nvkm_device *device = NULL;\r\nstruct drm_device *drm;\r\nint ret;\r\nfunc = of_device_get_match_data(&pdev->dev);\r\ndrm = nouveau_platform_device_create(func, pdev, &device);\r\nif (IS_ERR(drm))\r\nreturn PTR_ERR(drm);\r\nret = drm_dev_register(drm, 0);\r\nif (ret < 0) {\r\ndrm_dev_unref(drm);\r\nreturn ret;\r\n}\r\nreturn 0;\r\n}\r\nstatic int nouveau_platform_remove(struct platform_device *pdev)\r\n{\r\nstruct drm_device *dev = platform_get_drvdata(pdev);\r\nnouveau_drm_device_remove(dev);\r\nreturn 0;\r\n}
