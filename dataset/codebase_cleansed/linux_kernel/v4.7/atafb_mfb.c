void atafb_mfb_copyarea(struct fb_info *info, u_long next_line,\r\nint sy, int sx, int dy, int dx,\r\nint height, int width)\r\n{\r\nu8 *src, *dest;\r\nu_int rows;\r\nif (sx == 0 && dx == 0 && width == next_line) {\r\nsrc = (u8 *)info->screen_base + sy * (width >> 3);\r\ndest = (u8 *)info->screen_base + dy * (width >> 3);\r\nfb_memmove(dest, src, height * (width >> 3));\r\n} else if (dy <= sy) {\r\nsrc = (u8 *)info->screen_base + sy * next_line + (sx >> 3);\r\ndest = (u8 *)info->screen_base + dy * next_line + (dx >> 3);\r\nfor (rows = height; rows--;) {\r\nfb_memmove(dest, src, width >> 3);\r\nsrc += next_line;\r\ndest += next_line;\r\n}\r\n} else {\r\nsrc = (u8 *)info->screen_base + (sy + height - 1) * next_line + (sx >> 3);\r\ndest = (u8 *)info->screen_base + (dy + height - 1) * next_line + (dx >> 3);\r\nfor (rows = height; rows--;) {\r\nfb_memmove(dest, src, width >> 3);\r\nsrc -= next_line;\r\ndest -= next_line;\r\n}\r\n}\r\n}\r\nvoid atafb_mfb_fillrect(struct fb_info *info, u_long next_line, u32 color,\r\nint sy, int sx, int height, int width)\r\n{\r\nu8 *dest;\r\nu_int rows;\r\ndest = (u8 *)info->screen_base + sy * next_line + (sx >> 3);\r\nif (sx == 0 && width == next_line) {\r\nif (color)\r\nfb_memset255(dest, height * (width >> 3));\r\nelse\r\nfb_memclear(dest, height * (width >> 3));\r\n} else {\r\nfor (rows = height; rows--; dest += next_line) {\r\nif (color)\r\nfb_memset255(dest, width >> 3);\r\nelse\r\nfb_memclear_small(dest, width >> 3);\r\n}\r\n}\r\n}\r\nvoid atafb_mfb_linefill(struct fb_info *info, u_long next_line,\r\nint dy, int dx, u32 width,\r\nconst u8 *data, u32 bgcolor, u32 fgcolor)\r\n{\r\nu8 *dest;\r\nu_int rows;\r\ndest = (u8 *)info->screen_base + dy * next_line + (dx >> 3);\r\nfor (rows = width / 8; rows--; ) {\r\n*dest++ = *data++;\r\n}\r\n}\r\nint init_module(void)\r\n{\r\nreturn 0;\r\n}\r\nvoid cleanup_module(void)\r\n{\r\n}
