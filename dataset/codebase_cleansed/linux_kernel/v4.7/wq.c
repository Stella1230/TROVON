bool edac_queue_work(struct delayed_work *work, unsigned long delay)\r\n{\r\nreturn queue_delayed_work(wq, work, delay);\r\n}\r\nbool edac_mod_work(struct delayed_work *work, unsigned long delay)\r\n{\r\nreturn mod_delayed_work(wq, work, delay);\r\n}\r\nbool edac_stop_work(struct delayed_work *work)\r\n{\r\nbool ret;\r\nret = cancel_delayed_work_sync(work);\r\nflush_workqueue(wq);\r\nreturn ret;\r\n}\r\nint edac_workqueue_setup(void)\r\n{\r\nwq = create_singlethread_workqueue("edac-poller");\r\nif (!wq)\r\nreturn -ENODEV;\r\nelse\r\nreturn 0;\r\n}\r\nvoid edac_workqueue_teardown(void)\r\n{\r\nflush_workqueue(wq);\r\ndestroy_workqueue(wq);\r\nwq = NULL;\r\n}
