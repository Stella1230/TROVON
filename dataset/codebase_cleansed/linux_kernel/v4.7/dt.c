void __init *xlp_dt_init(void *fdtp)\r\n{\r\nif (!fdtp) {\r\nswitch (current_cpu_data.processor_id & PRID_IMP_MASK) {\r\n#ifdef CONFIG_DT_XLP_RVP\r\ncase PRID_IMP_NETLOGIC_XLP5XX:\r\nfdtp = __dtb_xlp_rvp_begin;\r\nbreak;\r\n#endif\r\n#ifdef CONFIG_DT_XLP_GVP\r\ncase PRID_IMP_NETLOGIC_XLP9XX:\r\nfdtp = __dtb_xlp_gvp_begin;\r\nbreak;\r\n#endif\r\n#ifdef CONFIG_DT_XLP_FVP\r\ncase PRID_IMP_NETLOGIC_XLP2XX:\r\nfdtp = __dtb_xlp_fvp_begin;\r\nbreak;\r\n#endif\r\n#ifdef CONFIG_DT_XLP_SVP\r\ncase PRID_IMP_NETLOGIC_XLP3XX:\r\nfdtp = __dtb_xlp_svp_begin;\r\nbreak;\r\n#endif\r\n#ifdef CONFIG_DT_XLP_EVP\r\ncase PRID_IMP_NETLOGIC_XLP8XX:\r\nfdtp = __dtb_xlp_evp_begin;\r\nbreak;\r\n#endif\r\ndefault:\r\nfdtp = __dtb_start;\r\nbreak;\r\n}\r\n}\r\nxlp_fdt_blob = fdtp;\r\nreturn fdtp;\r\n}\r\nvoid __init xlp_early_init_devtree(void)\r\n{\r\n__dt_setup_arch(xlp_fdt_blob);\r\n}\r\nvoid __init device_tree_init(void)\r\n{\r\nunflatten_and_copy_device_tree();\r\n}\r\nint __init xlp8xx_ds_publish_devices(void)\r\n{\r\nif (!of_have_populated_dt())\r\nreturn 0;\r\nreturn of_platform_bus_probe(NULL, xlp_ids, NULL);\r\n}
