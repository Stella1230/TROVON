static int partition_id_show(struct seq_file *s, void *p)\r\n{\r\nseq_printf(s, "%d\n", sn_partition_id);\r\nreturn 0;\r\n}\r\nstatic int partition_id_open(struct inode *inode, struct file *file)\r\n{\r\nreturn single_open(file, partition_id_show, NULL);\r\n}\r\nstatic int system_serial_number_show(struct seq_file *s, void *p)\r\n{\r\nseq_printf(s, "%s\n", sn_system_serial_number());\r\nreturn 0;\r\n}\r\nstatic int system_serial_number_open(struct inode *inode, struct file *file)\r\n{\r\nreturn single_open(file, system_serial_number_show, NULL);\r\n}\r\nstatic int licenseID_show(struct seq_file *s, void *p)\r\n{\r\nseq_printf(s, "0x%llx\n", sn_partition_serial_number_val());\r\nreturn 0;\r\n}\r\nstatic int licenseID_open(struct inode *inode, struct file *file)\r\n{\r\nreturn single_open(file, licenseID_show, NULL);\r\n}\r\nstatic int coherence_id_show(struct seq_file *s, void *p)\r\n{\r\nseq_printf(s, "%d\n", partition_coherence_id());\r\nreturn 0;\r\n}\r\nstatic int coherence_id_open(struct inode *inode, struct file *file)\r\n{\r\nreturn single_open(file, coherence_id_show, NULL);\r\n}\r\nvoid register_sn_procfs(void)\r\n{\r\nstatic struct proc_dir_entry *sgi_proc_dir = NULL;\r\nBUG_ON(sgi_proc_dir != NULL);\r\nif (!(sgi_proc_dir = proc_mkdir("sgi_sn", NULL)))\r\nreturn;\r\nproc_create("partition_id", 0444, sgi_proc_dir,\r\n&proc_partition_id_fops);\r\nproc_create("system_serial_number", 0444, sgi_proc_dir,\r\n&proc_system_sn_fops);\r\nproc_create("licenseID", 0444, sgi_proc_dir, &proc_license_id_fops);\r\nproc_create("coherence_id", 0444, sgi_proc_dir,\r\n&proc_coherence_id_fops);\r\nproc_create("sn_topology", 0444, sgi_proc_dir, &proc_sn_topo_fops);\r\n}
