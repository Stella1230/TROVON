static unsigned int r8a7778_pinmux_get_bias(struct sh_pfc *pfc,\r\nunsigned int pin)\r\n{\r\nvoid __iomem *addr;\r\nif (WARN_ON_ONCE(!pullups[pin].reg))\r\nreturn PIN_CONFIG_BIAS_DISABLE;\r\naddr = pfc->windows->virt + pullups[pin].reg;\r\nif (ioread32(addr) & BIT(pullups[pin].bit))\r\nreturn PIN_CONFIG_BIAS_PULL_UP;\r\nelse\r\nreturn PIN_CONFIG_BIAS_DISABLE;\r\n}\r\nstatic void r8a7778_pinmux_set_bias(struct sh_pfc *pfc, unsigned int pin,\r\nunsigned int bias)\r\n{\r\nvoid __iomem *addr;\r\nu32 value;\r\nu32 bit;\r\nif (WARN_ON_ONCE(!pullups[pin].reg))\r\nreturn;\r\naddr = pfc->windows->virt + pullups[pin].reg;\r\nbit = BIT(pullups[pin].bit);\r\nvalue = ioread32(addr) & ~bit;\r\nif (bias == PIN_CONFIG_BIAS_PULL_UP)\r\nvalue |= bit;\r\niowrite32(value, addr);\r\n}
