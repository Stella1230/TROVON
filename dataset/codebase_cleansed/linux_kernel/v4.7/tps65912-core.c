int tps65912_device_init(struct tps65912 *tps)\r\n{\r\nint ret;\r\nret = regmap_add_irq_chip(tps->regmap, tps->irq, IRQF_ONESHOT, 0,\r\n&tps65912_irq_chip, &tps->irq_data);\r\nif (ret)\r\nreturn ret;\r\nret = mfd_add_devices(tps->dev, PLATFORM_DEVID_AUTO, tps65912_cells,\r\nARRAY_SIZE(tps65912_cells), NULL, 0,\r\nregmap_irq_get_domain(tps->irq_data));\r\nif (ret) {\r\nregmap_del_irq_chip(tps->irq, tps->irq_data);\r\nreturn ret;\r\n}\r\nreturn 0;\r\n}\r\nint tps65912_device_exit(struct tps65912 *tps)\r\n{\r\nregmap_del_irq_chip(tps->irq, tps->irq_data);\r\nreturn 0;\r\n}
