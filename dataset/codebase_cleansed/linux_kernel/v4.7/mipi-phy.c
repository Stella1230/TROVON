int mipi_dphy_timing_get_default(struct mipi_dphy_timing *timing,\r\nunsigned long period)\r\n{\r\ntiming->clkmiss = 0;\r\ntiming->clkpost = 70 + 52 * period;\r\ntiming->clkpre = 8;\r\ntiming->clkprepare = 65;\r\ntiming->clksettle = 95;\r\ntiming->clktermen = 0;\r\ntiming->clktrail = 80;\r\ntiming->clkzero = 260;\r\ntiming->dtermen = 0;\r\ntiming->eot = 0;\r\ntiming->hsexit = 120;\r\ntiming->hsprepare = 65 + 5 * period;\r\ntiming->hszero = 145 + 5 * period;\r\ntiming->hssettle = 85 + 6 * period;\r\ntiming->hsskip = 40;\r\ntiming->hstrail = max(4 * 8 * period, 60 + 4 * 4 * period);\r\ntiming->init = 100000;\r\ntiming->lpx = 60;\r\ntiming->taget = 5 * timing->lpx;\r\ntiming->tago = 4 * timing->lpx;\r\ntiming->tasure = 2 * timing->lpx;\r\ntiming->wakeup = 1000000;\r\nreturn 0;\r\n}\r\nint mipi_dphy_timing_validate(struct mipi_dphy_timing *timing,\r\nunsigned long period)\r\n{\r\nif (timing->clkmiss > 60)\r\nreturn -EINVAL;\r\nif (timing->clkpost < (60 + 52 * period))\r\nreturn -EINVAL;\r\nif (timing->clkpre < 8)\r\nreturn -EINVAL;\r\nif (timing->clkprepare < 38 || timing->clkprepare > 95)\r\nreturn -EINVAL;\r\nif (timing->clksettle < 95 || timing->clksettle > 300)\r\nreturn -EINVAL;\r\nif (timing->clktermen > 38)\r\nreturn -EINVAL;\r\nif (timing->clktrail < 60)\r\nreturn -EINVAL;\r\nif (timing->clkprepare + timing->clkzero < 300)\r\nreturn -EINVAL;\r\nif (timing->dtermen > 35 + 4 * period)\r\nreturn -EINVAL;\r\nif (timing->eot > 105 + 12 * period)\r\nreturn -EINVAL;\r\nif (timing->hsexit < 100)\r\nreturn -EINVAL;\r\nif (timing->hsprepare < 40 + 4 * period ||\r\ntiming->hsprepare > 85 + 6 * period)\r\nreturn -EINVAL;\r\nif (timing->hsprepare + timing->hszero < 145 + 10 * period)\r\nreturn -EINVAL;\r\nif ((timing->hssettle < 85 + 6 * period) ||\r\n(timing->hssettle > 145 + 10 * period))\r\nreturn -EINVAL;\r\nif (timing->hsskip < 40 || timing->hsskip > 55 + 4 * period)\r\nreturn -EINVAL;\r\nif (timing->hstrail < max(8 * period, 60 + 4 * period))\r\nreturn -EINVAL;\r\nif (timing->init < 100000)\r\nreturn -EINVAL;\r\nif (timing->lpx < 50)\r\nreturn -EINVAL;\r\nif (timing->taget != 5 * timing->lpx)\r\nreturn -EINVAL;\r\nif (timing->tago != 4 * timing->lpx)\r\nreturn -EINVAL;\r\nif (timing->tasure < timing->lpx || timing->tasure > 2 * timing->lpx)\r\nreturn -EINVAL;\r\nif (timing->wakeup < 1000000)\r\nreturn -EINVAL;\r\nreturn 0;\r\n}
