int amdgpu_gfx_scratch_get(struct amdgpu_device *adev, uint32_t *reg)\r\n{\r\nint i;\r\nfor (i = 0; i < adev->gfx.scratch.num_reg; i++) {\r\nif (adev->gfx.scratch.free[i]) {\r\nadev->gfx.scratch.free[i] = false;\r\n*reg = adev->gfx.scratch.reg[i];\r\nreturn 0;\r\n}\r\n}\r\nreturn -EINVAL;\r\n}\r\nvoid amdgpu_gfx_scratch_free(struct amdgpu_device *adev, uint32_t reg)\r\n{\r\nint i;\r\nfor (i = 0; i < adev->gfx.scratch.num_reg; i++) {\r\nif (adev->gfx.scratch.reg[i] == reg) {\r\nadev->gfx.scratch.free[i] = true;\r\nreturn;\r\n}\r\n}\r\n}
