static int bxt_pinctrl_probe(struct platform_device *pdev)\r\n{\r\nconst struct intel_pinctrl_soc_data *soc_data = NULL;\r\nconst struct intel_pinctrl_soc_data **soc_table;\r\nconst struct acpi_device_id *id;\r\nstruct acpi_device *adev;\r\nint i;\r\nadev = ACPI_COMPANION(&pdev->dev);\r\nif (!adev)\r\nreturn -ENODEV;\r\nid = acpi_match_device(bxt_pinctrl_acpi_match, &pdev->dev);\r\nif (!id)\r\nreturn -ENODEV;\r\nsoc_table = (const struct intel_pinctrl_soc_data **)id->driver_data;\r\nfor (i = 0; soc_table[i]; i++) {\r\nif (!strcmp(adev->pnp.unique_id, soc_table[i]->uid)) {\r\nsoc_data = soc_table[i];\r\nbreak;\r\n}\r\n}\r\nif (!soc_data)\r\nreturn -ENODEV;\r\nreturn intel_pinctrl_probe(pdev, soc_data);\r\n}\r\nstatic int __init bxt_pinctrl_init(void)\r\n{\r\nreturn platform_driver_register(&bxt_pinctrl_driver);\r\n}\r\nstatic void __exit bxt_pinctrl_exit(void)\r\n{\r\nplatform_driver_unregister(&bxt_pinctrl_driver);\r\n}
