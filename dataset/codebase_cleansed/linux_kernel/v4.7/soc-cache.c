int snd_soc_cache_init(struct snd_soc_codec *codec)\r\n{\r\nconst struct snd_soc_codec_driver *codec_drv = codec->driver;\r\nsize_t reg_size;\r\nreg_size = codec_drv->reg_cache_size * codec_drv->reg_word_size;\r\nif (!reg_size)\r\nreturn 0;\r\ndev_dbg(codec->dev, "ASoC: Initializing cache for %s codec\n",\r\ncodec->component.name);\r\nif (codec_drv->reg_cache_default)\r\ncodec->reg_cache = kmemdup(codec_drv->reg_cache_default,\r\nreg_size, GFP_KERNEL);\r\nelse\r\ncodec->reg_cache = kzalloc(reg_size, GFP_KERNEL);\r\nif (!codec->reg_cache)\r\nreturn -ENOMEM;\r\nreturn 0;\r\n}\r\nint snd_soc_cache_exit(struct snd_soc_codec *codec)\r\n{\r\ndev_dbg(codec->dev, "ASoC: Destroying cache for %s codec\n",\r\ncodec->component.name);\r\nkfree(codec->reg_cache);\r\ncodec->reg_cache = NULL;\r\nreturn 0;\r\n}
