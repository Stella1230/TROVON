int\r\nnv41_ram_new(struct nvkm_fb *fb, struct nvkm_ram **pram)\r\n{\r\nstruct nvkm_device *device = fb->subdev.device;\r\nu32 size = nvkm_rd32(device, 0x10020c) & 0xff000000;\r\nu32 tags = nvkm_rd32(device, 0x100320);\r\nu32 fb474 = nvkm_rd32(device, 0x100474);\r\nenum nvkm_ram_type type = NVKM_RAM_TYPE_UNKNOWN;\r\nint ret;\r\nif (fb474 & 0x00000004)\r\ntype = NVKM_RAM_TYPE_GDDR3;\r\nif (fb474 & 0x00000002)\r\ntype = NVKM_RAM_TYPE_DDR2;\r\nif (fb474 & 0x00000001)\r\ntype = NVKM_RAM_TYPE_DDR1;\r\nret = nv40_ram_new_(fb, type, size, tags, pram);\r\nif (ret)\r\nreturn ret;\r\n(*pram)->parts = (nvkm_rd32(device, 0x100200) & 0x00000003) + 1;\r\nreturn 0;\r\n}
