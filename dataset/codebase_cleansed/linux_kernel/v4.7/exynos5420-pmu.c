static void exynos5420_powerdown_conf(enum sys_powerdown mode)\r\n{\r\nu32 this_cluster;\r\nthis_cluster = MPIDR_AFFINITY_LEVEL(read_cpuid_mpidr(), 1);\r\npmu_raw_writel(this_cluster, EXYNOS_IROM_DATA2);\r\n}\r\nstatic void exynos5420_pmu_init(void)\r\n{\r\nunsigned int value;\r\nint i;\r\nfor (i = 0; i < ARRAY_SIZE(exynos5420_list_disable_pmu_reg); i++)\r\npmu_raw_writel(0, exynos5420_list_disable_pmu_reg[i]);\r\npmu_raw_writel(EXYNOS5420_USE_STANDBY_WFI_ALL, S5P_CENTRAL_SEQ_OPTION);\r\nvalue = pmu_raw_readl(EXYNOS_L2_OPTION(0));\r\nvalue &= ~EXYNOS5_USE_RETENTION;\r\npmu_raw_writel(value, EXYNOS_L2_OPTION(0));\r\nvalue = pmu_raw_readl(EXYNOS_L2_OPTION(1));\r\nvalue &= ~EXYNOS5_USE_RETENTION;\r\npmu_raw_writel(value, EXYNOS_L2_OPTION(1));\r\nvalue = pmu_raw_readl(EXYNOS5420_LPI_MASK);\r\nvalue |= EXYNOS5420_ATB_ISP_ARM;\r\npmu_raw_writel(value, EXYNOS5420_LPI_MASK);\r\nvalue = pmu_raw_readl(EXYNOS5420_LPI_MASK1);\r\nvalue |= EXYNOS5420_ATB_KFC;\r\npmu_raw_writel(value, EXYNOS5420_LPI_MASK1);\r\nvalue = pmu_raw_readl(EXYNOS5420_ARM_COMMON_OPTION);\r\nvalue |= EXYNOS5_SKIP_DEACTIVATE_ACEACP_IN_PWDN;\r\npmu_raw_writel(value, EXYNOS5420_ARM_COMMON_OPTION);\r\nvalue = pmu_raw_readl(EXYNOS5420_KFC_COMMON_OPTION);\r\nvalue |= EXYNOS5_SKIP_DEACTIVATE_ACEACP_IN_PWDN;\r\npmu_raw_writel(value, EXYNOS5420_KFC_COMMON_OPTION);\r\npmu_raw_writel(DUR_WAIT_RESET, EXYNOS5420_LOGIC_RESET_DURATION3);\r\npmu_raw_writel(SPREAD_ENABLE, EXYNOS5420_ARM_INTR_SPREAD_ENABLE);\r\npmu_raw_writel(SPREAD_USE_STANDWFI,\r\nEXYNOS5420_ARM_INTR_SPREAD_USE_STANDBYWFI);\r\npmu_raw_writel(0x1, EXYNOS5420_UP_SCHEDULER);\r\npr_info("EXYNOS5420 PMU initialized\n");\r\n}
