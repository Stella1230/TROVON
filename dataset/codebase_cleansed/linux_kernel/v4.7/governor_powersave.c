static int devfreq_powersave_func(struct devfreq *df,\r\nunsigned long *freq)\r\n{\r\n*freq = df->min_freq;\r\nreturn 0;\r\n}\r\nstatic int devfreq_powersave_handler(struct devfreq *devfreq,\r\nunsigned int event, void *data)\r\n{\r\nint ret = 0;\r\nif (event == DEVFREQ_GOV_START) {\r\nmutex_lock(&devfreq->lock);\r\nret = update_devfreq(devfreq);\r\nmutex_unlock(&devfreq->lock);\r\n}\r\nreturn ret;\r\n}\r\nstatic int __init devfreq_powersave_init(void)\r\n{\r\nreturn devfreq_add_governor(&devfreq_powersave);\r\n}\r\nstatic void __exit devfreq_powersave_exit(void)\r\n{\r\nint ret;\r\nret = devfreq_remove_governor(&devfreq_powersave);\r\nif (ret)\r\npr_err("%s: failed remove governor %d\n", __func__, ret);\r\nreturn;\r\n}
