void __init ath79_register_uart(void)\r\n{\r\nunsigned long uart_clk_rate;\r\nuart_clk_rate = ath79_get_sys_clk_rate("uart");\r\nif (soc_is_ar71xx() ||\r\nsoc_is_ar724x() ||\r\nsoc_is_ar913x() ||\r\nsoc_is_ar934x() ||\r\nsoc_is_qca955x()) {\r\nath79_uart_data[0].uartclk = uart_clk_rate;\r\nplatform_device_register(&ath79_uart_device);\r\n} else if (soc_is_ar933x()) {\r\nplatform_device_register(&ar933x_uart_device);\r\n} else {\r\nBUG();\r\n}\r\n}\r\nvoid __init ath79_register_wdt(void)\r\n{\r\nstruct resource res;\r\nmemset(&res, 0, sizeof(res));\r\nres.flags = IORESOURCE_MEM;\r\nres.start = AR71XX_RESET_BASE + AR71XX_RESET_REG_WDOG_CTRL;\r\nres.end = res.start + 0x8 - 1;\r\nplatform_device_register_simple("ath79-wdt", -1, &res, 1);\r\n}\r\nvoid __init ath79_gpio_init(void)\r\n{\r\nif (soc_is_ar71xx()) {\r\nath79_gpio_pdata.ngpios = AR71XX_GPIO_COUNT;\r\n} else if (soc_is_ar7240()) {\r\nath79_gpio_pdata.ngpios = AR7240_GPIO_COUNT;\r\n} else if (soc_is_ar7241() || soc_is_ar7242()) {\r\nath79_gpio_pdata.ngpios = AR7241_GPIO_COUNT;\r\n} else if (soc_is_ar913x()) {\r\nath79_gpio_pdata.ngpios = AR913X_GPIO_COUNT;\r\n} else if (soc_is_ar933x()) {\r\nath79_gpio_pdata.ngpios = AR933X_GPIO_COUNT;\r\n} else if (soc_is_ar934x()) {\r\nath79_gpio_pdata.ngpios = AR934X_GPIO_COUNT;\r\nath79_gpio_pdata.oe_inverted = 1;\r\n} else if (soc_is_qca955x()) {\r\nath79_gpio_pdata.ngpios = QCA955X_GPIO_COUNT;\r\nath79_gpio_pdata.oe_inverted = 1;\r\n} else {\r\nBUG();\r\n}\r\nplatform_device_register(&ath79_gpio_device);\r\n}
