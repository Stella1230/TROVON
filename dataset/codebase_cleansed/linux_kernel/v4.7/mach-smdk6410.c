static void smdk6410_lcd_power_set(struct plat_lcd_data *pd,\r\nunsigned int power)\r\n{\r\nif (power) {\r\ngpio_direction_output(S3C64XX_GPF(13), 1);\r\ngpio_direction_output(S3C64XX_GPN(5), 0);\r\nmsleep(10);\r\ngpio_direction_output(S3C64XX_GPN(5), 1);\r\nmsleep(1);\r\n} else {\r\ngpio_direction_output(S3C64XX_GPF(13), 0);\r\n}\r\n}\r\nstatic int __init smdk6410_wm8350_init(struct wm8350 *wm8350)\r\n{\r\nint i;\r\ns3c_gpio_setpull(S3C64XX_GPN(12), S3C_GPIO_PULL_UP);\r\nfor (i = 0; i < ARRAY_SIZE(wm1190_regulators); i++)\r\nwm8350_register_regulator(wm8350,\r\nwm1190_regulators[i].regulator,\r\nwm1190_regulators[i].initdata);\r\nreturn 0;\r\n}\r\nstatic int wm1192_pre_init(struct wm831x *wm831x)\r\n{\r\nint ret;\r\ns3c_gpio_setpull(S3C64XX_GPN(12), S3C_GPIO_PULL_UP);\r\nret = platform_device_register(&wm1192_pmic_led_dev);\r\nif (ret != 0)\r\ndev_err(wm831x->dev, "Failed to add PMIC LED: %d\n", ret);\r\nreturn 0;\r\n}\r\nstatic void __init smdk6410_map_io(void)\r\n{\r\nu32 tmp;\r\ns3c64xx_init_io(smdk6410_iodesc, ARRAY_SIZE(smdk6410_iodesc));\r\ns3c64xx_set_xtal_freq(12000000);\r\ns3c24xx_init_uarts(smdk6410_uartcfgs, ARRAY_SIZE(smdk6410_uartcfgs));\r\nsamsung_set_timer_source(SAMSUNG_PWM3, SAMSUNG_PWM4);\r\ntmp = __raw_readl(S3C64XX_SPCON);\r\ntmp &= ~S3C64XX_SPCON_LCD_SEL_MASK;\r\ntmp |= S3C64XX_SPCON_LCD_SEL_RGB;\r\n__raw_writel(tmp, S3C64XX_SPCON);\r\ntmp = __raw_readl(S3C64XX_MODEM_MIFPCON);\r\ntmp &= ~MIFPCON_LCD_BYPASS;\r\n__raw_writel(tmp, S3C64XX_MODEM_MIFPCON);\r\n}\r\nstatic void __init smdk6410_machine_init(void)\r\n{\r\nu32 cs1;\r\ns3c_i2c0_set_platdata(NULL);\r\ns3c_i2c1_set_platdata(NULL);\r\ns3c_fb_set_platdata(&smdk6410_lcd_pdata);\r\ndwc2_hsotg_set_platdata(&smdk6410_hsotg_pdata);\r\nsamsung_keypad_set_platdata(&smdk6410_keypad_data);\r\ns3c64xx_ts_set_platdata(NULL);\r\ncs1 = __raw_readl(S3C64XX_SROM_BW) &\r\n~(S3C64XX_SROM_BW__CS_MASK << S3C64XX_SROM_BW__NCS1__SHIFT);\r\ncs1 |= ((1 << S3C64XX_SROM_BW__DATAWIDTH__SHIFT) |\r\n(1 << S3C64XX_SROM_BW__WAITENABLE__SHIFT) |\r\n(1 << S3C64XX_SROM_BW__BYTEENABLE__SHIFT)) <<\r\nS3C64XX_SROM_BW__NCS1__SHIFT;\r\n__raw_writel(cs1, S3C64XX_SROM_BW);\r\n__raw_writel((0 << S3C64XX_SROM_BCX__PMC__SHIFT) |\r\n(6 << S3C64XX_SROM_BCX__TACP__SHIFT) |\r\n(4 << S3C64XX_SROM_BCX__TCAH__SHIFT) |\r\n(1 << S3C64XX_SROM_BCX__TCOH__SHIFT) |\r\n(0xe << S3C64XX_SROM_BCX__TACC__SHIFT) |\r\n(4 << S3C64XX_SROM_BCX__TCOS__SHIFT) |\r\n(0 << S3C64XX_SROM_BCX__TACS__SHIFT), S3C64XX_SROM_BC1);\r\ngpio_request(S3C64XX_GPN(5), "LCD power");\r\ngpio_request(S3C64XX_GPF(13), "LCD power");\r\ni2c_register_board_info(0, i2c_devs0, ARRAY_SIZE(i2c_devs0));\r\ni2c_register_board_info(1, i2c_devs1, ARRAY_SIZE(i2c_devs1));\r\ns3c_ide_set_platdata(&smdk6410_ide_pdata);\r\nplatform_add_devices(smdk6410_devices, ARRAY_SIZE(smdk6410_devices));\r\npwm_add_table(smdk6410_pwm_lookup, ARRAY_SIZE(smdk6410_pwm_lookup));\r\nsamsung_bl_set(&smdk6410_bl_gpio_info, &smdk6410_bl_data);\r\n}
