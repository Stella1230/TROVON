void c8sectpfe_debugfs_init(struct c8sectpfei *fei)\r\n{\r\nstruct dentry *root;\r\nstruct dentry *file;\r\nroot = debugfs_create_dir("c8sectpfe", NULL);\r\nif (!root)\r\ngoto err;\r\nfei->root = root;\r\nfei->regset = devm_kzalloc(fei->dev, sizeof(*fei->regset), GFP_KERNEL);\r\nif (!fei->regset)\r\ngoto err;\r\nfei->regset->regs = fei_sys_regs;\r\nfei->regset->nregs = ARRAY_SIZE(fei_sys_regs);\r\nfei->regset->base = fei->io;\r\nfile = debugfs_create_regset32("registers", S_IRUGO, root,\r\nfei->regset);\r\nif (!file) {\r\ndev_err(fei->dev,\r\n"%s not able to create 'registers' debugfs\n"\r\n, __func__);\r\ngoto err;\r\n}\r\nreturn;\r\nerr:\r\ndebugfs_remove_recursive(root);\r\n}\r\nvoid c8sectpfe_debugfs_exit(struct c8sectpfei *fei)\r\n{\r\ndebugfs_remove_recursive(fei->root);\r\nfei->root = NULL;\r\n}
