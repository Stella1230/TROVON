struct fence *sw_sync_pt_create(struct sw_sync_timeline *obj, u32 value)\r\n{\r\nstruct sw_sync_pt *pt;\r\npt = (struct sw_sync_pt *)\r\nsync_pt_create(&obj->obj, sizeof(struct sw_sync_pt));\r\npt->value = value;\r\nreturn (struct fence *)pt;\r\n}\r\nstatic int sw_sync_fence_has_signaled(struct fence *fence)\r\n{\r\nstruct sw_sync_pt *pt = (struct sw_sync_pt *)fence;\r\nstruct sw_sync_timeline *obj =\r\n(struct sw_sync_timeline *)fence_parent(fence);\r\nreturn (pt->value > obj->value) ? 0 : 1;\r\n}\r\nstatic void sw_sync_timeline_value_str(struct sync_timeline *sync_timeline,\r\nchar *str, int size)\r\n{\r\nstruct sw_sync_timeline *timeline =\r\n(struct sw_sync_timeline *)sync_timeline;\r\nsnprintf(str, size, "%d", timeline->value);\r\n}\r\nstatic void sw_sync_fence_value_str(struct fence *fence, char *str, int size)\r\n{\r\nstruct sw_sync_pt *pt = (struct sw_sync_pt *)fence;\r\nsnprintf(str, size, "%d", pt->value);\r\n}\r\nstruct sw_sync_timeline *sw_sync_timeline_create(const char *name)\r\n{\r\nstruct sw_sync_timeline *obj = (struct sw_sync_timeline *)\r\nsync_timeline_create(&sw_sync_timeline_ops,\r\nsizeof(struct sw_sync_timeline),\r\nname);\r\nreturn obj;\r\n}\r\nvoid sw_sync_timeline_inc(struct sw_sync_timeline *obj, u32 inc)\r\n{\r\nobj->value += inc;\r\nsync_timeline_signal(&obj->obj);\r\n}
