int fsl_dcu_drm_modeset_init(struct fsl_dcu_drm_device *fsl_dev)\r\n{\r\nint ret;\r\ndrm_mode_config_init(fsl_dev->drm);\r\nfsl_dev->drm->mode_config.min_width = 0;\r\nfsl_dev->drm->mode_config.min_height = 0;\r\nfsl_dev->drm->mode_config.max_width = 2031;\r\nfsl_dev->drm->mode_config.max_height = 2047;\r\nfsl_dev->drm->mode_config.funcs = &fsl_dcu_drm_mode_config_funcs;\r\nret = fsl_dcu_drm_crtc_create(fsl_dev);\r\nif (ret)\r\nreturn ret;\r\nret = fsl_dcu_drm_encoder_create(fsl_dev, &fsl_dev->crtc);\r\nif (ret)\r\ngoto fail_encoder;\r\nret = fsl_dcu_drm_connector_create(fsl_dev, &fsl_dev->encoder);\r\nif (ret)\r\ngoto fail_connector;\r\ndrm_mode_config_reset(fsl_dev->drm);\r\ndrm_kms_helper_poll_init(fsl_dev->drm);\r\nreturn 0;\r\nfail_encoder:\r\nfsl_dev->crtc.funcs->destroy(&fsl_dev->crtc);\r\nfail_connector:\r\nfsl_dev->encoder.funcs->destroy(&fsl_dev->encoder);\r\nreturn ret;\r\n}
