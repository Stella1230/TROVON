union ieee754sp ieee754sp_neg(union ieee754sp x)\r\n{\r\nunion ieee754sp y;\r\nif (ieee754_csr.abs2008) {\r\ny = x;\r\nSPSIGN(y) = !SPSIGN(x);\r\n} else {\r\nunsigned int oldrm;\r\noldrm = ieee754_csr.rm;\r\nieee754_csr.rm = FPU_CSR_RD;\r\ny = ieee754sp_sub(ieee754sp_zero(0), x);\r\nieee754_csr.rm = oldrm;\r\n}\r\nreturn y;\r\n}\r\nunion ieee754sp ieee754sp_abs(union ieee754sp x)\r\n{\r\nunion ieee754sp y;\r\nif (ieee754_csr.abs2008) {\r\ny = x;\r\nSPSIGN(y) = 0;\r\n} else {\r\nunsigned int oldrm;\r\noldrm = ieee754_csr.rm;\r\nieee754_csr.rm = FPU_CSR_RD;\r\nif (SPSIGN(x))\r\ny = ieee754sp_sub(ieee754sp_zero(0), x);\r\nelse\r\ny = ieee754sp_add(ieee754sp_zero(0), x);\r\nieee754_csr.rm = oldrm;\r\n}\r\nreturn y;\r\n}
