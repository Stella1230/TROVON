static int bast_pm_suspend(void)\r\n{\r\ngpio_direction_output(S3C2410_GPA(21), 1);\r\nreturn 0;\r\n}\r\nstatic void bast_pm_resume(void)\r\n{\r\ns3c_gpio_cfgpin(S3C2410_GPA(21), S3C2410_GPA21_nRSTOUT);\r\n}\r\nstatic void bast_nand_select(struct s3c2410_nand_set *set, int slot)\r\n{\r\nunsigned int tmp;\r\nslot = set->nr_map[slot] & 3;\r\npr_debug("bast_nand: selecting slot %d (set %p,%p)\n",\r\nslot, set, set->nr_map);\r\ntmp = __raw_readb(BAST_VA_CTRL2);\r\ntmp &= BAST_CPLD_CTLR2_IDERST;\r\ntmp |= slot;\r\ntmp |= BAST_CPLD_CTRL2_WNAND;\r\npr_debug("bast_nand: ctrl2 now %02x\n", tmp);\r\n__raw_writeb(tmp, BAST_VA_CTRL2);\r\n}\r\nstatic void __init bast_map_io(void)\r\n{\r\ns3c_hwmon_set_platdata(&bast_hwmon_info);\r\ns3c24xx_init_io(bast_iodesc, ARRAY_SIZE(bast_iodesc));\r\ns3c24xx_init_uarts(bast_uartcfgs, ARRAY_SIZE(bast_uartcfgs));\r\nsamsung_set_timer_source(SAMSUNG_PWM3, SAMSUNG_PWM4);\r\n}\r\nstatic void __init bast_init_time(void)\r\n{\r\ns3c2410_init_clocks(12000000);\r\nsamsung_timer_init();\r\n}\r\nstatic void __init bast_init(void)\r\n{\r\nregister_syscore_ops(&bast_pm_syscore_ops);\r\ns3c_i2c0_set_platdata(&bast_i2c_info);\r\ns3c_nand_set_platdata(&bast_nand_info);\r\ns3c24xx_fb_set_platdata(&bast_fb_info);\r\nplatform_add_devices(bast_devices, ARRAY_SIZE(bast_devices));\r\ni2c_register_board_info(0, bast_i2c_devs,\r\nARRAY_SIZE(bast_i2c_devs));\r\nusb_simtec_init();\r\nnor_simtec_init();\r\nsimtec_audio_add(NULL, true, &bast_audio);\r\nWARN_ON(gpio_request(S3C2410_GPA(21), "bast nreset"));\r\ns3c_cpufreq_setboard(&bast_cpufreq);\r\n}
