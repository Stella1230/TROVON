static int pxa27x_pinctrl_probe(struct platform_device *pdev)\r\n{\r\nint ret, i;\r\nvoid __iomem *base_af[8];\r\nvoid __iomem *base_dir[4];\r\nvoid __iomem *base_sleep[4];\r\nstruct resource *res;\r\nres = platform_get_resource(pdev, IORESOURCE_MEM, 0);\r\nbase_af[0] = devm_ioremap_resource(&pdev->dev, res);\r\nif (IS_ERR(base_af[0]))\r\nreturn PTR_ERR(base_af[0]);\r\nres = platform_get_resource(pdev, IORESOURCE_MEM, 1);\r\nbase_dir[0] = devm_ioremap_resource(&pdev->dev, res);\r\nif (IS_ERR(base_dir[0]))\r\nreturn PTR_ERR(base_dir[0]);\r\nres = platform_get_resource(pdev, IORESOURCE_MEM, 2);\r\nbase_dir[3] = devm_ioremap_resource(&pdev->dev, res);\r\nif (IS_ERR(base_dir[3]))\r\nreturn PTR_ERR(base_dir[3]);\r\nres = platform_get_resource(pdev, IORESOURCE_MEM, 3);\r\nbase_sleep[0] = devm_ioremap_resource(&pdev->dev, res);\r\nif (IS_ERR(base_sleep[0]))\r\nreturn PTR_ERR(base_sleep[0]);\r\nfor (i = 0; i < ARRAY_SIZE(base_af); i++)\r\nbase_af[i] = base_af[0] + sizeof(base_af[0]) * i;\r\nfor (i = 0; i < 3; i++)\r\nbase_dir[i] = base_dir[0] + sizeof(base_dir[0]) * i;\r\nfor (i = 0; i < ARRAY_SIZE(base_sleep); i++)\r\nbase_sleep[i] = base_sleep[0] + sizeof(base_af[0]) * i;\r\nret = pxa2xx_pinctrl_init(pdev, pxa27x_pins, ARRAY_SIZE(pxa27x_pins),\r\nbase_af, base_dir, base_sleep);\r\nreturn ret;\r\n}
