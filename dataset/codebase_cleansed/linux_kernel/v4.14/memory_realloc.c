bool reallocate_buffer(\r\nhrt_vaddress *curr_buf,\r\nsize_t *curr_size,\r\nsize_t needed_size,\r\nbool force,\r\nenum ia_css_err *err)\r\n{\r\nbool ret;\r\nuint16_t mmgr_attribute = MMGR_ATTRIBUTE_DEFAULT;\r\nIA_CSS_ENTER_PRIVATE("void");\r\nret = realloc_isp_css_mm_buf(curr_buf,\r\ncurr_size, needed_size, force, err, mmgr_attribute);\r\nIA_CSS_LEAVE_PRIVATE("ret=%d", ret);\r\nreturn ret;\r\n}\r\nstatic bool realloc_isp_css_mm_buf(\r\nhrt_vaddress *curr_buf,\r\nsize_t *curr_size,\r\nsize_t needed_size,\r\nbool force,\r\nenum ia_css_err *err,\r\nuint16_t mmgr_attribute)\r\n{\r\nint32_t id;\r\n*err = IA_CSS_SUCCESS;\r\nIA_CSS_ENTER_PRIVATE("void");\r\nif (ia_css_refcount_is_single(*curr_buf) && !force && *curr_size >= needed_size) {\r\nIA_CSS_LEAVE_PRIVATE("false");\r\nreturn false;\r\n}\r\nid = IA_CSS_REFCOUNT_PARAM_BUFFER;\r\nia_css_refcount_decrement(id, *curr_buf);\r\n*curr_buf = ia_css_refcount_increment(id, mmgr_alloc_attr(needed_size,\r\nmmgr_attribute));\r\nif (!*curr_buf) {\r\n*err = IA_CSS_ERR_CANNOT_ALLOCATE_MEMORY;\r\n*curr_size = 0;\r\n} else {\r\n*curr_size = needed_size;\r\n}\r\nIA_CSS_LEAVE_PRIVATE("true");\r\nreturn true;\r\n}
