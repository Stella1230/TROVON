int\r\ndbl_fcmp (dbl_floating_point * leftptr, dbl_floating_point * rightptr,\r\nunsigned int cond, unsigned int *status)\r\n{\r\nregister unsigned int leftp1, leftp2, rightp1, rightp2;\r\nregister int xorresult;\r\nDbl_copyfromptr(leftptr,leftp1,leftp2);\r\nDbl_copyfromptr(rightptr,rightp1,rightp2);\r\nif( (Dbl_exponent(leftp1) == DBL_INFINITY_EXPONENT)\r\n|| (Dbl_exponent(rightp1) == DBL_INFINITY_EXPONENT) )\r\n{\r\nif( ((Dbl_exponent(leftp1) == DBL_INFINITY_EXPONENT)\r\n&& Dbl_isnotzero_mantissa(leftp1,leftp2)\r\n&& (Exception(cond) || Dbl_isone_signaling(leftp1)))\r\n||\r\n((Dbl_exponent(rightp1) == DBL_INFINITY_EXPONENT)\r\n&& Dbl_isnotzero_mantissa(rightp1,rightp2)\r\n&& (Exception(cond) || Dbl_isone_signaling(rightp1))) )\r\n{\r\nif( Is_invalidtrap_enabled() ) {\r\nSet_status_cbit(Unordered(cond));\r\nreturn(INVALIDEXCEPTION);\r\n}\r\nelse Set_invalidflag();\r\nSet_status_cbit(Unordered(cond));\r\nreturn(NOEXCEPTION);\r\n}\r\nelse if( ((Dbl_exponent(leftp1) == DBL_INFINITY_EXPONENT)\r\n&& Dbl_isnotzero_mantissa(leftp1,leftp2))\r\n||\r\n((Dbl_exponent(rightp1) == DBL_INFINITY_EXPONENT)\r\n&& Dbl_isnotzero_mantissa(rightp1,rightp2)) )\r\n{\r\nSet_status_cbit(Unordered(cond));\r\nreturn(NOEXCEPTION);\r\n}\r\n}\r\nDbl_xortointp1(leftp1,rightp1,xorresult);\r\nif( xorresult < 0 )\r\n{\r\nif( Dbl_iszero_exponentmantissa(leftp1,leftp2)\r\n&& Dbl_iszero_exponentmantissa(rightp1,rightp2) )\r\n{\r\nSet_status_cbit(Equal(cond));\r\n}\r\nelse if( Dbl_isone_sign(leftp1) )\r\n{\r\nSet_status_cbit(Lessthan(cond));\r\n}\r\nelse\r\n{\r\nSet_status_cbit(Greaterthan(cond));\r\n}\r\n}\r\nelse if(Dbl_isequal(leftp1,leftp2,rightp1,rightp2))\r\n{\r\nSet_status_cbit(Equal(cond));\r\n}\r\nelse if( Dbl_iszero_sign(leftp1) )\r\n{\r\nif( Dbl_allp1(leftp1) < Dbl_allp1(rightp1) )\r\n{\r\nSet_status_cbit(Lessthan(cond));\r\n}\r\nelse if( Dbl_allp1(leftp1) > Dbl_allp1(rightp1) )\r\n{\r\nSet_status_cbit(Greaterthan(cond));\r\n}\r\nelse\r\n{\r\nif( Dbl_allp2(leftp2) < Dbl_allp2(rightp2) )\r\n{\r\nSet_status_cbit(Lessthan(cond));\r\n}\r\nelse\r\n{\r\nSet_status_cbit(Greaterthan(cond));\r\n}\r\n}\r\n}\r\nelse\r\n{\r\nif( Dbl_allp1(leftp1) > Dbl_allp1(rightp1) )\r\n{\r\nSet_status_cbit(Lessthan(cond));\r\n}\r\nelse if( Dbl_allp1(leftp1) < Dbl_allp1(rightp1) )\r\n{\r\nSet_status_cbit(Greaterthan(cond));\r\n}\r\nelse\r\n{\r\nif( Dbl_allp2(leftp2) > Dbl_allp2(rightp2) )\r\n{\r\nSet_status_cbit(Lessthan(cond));\r\n}\r\nelse\r\n{\r\nSet_status_cbit(Greaterthan(cond));\r\n}\r\n}\r\n}\r\nreturn(NOEXCEPTION);\r\n}
