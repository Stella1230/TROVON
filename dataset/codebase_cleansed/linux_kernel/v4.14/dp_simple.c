union ieee754dp ieee754dp_neg(union ieee754dp x)\r\n{\r\nunion ieee754dp y;\r\nif (ieee754_csr.abs2008) {\r\ny = x;\r\nDPSIGN(y) = !DPSIGN(x);\r\n} else {\r\nunsigned int oldrm;\r\noldrm = ieee754_csr.rm;\r\nieee754_csr.rm = FPU_CSR_RD;\r\ny = ieee754dp_sub(ieee754dp_zero(0), x);\r\nieee754_csr.rm = oldrm;\r\n}\r\nreturn y;\r\n}\r\nunion ieee754dp ieee754dp_abs(union ieee754dp x)\r\n{\r\nunion ieee754dp y;\r\nif (ieee754_csr.abs2008) {\r\ny = x;\r\nDPSIGN(y) = 0;\r\n} else {\r\nunsigned int oldrm;\r\noldrm = ieee754_csr.rm;\r\nieee754_csr.rm = FPU_CSR_RD;\r\nif (DPSIGN(x))\r\ny = ieee754dp_sub(ieee754dp_zero(0), x);\r\nelse\r\ny = ieee754dp_add(ieee754dp_zero(0), x);\r\nieee754_csr.rm = oldrm;\r\n}\r\nreturn y;\r\n}
