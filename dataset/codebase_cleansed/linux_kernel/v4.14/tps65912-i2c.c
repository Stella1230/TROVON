static int tps65912_i2c_probe(struct i2c_client *client,\r\nconst struct i2c_device_id *ids)\r\n{\r\nstruct tps65912 *tps;\r\ntps = devm_kzalloc(&client->dev, sizeof(*tps), GFP_KERNEL);\r\nif (!tps)\r\nreturn -ENOMEM;\r\ni2c_set_clientdata(client, tps);\r\ntps->dev = &client->dev;\r\ntps->irq = client->irq;\r\ntps->regmap = devm_regmap_init_i2c(client, &tps65912_regmap_config);\r\nif (IS_ERR(tps->regmap)) {\r\ndev_err(tps->dev, "Failed to initialize register map\n");\r\nreturn PTR_ERR(tps->regmap);\r\n}\r\nreturn tps65912_device_init(tps);\r\n}\r\nstatic int tps65912_i2c_remove(struct i2c_client *client)\r\n{\r\nstruct tps65912 *tps = i2c_get_clientdata(client);\r\nreturn tps65912_device_exit(tps);\r\n}
