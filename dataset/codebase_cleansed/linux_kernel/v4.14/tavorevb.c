static void __init tavorevb_init_keypad(void)\r\n{\r\npxa_set_keypad_info(&tavorevb_keypad_info);\r\n}\r\nstatic inline void tavorevb_init_keypad(void) {}\r\nstatic void ltm020d550_lcd_power(int on, struct fb_var_screeninfo *var)\r\n{\r\nstruct fb_info *info = container_of(var, struct fb_info, var);\r\nif (on) {\r\npxafb_smart_queue(info, ARRAY_AND_SIZE(panel_init));\r\npxafb_smart_queue(info, ARRAY_AND_SIZE(panel_on));\r\n} else {\r\npxafb_smart_queue(info, ARRAY_AND_SIZE(panel_off));\r\n}\r\nif (pxafb_smart_flush(info))\r\npr_err("%s: timed out\n", __func__);\r\n}\r\nstatic void ltm020d550_update(struct fb_info *info)\r\n{\r\npxafb_smart_queue(info, ARRAY_AND_SIZE(update_framedata));\r\npxafb_smart_flush(info);\r\n}\r\nstatic void __init tavorevb_init_lcd(void)\r\n{\r\npwm_add_table(tavorevb_pwm_lookup, ARRAY_SIZE(tavorevb_pwm_lookup));\r\nplatform_device_register(&tavorevb_backlight_devices[0]);\r\nplatform_device_register(&tavorevb_backlight_devices[1]);\r\npxa_set_fb_info(NULL, &tavorevb_lcd_info);\r\n}\r\nstatic inline void tavorevb_init_lcd(void) {}\r\nstatic void __init tavorevb_init(void)\r\n{\r\npxa3xx_mfp_config(ARRAY_AND_SIZE(tavorevb_mfp_cfg));\r\npxa_set_ffuart_info(NULL);\r\npxa_set_btuart_info(NULL);\r\npxa_set_stuart_info(NULL);\r\nplatform_device_register(&smc91x_device);\r\ntavorevb_init_lcd();\r\ntavorevb_init_keypad();\r\n}
