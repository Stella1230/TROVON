static u32 __init armada_375_get_tclk_freq(void __iomem *sar)\r\n{\r\nu8 tclk_freq_select;\r\ntclk_freq_select = ((readl(sar) >> SAR1_A375_TCLK_FREQ_OPT) &\r\nSAR1_A375_TCLK_FREQ_OPT_MASK);\r\nreturn armada_375_tclk_frequencies[tclk_freq_select];\r\n}\r\nstatic u32 __init armada_375_get_cpu_freq(void __iomem *sar)\r\n{\r\nu8 cpu_freq_select;\r\ncpu_freq_select = ((readl(sar) >> SAR1_A375_CPU_DDR_L2_FREQ_OPT) &\r\nSAR1_A375_CPU_DDR_L2_FREQ_OPT_MASK);\r\nif (cpu_freq_select >= ARRAY_SIZE(armada_375_cpu_frequencies)) {\r\npr_err("Selected CPU frequency (%d) unsupported\n",\r\ncpu_freq_select);\r\nreturn 0;\r\n} else\r\nreturn armada_375_cpu_frequencies[cpu_freq_select];\r\n}\r\nstatic void __init armada_375_get_clk_ratio(\r\nvoid __iomem *sar, int id, int *mult, int *div)\r\n{\r\nu32 opt = ((readl(sar) >> SAR1_A375_CPU_DDR_L2_FREQ_OPT) &\r\nSAR1_A375_CPU_DDR_L2_FREQ_OPT_MASK);\r\nswitch (id) {\r\ncase A375_CPU_TO_L2:\r\n*mult = armada_375_cpu_l2_ratios[opt][0];\r\n*div = armada_375_cpu_l2_ratios[opt][1];\r\nbreak;\r\ncase A375_CPU_TO_DDR:\r\n*mult = armada_375_cpu_ddr_ratios[opt][0];\r\n*div = armada_375_cpu_ddr_ratios[opt][1];\r\nbreak;\r\n}\r\n}\r\nstatic void __init armada_375_coreclk_init(struct device_node *np)\r\n{\r\nmvebu_coreclk_setup(np, &armada_375_coreclks);\r\n}\r\nstatic void __init armada_375_clk_gating_init(struct device_node *np)\r\n{\r\nmvebu_clk_gating_setup(np, armada_375_gating_desc);\r\n}
