static unsigned int r8a7778_pinmux_get_bias(struct sh_pfc *pfc,\r\nunsigned int pin)\r\n{\r\nconst struct sh_pfc_bias_info *info;\r\nvoid __iomem *addr;\r\ninfo = sh_pfc_pin_to_bias_info(bias_info, ARRAY_SIZE(bias_info), pin);\r\nif (!info)\r\nreturn PIN_CONFIG_BIAS_DISABLE;\r\naddr = pfc->windows->virt + info->reg;\r\nif (ioread32(addr) & BIT(info->bit))\r\nreturn PIN_CONFIG_BIAS_PULL_UP;\r\nelse\r\nreturn PIN_CONFIG_BIAS_DISABLE;\r\n}\r\nstatic void r8a7778_pinmux_set_bias(struct sh_pfc *pfc, unsigned int pin,\r\nunsigned int bias)\r\n{\r\nconst struct sh_pfc_bias_info *info;\r\nvoid __iomem *addr;\r\nu32 value;\r\nu32 bit;\r\ninfo = sh_pfc_pin_to_bias_info(bias_info, ARRAY_SIZE(bias_info), pin);\r\nif (!info)\r\nreturn;\r\naddr = pfc->windows->virt + info->reg;\r\nbit = BIT(info->bit);\r\nvalue = ioread32(addr) & ~bit;\r\nif (bias == PIN_CONFIG_BIAS_PULL_UP)\r\nvalue |= bit;\r\niowrite32(value, addr);\r\n}
