void pem_init_feature_info(struct pp_eventmgr *eventmgr)\r\n{\r\neventmgr->ui_state_info[PP_PowerSource_AC].default_ui_lable =\r\nPP_StateUILabel_Performance;\r\neventmgr->ui_state_info[PP_PowerSource_AC].current_ui_label =\r\nPP_StateUILabel_Performance;\r\neventmgr->ui_state_info[PP_PowerSource_DC].default_ui_lable =\r\nPP_StateUILabel_Battery;\r\neventmgr->ui_state_info[PP_PowerSource_DC].current_ui_label =\r\nPP_StateUILabel_Battery;\r\nif (phm_cap_enabled(eventmgr->platform_descriptor->platformCaps, PHM_PlatformCaps_PowerPlaySupport)) {\r\neventmgr->features[PP_Feature_PowerPlay].supported = true;\r\neventmgr->features[PP_Feature_PowerPlay].version = PEM_CURRENT_POWERPLAY_FEATURE_VERSION;\r\neventmgr->features[PP_Feature_PowerPlay].enabled_default = true;\r\neventmgr->features[PP_Feature_PowerPlay].enabled = true;\r\n} else {\r\neventmgr->features[PP_Feature_PowerPlay].supported = false;\r\neventmgr->features[PP_Feature_PowerPlay].enabled = false;\r\neventmgr->features[PP_Feature_PowerPlay].enabled_default = false;\r\n}\r\neventmgr->features[PP_Feature_Force3DClock].supported = true;\r\neventmgr->features[PP_Feature_Force3DClock].enabled = false;\r\neventmgr->features[PP_Feature_Force3DClock].enabled_default = false;\r\neventmgr->features[PP_Feature_Force3DClock].version = 1;\r\neventmgr->features[PP_Feature_User2DPerformance].version = 4;\r\neventmgr->features[PP_Feature_User3DPerformance].version = 4;\r\neventmgr->features[PP_Feature_OverdriveTest].version = 4;\r\neventmgr->features[PP_Feature_OverDrive].version = 4;\r\neventmgr->features[PP_Feature_OverDrive].enabled = false;\r\neventmgr->features[PP_Feature_OverDrive].enabled_default = false;\r\neventmgr->features[PP_Feature_User2DPerformance].supported = false;\r\neventmgr->features[PP_Feature_User2DPerformance].enabled = false;\r\neventmgr->features[PP_Feature_User2DPerformance].enabled_default = false;\r\neventmgr->features[PP_Feature_User3DPerformance].supported = false;\r\neventmgr->features[PP_Feature_User3DPerformance].enabled = false;\r\neventmgr->features[PP_Feature_User3DPerformance].enabled_default = false;\r\neventmgr->features[PP_Feature_OverdriveTest].supported = false;\r\neventmgr->features[PP_Feature_OverdriveTest].enabled = false;\r\neventmgr->features[PP_Feature_OverdriveTest].enabled_default = false;\r\neventmgr->features[PP_Feature_OverDrive].supported = false;\r\neventmgr->features[PP_Feature_PowerBudgetWaiver].enabled_default = false;\r\neventmgr->features[PP_Feature_PowerBudgetWaiver].version = 1;\r\neventmgr->features[PP_Feature_PowerBudgetWaiver].supported = false;\r\neventmgr->features[PP_Feature_PowerBudgetWaiver].enabled = false;\r\neventmgr->features[PP_Feature_MultiUVDState].supported = false;\r\neventmgr->features[PP_Feature_MultiUVDState].enabled = false;\r\neventmgr->features[PP_Feature_MultiUVDState].enabled_default = false;\r\neventmgr->features[PP_Feature_DynamicUVDState].supported = false;\r\neventmgr->features[PP_Feature_DynamicUVDState].enabled = false;\r\neventmgr->features[PP_Feature_DynamicUVDState].enabled_default = false;\r\neventmgr->features[PP_Feature_VCEDPM].supported = false;\r\neventmgr->features[PP_Feature_VCEDPM].enabled = false;\r\neventmgr->features[PP_Feature_VCEDPM].enabled_default = false;\r\neventmgr->features[PP_Feature_ACP_POWERGATING].supported = false;\r\neventmgr->features[PP_Feature_ACP_POWERGATING].enabled = false;\r\neventmgr->features[PP_Feature_ACP_POWERGATING].enabled_default = false;\r\neventmgr->features[PP_Feature_PPM].version = 1;\r\neventmgr->features[PP_Feature_PPM].supported = false;\r\neventmgr->features[PP_Feature_PPM].enabled = false;\r\nif (phm_cap_enabled(eventmgr->platform_descriptor->platformCaps, PHM_PlatformCaps_ODFuzzyFanControlSupport) ||\r\nphm_cap_enabled(eventmgr->platform_descriptor->platformCaps, PHM_PlatformCaps_GeminiRegulatorFanControlSupport)) {\r\neventmgr->features[PP_Feature_FFC].version = 1;\r\neventmgr->features[PP_Feature_FFC].supported = true;\r\neventmgr->features[PP_Feature_FFC].enabled = true;\r\neventmgr->features[PP_Feature_FFC].enabled_default = true;\r\n} else {\r\neventmgr->features[PP_Feature_FFC].supported = false;\r\neventmgr->features[PP_Feature_FFC].enabled = false;\r\neventmgr->features[PP_Feature_FFC].enabled_default = false;\r\n}\r\neventmgr->features[PP_Feature_VariBright].supported = false;\r\neventmgr->features[PP_Feature_VariBright].enabled = false;\r\neventmgr->features[PP_Feature_VariBright].enabled_default = false;\r\neventmgr->features[PP_Feature_BACO].supported = false;\r\neventmgr->features[PP_Feature_BACO].supported = false;\r\neventmgr->features[PP_Feature_BACO].enabled_default = false;\r\neventmgr->features[PP_Feature_PowerDown].supported = false;\r\neventmgr->features[PP_Feature_PowerDown].enabled = false;\r\neventmgr->features[PP_Feature_PowerDown].enabled_default = false;\r\neventmgr->features[PP_Feature_FPS].version = 1;\r\neventmgr->features[PP_Feature_FPS].supported = false;\r\neventmgr->features[PP_Feature_FPS].enabled_default = false;\r\neventmgr->features[PP_Feature_FPS].enabled = false;\r\neventmgr->features[PP_Feature_ViPG].version = 1;\r\neventmgr->features[PP_Feature_ViPG].supported = false;\r\neventmgr->features[PP_Feature_ViPG].enabled_default = false;\r\neventmgr->features[PP_Feature_ViPG].enabled = false;\r\n}\r\nstatic int thermal_interrupt_callback(void *private_data,\r\nunsigned src_id, const uint32_t *iv_entry)\r\n{\r\npr_info("current thermal is out of range \n");\r\nreturn 0;\r\n}\r\nint pem_register_interrupts(struct pp_eventmgr *eventmgr)\r\n{\r\nint result = 0;\r\nstruct pp_interrupt_registration_info info;\r\ninfo.call_back = thermal_interrupt_callback;\r\ninfo.context = eventmgr;\r\nresult = phm_register_thermal_interrupt(eventmgr->hwmgr, &info);\r\nreturn result;\r\n}\r\nint pem_unregister_interrupts(struct pp_eventmgr *eventmgr)\r\n{\r\nreturn 0;\r\n}\r\nvoid pem_uninit_featureInfo(struct pp_eventmgr *eventmgr)\r\n{\r\neventmgr->features[PP_Feature_MultiUVDState].supported = false;\r\neventmgr->features[PP_Feature_VariBright].supported = false;\r\neventmgr->features[PP_Feature_PowerBudgetWaiver].supported = false;\r\neventmgr->features[PP_Feature_OverDrive].supported = false;\r\neventmgr->features[PP_Feature_OverdriveTest].supported = false;\r\neventmgr->features[PP_Feature_User3DPerformance].supported = false;\r\neventmgr->features[PP_Feature_User2DPerformance].supported = false;\r\neventmgr->features[PP_Feature_PowerPlay].supported = false;\r\neventmgr->features[PP_Feature_Force3DClock].supported = false;\r\n}
