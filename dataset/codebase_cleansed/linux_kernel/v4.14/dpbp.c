int dpbp_open(struct fsl_mc_io *mc_io,\r\nu32 cmd_flags,\r\nint dpbp_id,\r\nu16 *token)\r\n{\r\nstruct mc_command cmd = { 0 };\r\nstruct dpbp_cmd_open *cmd_params;\r\nint err;\r\ncmd.header = mc_encode_cmd_header(DPBP_CMDID_OPEN,\r\ncmd_flags, 0);\r\ncmd_params = (struct dpbp_cmd_open *)cmd.params;\r\ncmd_params->dpbp_id = cpu_to_le32(dpbp_id);\r\nerr = mc_send_command(mc_io, &cmd);\r\nif (err)\r\nreturn err;\r\n*token = mc_cmd_hdr_read_token(&cmd);\r\nreturn err;\r\n}\r\nint dpbp_close(struct fsl_mc_io *mc_io,\r\nu32 cmd_flags,\r\nu16 token)\r\n{\r\nstruct mc_command cmd = { 0 };\r\ncmd.header = mc_encode_cmd_header(DPBP_CMDID_CLOSE, cmd_flags,\r\ntoken);\r\nreturn mc_send_command(mc_io, &cmd);\r\n}\r\nint dpbp_enable(struct fsl_mc_io *mc_io,\r\nu32 cmd_flags,\r\nu16 token)\r\n{\r\nstruct mc_command cmd = { 0 };\r\ncmd.header = mc_encode_cmd_header(DPBP_CMDID_ENABLE, cmd_flags,\r\ntoken);\r\nreturn mc_send_command(mc_io, &cmd);\r\n}\r\nint dpbp_disable(struct fsl_mc_io *mc_io,\r\nu32 cmd_flags,\r\nu16 token)\r\n{\r\nstruct mc_command cmd = { 0 };\r\ncmd.header = mc_encode_cmd_header(DPBP_CMDID_DISABLE,\r\ncmd_flags, token);\r\nreturn mc_send_command(mc_io, &cmd);\r\n}\r\nint dpbp_is_enabled(struct fsl_mc_io *mc_io,\r\nu32 cmd_flags,\r\nu16 token,\r\nint *en)\r\n{\r\nstruct mc_command cmd = { 0 };\r\nstruct dpbp_rsp_is_enabled *rsp_params;\r\nint err;\r\ncmd.header = mc_encode_cmd_header(DPBP_CMDID_IS_ENABLED, cmd_flags,\r\ntoken);\r\nerr = mc_send_command(mc_io, &cmd);\r\nif (err)\r\nreturn err;\r\nrsp_params = (struct dpbp_rsp_is_enabled *)cmd.params;\r\n*en = rsp_params->enabled & DPBP_ENABLE;\r\nreturn 0;\r\n}\r\nint dpbp_reset(struct fsl_mc_io *mc_io,\r\nu32 cmd_flags,\r\nu16 token)\r\n{\r\nstruct mc_command cmd = { 0 };\r\ncmd.header = mc_encode_cmd_header(DPBP_CMDID_RESET,\r\ncmd_flags, token);\r\nreturn mc_send_command(mc_io, &cmd);\r\n}\r\nint dpbp_get_attributes(struct fsl_mc_io *mc_io,\r\nu32 cmd_flags,\r\nu16 token,\r\nstruct dpbp_attr *attr)\r\n{\r\nstruct mc_command cmd = { 0 };\r\nstruct dpbp_rsp_get_attributes *rsp_params;\r\nint err;\r\ncmd.header = mc_encode_cmd_header(DPBP_CMDID_GET_ATTR,\r\ncmd_flags, token);\r\nerr = mc_send_command(mc_io, &cmd);\r\nif (err)\r\nreturn err;\r\nrsp_params = (struct dpbp_rsp_get_attributes *)cmd.params;\r\nattr->bpid = le16_to_cpu(rsp_params->bpid);\r\nattr->id = le32_to_cpu(rsp_params->id);\r\nreturn 0;\r\n}\r\nint dpbp_get_api_version(struct fsl_mc_io *mc_io,\r\nu32 cmd_flags,\r\nu16 *major_ver,\r\nu16 *minor_ver)\r\n{\r\nstruct mc_command cmd = { 0 };\r\nint err;\r\ncmd.header = mc_encode_cmd_header(DPBP_CMDID_GET_API_VERSION,\r\ncmd_flags, 0);\r\nerr = mc_send_command(mc_io, &cmd);\r\nif (err)\r\nreturn err;\r\nmc_cmd_read_api_version(&cmd, major_ver, minor_ver);\r\nreturn 0;\r\n}
