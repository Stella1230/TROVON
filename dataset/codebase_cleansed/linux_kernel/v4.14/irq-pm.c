static int s3c64xx_irq_pm_suspend(void)\r\n{\r\nstruct irq_grp_save *grp = eint_grp_save;\r\nint i;\r\nS3C_PMDBG("%s: suspending IRQs\n", __func__);\r\ns3c_pm_do_save(irq_save, ARRAY_SIZE(irq_save));\r\nfor (i = 0; i < SERIAL_SAMSUNG_UARTS; i++)\r\nirq_uart_mask[i] = __raw_readl(S3C_VA_UARTx(i) + S3C64XX_UINTM);\r\nfor (i = 0; i < ARRAY_SIZE(eint_grp_save); i++, grp++) {\r\ngrp->con = __raw_readl(S3C64XX_EINT12CON + (i * 4));\r\ngrp->mask = __raw_readl(S3C64XX_EINT12MASK + (i * 4));\r\ngrp->fltcon = __raw_readl(S3C64XX_EINT12FLTCON + (i * 4));\r\n}\r\nreturn 0;\r\n}\r\nstatic void s3c64xx_irq_pm_resume(void)\r\n{\r\nstruct irq_grp_save *grp = eint_grp_save;\r\nint i;\r\nS3C_PMDBG("%s: resuming IRQs\n", __func__);\r\ns3c_pm_do_restore(irq_save, ARRAY_SIZE(irq_save));\r\nfor (i = 0; i < SERIAL_SAMSUNG_UARTS; i++)\r\n__raw_writel(irq_uart_mask[i], S3C_VA_UARTx(i) + S3C64XX_UINTM);\r\nfor (i = 0; i < ARRAY_SIZE(eint_grp_save); i++, grp++) {\r\n__raw_writel(grp->con, S3C64XX_EINT12CON + (i * 4));\r\n__raw_writel(grp->mask, S3C64XX_EINT12MASK + (i * 4));\r\n__raw_writel(grp->fltcon, S3C64XX_EINT12FLTCON + (i * 4));\r\n}\r\nS3C_PMDBG("%s: IRQ configuration restored\n", __func__);\r\n}\r\nstatic __init int s3c64xx_syscore_init(void)\r\n{\r\nif (of_have_populated_dt() || !soc_is_s3c64xx())\r\nreturn 0;\r\nregister_syscore_ops(&s3c64xx_irq_syscore_ops);\r\nreturn 0;\r\n}
