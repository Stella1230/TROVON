static int ad7879_spi_probe(struct spi_device *spi)\r\n{\r\nstruct regmap *regmap;\r\nif (spi->max_speed_hz > MAX_SPI_FREQ_HZ) {\r\ndev_err(&spi->dev, "SPI CLK %d Hz?\n", spi->max_speed_hz);\r\nreturn -EINVAL;\r\n}\r\nregmap = devm_regmap_init_spi(spi, &ad7879_spi_regmap_config);\r\nif (IS_ERR(regmap))\r\nreturn PTR_ERR(regmap);\r\nreturn ad7879_probe(&spi->dev, regmap, spi->irq, BUS_SPI, AD7879_DEVID);\r\n}
