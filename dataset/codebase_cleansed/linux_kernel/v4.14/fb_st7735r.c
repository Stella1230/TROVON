static void set_addr_win(struct fbtft_par *par, int xs, int ys, int xe, int ye)\r\n{\r\nwrite_reg(par, MIPI_DCS_SET_COLUMN_ADDRESS,\r\nxs >> 8, xs & 0xFF, xe >> 8, xe & 0xFF);\r\nwrite_reg(par, MIPI_DCS_SET_PAGE_ADDRESS,\r\nys >> 8, ys & 0xFF, ye >> 8, ye & 0xFF);\r\nwrite_reg(par, MIPI_DCS_WRITE_MEMORY_START);\r\n}\r\nstatic int set_var(struct fbtft_par *par)\r\n{\r\nswitch (par->info->var.rotate) {\r\ncase 0:\r\nwrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\r\nMX | MY | (par->bgr << 3));\r\nbreak;\r\ncase 270:\r\nwrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\r\nMY | MV | (par->bgr << 3));\r\nbreak;\r\ncase 180:\r\nwrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\r\npar->bgr << 3);\r\nbreak;\r\ncase 90:\r\nwrite_reg(par, MIPI_DCS_SET_ADDRESS_MODE,\r\nMX | MV | (par->bgr << 3));\r\nbreak;\r\n}\r\nreturn 0;\r\n}\r\nstatic int set_gamma(struct fbtft_par *par, u32 *curves)\r\n{\r\nint i, j;\r\nfor (i = 0; i < par->gamma.num_curves; i++)\r\nfor (j = 0; j < par->gamma.num_values; j++)\r\nCURVE(i, j) &= 0x3f;\r\nfor (i = 0; i < par->gamma.num_curves; i++)\r\nwrite_reg(par, 0xE0 + i,\r\nCURVE(i, 0), CURVE(i, 1), CURVE(i, 2), CURVE(i, 3),\r\nCURVE(i, 4), CURVE(i, 5), CURVE(i, 6), CURVE(i, 7),\r\nCURVE(i, 8), CURVE(i, 9), CURVE(i, 10), CURVE(i, 11),\r\nCURVE(i, 12), CURVE(i, 13), CURVE(i, 14), CURVE(i, 15));\r\nreturn 0;\r\n}
