static ssize_t memconsole_read(struct file *filp, struct kobject *kobp,\r\nstruct bin_attribute *bin_attr, char *buf,\r\nloff_t pos, size_t count)\r\n{\r\nif (WARN_ON_ONCE(!memconsole_read_func))\r\nreturn -EIO;\r\nreturn memconsole_read_func(buf, pos, count);\r\n}\r\nvoid memconsole_setup(ssize_t (*read_func)(char *, loff_t, size_t))\r\n{\r\nmemconsole_read_func = read_func;\r\n}\r\nint memconsole_sysfs_init(void)\r\n{\r\nreturn sysfs_create_bin_file(firmware_kobj, &memconsole_bin_attr);\r\n}\r\nvoid memconsole_exit(void)\r\n{\r\nsysfs_remove_bin_file(firmware_kobj, &memconsole_bin_attr);\r\n}
