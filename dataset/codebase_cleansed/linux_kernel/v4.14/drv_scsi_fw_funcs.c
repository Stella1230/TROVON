bool scsi_is_slow_sgl(u16 num_sges, bool small_mid_sge)\r\n{\r\nreturn (num_sges > SCSI_NUM_SGES_SLOW_SGL_THR && small_mid_sge);\r\n}\r\nvoid init_scsi_sgl_context(struct scsi_sgl_params *ctx_sgl_params,\r\nstruct scsi_cached_sges *ctx_data_desc,\r\nstruct scsi_sgl_task_params *sgl_task_params)\r\n{\r\nu8 num_sges_to_init = sgl_task_params->num_sges >\r\nSCSI_NUM_SGES_IN_CACHE ? SCSI_NUM_SGES_IN_CACHE :\r\nsgl_task_params->num_sges;\r\nu8 sge_index;\r\nu32 val;\r\nval = cpu_to_le32(sgl_task_params->sgl_phys_addr.lo);\r\nctx_sgl_params->sgl_addr.lo = val;\r\nval = cpu_to_le32(sgl_task_params->sgl_phys_addr.hi);\r\nctx_sgl_params->sgl_addr.hi = val;\r\nval = cpu_to_le32(sgl_task_params->total_buffer_size);\r\nctx_sgl_params->sgl_total_length = val;\r\nctx_sgl_params->sgl_num_sges = cpu_to_le16(sgl_task_params->num_sges);\r\nfor (sge_index = 0; sge_index < num_sges_to_init; sge_index++) {\r\nval = cpu_to_le32(sgl_task_params->sgl[sge_index].sge_addr.lo);\r\nctx_data_desc->sge[sge_index].sge_addr.lo = val;\r\nval = cpu_to_le32(sgl_task_params->sgl[sge_index].sge_addr.hi);\r\nctx_data_desc->sge[sge_index].sge_addr.hi = val;\r\nval = cpu_to_le32(sgl_task_params->sgl[sge_index].sge_len);\r\nctx_data_desc->sge[sge_index].sge_len = val;\r\n}\r\n}
