static bool CheckPositive(\r\nPDM_ODM_T pDM_Odm, const u32 Condition1, const u32 Condition2\r\n)\r\n{\r\nu8 _BoardType =\r\n((pDM_Odm->BoardType & BIT4) >> 4) << 0 |\r\n((pDM_Odm->BoardType & BIT3) >> 3) << 1 |\r\n((pDM_Odm->BoardType & BIT7) >> 7) << 2 |\r\n((pDM_Odm->BoardType & BIT6) >> 6) << 3 |\r\n((pDM_Odm->BoardType & BIT2) >> 2) << 4;\r\nu32 cond1 = Condition1, cond2 = Condition2;\r\nu32 driver1 =\r\npDM_Odm->CutVersion << 24 |\r\npDM_Odm->SupportPlatform << 16 |\r\npDM_Odm->PackageType << 12 |\r\npDM_Odm->SupportInterface << 8 |\r\n_BoardType;\r\nu32 driver2 =\r\npDM_Odm->TypeGLNA << 0 |\r\npDM_Odm->TypeGPA << 8 |\r\npDM_Odm->TypeALNA << 16 |\r\npDM_Odm->TypeAPA << 24;\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n"===> [8812A] CheckPositive (cond1, cond2) = (0x%X 0x%X)\n",\r\ncond1,\r\ncond2\r\n)\r\n);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n"===> [8812A] CheckPositive (driver1, driver2) = (0x%X 0x%X)\n",\r\ndriver1,\r\ndriver2\r\n)\r\n);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n" (Platform, Interface) = (0x%X, 0x%X)\n",\r\npDM_Odm->SupportPlatform,\r\npDM_Odm->SupportInterface\r\n)\r\n);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n" (Board, Package) = (0x%X, 0x%X)\n",\r\npDM_Odm->BoardType,\r\npDM_Odm->PackageType\r\n)\r\n);\r\nif (\r\n((cond1 & 0x0000F000) != 0) &&\r\n((cond1 & 0x0000F000) != (driver1 & 0x0000F000))\r\n)\r\nreturn false;\r\nif (\r\n((cond1 & 0x0F000000) != 0) &&\r\n((cond1 & 0x0F000000) != (driver1 & 0x0F000000))\r\n)\r\nreturn false;\r\ncond1 &= 0x000F0FFF;\r\ndriver1 &= 0x000F0FFF;\r\nif ((cond1 & driver1) == cond1) {\r\nu32 bitMask = 0;\r\nif ((cond1 & 0x0F) == 0)\r\nreturn true;\r\nif ((cond1 & BIT0) != 0)\r\nbitMask |= 0x000000FF;\r\nif ((cond1 & BIT1) != 0)\r\nbitMask |= 0x0000FF00;\r\nif ((cond1 & BIT2) != 0)\r\nbitMask |= 0x00FF0000;\r\nif ((cond1 & BIT3) != 0)\r\nbitMask |= 0xFF000000;\r\nif ((cond2 & bitMask) == (driver2 & bitMask))\r\nreturn true;\r\nreturn false;\r\n}\r\nreturn false;\r\n}\r\nstatic bool CheckNegative(\r\nPDM_ODM_T pDM_Odm, const u32 Condition1, const u32 Condition2\r\n)\r\n{\r\nreturn true;\r\n}\r\nvoid ODM_ReadAndConfig_MP_8723B_RadioA(PDM_ODM_T pDM_Odm)\r\n{\r\nu32 i = 0;\r\nu32 ArrayLen = sizeof(Array_MP_8723B_RadioA)/sizeof(u32);\r\nu32 *Array = Array_MP_8723B_RadioA;\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_LOUD,\r\n("===> ODM_ReadAndConfig_MP_8723B_RadioA\n")\r\n);\r\nfor (i = 0; i < ArrayLen; i += 2) {\r\nu32 v1 = Array[i];\r\nu32 v2 = Array[i+1];\r\nif (v1 < 0x40000000) {\r\nodm_ConfigRF_RadioA_8723B(pDM_Odm, v1, v2);\r\ncontinue;\r\n} else {\r\nbool bMatched = true;\r\nu8 cCond = (u8)((v1 & (BIT29|BIT28)) >> 28);\r\nif (cCond == COND_ELSE) {\r\nbMatched = true;\r\nREAD_NEXT_PAIR(v1, v2, i);\r\n} else if (!CheckPositive(pDM_Odm, v1, v2)) {\r\nbMatched = false;\r\nREAD_NEXT_PAIR(v1, v2, i);\r\nREAD_NEXT_PAIR(v1, v2, i);\r\n} else {\r\nREAD_NEXT_PAIR(v1, v2, i);\r\nif (!CheckNegative(pDM_Odm, v1, v2))\r\nbMatched = false;\r\nelse\r\nbMatched = true;\r\nREAD_NEXT_PAIR(v1, v2, i);\r\n}\r\nif (bMatched == false) {\r\nwhile (v1 < 0x40000000 && i < ArrayLen-2)\r\nREAD_NEXT_PAIR(v1, v2, i);\r\ni -= 2;\r\n} else {\r\nwhile (v1 < 0x40000000 && i < ArrayLen-2) {\r\nodm_ConfigRF_RadioA_8723B(pDM_Odm, v1, v2);\r\nREAD_NEXT_PAIR(v1, v2, i);\r\n}\r\ncCond = (u8)((v1 & (BIT29|BIT28)) >> 28);\r\nwhile (cCond != COND_ENDIF && i < ArrayLen-2) {\r\nREAD_NEXT_PAIR(v1, v2, i);\r\ncCond = (u8)((v1 & (BIT29|BIT28)) >> 28);\r\n}\r\n}\r\n}\r\n}\r\n}\r\nvoid ODM_ReadAndConfig_MP_8723B_TxPowerTrack_SDIO(PDM_ODM_T pDM_Odm)\r\n{\r\nPODM_RF_CAL_T pRFCalibrateInfo = &(pDM_Odm->RFCalibrateInfo);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_LOUD,\r\n("===> ODM_ReadAndConfig_MP_MP_8723B\n")\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_2GA_P,\r\ngDeltaSwingTableIdx_MP_2GA_P_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_2GA_N,\r\ngDeltaSwingTableIdx_MP_2GA_N_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_2GB_P,\r\ngDeltaSwingTableIdx_MP_2GB_P_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_2GB_N,\r\ngDeltaSwingTableIdx_MP_2GB_N_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_2GCCKA_P,\r\ngDeltaSwingTableIdx_MP_2GCCKA_P_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_2GCCKA_N,\r\ngDeltaSwingTableIdx_MP_2GCCKA_N_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_2GCCKB_P,\r\ngDeltaSwingTableIdx_MP_2GCCKB_P_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_2GCCKB_N,\r\ngDeltaSwingTableIdx_MP_2GCCKB_N_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_5GA_P,\r\ngDeltaSwingTableIdx_MP_5GA_P_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE*3\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_5GA_N,\r\ngDeltaSwingTableIdx_MP_5GA_N_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE*3\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_5GB_P,\r\ngDeltaSwingTableIdx_MP_5GB_P_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE*3\r\n);\r\nmemcpy(\r\npRFCalibrateInfo->DeltaSwingTableIdx_5GB_N,\r\ngDeltaSwingTableIdx_MP_5GB_N_TxPowerTrack_SDIO_8723B,\r\nDELTA_SWINGIDX_SIZE*3\r\n);\r\n}\r\nvoid ODM_ReadAndConfig_MP_8723B_TXPWR_LMT(PDM_ODM_T pDM_Odm)\r\n{\r\nu32 i = 0;\r\nu32 ArrayLen = sizeof(Array_MP_8723B_TXPWR_LMT)/sizeof(u8 *);\r\nu8 **Array = Array_MP_8723B_TXPWR_LMT;\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_LOUD,\r\n("===> ODM_ReadAndConfig_MP_8723B_TXPWR_LMT\n")\r\n);\r\nfor (i = 0; i < ArrayLen; i += 7) {\r\nu8 *regulation = Array[i];\r\nu8 *band = Array[i+1];\r\nu8 *bandwidth = Array[i+2];\r\nu8 *rate = Array[i+3];\r\nu8 *rfPath = Array[i+4];\r\nu8 *chnl = Array[i+5];\r\nu8 *val = Array[i+6];\r\nodm_ConfigBB_TXPWR_LMT_8723B(\r\npDM_Odm,\r\nregulation,\r\nband,\r\nbandwidth,\r\nrate,\r\nrfPath,\r\nchnl,\r\nval\r\n);\r\n}\r\n}
