static int xlgmac_probe(struct pci_dev *pcidev, const struct pci_device_id *id)\r\n{\r\nstruct device *dev = &pcidev->dev;\r\nstruct xlgmac_resources res;\r\nint i, ret;\r\nret = pcim_enable_device(pcidev);\r\nif (ret) {\r\ndev_err(dev, "ERROR: failed to enable device\n");\r\nreturn ret;\r\n}\r\nfor (i = 0; i <= PCI_STD_RESOURCE_END; i++) {\r\nif (pci_resource_len(pcidev, i) == 0)\r\ncontinue;\r\nret = pcim_iomap_regions(pcidev, BIT(i), XLGMAC_DRV_NAME);\r\nif (ret)\r\nreturn ret;\r\nbreak;\r\n}\r\npci_set_master(pcidev);\r\nmemset(&res, 0, sizeof(res));\r\nres.irq = pcidev->irq;\r\nres.addr = pcim_iomap_table(pcidev)[i];\r\nreturn xlgmac_drv_probe(&pcidev->dev, &res);\r\n}\r\nstatic void xlgmac_remove(struct pci_dev *pcidev)\r\n{\r\nxlgmac_drv_remove(&pcidev->dev);\r\n}
