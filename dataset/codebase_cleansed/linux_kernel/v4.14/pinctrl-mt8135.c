static int spec_pull_set(struct regmap *regmap, unsigned int pin,\r\nunsigned char align, bool isup, unsigned int r1r0)\r\n{\r\nunsigned int i;\r\nunsigned int reg_pupd, reg_set_r0, reg_set_r1;\r\nunsigned int reg_rst_r0, reg_rst_r1;\r\nbool find = false;\r\nfor (i = 0; i < ARRAY_SIZE(spec_pupd); i++) {\r\nif (pin == spec_pupd[i].pin) {\r\nfind = true;\r\nbreak;\r\n}\r\n}\r\nif (!find)\r\nreturn -EINVAL;\r\nif (isup)\r\nreg_pupd = spec_pupd[i].pupd_offset + align;\r\nelse\r\nreg_pupd = spec_pupd[i].pupd_offset + (align << 1);\r\nregmap_write(regmap, reg_pupd, spec_pupd[i].pupd_bit);\r\nreg_set_r0 = spec_pupd[i].r0_offset + align;\r\nreg_rst_r0 = spec_pupd[i].r0_offset + (align << 1);\r\nreg_set_r1 = spec_pupd[i].r1_offset + align;\r\nreg_rst_r1 = spec_pupd[i].r1_offset + (align << 1);\r\nswitch (r1r0) {\r\ncase MTK_PUPD_SET_R1R0_00:\r\nregmap_write(regmap, reg_rst_r0, spec_pupd[i].r0_bit);\r\nregmap_write(regmap, reg_rst_r1, spec_pupd[i].r1_bit);\r\nbreak;\r\ncase MTK_PUPD_SET_R1R0_01:\r\nregmap_write(regmap, reg_set_r0, spec_pupd[i].r0_bit);\r\nregmap_write(regmap, reg_rst_r1, spec_pupd[i].r1_bit);\r\nbreak;\r\ncase MTK_PUPD_SET_R1R0_10:\r\nregmap_write(regmap, reg_rst_r0, spec_pupd[i].r0_bit);\r\nregmap_write(regmap, reg_set_r1, spec_pupd[i].r1_bit);\r\nbreak;\r\ncase MTK_PUPD_SET_R1R0_11:\r\nregmap_write(regmap, reg_set_r0, spec_pupd[i].r0_bit);\r\nregmap_write(regmap, reg_set_r1, spec_pupd[i].r1_bit);\r\nbreak;\r\ndefault:\r\nreturn -EINVAL;\r\n}\r\nreturn 0;\r\n}\r\nstatic int mt8135_pinctrl_probe(struct platform_device *pdev)\r\n{\r\nreturn mtk_pctrl_init(pdev, &mt8135_pinctrl_data, NULL);\r\n}\r\nstatic int __init mtk_pinctrl_init(void)\r\n{\r\nreturn platform_driver_register(&mtk_pinctrl_driver);\r\n}
