int\r\nnv50_disp_ovly_new(const struct nv50_disp_dmac_func *func,\r\nconst struct nv50_disp_chan_mthd *mthd,\r\nstruct nv50_disp_root *root, int chid,\r\nconst struct nvkm_oclass *oclass, void *data, u32 size,\r\nstruct nvkm_object **pobject)\r\n{\r\nunion {\r\nstruct nv50_disp_overlay_channel_dma_v0 v0;\r\n} *args = data;\r\nstruct nvkm_object *parent = oclass->parent;\r\nstruct nv50_disp *disp = root->disp;\r\nint head, ret = -ENOSYS;\r\nu64 push;\r\nnvif_ioctl(parent, "create disp overlay channel dma size %d\n", size);\r\nif (!(ret = nvif_unpack(ret, &data, &size, args->v0, 0, 0, false))) {\r\nnvif_ioctl(parent, "create disp overlay channel dma vers %d "\r\n"pushbuf %016llx head %d\n",\r\nargs->v0.version, args->v0.pushbuf, args->v0.head);\r\nif (!nvkm_head_find(&disp->base, args->v0.head))\r\nreturn -EINVAL;\r\npush = args->v0.pushbuf;\r\nhead = args->v0.head;\r\n} else\r\nreturn ret;\r\nreturn nv50_disp_dmac_new_(func, mthd, root, chid + head,\r\nhead, push, oclass, pobject);\r\n}
