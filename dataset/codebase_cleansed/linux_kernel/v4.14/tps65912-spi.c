static int tps65912_spi_probe(struct spi_device *spi)\r\n{\r\nstruct tps65912 *tps;\r\ntps = devm_kzalloc(&spi->dev, sizeof(*tps), GFP_KERNEL);\r\nif (!tps)\r\nreturn -ENOMEM;\r\nspi_set_drvdata(spi, tps);\r\ntps->dev = &spi->dev;\r\ntps->irq = spi->irq;\r\ntps->regmap = devm_regmap_init_spi(spi, &tps65912_regmap_config);\r\nif (IS_ERR(tps->regmap)) {\r\ndev_err(tps->dev, "Failed to initialize register map\n");\r\nreturn PTR_ERR(tps->regmap);\r\n}\r\nreturn tps65912_device_init(tps);\r\n}\r\nstatic int tps65912_spi_remove(struct spi_device *spi)\r\n{\r\nstruct tps65912 *tps = spi_get_drvdata(spi);\r\nreturn tps65912_device_exit(tps);\r\n}
