void PHY_RF6052SetBandwidth8723B(\r\nstruct adapter *Adapter, enum CHANNEL_WIDTH Bandwidth\r\n)\r\n{\r\nstruct hal_com_data *pHalData = GET_HAL_DATA(Adapter);\r\nswitch (Bandwidth) {\r\ncase CHANNEL_WIDTH_20:\r\npHalData->RfRegChnlVal[0] = ((pHalData->RfRegChnlVal[0] & 0xfffff3ff) | BIT10 | BIT11);\r\nPHY_SetRFReg(Adapter, ODM_RF_PATH_A, RF_CHNLBW, bRFRegOffsetMask, pHalData->RfRegChnlVal[0]);\r\nPHY_SetRFReg(Adapter, ODM_RF_PATH_B, RF_CHNLBW, bRFRegOffsetMask, pHalData->RfRegChnlVal[0]);\r\nbreak;\r\ncase CHANNEL_WIDTH_40:\r\npHalData->RfRegChnlVal[0] = ((pHalData->RfRegChnlVal[0] & 0xfffff3ff) | BIT10);\r\nPHY_SetRFReg(Adapter, ODM_RF_PATH_A, RF_CHNLBW, bRFRegOffsetMask, pHalData->RfRegChnlVal[0]);\r\nPHY_SetRFReg(Adapter, ODM_RF_PATH_B, RF_CHNLBW, bRFRegOffsetMask, pHalData->RfRegChnlVal[0]);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\n}\r\nstatic int phy_RF6052_Config_ParaFile(struct adapter *Adapter)\r\n{\r\nu32 u4RegValue = 0;\r\nu8 eRFPath;\r\nstruct bb_register_def *pPhyReg;\r\nint rtStatus = _SUCCESS;\r\nstruct hal_com_data *pHalData = GET_HAL_DATA(Adapter);\r\nstatic char sz8723RadioAFile[] = RTL8723B_PHY_RADIO_A;\r\nstatic char sz8723RadioBFile[] = RTL8723B_PHY_RADIO_B;\r\nstatic s8 sz8723BTxPwrTrackFile[] = RTL8723B_TXPWR_TRACK;\r\nchar *pszRadioAFile, *pszRadioBFile, *pszTxPwrTrackFile;\r\npszRadioAFile = sz8723RadioAFile;\r\npszRadioBFile = sz8723RadioBFile;\r\npszTxPwrTrackFile = sz8723BTxPwrTrackFile;\r\nfor (eRFPath = 0; eRFPath < pHalData->NumTotalRFPath; eRFPath++) {\r\npPhyReg = &pHalData->PHYRegDef[eRFPath];\r\nswitch (eRFPath) {\r\ncase RF_PATH_A:\r\ncase RF_PATH_C:\r\nu4RegValue = PHY_QueryBBReg(Adapter, pPhyReg->rfintfs, bRFSI_RFENV);\r\nbreak;\r\ncase RF_PATH_B:\r\ncase RF_PATH_D:\r\nu4RegValue = PHY_QueryBBReg(Adapter, pPhyReg->rfintfs, bRFSI_RFENV<<16);\r\nbreak;\r\n}\r\nPHY_SetBBReg(Adapter, pPhyReg->rfintfe, bRFSI_RFENV<<16, 0x1);\r\nudelay(1);\r\nPHY_SetBBReg(Adapter, pPhyReg->rfintfo, bRFSI_RFENV, 0x1);\r\nudelay(1);\r\nPHY_SetBBReg(Adapter, pPhyReg->rfHSSIPara2, b3WireAddressLength, 0x0);\r\nudelay(1);\r\nPHY_SetBBReg(Adapter, pPhyReg->rfHSSIPara2, b3WireDataLength, 0x0);\r\nudelay(1);\r\nswitch (eRFPath) {\r\ncase RF_PATH_A:\r\nif (PHY_ConfigRFWithParaFile(Adapter, pszRadioAFile,\r\neRFPath) == _FAIL) {\r\nif (HAL_STATUS_FAILURE == ODM_ConfigRFWithHeaderFile(&pHalData->odmpriv, CONFIG_RF_RADIO, (ODM_RF_RADIO_PATH_E)eRFPath))\r\nrtStatus = _FAIL;\r\n}\r\nbreak;\r\ncase RF_PATH_B:\r\nif (PHY_ConfigRFWithParaFile(Adapter, pszRadioBFile,\r\neRFPath) == _FAIL) {\r\nif (HAL_STATUS_FAILURE == ODM_ConfigRFWithHeaderFile(&pHalData->odmpriv, CONFIG_RF_RADIO, (ODM_RF_RADIO_PATH_E)eRFPath))\r\nrtStatus = _FAIL;\r\n}\r\nbreak;\r\ncase RF_PATH_C:\r\nbreak;\r\ncase RF_PATH_D:\r\nbreak;\r\n}\r\n;\r\nswitch (eRFPath) {\r\ncase RF_PATH_A:\r\ncase RF_PATH_C:\r\nPHY_SetBBReg(Adapter, pPhyReg->rfintfs, bRFSI_RFENV, u4RegValue);\r\nbreak;\r\ncase RF_PATH_B:\r\ncase RF_PATH_D:\r\nPHY_SetBBReg(Adapter, pPhyReg->rfintfs, bRFSI_RFENV<<16, u4RegValue);\r\nbreak;\r\n}\r\nif (rtStatus != _SUCCESS) {\r\ngoto phy_RF6052_Config_ParaFile_Fail;\r\n}\r\n}\r\nif (PHY_ConfigRFWithTxPwrTrackParaFile(Adapter, pszTxPwrTrackFile) ==\r\n_FAIL) {\r\nODM_ConfigRFWithTxPwrTrackHeaderFile(&pHalData->odmpriv);\r\n}\r\nreturn rtStatus;\r\nphy_RF6052_Config_ParaFile_Fail:\r\nreturn rtStatus;\r\n}\r\nint PHY_RF6052_Config8723B(struct adapter *Adapter)\r\n{\r\nstruct hal_com_data *pHalData = GET_HAL_DATA(Adapter);\r\nint rtStatus = _SUCCESS;\r\nif (pHalData->rf_type == RF_1T1R)\r\npHalData->NumTotalRFPath = 1;\r\nelse\r\npHalData->NumTotalRFPath = 2;\r\nrtStatus = phy_RF6052_Config_ParaFile(Adapter);\r\nreturn rtStatus;\r\n}
