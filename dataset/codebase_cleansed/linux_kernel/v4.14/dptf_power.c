static int dptf_power_add(struct platform_device *pdev)\r\n{\r\nstruct acpi_device *acpi_dev;\r\nacpi_status status;\r\nunsigned long long ptype;\r\nint result;\r\nacpi_dev = ACPI_COMPANION(&(pdev->dev));\r\nif (!acpi_dev)\r\nreturn -ENODEV;\r\nstatus = acpi_evaluate_integer(acpi_dev->handle, "PTYP", NULL, &ptype);\r\nif (ACPI_FAILURE(status))\r\nreturn -ENODEV;\r\nif (ptype != 0x11)\r\nreturn -ENODEV;\r\nresult = sysfs_create_group(&pdev->dev.kobj,\r\n&dptf_power_attribute_group);\r\nif (result)\r\nreturn result;\r\nplatform_set_drvdata(pdev, acpi_dev);\r\nreturn 0;\r\n}\r\nstatic int dptf_power_remove(struct platform_device *pdev)\r\n{\r\nsysfs_remove_group(&pdev->dev.kobj, &dptf_power_attribute_group);\r\nreturn 0;\r\n}
