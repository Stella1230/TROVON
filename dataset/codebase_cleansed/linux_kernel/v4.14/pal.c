static void wusbhc_channel_changed(struct uwb_pal *pal, int channel)\r\n{\r\nstruct wusbhc *wusbhc = container_of(pal, struct wusbhc, pal);\r\ndev_dbg(wusbhc->dev, "%s: channel = %d\n", __func__, channel);\r\nif (channel < 0)\r\nwusbhc_stop(wusbhc);\r\nelse\r\nwusbhc_start(wusbhc);\r\n}\r\nint wusbhc_pal_register(struct wusbhc *wusbhc)\r\n{\r\nuwb_pal_init(&wusbhc->pal);\r\nwusbhc->pal.name = "wusbhc";\r\nwusbhc->pal.device = wusbhc->usb_hcd.self.controller;\r\nwusbhc->pal.rc = wusbhc->uwb_rc;\r\nwusbhc->pal.channel_changed = wusbhc_channel_changed;\r\nreturn uwb_pal_register(&wusbhc->pal);\r\n}\r\nvoid wusbhc_pal_unregister(struct wusbhc *wusbhc)\r\n{\r\nif (wusbhc->uwb_rc)\r\nuwb_pal_unregister(&wusbhc->pal);\r\n}
