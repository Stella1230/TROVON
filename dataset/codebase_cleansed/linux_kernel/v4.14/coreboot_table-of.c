static int coreboot_table_of_probe(struct platform_device *pdev)\r\n{\r\nstruct device_node *fw_dn = pdev->dev.of_node;\r\nvoid __iomem *ptr;\r\nptr = of_iomap(fw_dn, 0);\r\nof_node_put(fw_dn);\r\nif (!ptr)\r\nreturn -ENOMEM;\r\nreturn coreboot_table_init(ptr);\r\n}\r\nstatic int coreboot_table_of_remove(struct platform_device *pdev)\r\n{\r\nreturn coreboot_table_exit();\r\n}\r\nstatic int __init platform_coreboot_table_of_init(void)\r\n{\r\nstruct platform_device *pdev;\r\nstruct device_node *of_node;\r\nof_node = of_find_node_by_path("/firmware/coreboot");\r\nif (!of_node)\r\nreturn -ENODEV;\r\nif (!of_match_node(coreboot_of_match, of_node))\r\nreturn -ENODEV;\r\npdev = of_platform_device_create(of_node, "coreboot_table_of", NULL);\r\nif (!pdev)\r\nreturn -ENODEV;\r\nreturn platform_driver_register(&coreboot_table_of_driver);\r\n}
