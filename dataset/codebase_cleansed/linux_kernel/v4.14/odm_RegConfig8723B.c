void odm_ConfigRFReg_8723B(\r\nPDM_ODM_T pDM_Odm,\r\nu32 Addr,\r\nu32 Data,\r\nODM_RF_RADIO_PATH_E RF_PATH,\r\nu32 RegAddr\r\n)\r\n{\r\nif (Addr == 0xfe || Addr == 0xffe)\r\nmsleep(50);\r\nelse {\r\nPHY_SetRFReg(pDM_Odm->Adapter, RF_PATH, RegAddr, bRFRegOffsetMask, Data);\r\nudelay(1);\r\nif (Addr == 0xb6) {\r\nu32 getvalue = 0;\r\nu8 count = 0;\r\ngetvalue = PHY_QueryRFReg(\r\npDM_Odm->Adapter, RF_PATH, Addr, bMaskDWord\r\n);\r\nudelay(1);\r\nwhile ((getvalue>>8) != (Data>>8)) {\r\ncount++;\r\nPHY_SetRFReg(pDM_Odm->Adapter, RF_PATH, RegAddr, bRFRegOffsetMask, Data);\r\nudelay(1);\r\ngetvalue = PHY_QueryRFReg(pDM_Odm->Adapter, RF_PATH, Addr, bMaskDWord);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n"===> ODM_ConfigRFWithHeaderFile: [B6] getvalue 0x%x, Data 0x%x, count %d\n",\r\ngetvalue,\r\nData,\r\ncount\r\n)\r\n);\r\nif (count > 5)\r\nbreak;\r\n}\r\n}\r\nif (Addr == 0xb2) {\r\nu32 getvalue = 0;\r\nu8 count = 0;\r\ngetvalue = PHY_QueryRFReg(\r\npDM_Odm->Adapter, RF_PATH, Addr, bMaskDWord\r\n);\r\nudelay(1);\r\nwhile (getvalue != Data) {\r\ncount++;\r\nPHY_SetRFReg(\r\npDM_Odm->Adapter,\r\nRF_PATH,\r\nRegAddr,\r\nbRFRegOffsetMask,\r\nData\r\n);\r\nudelay(1);\r\nPHY_SetRFReg(\r\npDM_Odm->Adapter,\r\nRF_PATH,\r\n0x18,\r\nbRFRegOffsetMask,\r\n0x0fc07\r\n);\r\nudelay(1);\r\ngetvalue = PHY_QueryRFReg(\r\npDM_Odm->Adapter, RF_PATH, Addr, bMaskDWord\r\n);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n"===> ODM_ConfigRFWithHeaderFile: [B2] getvalue 0x%x, Data 0x%x, count %d\n",\r\ngetvalue,\r\nData,\r\ncount\r\n)\r\n);\r\nif (count > 5)\r\nbreak;\r\n}\r\n}\r\n}\r\n}\r\nvoid odm_ConfigRF_RadioA_8723B(PDM_ODM_T pDM_Odm, u32 Addr, u32 Data)\r\n{\r\nu32 content = 0x1000;\r\nu32 maskforPhySet = (u32)(content&0xE000);\r\nodm_ConfigRFReg_8723B(\r\npDM_Odm,\r\nAddr,\r\nData,\r\nODM_RF_PATH_A,\r\nAddr|maskforPhySet\r\n);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n"===> ODM_ConfigRFWithHeaderFile: [RadioA] %08X %08X\n",\r\nAddr,\r\nData\r\n)\r\n);\r\n}\r\nvoid odm_ConfigMAC_8723B(PDM_ODM_T pDM_Odm, u32 Addr, u8 Data)\r\n{\r\nrtw_write8(pDM_Odm->Adapter, Addr, Data);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n"===> ODM_ConfigMACWithHeaderFile: [MAC_REG] %08X %08X\n",\r\nAddr,\r\nData\r\n)\r\n);\r\n}\r\nvoid odm_ConfigBB_AGC_8723B(\r\nPDM_ODM_T pDM_Odm,\r\nu32 Addr,\r\nu32 Bitmask,\r\nu32 Data\r\n)\r\n{\r\nPHY_SetBBReg(pDM_Odm->Adapter, Addr, Bitmask, Data);\r\nudelay(1);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_TRACE,\r\n(\r\n"===> ODM_ConfigBBWithHeaderFile: [AGC_TAB] %08X %08X\n",\r\nAddr,\r\nData\r\n)\r\n);\r\n}\r\nvoid odm_ConfigBB_PHY_REG_PG_8723B(\r\nPDM_ODM_T pDM_Odm,\r\nu32 Band,\r\nu32 RfPath,\r\nu32 TxNum,\r\nu32 Addr,\r\nu32 Bitmask,\r\nu32 Data\r\n)\r\n{\r\nif (Addr == 0xfe || Addr == 0xffe)\r\nmsleep(50);\r\nelse {\r\nPHY_StoreTxPowerByRate(pDM_Odm->Adapter, Band, RfPath, TxNum, Addr, Bitmask, Data);\r\n}\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_INIT,\r\nODM_DBG_LOUD,\r\n(\r\n"===> ODM_ConfigBBWithHeaderFile: [PHY_REG] %08X %08X %08X\n",\r\nAddr,\r\nBitmask,\r\nData\r\n)\r\n);\r\n}\r\nvoid odm_ConfigBB_PHY_8723B(\r\nPDM_ODM_T pDM_Odm,\r\nu32 Addr,\r\nu32 Bitmask,\r\nu32 Data\r\n)\r\n{\r\nif (Addr == 0xfe)\r\nmsleep(50);\r\nelse if (Addr == 0xfd)\r\nmdelay(5);\r\nelse if (Addr == 0xfc)\r\nmdelay(1);\r\nelse if (Addr == 0xfb)\r\nudelay(50);\r\nelse if (Addr == 0xfa)\r\nudelay(5);\r\nelse if (Addr == 0xf9)\r\nudelay(1);\r\nelse {\r\nPHY_SetBBReg(pDM_Odm->Adapter, Addr, Bitmask, Data);\r\n}\r\nudelay(1);\r\nODM_RT_TRACE(pDM_Odm, ODM_COMP_INIT, ODM_DBG_TRACE, ("===> ODM_ConfigBBWithHeaderFile: [PHY_REG] %08X %08X\n", Addr, Data));\r\n}\r\nvoid odm_ConfigBB_TXPWR_LMT_8723B(\r\nPDM_ODM_T pDM_Odm,\r\nu8 *Regulation,\r\nu8 *Band,\r\nu8 *Bandwidth,\r\nu8 *RateSection,\r\nu8 *RfPath,\r\nu8 *Channel,\r\nu8 *PowerLimit\r\n)\r\n{\r\nPHY_SetTxPowerLimit(\r\npDM_Odm->Adapter,\r\nRegulation,\r\nBand,\r\nBandwidth,\r\nRateSection,\r\nRfPath,\r\nChannel,\r\nPowerLimit\r\n);\r\n}
