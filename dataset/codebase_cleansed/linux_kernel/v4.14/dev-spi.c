int __init bcm63xx_spi_register(void)\r\n{\r\nif (BCMCPU_IS_6328() || BCMCPU_IS_6345())\r\nreturn -ENODEV;\r\nspi_resources[0].start = bcm63xx_regset_address(RSET_SPI);\r\nspi_resources[0].end = spi_resources[0].start;\r\nspi_resources[1].start = bcm63xx_get_irq_number(IRQ_SPI);\r\nif (BCMCPU_IS_6338() || BCMCPU_IS_6348()) {\r\nbcm63xx_spi_device.name = "bcm6348-spi",\r\nspi_resources[0].end += BCM_6348_RSET_SPI_SIZE - 1;\r\n}\r\nif (BCMCPU_IS_3368() || BCMCPU_IS_6358() || BCMCPU_IS_6362() ||\r\nBCMCPU_IS_6368()) {\r\nbcm63xx_spi_device.name = "bcm6358-spi",\r\nspi_resources[0].end += BCM_6358_RSET_SPI_SIZE - 1;\r\n}\r\nreturn platform_device_register(&bcm63xx_spi_device);\r\n}
