static void j2_flush_icache(void *args)\r\n{\r\nunsigned cpu;\r\nfor_each_possible_cpu(cpu)\r\n__raw_writel(CACHE_ENABLE | ICACHE_FLUSH, j2_ccr_base + cpu);\r\n}\r\nstatic void j2_flush_dcache(void *args)\r\n{\r\nunsigned cpu;\r\nfor_each_possible_cpu(cpu)\r\n__raw_writel(CACHE_ENABLE | DCACHE_FLUSH, j2_ccr_base + cpu);\r\n}\r\nstatic void j2_flush_both(void *args)\r\n{\r\nunsigned cpu;\r\nfor_each_possible_cpu(cpu)\r\n__raw_writel(CACHE_ENABLE | CACHE_FLUSH, j2_ccr_base + cpu);\r\n}\r\nvoid __init j2_cache_init(void)\r\n{\r\nif (!j2_ccr_base)\r\nreturn;\r\nlocal_flush_cache_all = j2_flush_both;\r\nlocal_flush_cache_mm = j2_flush_both;\r\nlocal_flush_cache_dup_mm = j2_flush_both;\r\nlocal_flush_cache_page = j2_flush_both;\r\nlocal_flush_cache_range = j2_flush_both;\r\nlocal_flush_dcache_page = j2_flush_dcache;\r\nlocal_flush_icache_range = j2_flush_icache;\r\nlocal_flush_icache_page = j2_flush_icache;\r\nlocal_flush_cache_sigtramp = j2_flush_icache;\r\npr_info("Initial J2 CCR is %.8x\n", __raw_readl(j2_ccr_base));\r\n}
