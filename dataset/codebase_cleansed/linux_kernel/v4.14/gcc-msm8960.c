static int gcc_msm8960_probe(struct platform_device *pdev)\r\n{\r\nstruct device *dev = &pdev->dev;\r\nconst struct of_device_id *match;\r\nstruct platform_device *tsens;\r\nint ret;\r\nmatch = of_match_device(gcc_msm8960_match_table, &pdev->dev);\r\nif (!match)\r\nreturn -EINVAL;\r\nret = qcom_cc_register_board_clk(dev, "cxo_board", "cxo", 19200000);\r\nif (ret)\r\nreturn ret;\r\nret = qcom_cc_register_board_clk(dev, "pxo_board", "pxo", 27000000);\r\nif (ret)\r\nreturn ret;\r\nret = qcom_cc_probe(pdev, match->data);\r\nif (ret)\r\nreturn ret;\r\ntsens = platform_device_register_data(&pdev->dev, "qcom-tsens", -1,\r\nNULL, 0);\r\nif (IS_ERR(tsens))\r\nreturn PTR_ERR(tsens);\r\nplatform_set_drvdata(pdev, tsens);\r\nreturn 0;\r\n}\r\nstatic int gcc_msm8960_remove(struct platform_device *pdev)\r\n{\r\nstruct platform_device *tsens = platform_get_drvdata(pdev);\r\nplatform_device_unregister(tsens);\r\nreturn 0;\r\n}\r\nstatic int __init gcc_msm8960_init(void)\r\n{\r\nreturn platform_driver_register(&gcc_msm8960_driver);\r\n}\r\nstatic void __exit gcc_msm8960_exit(void)\r\n{\r\nplatform_driver_unregister(&gcc_msm8960_driver);\r\n}
