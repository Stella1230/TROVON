static bool filter(struct dma_chan *chan, void *param)\r\n{\r\nif (!imx_dma_is_general_purpose(chan))\r\nreturn false;\r\nchan->private = param;\r\nreturn true;\r\n}\r\nint imx_pcm_dma_init(struct platform_device *pdev, size_t size)\r\n{\r\nstruct snd_dmaengine_pcm_config *config;\r\nconfig = devm_kzalloc(&pdev->dev,\r\nsizeof(struct snd_dmaengine_pcm_config), GFP_KERNEL);\r\nif (!config)\r\nreturn -ENOMEM;\r\n*config = imx_dmaengine_pcm_config;\r\nreturn devm_snd_dmaengine_pcm_register(&pdev->dev,\r\nconfig,\r\nSND_DMAENGINE_PCM_FLAG_COMPAT);\r\n}
