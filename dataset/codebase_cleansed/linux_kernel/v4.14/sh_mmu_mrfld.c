static unsigned int sh_phys_to_pte(struct isp_mmu *mmu,\r\nphys_addr_t phys)\r\n{\r\nreturn phys >> ISP_PAGE_OFFSET;\r\n}\r\nstatic phys_addr_t sh_pte_to_phys(struct isp_mmu *mmu,\r\nunsigned int pte)\r\n{\r\nunsigned int mask = mmu->driver->pte_valid_mask;\r\nreturn (phys_addr_t)((pte & ~mask) << ISP_PAGE_OFFSET);\r\n}\r\nstatic int sh_set_pd_base(struct isp_mmu *mmu,\r\nphys_addr_t phys)\r\n{\r\nunsigned int pte = sh_phys_to_pte(mmu, phys);\r\natomisp_css_mmu_set_page_table_base_index(HOST_ADDRESS(pte));\r\nreturn 0;\r\n}\r\nstatic unsigned int sh_get_pd_base(struct isp_mmu *mmu,\r\nphys_addr_t phys)\r\n{\r\nunsigned int pte = sh_phys_to_pte(mmu, phys);\r\nreturn HOST_ADDRESS(pte);\r\n}\r\nstatic void sh_tlb_flush(struct isp_mmu *mmu)\r\n{\r\natomisp_css_mmu_invalidate_cache();\r\n}
