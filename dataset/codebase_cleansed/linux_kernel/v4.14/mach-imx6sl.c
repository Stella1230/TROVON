static void __init imx6sl_fec_init(void)\r\n{\r\nstruct regmap *gpr;\r\ngpr = syscon_regmap_lookup_by_compatible("fsl,imx6sl-iomuxc-gpr");\r\nif (!IS_ERR(gpr)) {\r\nregmap_update_bits(gpr, IOMUXC_GPR1,\r\nIMX6SL_GPR1_FEC_CLOCK_MUX2_SEL_MASK, 0);\r\nregmap_update_bits(gpr, IOMUXC_GPR1,\r\nIMX6SL_GPR1_FEC_CLOCK_MUX1_SEL_MASK, 0);\r\n} else {\r\npr_err("failed to find fsl,imx6sl-iomux-gpr regmap\n");\r\n}\r\n}\r\nstatic void __init imx6sl_init_late(void)\r\n{\r\nif (IS_ENABLED(CONFIG_ARM_IMX6Q_CPUFREQ))\r\nplatform_device_register_simple("imx6q-cpufreq", -1, NULL, 0);\r\nimx6sl_cpuidle_init();\r\n}\r\nstatic void __init imx6sl_init_machine(void)\r\n{\r\nstruct device *parent;\r\nparent = imx_soc_device_init();\r\nif (parent == NULL)\r\npr_warn("failed to initialize soc device\n");\r\nof_platform_default_populate(NULL, NULL, parent);\r\nimx6sl_fec_init();\r\nimx_anatop_init();\r\nimx6sl_pm_init();\r\n}\r\nstatic void __init imx6sl_init_irq(void)\r\n{\r\nimx_gpc_check_dt();\r\nimx_init_revision_from_anatop();\r\nimx_init_l2cache();\r\nimx_src_init();\r\nirqchip_init();\r\nimx6_pm_ccm_init("fsl,imx6sl-ccm");\r\n}
