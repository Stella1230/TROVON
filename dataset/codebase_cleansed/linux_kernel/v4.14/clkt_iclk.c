void omap2_clkt_iclk_allow_idle(struct clk_hw_omap *clk)\r\n{\r\nu32 v;\r\nstruct clk_omap_reg r;\r\nmemcpy(&r, &clk->enable_reg, sizeof(r));\r\nr.offset ^= (CM_AUTOIDLE ^ CM_ICLKEN);\r\nv = ti_clk_ll_ops->clk_readl(&r);\r\nv |= (1 << clk->enable_bit);\r\nti_clk_ll_ops->clk_writel(v, &r);\r\n}\r\nvoid omap2_clkt_iclk_deny_idle(struct clk_hw_omap *clk)\r\n{\r\nu32 v;\r\nstruct clk_omap_reg r;\r\nmemcpy(&r, &clk->enable_reg, sizeof(r));\r\nr.offset ^= (CM_AUTOIDLE ^ CM_ICLKEN);\r\nv = ti_clk_ll_ops->clk_readl(&r);\r\nv &= ~(1 << clk->enable_bit);\r\nti_clk_ll_ops->clk_writel(v, &r);\r\n}\r\nstatic void omap2430_clk_i2chs_find_idlest(struct clk_hw_omap *clk,\r\nstruct clk_omap_reg *idlest_reg,\r\nu8 *idlest_bit,\r\nu8 *idlest_val)\r\n{\r\nmemcpy(idlest_reg, &clk->enable_reg, sizeof(*idlest_reg));\r\nidlest_reg->offset ^= (OMAP24XX_CM_FCLKEN2 ^ CM_IDLEST);\r\n*idlest_bit = clk->enable_bit;\r\n*idlest_val = OMAP24XX_CM_IDLEST_VAL;\r\n}
