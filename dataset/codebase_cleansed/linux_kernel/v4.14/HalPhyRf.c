void ConfigureTxpowerTrack(PDM_ODM_T pDM_Odm, PTXPWRTRACK_CFG pConfig)\r\n{\r\nConfigureTxpowerTrack_8723B(pConfig);\r\n}\r\nvoid ODM_ClearTxPowerTrackingState(PDM_ODM_T pDM_Odm)\r\n{\r\nstruct hal_com_data *pHalData = GET_HAL_DATA(pDM_Odm->Adapter);\r\nu8 p = 0;\r\npDM_Odm->BbSwingIdxCckBase = pDM_Odm->DefaultCckIndex;\r\npDM_Odm->BbSwingIdxCck = pDM_Odm->DefaultCckIndex;\r\npDM_Odm->RFCalibrateInfo.CCK_index = 0;\r\nfor (p = ODM_RF_PATH_A; p < MAX_RF_PATH; ++p) {\r\npDM_Odm->BbSwingIdxOfdmBase[p] = pDM_Odm->DefaultOfdmIndex;\r\npDM_Odm->BbSwingIdxOfdm[p] = pDM_Odm->DefaultOfdmIndex;\r\npDM_Odm->RFCalibrateInfo.OFDM_index[p] = pDM_Odm->DefaultOfdmIndex;\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p] = 0;\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[p] = 0;\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndexLast[p] = 0;\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p] = 0;\r\npDM_Odm->Absolute_OFDMSwingIdx[p] = 0;\r\npDM_Odm->Remnant_OFDMSwingIdx[p] = 0;\r\n}\r\npDM_Odm->Modify_TxAGC_Flag_PathA = false;\r\npDM_Odm->Modify_TxAGC_Flag_PathB = false;\r\npDM_Odm->Remnant_CCKSwingIdx = 0;\r\npDM_Odm->RFCalibrateInfo.ThermalValue = pHalData->EEPROMThermalMeter;\r\npDM_Odm->RFCalibrateInfo.ThermalValue_IQK = pHalData->EEPROMThermalMeter;\r\npDM_Odm->RFCalibrateInfo.ThermalValue_LCK = pHalData->EEPROMThermalMeter;\r\n}\r\nvoid ODM_TXPowerTrackingCallback_ThermalMeter(struct adapter *Adapter)\r\n{\r\nstruct hal_com_data *pHalData = GET_HAL_DATA(Adapter);\r\nPDM_ODM_T pDM_Odm = &pHalData->odmpriv;\r\nu8 ThermalValue = 0, delta, delta_LCK, delta_IQK, p = 0, i = 0;\r\nu8 ThermalValue_AVG_count = 0;\r\nu32 ThermalValue_AVG = 0;\r\nu8 OFDM_min_index = 0;\r\nu8 Indexforchannel = 0;\r\nTXPWRTRACK_CFG c;\r\nu8 *deltaSwingTableIdx_TUP_A;\r\nu8 *deltaSwingTableIdx_TDOWN_A;\r\nu8 *deltaSwingTableIdx_TUP_B;\r\nu8 *deltaSwingTableIdx_TDOWN_B;\r\nConfigureTxpowerTrack(pDM_Odm, &c);\r\n(*c.GetDeltaSwingTable)(\r\npDM_Odm,\r\n(u8 **)&deltaSwingTableIdx_TUP_A,\r\n(u8 **)&deltaSwingTableIdx_TDOWN_A,\r\n(u8 **)&deltaSwingTableIdx_TUP_B,\r\n(u8 **)&deltaSwingTableIdx_TDOWN_B\r\n);\r\npDM_Odm->RFCalibrateInfo.TXPowerTrackingCallbackCnt++;\r\npDM_Odm->RFCalibrateInfo.bTXPowerTrackingInit = true;\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"===>ODM_TXPowerTrackingCallback_ThermalMeter,\npDM_Odm->BbSwingIdxCckBase: %d, pDM_Odm->BbSwingIdxOfdmBase[A]: %d, pDM_Odm->DefaultOfdmIndex: %d\n",\r\npDM_Odm->BbSwingIdxCckBase,\r\npDM_Odm->BbSwingIdxOfdmBase[ODM_RF_PATH_A],\r\npDM_Odm->DefaultOfdmIndex\r\n)\r\n);\r\nThermalValue = (u8)PHY_QueryRFReg(pDM_Odm->Adapter, ODM_RF_PATH_A, c.ThermalRegAddr, 0xfc00);\r\nif (\r\n!pDM_Odm->RFCalibrateInfo.TxPowerTrackControl ||\r\npHalData->EEPROMThermalMeter == 0 ||\r\npHalData->EEPROMThermalMeter == 0xFF\r\n)\r\nreturn;\r\nif (pDM_Odm->RFCalibrateInfo.bReloadtxpowerindex)\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK, ODM_DBG_LOUD,\r\n("reload ofdm index for band switch\n")\r\n);\r\npDM_Odm->RFCalibrateInfo.ThermalValue_AVG[pDM_Odm->RFCalibrateInfo.ThermalValue_AVG_index] = ThermalValue;\r\npDM_Odm->RFCalibrateInfo.ThermalValue_AVG_index++;\r\nif (pDM_Odm->RFCalibrateInfo.ThermalValue_AVG_index == c.AverageThermalNum)\r\npDM_Odm->RFCalibrateInfo.ThermalValue_AVG_index = 0;\r\nfor (i = 0; i < c.AverageThermalNum; i++) {\r\nif (pDM_Odm->RFCalibrateInfo.ThermalValue_AVG[i]) {\r\nThermalValue_AVG += pDM_Odm->RFCalibrateInfo.ThermalValue_AVG[i];\r\nThermalValue_AVG_count++;\r\n}\r\n}\r\nif (ThermalValue_AVG_count) {\r\nThermalValue = (u8)(ThermalValue_AVG / ThermalValue_AVG_count);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"AVG Thermal Meter = 0x%X, EFUSE Thermal Base = 0x%X\n",\r\nThermalValue,\r\npHalData->EEPROMThermalMeter\r\n)\r\n);\r\n}\r\ndelta =\r\n(ThermalValue > pDM_Odm->RFCalibrateInfo.ThermalValue) ?\r\n(ThermalValue - pDM_Odm->RFCalibrateInfo.ThermalValue) :\r\n(pDM_Odm->RFCalibrateInfo.ThermalValue - ThermalValue);\r\ndelta_LCK =\r\n(ThermalValue > pDM_Odm->RFCalibrateInfo.ThermalValue_LCK) ?\r\n(ThermalValue - pDM_Odm->RFCalibrateInfo.ThermalValue_LCK) :\r\n(pDM_Odm->RFCalibrateInfo.ThermalValue_LCK - ThermalValue);\r\ndelta_IQK =\r\n(ThermalValue > pDM_Odm->RFCalibrateInfo.ThermalValue_IQK) ?\r\n(ThermalValue - pDM_Odm->RFCalibrateInfo.ThermalValue_IQK) :\r\n(pDM_Odm->RFCalibrateInfo.ThermalValue_IQK - ThermalValue);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"(delta, delta_LCK, delta_IQK) = (%d, %d, %d)\n",\r\ndelta,\r\ndelta_LCK,\r\ndelta_IQK\r\n)\r\n);\r\nif (delta_LCK >= c.Threshold_IQK) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"delta_LCK(%d) >= Threshold_IQK(%d)\n",\r\ndelta_LCK,\r\nc.Threshold_IQK\r\n)\r\n);\r\npDM_Odm->RFCalibrateInfo.ThermalValue_LCK = ThermalValue;\r\nif (c.PHY_LCCalibrate)\r\n(*c.PHY_LCCalibrate)(pDM_Odm);\r\n}\r\nif (delta > 0 && pDM_Odm->RFCalibrateInfo.TxPowerTrackControl) {\r\ndelta =\r\nThermalValue > pHalData->EEPROMThermalMeter ?\r\n(ThermalValue - pHalData->EEPROMThermalMeter) :\r\n(pHalData->EEPROMThermalMeter - ThermalValue);\r\nif (delta >= TXPWR_TRACK_TABLE_SIZE)\r\ndelta = TXPWR_TRACK_TABLE_SIZE - 1;\r\nif (ThermalValue > pHalData->EEPROMThermalMeter) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"deltaSwingTableIdx_TUP_A[%d] = %d\n",\r\ndelta,\r\ndeltaSwingTableIdx_TUP_A[delta]\r\n)\r\n);\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndexLast[ODM_RF_PATH_A] =\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[ODM_RF_PATH_A];\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[ODM_RF_PATH_A] =\r\ndeltaSwingTableIdx_TUP_A[delta];\r\npDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_A] =\r\ndeltaSwingTableIdx_TUP_A[delta];\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"******Temp is higher and pDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_A] = %d\n",\r\npDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_A]\r\n)\r\n);\r\nif (c.RfPathCount > 1) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"deltaSwingTableIdx_TUP_B[%d] = %d\n",\r\ndelta,\r\ndeltaSwingTableIdx_TUP_B[delta]\r\n)\r\n);\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndexLast[ODM_RF_PATH_B] =\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[ODM_RF_PATH_B];\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[ODM_RF_PATH_B] =\r\ndeltaSwingTableIdx_TUP_B[delta];\r\npDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_B] =\r\ndeltaSwingTableIdx_TUP_B[delta];\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"******Temp is higher and pDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_B] = %d\n",\r\npDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_B]\r\n)\r\n);\r\n}\r\n} else {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"deltaSwingTableIdx_TDOWN_A[%d] = %d\n",\r\ndelta,\r\ndeltaSwingTableIdx_TDOWN_A[delta]\r\n)\r\n);\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndexLast[ODM_RF_PATH_A] =\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[ODM_RF_PATH_A];\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[ODM_RF_PATH_A] =\r\n-1 * deltaSwingTableIdx_TDOWN_A[delta];\r\npDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_A] =\r\n-1 * deltaSwingTableIdx_TDOWN_A[delta];\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"******Temp is lower and pDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_A] = %d\n",\r\npDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_A]\r\n)\r\n);\r\nif (c.RfPathCount > 1) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"deltaSwingTableIdx_TDOWN_B[%d] = %d\n",\r\ndelta,\r\ndeltaSwingTableIdx_TDOWN_B[delta]\r\n)\r\n);\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndexLast[ODM_RF_PATH_B] =\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[ODM_RF_PATH_B];\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[ODM_RF_PATH_B] =\r\n-1 * deltaSwingTableIdx_TDOWN_B[delta];\r\npDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_B] =\r\n-1 * deltaSwingTableIdx_TDOWN_B[delta];\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"******Temp is lower and pDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_B] = %d\n",\r\npDM_Odm->Absolute_OFDMSwingIdx[ODM_RF_PATH_B]\r\n)\r\n);\r\n}\r\n}\r\nfor (p = ODM_RF_PATH_A; p < c.RfPathCount; p++) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"\n\n ================================ [Path-%c] Calculating PowerIndexOffset ================================\n",\r\n(p == ODM_RF_PATH_A ? 'A' : 'B')\r\n)\r\n);\r\nif (\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[p] ==\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndexLast[p]\r\n)\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p] = 0;\r\nelse\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p] = pDM_Odm->RFCalibrateInfo.DeltaPowerIndex[p] - pDM_Odm->RFCalibrateInfo.DeltaPowerIndexLast[p];\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"[Path-%c] PowerIndexOffset(%d) = DeltaPowerIndex(%d) - DeltaPowerIndexLast(%d)\n",\r\n(\r\np == ODM_RF_PATH_A ? 'A' : 'B'),\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p],\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndex[p],\r\npDM_Odm->RFCalibrateInfo.DeltaPowerIndexLast[p]\r\n)\r\n);\r\npDM_Odm->RFCalibrateInfo.OFDM_index[p] =\r\npDM_Odm->BbSwingIdxOfdmBase[p] +\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p];\r\npDM_Odm->RFCalibrateInfo.CCK_index =\r\npDM_Odm->BbSwingIdxCckBase +\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p];\r\npDM_Odm->BbSwingIdxCck =\r\npDM_Odm->RFCalibrateInfo.CCK_index;\r\npDM_Odm->BbSwingIdxOfdm[p] =\r\npDM_Odm->RFCalibrateInfo.OFDM_index[p];\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"The 'CCK' final index(%d) = BaseIndex(%d) + PowerIndexOffset(%d)\n",\r\npDM_Odm->BbSwingIdxCck,\r\npDM_Odm->BbSwingIdxCckBase,\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p]\r\n)\r\n);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"The 'OFDM' final index(%d) = BaseIndex[%c](%d) + PowerIndexOffset(%d)\n",\r\npDM_Odm->BbSwingIdxOfdm[p],\r\n(p == ODM_RF_PATH_A ? 'A' : 'B'),\r\npDM_Odm->BbSwingIdxOfdmBase[p],\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p]\r\n)\r\n);\r\nif (pDM_Odm->RFCalibrateInfo.OFDM_index[p] > c.SwingTableSize_OFDM-1)\r\npDM_Odm->RFCalibrateInfo.OFDM_index[p] = c.SwingTableSize_OFDM-1;\r\nelse if (pDM_Odm->RFCalibrateInfo.OFDM_index[p] < OFDM_min_index)\r\npDM_Odm->RFCalibrateInfo.OFDM_index[p] = OFDM_min_index;\r\n}\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n("\n\n ========================================================================================================\n")\r\n);\r\nif (pDM_Odm->RFCalibrateInfo.CCK_index > c.SwingTableSize_CCK-1)\r\npDM_Odm->RFCalibrateInfo.CCK_index = c.SwingTableSize_CCK-1;\r\n} else {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"The thermal meter is unchanged or TxPowerTracking OFF(%d): ThermalValue: %d , pDM_Odm->RFCalibrateInfo.ThermalValue: %d\n",\r\npDM_Odm->RFCalibrateInfo.TxPowerTrackControl,\r\nThermalValue,\r\npDM_Odm->RFCalibrateInfo.ThermalValue\r\n)\r\n);\r\nfor (p = ODM_RF_PATH_A; p < c.RfPathCount; p++)\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[p] = 0;\r\n}\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"TxPowerTracking: [CCK] Swing Current Index: %d, Swing Base Index: %d\n",\r\npDM_Odm->RFCalibrateInfo.CCK_index,\r\npDM_Odm->BbSwingIdxCckBase\r\n)\r\n);\r\nfor (p = ODM_RF_PATH_A; p < c.RfPathCount; p++) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"TxPowerTracking: [OFDM] Swing Current Index: %d, Swing Base Index[%c]: %d\n",\r\npDM_Odm->RFCalibrateInfo.OFDM_index[p],\r\n(p == ODM_RF_PATH_A ? 'A' : 'B'),\r\npDM_Odm->BbSwingIdxOfdmBase[p]\r\n)\r\n);\r\n}\r\nif (\r\n(pDM_Odm->RFCalibrateInfo.PowerIndexOffset[ODM_RF_PATH_A] != 0 ||\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[ODM_RF_PATH_B] != 0) &&\r\npDM_Odm->RFCalibrateInfo.TxPowerTrackControl\r\n) {\r\npDM_Odm->RFCalibrateInfo.bTxPowerChanged = true;\r\nif (ThermalValue > pDM_Odm->RFCalibrateInfo.ThermalValue) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"Temperature Increasing(A): delta_pi: %d , delta_t: %d, Now_t: %d, EFUSE_t: %d, Last_t: %d\n",\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[ODM_RF_PATH_A],\r\ndelta,\r\nThermalValue,\r\npHalData->EEPROMThermalMeter,\r\npDM_Odm->RFCalibrateInfo.ThermalValue\r\n)\r\n);\r\nif (c.RfPathCount > 1)\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"Temperature Increasing(B): delta_pi: %d , delta_t: %d, Now_t: %d, EFUSE_t: %d, Last_t: %d\n",\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[ODM_RF_PATH_B],\r\ndelta,\r\nThermalValue,\r\npHalData->EEPROMThermalMeter,\r\npDM_Odm->RFCalibrateInfo.ThermalValue\r\n)\r\n);\r\n} else if (ThermalValue < pDM_Odm->RFCalibrateInfo.ThermalValue) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"Temperature Decreasing(A): delta_pi: %d , delta_t: %d, Now_t: %d, EFUSE_t: %d, Last_t: %d\n",\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[ODM_RF_PATH_A],\r\ndelta,\r\nThermalValue,\r\npHalData->EEPROMThermalMeter,\r\npDM_Odm->RFCalibrateInfo.ThermalValue\r\n)\r\n);\r\nif (c.RfPathCount > 1)\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"Temperature Decreasing(B): delta_pi: %d , delta_t: %d, Now_t: %d, EFUSE_t: %d, Last_t: %d\n",\r\npDM_Odm->RFCalibrateInfo.PowerIndexOffset[ODM_RF_PATH_B],\r\ndelta,\r\nThermalValue,\r\npHalData->EEPROMThermalMeter,\r\npDM_Odm->RFCalibrateInfo.ThermalValue\r\n)\r\n);\r\n}\r\nif (ThermalValue > pHalData->EEPROMThermalMeter) {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"Temperature(%d) higher than PG value(%d)\n",\r\nThermalValue,\r\npHalData->EEPROMThermalMeter\r\n)\r\n);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n("**********Enter POWER Tracking MIX_MODE**********\n")\r\n);\r\nfor (p = ODM_RF_PATH_A; p < c.RfPathCount; p++)\r\n(*c.ODM_TxPwrTrackSetPwr)(pDM_Odm, MIX_MODE, p, 0);\r\n} else {\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n(\r\n"Temperature(%d) lower than PG value(%d)\n",\r\nThermalValue,\r\npHalData->EEPROMThermalMeter\r\n)\r\n);\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n("**********Enter POWER Tracking MIX_MODE**********\n")\r\n);\r\nfor (p = ODM_RF_PATH_A; p < c.RfPathCount; p++)\r\n(*c.ODM_TxPwrTrackSetPwr)(pDM_Odm, MIX_MODE, p, Indexforchannel);\r\n}\r\npDM_Odm->BbSwingIdxCckBase = pDM_Odm->BbSwingIdxCck;\r\nfor (p = ODM_RF_PATH_A; p < c.RfPathCount; p++)\r\npDM_Odm->BbSwingIdxOfdmBase[p] = pDM_Odm->BbSwingIdxOfdm[p];\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK, ODM_DBG_LOUD,\r\n(\r\n"pDM_Odm->RFCalibrateInfo.ThermalValue = %d ThermalValue = %d\n",\r\npDM_Odm->RFCalibrateInfo.ThermalValue,\r\nThermalValue\r\n)\r\n);\r\npDM_Odm->RFCalibrateInfo.ThermalValue = ThermalValue;\r\n}\r\nODM_RT_TRACE(\r\npDM_Odm,\r\nODM_COMP_TX_PWR_TRACK,\r\nODM_DBG_LOUD,\r\n("<===ODM_TXPowerTrackingCallback_ThermalMeter\n")\r\n);\r\npDM_Odm->RFCalibrateInfo.TXPowercount = 0;\r\n}\r\nu8 ODM_GetRightChnlPlaceforIQK(u8 chnl)\r\n{\r\nu8 channel_all[ODM_TARGET_CHNL_NUM_2G_5G] = {\r\n1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,\r\n36, 38, 40, 42, 44, 46, 48, 50, 52, 54, 56, 58,\r\n60, 62, 64, 100, 102, 104, 106, 108, 110, 112,\r\n114, 116, 118, 120, 122, 124, 126, 128, 130, 132,\r\n134, 136, 138, 140, 149, 151, 153, 155, 157, 159,\r\n161, 163, 165\r\n};\r\nu8 place = chnl;\r\nif (chnl > 14) {\r\nfor (place = 14; place < sizeof(channel_all); place++) {\r\nif (channel_all[place] == chnl)\r\nreturn place-13;\r\n}\r\n}\r\nreturn 0;\r\n}
