static int coreboot_table_acpi_probe(struct platform_device *pdev)\r\n{\r\nphys_addr_t phyaddr;\r\nresource_size_t len;\r\nstruct coreboot_table_header __iomem *header = NULL;\r\nstruct resource *res;\r\nvoid __iomem *ptr = NULL;\r\nres = platform_get_resource(pdev, IORESOURCE_MEM, 0);\r\nif (!res)\r\nreturn -EINVAL;\r\nlen = resource_size(res);\r\nif (!res->start || !len)\r\nreturn -EINVAL;\r\nphyaddr = res->start;\r\nheader = ioremap_cache(phyaddr, sizeof(*header));\r\nif (header == NULL)\r\nreturn -ENOMEM;\r\nptr = ioremap_cache(phyaddr,\r\nheader->header_bytes + header->table_bytes);\r\niounmap(header);\r\nif (!ptr)\r\nreturn -ENOMEM;\r\nreturn coreboot_table_init(ptr);\r\n}\r\nstatic int coreboot_table_acpi_remove(struct platform_device *pdev)\r\n{\r\nreturn coreboot_table_exit();\r\n}\r\nstatic int __init coreboot_table_acpi_init(void)\r\n{\r\nreturn platform_driver_register(&coreboot_table_acpi_driver);\r\n}
