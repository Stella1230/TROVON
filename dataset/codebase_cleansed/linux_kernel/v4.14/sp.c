void cnd_sp_irq_enable(\r\nconst sp_ID_t ID,\r\nconst bool cnd)\r\n{\r\nif (cnd) {\r\nsp_ctrl_setbit(ID, SP_IRQ_READY_REG, SP_IRQ_READY_BIT);\r\nsp_ctrl_setbit(ID, SP_IRQ_CLEAR_REG, SP_IRQ_CLEAR_BIT);\r\n} else {\r\nsp_ctrl_clearbit(ID, SP_IRQ_READY_REG, SP_IRQ_READY_BIT);\r\n}\r\n}\r\nvoid sp_get_state(\r\nconst sp_ID_t ID,\r\nsp_state_t *state,\r\nsp_stall_t *stall)\r\n{\r\nhrt_data sc = sp_ctrl_load(ID, SP_SC_REG);\r\nassert(state != NULL);\r\nassert(stall != NULL);\r\nstate->pc = sp_ctrl_load(ID, SP_PC_REG);\r\nstate->status_register = sc;\r\nstate->is_broken = (sc & (1U << SP_BROKEN_BIT)) != 0;\r\nstate->is_idle = (sc & (1U << SP_IDLE_BIT)) != 0;\r\nstate->is_sleeping = (sc & (1U << SP_SLEEPING_BIT)) != 0;\r\nstate->is_stalling = (sc & (1U << SP_STALLING_BIT)) != 0;\r\nstall->fifo0 =\r\n!sp_ctrl_getbit(ID, SP_FIFO0_SINK_REG, SP_FIFO0_SINK_BIT);\r\nstall->fifo1 =\r\n!sp_ctrl_getbit(ID, SP_FIFO1_SINK_REG, SP_FIFO1_SINK_BIT);\r\nstall->fifo2 =\r\n!sp_ctrl_getbit(ID, SP_FIFO2_SINK_REG, SP_FIFO2_SINK_BIT);\r\nstall->fifo3 =\r\n!sp_ctrl_getbit(ID, SP_FIFO3_SINK_REG, SP_FIFO3_SINK_BIT);\r\nstall->fifo4 =\r\n!sp_ctrl_getbit(ID, SP_FIFO4_SINK_REG, SP_FIFO4_SINK_BIT);\r\nstall->fifo5 =\r\n!sp_ctrl_getbit(ID, SP_FIFO5_SINK_REG, SP_FIFO5_SINK_BIT);\r\nstall->fifo6 =\r\n!sp_ctrl_getbit(ID, SP_FIFO6_SINK_REG, SP_FIFO6_SINK_BIT);\r\nstall->fifo7 =\r\n!sp_ctrl_getbit(ID, SP_FIFO7_SINK_REG, SP_FIFO7_SINK_BIT);\r\nstall->fifo8 =\r\n!sp_ctrl_getbit(ID, SP_FIFO8_SINK_REG, SP_FIFO8_SINK_BIT);\r\nstall->fifo9 =\r\n!sp_ctrl_getbit(ID, SP_FIFO9_SINK_REG, SP_FIFO9_SINK_BIT);\r\nstall->fifoa =\r\n!sp_ctrl_getbit(ID, SP_FIFOA_SINK_REG, SP_FIFOA_SINK_BIT);\r\nstall->dmem =\r\n!sp_ctrl_getbit(ID, SP_DMEM_SINK_REG, SP_DMEM_SINK_BIT);\r\nstall->control_master =\r\n!sp_ctrl_getbit(ID, SP_CTRL_MT_SINK_REG, SP_CTRL_MT_SINK_BIT);\r\nstall->icache_master =\r\n!sp_ctrl_getbit(ID, SP_ICACHE_MT_SINK_REG,\r\nSP_ICACHE_MT_SINK_BIT);\r\n}
