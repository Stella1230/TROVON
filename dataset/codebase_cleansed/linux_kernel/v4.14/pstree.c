union acpi_parse_object *acpi_ps_get_arg(union acpi_parse_object *op, u32 argn)\r\n{\r\nunion acpi_parse_object *arg = NULL;\r\nconst struct acpi_opcode_info *op_info;\r\nACPI_FUNCTION_ENTRY();\r\nop_info = acpi_ps_get_opcode_info(op->common.aml_opcode);\r\nif (op_info->class == AML_CLASS_UNKNOWN) {\r\nreturn (NULL);\r\n}\r\nif (!(op_info->flags & AML_HAS_ARGS)) {\r\nreturn (NULL);\r\n}\r\narg = op->common.value.arg;\r\nwhile (arg && argn) {\r\nargn--;\r\narg = arg->common.next;\r\n}\r\nreturn (arg);\r\n}\r\nvoid\r\nacpi_ps_append_arg(union acpi_parse_object *op, union acpi_parse_object *arg)\r\n{\r\nunion acpi_parse_object *prev_arg;\r\nconst struct acpi_opcode_info *op_info;\r\nACPI_FUNCTION_TRACE(ps_append_arg);\r\nif (!op) {\r\nreturn_VOID;\r\n}\r\nop_info = acpi_ps_get_opcode_info(op->common.aml_opcode);\r\nif (op_info->class == AML_CLASS_UNKNOWN) {\r\nACPI_ERROR((AE_INFO, "Invalid AML Opcode: 0x%2.2X",\r\nop->common.aml_opcode));\r\nreturn_VOID;\r\n}\r\nif (!(op_info->flags & AML_HAS_ARGS)) {\r\nreturn_VOID;\r\n}\r\nif (op->common.value.arg) {\r\nprev_arg = op->common.value.arg;\r\nwhile (prev_arg->common.next) {\r\nprev_arg = prev_arg->common.next;\r\n}\r\nprev_arg->common.next = arg;\r\n} else {\r\nop->common.value.arg = arg;\r\n}\r\nwhile (arg) {\r\narg->common.parent = op;\r\narg = arg->common.next;\r\nop->common.arg_list_length++;\r\n}\r\nreturn_VOID;\r\n}\r\nunion acpi_parse_object *acpi_ps_get_depth_next(union acpi_parse_object *origin,\r\nunion acpi_parse_object *op)\r\n{\r\nunion acpi_parse_object *next = NULL;\r\nunion acpi_parse_object *parent;\r\nunion acpi_parse_object *arg;\r\nACPI_FUNCTION_ENTRY();\r\nif (!op) {\r\nreturn (NULL);\r\n}\r\nnext = acpi_ps_get_arg(op, 0);\r\nif (next) {\r\nASL_CV_LABEL_FILENODE(next);\r\nreturn (next);\r\n}\r\nnext = op->common.next;\r\nif (next) {\r\nASL_CV_LABEL_FILENODE(next);\r\nreturn (next);\r\n}\r\nparent = op->common.parent;\r\nwhile (parent) {\r\narg = acpi_ps_get_arg(parent, 0);\r\nwhile (arg && (arg != origin) && (arg != op)) {\r\nASL_CV_LABEL_FILENODE(arg);\r\narg = arg->common.next;\r\n}\r\nif (arg == origin) {\r\nreturn (NULL);\r\n}\r\nif (parent->common.next) {\r\nASL_CV_LABEL_FILENODE(parent->common.next);\r\nreturn (parent->common.next);\r\n}\r\nop = parent;\r\nparent = parent->common.parent;\r\n}\r\nASL_CV_LABEL_FILENODE(next);\r\nreturn (next);\r\n}\r\nunion acpi_parse_object *acpi_ps_get_child(union acpi_parse_object *op)\r\n{\r\nunion acpi_parse_object *child = NULL;\r\nACPI_FUNCTION_ENTRY();\r\nswitch (op->common.aml_opcode) {\r\ncase AML_SCOPE_OP:\r\ncase AML_ELSE_OP:\r\ncase AML_DEVICE_OP:\r\ncase AML_THERMAL_ZONE_OP:\r\ncase AML_INT_METHODCALL_OP:\r\nchild = acpi_ps_get_arg(op, 0);\r\nbreak;\r\ncase AML_BUFFER_OP:\r\ncase AML_PACKAGE_OP:\r\ncase AML_METHOD_OP:\r\ncase AML_IF_OP:\r\ncase AML_WHILE_OP:\r\ncase AML_FIELD_OP:\r\nchild = acpi_ps_get_arg(op, 1);\r\nbreak;\r\ncase AML_POWER_RESOURCE_OP:\r\ncase AML_INDEX_FIELD_OP:\r\nchild = acpi_ps_get_arg(op, 2);\r\nbreak;\r\ncase AML_PROCESSOR_OP:\r\ncase AML_BANK_FIELD_OP:\r\nchild = acpi_ps_get_arg(op, 3);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nreturn (child);\r\n}
