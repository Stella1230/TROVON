void debug_buffer_init(const hrt_address addr)\r\n{\r\ndebug_buffer_address = addr;\r\ndebug_data.head = 0;\r\ndebug_data.tail = 0;\r\n}\r\nvoid debug_buffer_ddr_init(const hrt_vaddress addr)\r\n{\r\ndebug_buf_mode_t mode = DEBUG_BUFFER_MODE_LINEAR;\r\nuint32_t enable = 1;\r\nuint32_t head = 0;\r\nuint32_t tail = 0;\r\ndebug_buffer_ddr_address = addr;\r\nmmgr_store(addr + DEBUG_DATA_BUF_MODE_DDR_ADDR,\r\n&mode, sizeof(debug_buf_mode_t));\r\nmmgr_store(addr + DEBUG_DATA_HEAD_DDR_ADDR,\r\n&head, sizeof(uint32_t));\r\nmmgr_store(addr + DEBUG_DATA_TAIL_DDR_ADDR,\r\n&tail, sizeof(uint32_t));\r\nmmgr_store(addr + DEBUG_DATA_ENABLE_DDR_ADDR,\r\n&enable, sizeof(uint32_t));\r\ndebug_data.head = 0;\r\ndebug_data.tail = 0;\r\n}\r\nvoid debug_buffer_setmode(const debug_buf_mode_t mode)\r\n{\r\nassert(debug_buffer_address != ((hrt_address)-1));\r\nsp_dmem_store_uint32(SP0_ID,\r\ndebug_buffer_address + DEBUG_DATA_BUF_MODE_ADDR, mode);\r\n}
