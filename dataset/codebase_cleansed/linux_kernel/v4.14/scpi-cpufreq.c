static int scpi_get_transition_latency(struct device *cpu_dev)\r\n{\r\nreturn scpi_ops->get_transition_latency(cpu_dev);\r\n}\r\nstatic int scpi_init_opp_table(const struct cpumask *cpumask)\r\n{\r\nint ret;\r\nstruct device *cpu_dev = get_cpu_device(cpumask_first(cpumask));\r\nret = scpi_ops->add_opps_to_device(cpu_dev);\r\nif (ret) {\r\ndev_warn(cpu_dev, "failed to add opps to the device\n");\r\nreturn ret;\r\n}\r\nret = dev_pm_opp_set_sharing_cpus(cpu_dev, cpumask);\r\nif (ret)\r\ndev_err(cpu_dev, "%s: failed to mark OPPs as shared: %d\n",\r\n__func__, ret);\r\nreturn ret;\r\n}\r\nstatic int scpi_cpufreq_probe(struct platform_device *pdev)\r\n{\r\nscpi_ops = get_scpi_ops();\r\nif (!scpi_ops)\r\nreturn -EIO;\r\nreturn bL_cpufreq_register(&scpi_cpufreq_ops);\r\n}\r\nstatic int scpi_cpufreq_remove(struct platform_device *pdev)\r\n{\r\nbL_cpufreq_unregister(&scpi_cpufreq_ops);\r\nscpi_ops = NULL;\r\nreturn 0;\r\n}
