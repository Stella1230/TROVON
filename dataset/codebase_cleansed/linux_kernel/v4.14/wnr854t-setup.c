static void __init wnr854t_init(void)\r\n{\r\norion5x_init();\r\norion5x_mpp_conf(wnr854t_mpp_modes);\r\norion5x_eth_init(&wnr854t_eth_data);\r\norion5x_eth_switch_init(&wnr854t_switch_chip_data);\r\norion5x_uart0_init();\r\nmvebu_mbus_add_window_by_id(ORION_MBUS_DEVBUS_BOOT_TARGET,\r\nORION_MBUS_DEVBUS_BOOT_ATTR,\r\nWNR854T_NOR_BOOT_BASE,\r\nWNR854T_NOR_BOOT_SIZE);\r\nplatform_device_register(&wnr854t_nor_flash);\r\n}\r\nstatic int __init wnr854t_pci_map_irq(const struct pci_dev *dev, u8 slot,\r\nu8 pin)\r\n{\r\nint irq;\r\nirq = orion5x_pci_map_irq(dev, slot, pin);\r\nif (irq != -1)\r\nreturn irq;\r\nif (slot == 7)\r\nreturn gpio_to_irq(4);\r\nreturn -1;\r\n}\r\nstatic int __init wnr854t_pci_init(void)\r\n{\r\nif (machine_is_wnr854t())\r\npci_common_init(&wnr854t_pci);\r\nreturn 0;\r\n}
