u32 PHY_CalculateBitShift(u32 BitMask)\r\n{\r\nu32 i;\r\nfor (i = 0; i <= 31; i++) {\r\nif (((BitMask>>i) & 0x1) == 1)\r\nbreak;\r\n}\r\nreturn i;\r\n}\r\nu32 PHY_RFShadowRead(IN PADAPTER Adapter, IN u8 eRFPath, IN u32 Offset)\r\n{\r\nreturn RF_Shadow[eRFPath][Offset].Value;\r\n}\r\nvoid PHY_RFShadowWrite(\r\nIN PADAPTER Adapter, IN u8 eRFPath, IN u32 Offset, IN u32 Data\r\n)\r\n{\r\nRF_Shadow[eRFPath][Offset].Value = (Data & bRFRegOffsetMask);\r\nRF_Shadow[eRFPath][Offset].Driver_Write = true;\r\n}\r\nbool PHY_RFShadowCompare(IN PADAPTER Adapter, IN u8 eRFPath, IN u32 Offset)\r\n{\r\nu32 reg;\r\nif (RF_Shadow[eRFPath][Offset].Compare == true) {\r\nreg = rtw_hal_read_rfreg(Adapter, eRFPath, Offset, bRFRegOffsetMask);\r\nif (RF_Shadow[eRFPath][Offset].Value != reg) {\r\nRF_Shadow[eRFPath][Offset].ErrorOrNot = true;\r\n}\r\nreturn RF_Shadow[eRFPath][Offset].ErrorOrNot;\r\n}\r\nreturn false;\r\n}\r\nvoid PHY_RFShadowRecorver(IN PADAPTER Adapter, IN u8 eRFPath, IN u32 Offset)\r\n{\r\nif (RF_Shadow[eRFPath][Offset].ErrorOrNot == true) {\r\nif (RF_Shadow[eRFPath][Offset].Recorver == true) {\r\nrtw_hal_write_rfreg(Adapter, eRFPath, Offset, bRFRegOffsetMask,\r\nRF_Shadow[eRFPath][Offset].Value);\r\n}\r\n}\r\n}\r\nvoid PHY_RFShadowCompareAll(IN PADAPTER Adapter)\r\n{\r\nu8 eRFPath = 0;\r\nu32 Offset = 0, maxReg = GET_RF6052_REAL_MAX_REG(Adapter);\r\nfor (eRFPath = 0; eRFPath < RF6052_MAX_PATH; eRFPath++) {\r\nfor (Offset = 0; Offset < maxReg; Offset++) {\r\nPHY_RFShadowCompare(Adapter, eRFPath, Offset);\r\n}\r\n}\r\n}\r\nvoid PHY_RFShadowRecorverAll(IN PADAPTER Adapter)\r\n{\r\nu8 eRFPath = 0;\r\nu32 Offset = 0, maxReg = GET_RF6052_REAL_MAX_REG(Adapter);\r\nfor (eRFPath = 0; eRFPath < RF6052_MAX_PATH; eRFPath++) {\r\nfor (Offset = 0; Offset < maxReg; Offset++) {\r\nPHY_RFShadowRecorver(Adapter, eRFPath, Offset);\r\n}\r\n}\r\n}\r\nvoid\r\nPHY_RFShadowCompareFlagSet(\r\nIN PADAPTER Adapter, IN u8 eRFPath, IN u32 Offset, IN u8 Type\r\n)\r\n{\r\nRF_Shadow[eRFPath][Offset].Compare = Type;\r\n}\r\nvoid PHY_RFShadowRecorverFlagSet(\r\nIN PADAPTER Adapter, IN u8 eRFPath, IN u32 Offset, IN u8 Type\r\n)\r\n{\r\nRF_Shadow[eRFPath][Offset].Recorver = Type;\r\n}\r\nvoid PHY_RFShadowCompareFlagSetAll(IN PADAPTER Adapter)\r\n{\r\nu8 eRFPath = 0;\r\nu32 Offset = 0, maxReg = GET_RF6052_REAL_MAX_REG(Adapter);\r\nfor (eRFPath = 0; eRFPath < RF6052_MAX_PATH; eRFPath++) {\r\nfor (Offset = 0; Offset < maxReg; Offset++) {\r\nif (Offset != 0x26 && Offset != 0x27)\r\nPHY_RFShadowCompareFlagSet(Adapter, eRFPath, Offset, false);\r\nelse\r\nPHY_RFShadowCompareFlagSet(Adapter, eRFPath, Offset, true);\r\n}\r\n}\r\n}\r\nvoid PHY_RFShadowRecorverFlagSetAll(IN PADAPTER Adapter)\r\n{\r\nu8 eRFPath = 0;\r\nu32 Offset = 0, maxReg = GET_RF6052_REAL_MAX_REG(Adapter);\r\nfor (eRFPath = 0; eRFPath < RF6052_MAX_PATH; eRFPath++) {\r\nfor (Offset = 0; Offset < maxReg; Offset++) {\r\nif (Offset != 0x26 && Offset != 0x27)\r\nPHY_RFShadowRecorverFlagSet(Adapter, eRFPath, Offset, false);\r\nelse\r\nPHY_RFShadowRecorverFlagSet(Adapter, eRFPath, Offset, true);\r\n}\r\n}\r\n}\r\nvoid PHY_RFShadowRefresh(IN PADAPTER Adapter)\r\n{\r\nu8 eRFPath = 0;\r\nu32 Offset = 0, maxReg = GET_RF6052_REAL_MAX_REG(Adapter);\r\nfor (eRFPath = 0; eRFPath < RF6052_MAX_PATH; eRFPath++) {\r\nfor (Offset = 0; Offset < maxReg; Offset++) {\r\nRF_Shadow[eRFPath][Offset].Value = 0;\r\nRF_Shadow[eRFPath][Offset].Compare = false;\r\nRF_Shadow[eRFPath][Offset].Recorver = false;\r\nRF_Shadow[eRFPath][Offset].ErrorOrNot = false;\r\nRF_Shadow[eRFPath][Offset].Driver_Write = false;\r\n}\r\n}\r\n}
