u8 _rtw_read8(struct adapter *adapter, u32 addr)\r\n{\r\nu8 r_val;\r\nstruct io_priv *pio_priv = &adapter->iopriv;\r\nstruct intf_hdl *pintfhdl = &(pio_priv->intf);\r\nu8 (*_read8)(struct intf_hdl *pintfhdl, u32 addr);\r\n_read8 = pintfhdl->io_ops._read8;\r\nr_val = _read8(pintfhdl, addr);\r\nreturn r_val;\r\n}\r\nu16 _rtw_read16(struct adapter *adapter, u32 addr)\r\n{\r\nu16 r_val;\r\nstruct io_priv *pio_priv = &adapter->iopriv;\r\nstruct intf_hdl *pintfhdl = &(pio_priv->intf);\r\nu16 (*_read16)(struct intf_hdl *pintfhdl, u32 addr);\r\n_read16 = pintfhdl->io_ops._read16;\r\nr_val = _read16(pintfhdl, addr);\r\nreturn rtw_le16_to_cpu(r_val);\r\n}\r\nu32 _rtw_read32(struct adapter *adapter, u32 addr)\r\n{\r\nu32 r_val;\r\nstruct io_priv *pio_priv = &adapter->iopriv;\r\nstruct intf_hdl *pintfhdl = &(pio_priv->intf);\r\nu32 (*_read32)(struct intf_hdl *pintfhdl, u32 addr);\r\n_read32 = pintfhdl->io_ops._read32;\r\nr_val = _read32(pintfhdl, addr);\r\nreturn rtw_le32_to_cpu(r_val);\r\n}\r\nint _rtw_write8(struct adapter *adapter, u32 addr, u8 val)\r\n{\r\nstruct io_priv *pio_priv = &adapter->iopriv;\r\nstruct intf_hdl *pintfhdl = &(pio_priv->intf);\r\nint (*_write8)(struct intf_hdl *pintfhdl, u32 addr, u8 val);\r\nint ret;\r\n_write8 = pintfhdl->io_ops._write8;\r\nret = _write8(pintfhdl, addr, val);\r\nreturn RTW_STATUS_CODE(ret);\r\n}\r\nint _rtw_write16(struct adapter *adapter, u32 addr, u16 val)\r\n{\r\nstruct io_priv *pio_priv = &adapter->iopriv;\r\nstruct intf_hdl *pintfhdl = &(pio_priv->intf);\r\nint (*_write16)(struct intf_hdl *pintfhdl, u32 addr, u16 val);\r\nint ret;\r\n_write16 = pintfhdl->io_ops._write16;\r\nret = _write16(pintfhdl, addr, val);\r\nreturn RTW_STATUS_CODE(ret);\r\n}\r\nint _rtw_write32(struct adapter *adapter, u32 addr, u32 val)\r\n{\r\nstruct io_priv *pio_priv = &adapter->iopriv;\r\nstruct intf_hdl *pintfhdl = &(pio_priv->intf);\r\nint (*_write32)(struct intf_hdl *pintfhdl, u32 addr, u32 val);\r\nint ret;\r\n_write32 = pintfhdl->io_ops._write32;\r\nret = _write32(pintfhdl, addr, val);\r\nreturn RTW_STATUS_CODE(ret);\r\n}\r\nu8 _rtw_sd_f0_read8(struct adapter *adapter, u32 addr)\r\n{\r\nu8 r_val = 0x00;\r\nstruct io_priv *pio_priv = &adapter->iopriv;\r\nstruct intf_hdl *pintfhdl = &(pio_priv->intf);\r\nu8 (*_sd_f0_read8)(struct intf_hdl *pintfhdl, u32 addr);\r\n_sd_f0_read8 = pintfhdl->io_ops._sd_f0_read8;\r\nif (_sd_f0_read8)\r\nr_val = _sd_f0_read8(pintfhdl, addr);\r\nelse\r\nDBG_871X_LEVEL(_drv_warning_, FUNC_ADPT_FMT" _sd_f0_read8 callback is NULL\n", FUNC_ADPT_ARG(adapter));\r\nreturn r_val;\r\n}\r\nu32 _rtw_write_port(struct adapter *adapter, u32 addr, u32 cnt, u8 *pmem)\r\n{\r\nu32 (*_write_port)(struct intf_hdl *pintfhdl, u32 addr, u32 cnt, u8 *pmem);\r\nstruct io_priv *pio_priv = &adapter->iopriv;\r\nstruct intf_hdl *pintfhdl = &(pio_priv->intf);\r\nu32 ret = _SUCCESS;\r\n_write_port = pintfhdl->io_ops._write_port;\r\nret = _write_port(pintfhdl, addr, cnt, pmem);\r\nreturn ret;\r\n}\r\nint rtw_init_io_priv(struct adapter *padapter, void (*set_intf_ops)(struct adapter *padapter, struct _io_ops *pops))\r\n{\r\nstruct io_priv *piopriv = &padapter->iopriv;\r\nstruct intf_hdl *pintf = &piopriv->intf;\r\nif (set_intf_ops == NULL)\r\nreturn _FAIL;\r\npiopriv->padapter = padapter;\r\npintf->padapter = padapter;\r\npintf->pintf_dev = adapter_to_dvobj(padapter);\r\nset_intf_ops(padapter, &pintf->io_ops);\r\nreturn _SUCCESS;\r\n}\r\nint rtw_inc_and_chk_continual_io_error(struct dvobj_priv *dvobj)\r\n{\r\nint ret = false;\r\nint value = atomic_inc_return(&dvobj->continual_io_error);\r\nif (value > MAX_CONTINUAL_IO_ERR) {\r\nDBG_871X("[dvobj:%p][ERROR] continual_io_error:%d > %d\n", dvobj, value, MAX_CONTINUAL_IO_ERR);\r\nret = true;\r\n} else {\r\n}\r\nreturn ret;\r\n}\r\nvoid rtw_reset_continual_io_error(struct dvobj_priv *dvobj)\r\n{\r\natomic_set(&dvobj->continual_io_error, 0);\r\n}
