int __init bcm63xx_uart_register(unsigned int id)\r\n{\r\nif (id >= ARRAY_SIZE(bcm63xx_uart_devices))\r\nreturn -ENODEV;\r\nif (id == 1 && (!BCMCPU_IS_3368() && !BCMCPU_IS_6358() &&\r\n!BCMCPU_IS_6368()))\r\nreturn -ENODEV;\r\nif (id == 0) {\r\nuart0_resources[0].start = bcm63xx_regset_address(RSET_UART0);\r\nuart0_resources[0].end = uart0_resources[0].start +\r\nRSET_UART_SIZE - 1;\r\nuart0_resources[1].start = bcm63xx_get_irq_number(IRQ_UART0);\r\n}\r\nif (id == 1) {\r\nuart1_resources[0].start = bcm63xx_regset_address(RSET_UART1);\r\nuart1_resources[0].end = uart1_resources[0].start +\r\nRSET_UART_SIZE - 1;\r\nuart1_resources[1].start = bcm63xx_get_irq_number(IRQ_UART1);\r\n}\r\nreturn platform_device_register(&bcm63xx_uart_devices[id]);\r\n}
