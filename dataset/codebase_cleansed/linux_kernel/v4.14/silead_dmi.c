static void silead_ts_dmi_add_props(struct i2c_client *client)\r\n{\r\nstruct device *dev = &client->dev;\r\nint error;\r\nif (has_acpi_companion(dev) &&\r\n!strncmp(silead_ts_data->acpi_name, client->name, I2C_NAME_SIZE)) {\r\nerror = device_add_properties(dev, silead_ts_data->properties);\r\nif (error)\r\ndev_err(dev, "failed to add properties: %d\n", error);\r\n}\r\n}\r\nstatic int silead_ts_dmi_notifier_call(struct notifier_block *nb,\r\nunsigned long action, void *data)\r\n{\r\nstruct device *dev = data;\r\nstruct i2c_client *client;\r\nswitch (action) {\r\ncase BUS_NOTIFY_ADD_DEVICE:\r\nclient = i2c_verify_client(dev);\r\nif (client)\r\nsilead_ts_dmi_add_props(client);\r\nbreak;\r\ndefault:\r\nbreak;\r\n}\r\nreturn 0;\r\n}\r\nstatic int __init silead_ts_dmi_init(void)\r\n{\r\nconst struct dmi_system_id *dmi_id;\r\nint error;\r\ndmi_id = dmi_first_match(silead_ts_dmi_table);\r\nif (!dmi_id)\r\nreturn 0;\r\nsilead_ts_data = dmi_id->driver_data;\r\nerror = bus_register_notifier(&i2c_bus_type, &silead_ts_dmi_notifier);\r\nif (error)\r\npr_err("%s: failed to register i2c bus notifier: %d\n",\r\n__func__, error);\r\nreturn error;\r\n}
