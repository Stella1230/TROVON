static int sirf_audio_port_dai_probe(struct snd_soc_dai *dai)\r\n{\r\nstruct sirf_audio_port *port = snd_soc_dai_get_drvdata(dai);\r\nsnd_soc_dai_init_dma_data(dai, &port->playback_dma_data,\r\n&port->capture_dma_data);\r\nreturn 0;\r\n}\r\nstatic int sirf_audio_port_probe(struct platform_device *pdev)\r\n{\r\nint ret;\r\nstruct sirf_audio_port *port;\r\nport = devm_kzalloc(&pdev->dev,\r\nsizeof(struct sirf_audio_port), GFP_KERNEL);\r\nif (!port)\r\nreturn -ENOMEM;\r\nret = devm_snd_soc_register_component(&pdev->dev,\r\n&sirf_audio_port_component, &sirf_audio_port_dai, 1);\r\nif (ret)\r\nreturn ret;\r\nplatform_set_drvdata(pdev, port);\r\nreturn devm_snd_dmaengine_pcm_register(&pdev->dev, NULL, 0);\r\n}
