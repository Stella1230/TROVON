static int notify_user_space(struct thermal_zone_device *tz, int trip)\r\n{\r\nchar *thermal_prop[5];\r\nint i;\r\nmutex_lock(&tz->lock);\r\nthermal_prop[0] = kasprintf(GFP_KERNEL, "NAME=%s", tz->type);\r\nthermal_prop[1] = kasprintf(GFP_KERNEL, "TEMP=%d", tz->temperature);\r\nthermal_prop[2] = kasprintf(GFP_KERNEL, "TRIP=%d", trip);\r\nthermal_prop[3] = kasprintf(GFP_KERNEL, "EVENT=%d", tz->notify_event);\r\nthermal_prop[4] = NULL;\r\nkobject_uevent_env(&tz->device.kobj, KOBJ_CHANGE, thermal_prop);\r\nfor (i = 0; i < 4; ++i)\r\nkfree(thermal_prop[i]);\r\nmutex_unlock(&tz->lock);\r\nreturn 0;\r\n}\r\nint thermal_gov_user_space_register(void)\r\n{\r\nreturn thermal_register_governor(&thermal_gov_user_space);\r\n}\r\nvoid thermal_gov_user_space_unregister(void)\r\n{\r\nthermal_unregister_governor(&thermal_gov_user_space);\r\n}
