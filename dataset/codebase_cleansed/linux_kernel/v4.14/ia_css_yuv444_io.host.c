void\r\nia_css_yuv444_io_config(\r\nconst struct ia_css_binary *binary,\r\nconst struct sh_css_binary_args *args)\r\n{\r\nconst struct ia_css_frame *in_frame = args->in_frame;\r\nconst struct ia_css_frame **out_frames = (const struct ia_css_frame **)& args->out_frame;\r\nconst struct ia_css_frame_info *in_frame_info = (in_frame) ? &in_frame->info : &binary->in_frame_info;\r\nconst unsigned ddr_bits_per_element = sizeof(short) * 8;\r\nconst unsigned ddr_elems_per_word = ceil_div(HIVE_ISP_DDR_WORD_BITS, ddr_bits_per_element);\r\nunsigned size_get = 0, size_put = 0;\r\nunsigned offset = 0;\r\nif (binary->info->mem_offsets.offsets.param) {\r\nsize_get = binary->info->mem_offsets.offsets.param->dmem.get.size;\r\noffset = binary->info->mem_offsets.offsets.param->dmem.get.offset;\r\n}\r\nif (size_get) {\r\nstruct ia_css_common_io_config *to = (struct ia_css_common_io_config *)&binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_DMEM].address[offset];\r\nstruct dma_port_config config;\r\n#ifndef IA_CSS_NO_DEBUG\r\nia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_yuv444_io_config() get part enter:\n");\r\n#endif\r\nia_css_dma_configure_from_info(&config, in_frame_info);\r\nto->width = in_frame_info->res.width;\r\nto->height = in_frame_info->res.height;\r\nto->stride = config.stride;\r\nto->ddr_elems_per_word = ddr_elems_per_word;\r\n#ifndef IA_CSS_NO_DEBUG\r\nia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_yuv444_io_config() get part leave:\n");\r\n#endif\r\n}\r\nif (binary->info->mem_offsets.offsets.param) {\r\nsize_put = binary->info->mem_offsets.offsets.param->dmem.put.size;\r\noffset = binary->info->mem_offsets.offsets.param->dmem.put.offset;\r\n}\r\nif (size_put) {\r\nstruct ia_css_common_io_config *to = (struct ia_css_common_io_config *)&binary->mem_params.params[IA_CSS_PARAM_CLASS_PARAM][IA_CSS_ISP_DMEM].address[offset];\r\nstruct dma_port_config config;\r\n#ifndef IA_CSS_NO_DEBUG\r\nia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_yuv444_io_config() put part enter:\n");\r\n#endif\r\nia_css_dma_configure_from_info(&config, &out_frames[0]->info);\r\nto->base_address = out_frames[0]->data;\r\nto->width = out_frames[0]->info.res.width;\r\nto->height = out_frames[0]->info.res.height;\r\nto->stride = config.stride;\r\nto->ddr_elems_per_word = ddr_elems_per_word;\r\n#ifndef IA_CSS_NO_DEBUG\r\nia_css_debug_dtrace(IA_CSS_DEBUG_TRACE_PRIVATE, "ia_css_yuv444_io_config() put part leave:\n");\r\n#endif\r\n}\r\n}
