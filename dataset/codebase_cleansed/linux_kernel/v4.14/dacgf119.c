static void\r\ngf119_dac_clock(struct nvkm_ior *dac)\r\n{\r\nstruct nvkm_device *device = dac->disp->engine.subdev.device;\r\nconst u32 doff = nv50_ior_base(dac);\r\nnvkm_mask(device, 0x612280 + doff, 0x07070707, 0x00000000);\r\n}\r\nstatic void\r\ngf119_dac_state(struct nvkm_ior *dac, struct nvkm_ior_state *state)\r\n{\r\nstruct nvkm_device *device = dac->disp->engine.subdev.device;\r\nconst u32 coff = (state == &dac->asy) * 0x20000 + dac->id * 0x20;\r\nu32 ctrl = nvkm_rd32(device, 0x640180 + coff);\r\nstate->proto_evo = (ctrl & 0x00000f00) >> 8;\r\nswitch (state->proto_evo) {\r\ncase 0: state->proto = CRT; break;\r\ndefault:\r\nstate->proto = UNKNOWN;\r\nbreak;\r\n}\r\nstate->head = ctrl & 0x0000000f;\r\n}\r\nint\r\ngf119_dac_new(struct nvkm_disp *disp, int id)\r\n{\r\nstruct nvkm_device *device = disp->engine.subdev.device;\r\nif (!(nvkm_rd32(device, 0x612004) & (0x00000010 << id)))\r\nreturn 0;\r\nreturn nvkm_ior_new_(&gf119_dac, disp, DAC, id);\r\n}
