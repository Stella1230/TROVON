static void __init clps711x_map_io(void)\r\n{\r\niotable_init(&clps711x_io_desc, 1);\r\n}\r\nstatic void __init clps711x_init(void)\r\n{\r\nu32 id[5];\r\nid[0] = readl(CLPS711X_VIRT_BASE + UNIQID);\r\nid[1] = readl(CLPS711X_VIRT_BASE + RANDID0);\r\nid[2] = readl(CLPS711X_VIRT_BASE + RANDID1);\r\nid[3] = readl(CLPS711X_VIRT_BASE + RANDID2);\r\nid[4] = readl(CLPS711X_VIRT_BASE + RANDID3);\r\nsystem_rev = SYSFLG1_VERID(readl(CLPS711X_VIRT_BASE + SYSFLG1));\r\nadd_device_randomness(id, sizeof(id));\r\nsystem_serial_low = id[0];\r\nplatform_device_register_simple("clps711x-cpuidle", PLATFORM_DEVID_NONE,\r\n&clps711x_cpuidle_res, 1);\r\n}\r\nstatic void clps711x_restart(enum reboot_mode mode, const char *cmd)\r\n{\r\nsoft_restart(0);\r\n}
