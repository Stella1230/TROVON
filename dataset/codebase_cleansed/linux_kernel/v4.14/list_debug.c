bool __list_add_valid(struct list_head *new, struct list_head *prev,\r\nstruct list_head *next)\r\n{\r\nif (CHECK_DATA_CORRUPTION(next->prev != prev,\r\n"list_add corruption. next->prev should be prev (%p), but was %p. (next=%p).\n",\r\nprev, next->prev, next) ||\r\nCHECK_DATA_CORRUPTION(prev->next != next,\r\n"list_add corruption. prev->next should be next (%p), but was %p. (prev=%p).\n",\r\nnext, prev->next, prev) ||\r\nCHECK_DATA_CORRUPTION(new == prev || new == next,\r\n"list_add double add: new=%p, prev=%p, next=%p.\n",\r\nnew, prev, next))\r\nreturn false;\r\nreturn true;\r\n}\r\nbool __list_del_entry_valid(struct list_head *entry)\r\n{\r\nstruct list_head *prev, *next;\r\nprev = entry->prev;\r\nnext = entry->next;\r\nif (CHECK_DATA_CORRUPTION(next == LIST_POISON1,\r\n"list_del corruption, %p->next is LIST_POISON1 (%p)\n",\r\nentry, LIST_POISON1) ||\r\nCHECK_DATA_CORRUPTION(prev == LIST_POISON2,\r\n"list_del corruption, %p->prev is LIST_POISON2 (%p)\n",\r\nentry, LIST_POISON2) ||\r\nCHECK_DATA_CORRUPTION(prev->next != entry,\r\n"list_del corruption. prev->next should be %p, but was %p\n",\r\nentry, prev->next) ||\r\nCHECK_DATA_CORRUPTION(next->prev != entry,\r\n"list_del corruption. next->prev should be %p, but was %p\n",\r\nentry, next->prev))\r\nreturn false;\r\nreturn true;\r\n}
