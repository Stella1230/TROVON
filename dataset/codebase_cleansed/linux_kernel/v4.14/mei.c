static int microread_mei_probe(struct mei_cl_device *cldev,\r\nconst struct mei_cl_device_id *id)\r\n{\r\nstruct nfc_mei_phy *phy;\r\nint r;\r\npr_info("Probing NFC microread\n");\r\nphy = nfc_mei_phy_alloc(cldev);\r\nif (!phy) {\r\npr_err("Cannot allocate memory for microread mei phy.\n");\r\nreturn -ENOMEM;\r\n}\r\nr = microread_probe(phy, &mei_phy_ops, LLC_NOP_NAME,\r\nMEI_NFC_HEADER_SIZE, 0, MEI_NFC_MAX_HCI_PAYLOAD,\r\n&phy->hdev);\r\nif (r < 0) {\r\nnfc_mei_phy_free(phy);\r\nreturn r;\r\n}\r\nreturn 0;\r\n}\r\nstatic int microread_mei_remove(struct mei_cl_device *cldev)\r\n{\r\nstruct nfc_mei_phy *phy = mei_cldev_get_drvdata(cldev);\r\nmicroread_remove(phy->hdev);\r\nnfc_mei_phy_free(phy);\r\nreturn 0;\r\n}
