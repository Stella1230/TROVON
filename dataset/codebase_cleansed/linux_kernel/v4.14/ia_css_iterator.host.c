void\r\nia_css_iterator_config(\r\nstruct sh_css_isp_iterator_isp_config *to,\r\nconst struct ia_css_iterator_configuration *from,\r\nunsigned size)\r\n{\r\n(void)size;\r\nia_css_frame_info_to_frame_sp_info(&to->input_info, from->input_info);\r\nia_css_frame_info_to_frame_sp_info(&to->internal_info, from->internal_info);\r\nia_css_frame_info_to_frame_sp_info(&to->output_info, from->output_info);\r\nia_css_frame_info_to_frame_sp_info(&to->vf_info, from->vf_info);\r\nia_css_resolution_to_sp_resolution(&to->dvs_envelope, from->dvs_envelope);\r\n}\r\nenum ia_css_err\r\nia_css_iterator_configure(\r\nconst struct ia_css_binary *binary,\r\nconst struct ia_css_frame_info *in_info)\r\n{\r\nstruct ia_css_frame_info my_info = IA_CSS_BINARY_DEFAULT_FRAME_INFO;\r\nstruct ia_css_iterator_configuration config = default_config;\r\nconfig.input_info = &binary->in_frame_info;\r\nconfig.internal_info = &binary->internal_frame_info;\r\nconfig.output_info = &binary->out_frame_info[0];\r\nconfig.vf_info = &binary->vf_frame_info;\r\nconfig.dvs_envelope = &binary->dvs_envelope;\r\nif (in_info)\r\nconfig.input_info = in_info;\r\nif (binary->out_frame_info[0].res.width == 0)\r\nconfig.output_info = &binary->out_frame_info[1];\r\nmy_info = *config.output_info;\r\nconfig.output_info = &my_info;\r\nif (binary->info->sp.pipeline.mode == IA_CSS_BINARY_MODE_PREVIEW &&\r\nbinary->vf_downscale_log2 > 0) {\r\nmy_info.padded_width <<= binary->vf_downscale_log2;\r\nmy_info.res.width <<= binary->vf_downscale_log2;\r\nmy_info.res.height <<= binary->vf_downscale_log2;\r\n}\r\nia_css_configure_iterator(binary, &config);\r\nreturn IA_CSS_SUCCESS;\r\n}
