void pvr2_cx25840_subdev_update(struct pvr2_hdw *hdw, struct v4l2_subdev *sd)\r\n{\r\npvr2_trace(PVR2_TRACE_CHIPS, "subdev cx2584x update...");\r\nif (hdw->input_dirty || hdw->force_dirty) {\r\nenum cx25840_video_input vid_input;\r\nenum cx25840_audio_input aud_input;\r\nconst struct routing_scheme *sp;\r\nunsigned int sid = hdw->hdw_desc->signal_routing_scheme;\r\nsp = (sid < ARRAY_SIZE(routing_schemes)) ?\r\nrouting_schemes[sid] : NULL;\r\nif ((sp == NULL) ||\r\n(hdw->input_val < 0) ||\r\n(hdw->input_val >= sp->cnt)) {\r\npvr2_trace(PVR2_TRACE_ERROR_LEGS,\r\n"*** WARNING *** subdev cx2584x set_input: Invalid routing scheme (%u) and/or input (%d)",\r\nsid, hdw->input_val);\r\nreturn;\r\n}\r\nvid_input = sp->def[hdw->input_val].vid;\r\naud_input = sp->def[hdw->input_val].aud;\r\npvr2_trace(PVR2_TRACE_CHIPS,\r\n"subdev cx2584x set_input vid=0x%x aud=0x%x",\r\nvid_input, aud_input);\r\nsd->ops->video->s_routing(sd, (u32)vid_input, 0, 0);\r\nsd->ops->audio->s_routing(sd, (u32)aud_input, 0, 0);\r\n}\r\n}
