void\r\nia_css_bnr_encode(\r\nstruct sh_css_isp_bnr_params *to,\r\nconst struct ia_css_nr_config *from,\r\nunsigned size)\r\n{\r\n(void)size;\r\nto->threshold_low =\r\nuDIGIT_FITTING(from->direction, 16, SH_CSS_BAYER_BITS);\r\nto->threshold_width_log2 = uFRACTION_BITS_FITTING(8);\r\nto->threshold_width =\r\n1 << to->threshold_width_log2;\r\nto->gain_all =\r\nuDIGIT_FITTING(from->bnr_gain, 16, SH_CSS_BNR_GAIN_SHIFT);\r\nto->gain_dir =\r\nuDIGIT_FITTING(from->bnr_gain, 16, SH_CSS_BNR_GAIN_SHIFT);\r\nto->clip = uDIGIT_FITTING((unsigned)16384, 16, SH_CSS_BAYER_BITS);\r\n}\r\nvoid\r\nia_css_bnr_dump(\r\nconst struct sh_css_isp_bnr_params *bnr,\r\nunsigned level)\r\n{\r\nif (!bnr) return;\r\nia_css_debug_dtrace(level, "Bayer Noise Reduction:\n");\r\nia_css_debug_dtrace(level, "\t%-32s = %d\n",\r\n"bnr_gain_all", bnr->gain_all);\r\nia_css_debug_dtrace(level, "\t%-32s = %d\n",\r\n"bnr_gain_dir", bnr->gain_dir);\r\nia_css_debug_dtrace(level, "\t%-32s = %d\n",\r\n"bnr_threshold_low",\r\nbnr->threshold_low);\r\nia_css_debug_dtrace(level, "\t%-32s = %d\n",\r\n"bnr_threshold_width_log2",\r\nbnr->threshold_width_log2);\r\nia_css_debug_dtrace(level, "\t%-32s = %d\n",\r\n"bnr_threshold_width",\r\nbnr->threshold_width);\r\nia_css_debug_dtrace(level, "\t%-32s = %d\n",\r\n"bnr_clip", bnr->clip);\r\n}
