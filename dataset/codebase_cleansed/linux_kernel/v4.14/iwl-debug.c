void __iwl_err(struct device *dev, bool rfkill_prefix, bool trace_only,\r\nconst char *fmt, ...)\r\n{\r\nstruct va_format vaf = {\r\n.fmt = fmt,\r\n};\r\nva_list args;\r\nva_start(args, fmt);\r\nvaf.va = &args;\r\nif (!trace_only) {\r\nif (rfkill_prefix)\r\ndev_err(dev, "(RFKILL) %pV", &vaf);\r\nelse\r\ndev_err(dev, "%pV", &vaf);\r\n}\r\ntrace_iwlwifi_err(&vaf);\r\nva_end(args);\r\n}\r\nvoid __iwl_dbg(struct device *dev,\r\nu32 level, bool limit, const char *function,\r\nconst char *fmt, ...)\r\n{\r\nstruct va_format vaf = {\r\n.fmt = fmt,\r\n};\r\nva_list args;\r\nva_start(args, fmt);\r\nvaf.va = &args;\r\n#ifdef CONFIG_IWLWIFI_DEBUG\r\nif (iwl_have_debug_level(level) &&\r\n(!limit || net_ratelimit()))\r\ndev_printk(KERN_DEBUG, dev, "%c %s %pV",\r\nin_interrupt() ? 'I' : 'U', function, &vaf);\r\n#endif\r\ntrace_iwlwifi_dbg(level, in_interrupt(), function, &vaf);\r\nva_end(args);\r\n}
