void\r\nnouveau_irq_preinstall(struct drm_device *dev)\r\n{\r\nnv_wr32(nouveau_dev(dev), 0x000140, 0x00000000);\r\n}\r\nint\r\nnouveau_irq_postinstall(struct drm_device *dev)\r\n{\r\nnv_wr32(nouveau_dev(dev), 0x000140, 0x00000001);\r\nreturn 0;\r\n}\r\nvoid\r\nnouveau_irq_uninstall(struct drm_device *dev)\r\n{\r\nnv_wr32(nouveau_dev(dev), 0x000140, 0x00000000);\r\n}\r\nirqreturn_t\r\nnouveau_irq_handler(DRM_IRQ_ARGS)\r\n{\r\nstruct drm_device *dev = arg;\r\nstruct nouveau_device *device = nouveau_dev(dev);\r\nstruct nouveau_mc *pmc = nouveau_mc(device);\r\nu32 stat;\r\nstat = nv_rd32(device, 0x000100);\r\nif (stat == 0 || stat == ~0)\r\nreturn IRQ_NONE;\r\nnv_subdev(pmc)->intr(nv_subdev(pmc));\r\nreturn IRQ_HANDLED;\r\n}\r\nint\r\nnouveau_irq_init(struct drm_device *dev)\r\n{\r\nreturn drm_irq_install(dev);\r\n}\r\nvoid\r\nnouveau_irq_fini(struct drm_device *dev)\r\n{\r\ndrm_irq_uninstall(dev);\r\n}
