int __init msm_add_sdcc(unsigned int controller,\r\nstruct msm_mmc_platform_data *plat,\r\nunsigned int stat_irq, unsigned long stat_irq_flags)\r\n{\r\nstruct platform_device *pdev;\r\nstruct resource *res;\r\nif (controller < 1 || controller > 4)\r\nreturn -EINVAL;\r\npdev = msm_sdcc_devices[controller-1];\r\npdev->dev.platform_data = plat;\r\nres = platform_get_resource_byname(pdev, IORESOURCE_IRQ, "status_irq");\r\nif (!res)\r\nreturn -EINVAL;\r\nelse if (stat_irq) {\r\nres->start = res->end = stat_irq;\r\nres->flags &= ~IORESOURCE_DISABLED;\r\nres->flags |= stat_irq_flags;\r\n}\r\nreturn platform_device_register(pdev);\r\n}
