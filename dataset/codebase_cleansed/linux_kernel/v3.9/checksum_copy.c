unsigned int csum_partial_copy(const char *src, char *dst,\r\nint len, unsigned int sum)\r\n{\r\nsum = csum_partial(src, len, sum);\r\nmemcpy(dst, src, len);\r\nreturn sum;\r\n}\r\nunsigned int csum_partial_copy_from_user(const char *src, char *dst,\r\nint len, unsigned int sum,\r\nint *err_ptr)\r\n{\r\nint missing;\r\nmissing = copy_from_user(dst, src, len);\r\nif (missing) {\r\nmemset(dst + len - missing, 0, missing);\r\n*err_ptr = -EFAULT;\r\n}\r\nreturn csum_partial(dst, len, sum);\r\n}
