static int dgrp_init_module(void)\r\n{\r\nINIT_LIST_HEAD(&nd_struct_list);\r\nspin_lock_init(&dgrp_poll_data.poll_lock);\r\ninit_timer(&dgrp_poll_data.timer);\r\ndgrp_poll_data.poll_tick = dgrp_poll_tick;\r\ndgrp_poll_data.timer.function = dgrp_poll_handler;\r\ndgrp_poll_data.timer.data = (unsigned long) &dgrp_poll_data;\r\ndgrp_create_class_sysfs_files();\r\ndgrp_register_proc();\r\nreturn 0;\r\n}\r\nstatic void dgrp_cleanup_module(void)\r\n{\r\nstruct nd_struct *nd, *next;\r\ndgrp_unregister_proc();\r\ndgrp_remove_class_sysfs_files();\r\nlist_for_each_entry_safe(nd, next, &nd_struct_list, list) {\r\ndgrp_tty_uninit(nd);\r\nkfree(nd);\r\n}\r\n}
