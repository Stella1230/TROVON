pcomponent * __init\r\nArcGetPeer(pcomponent *Current)\r\n{\r\nif (Current == PROM_NULL_COMPONENT)\r\nreturn PROM_NULL_COMPONENT;\r\nreturn (pcomponent *) ARC_CALL1(next_component, Current);\r\n}\r\npcomponent * __init\r\nArcGetChild(pcomponent *Current)\r\n{\r\nreturn (pcomponent *) ARC_CALL1(child_component, Current);\r\n}\r\npcomponent * __init\r\nArcGetParent(pcomponent *Current)\r\n{\r\nif (Current == PROM_NULL_COMPONENT)\r\nreturn PROM_NULL_COMPONENT;\r\nreturn (pcomponent *) ARC_CALL1(parent_component, Current);\r\n}\r\nLONG __init\r\nArcGetConfigurationData(VOID *Buffer, pcomponent *Current)\r\n{\r\nreturn ARC_CALL2(component_data, Buffer, Current);\r\n}\r\npcomponent * __init\r\nArcAddChild(pcomponent *Current, pcomponent *Template, VOID *ConfigurationData)\r\n{\r\nreturn (pcomponent *)\r\nARC_CALL3(child_add, Current, Template, ConfigurationData);\r\n}\r\nLONG __init\r\nArcDeleteComponent(pcomponent *ComponentToDelete)\r\n{\r\nreturn ARC_CALL1(comp_del, ComponentToDelete);\r\n}\r\npcomponent * __init\r\nArcGetComponent(CHAR *Path)\r\n{\r\nreturn (pcomponent *)ARC_CALL1(component_by_path, Path);\r\n}\r\nstatic void __init\r\ndump_component(pcomponent *p)\r\n{\r\nprintk("[%p]:class<%s>type<%s>flags<%s>ver<%d>rev<%d>",\r\np, classes[p->class], types[p->type],\r\niflags[p->iflags], p->vers, p->rev);\r\nprintk("key<%08lx>\n\tamask<%08lx>cdsize<%d>ilen<%d>iname<%s>\n",\r\np->key, p->amask, (int)p->cdsize, (int)p->ilen, p->iname);\r\n}\r\nstatic void __init\r\ntraverse(pcomponent *p, int op)\r\n{\r\ndump_component(p);\r\nif(ArcGetChild(p))\r\ntraverse(ArcGetChild(p), 1);\r\nif(ArcGetPeer(p) && op)\r\ntraverse(ArcGetPeer(p), 1);\r\n}\r\nvoid __init\r\nprom_testtree(void)\r\n{\r\npcomponent *p;\r\np = ArcGetChild(PROM_NULL_COMPONENT);\r\ndump_component(p);\r\np = ArcGetChild(p);\r\nwhile(p) {\r\ndump_component(p);\r\np = ArcGetPeer(p);\r\n}\r\n}
