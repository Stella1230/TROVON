void __init omap4_panda_display_init(void)\r\n{\r\nomap_display_init(&omap4_panda_dss_data);\r\nif (cpu_is_omap446x() || omap_rev() > OMAP4430_REV_ES2_2)\r\nomap_hdmi_init(OMAP_HDMI_SDA_SCL_EXTERNAL_PULLUP);\r\nelse\r\nomap_hdmi_init(0);\r\nomap_mux_init_gpio(HDMI_GPIO_LS_OE, OMAP_PIN_OUTPUT);\r\nomap_mux_init_gpio(HDMI_GPIO_CT_CP_HPD, OMAP_PIN_OUTPUT);\r\nomap_mux_init_gpio(HDMI_GPIO_HPD, OMAP_PIN_INPUT_PULLDOWN);\r\n}\r\nvoid __init omap4_panda_display_init_of(void)\r\n{\r\nomap_display_init(&omap4_panda_dss_data);\r\n}\r\nstatic void sdp4430_picodlp_init(void)\r\n{\r\nint r;\r\nconst struct gpio picodlp_gpios[] = {\r\n{DLP_POWER_ON_GPIO, GPIOF_OUT_INIT_LOW,\r\n"DLP POWER ON"},\r\n{sdp4430_picodlp_pdata.emu_done_gpio, GPIOF_IN,\r\n"DLP EMU DONE"},\r\n{sdp4430_picodlp_pdata.pwrgood_gpio, GPIOF_OUT_INIT_LOW,\r\n"DLP PWRGOOD"},\r\n};\r\nr = gpio_request_array(picodlp_gpios, ARRAY_SIZE(picodlp_gpios));\r\nif (r)\r\npr_err("Cannot request PicoDLP GPIOs, error %d\n", r);\r\n}\r\nstatic int sdp4430_panel_enable_picodlp(struct omap_dss_device *dssdev)\r\n{\r\ngpio_set_value(DISPLAY_SEL_GPIO, 0);\r\ngpio_set_value(DLP_POWER_ON_GPIO, 1);\r\nreturn 0;\r\n}\r\nstatic void sdp4430_panel_disable_picodlp(struct omap_dss_device *dssdev)\r\n{\r\ngpio_set_value(DLP_POWER_ON_GPIO, 0);\r\ngpio_set_value(DISPLAY_SEL_GPIO, 1);\r\n}\r\nvoid __init omap_4430sdp_display_init(void)\r\n{\r\nint r;\r\nr = gpio_request_one(DISPLAY_SEL_GPIO, GPIOF_OUT_INIT_HIGH,\r\n"display_sel");\r\nif (r)\r\npr_err("%s: Could not get display_sel GPIO\n", __func__);\r\nsdp4430_picodlp_init();\r\nomap_display_init(&sdp4430_dss_data);\r\nif (cpu_is_omap446x() || omap_rev() > OMAP4430_REV_ES2_2)\r\nomap_hdmi_init(OMAP_HDMI_SDA_SCL_EXTERNAL_PULLUP);\r\nelse\r\nomap_hdmi_init(0);\r\nomap_mux_init_gpio(HDMI_GPIO_LS_OE, OMAP_PIN_OUTPUT);\r\nomap_mux_init_gpio(HDMI_GPIO_CT_CP_HPD, OMAP_PIN_OUTPUT);\r\nomap_mux_init_gpio(HDMI_GPIO_HPD, OMAP_PIN_INPUT_PULLDOWN);\r\n}\r\nvoid __init omap_4430sdp_display_init_of(void)\r\n{\r\nint r;\r\nr = gpio_request_one(DISPLAY_SEL_GPIO, GPIOF_OUT_INIT_HIGH,\r\n"display_sel");\r\nif (r)\r\npr_err("%s: Could not get display_sel GPIO\n", __func__);\r\nsdp4430_picodlp_init();\r\nomap_display_init(&sdp4430_dss_data);\r\n}
