static void eukrea_mbimxsd51_lcd_power_set(struct plat_lcd_data *pd,\r\nunsigned int power)\r\n{\r\nif (power)\r\ngpio_direction_output(GPIO_LCDRST, 1);\r\nelse\r\ngpio_direction_output(GPIO_LCDRST, 0);\r\n}\r\nstatic void eukrea_mbimxsd51_bl_set_intensity(int intensity)\r\n{\r\nif (intensity)\r\ngpio_direction_output(GPIO_LCDBL, 1);\r\nelse\r\ngpio_direction_output(GPIO_LCDBL, 0);\r\n}\r\nstatic int __init eukrea_mbimxsd51_screen_type(char *options)\r\n{\r\nif (!strcmp(options, "dvi"))\r\nscreen_type = 1;\r\nelse if (!strcmp(options, "tft"))\r\nscreen_type = 0;\r\nreturn 0;\r\n}\r\nvoid __init eukrea_mbimxsd51_baseboard_init(void)\r\n{\r\nif (mxc_iomux_v3_setup_multiple_pads(eukrea_mbimxsd51_pads,\r\nARRAY_SIZE(eukrea_mbimxsd51_pads)))\r\nprintk(KERN_ERR "error setting mbimxsd pads !\n");\r\nimx51_add_imx_uart(1, NULL);\r\nimx51_add_imx_uart(2, &uart_pdata);\r\nimx51_add_sdhci_esdhc_imx(0, NULL);\r\nimx51_add_imx_ssi(0, &eukrea_mbimxsd51_ssi_pdata);\r\ngpio_request(GPIO_LED1, "LED1");\r\ngpio_direction_output(GPIO_LED1, 1);\r\ngpio_free(GPIO_LED1);\r\ngpio_request(GPIO_SWITCH1, "SWITCH1");\r\ngpio_direction_input(GPIO_SWITCH1);\r\ngpio_free(GPIO_SWITCH1);\r\ngpio_request(GPIO_LCDRST, "LCDRST");\r\ngpio_direction_output(GPIO_LCDRST, 0);\r\ngpio_request(GPIO_LCDBL, "LCDBL");\r\ngpio_direction_output(GPIO_LCDBL, 0);\r\nif (!screen_type) {\r\nplatform_device_register(&eukrea_mbimxsd51_bl_dev);\r\nplatform_device_register(&eukrea_mbimxsd51_lcd_powerdev);\r\n} else {\r\ngpio_free(GPIO_LCDRST);\r\ngpio_free(GPIO_LCDBL);\r\n}\r\ni2c_register_board_info(0, eukrea_mbimxsd51_i2c_devices,\r\nARRAY_SIZE(eukrea_mbimxsd51_i2c_devices));\r\ngpio_led_register_device(-1, &eukrea_mbimxsd51_led_info);\r\nimx_add_gpio_keys(&eukrea_mbimxsd51_button_data);\r\nimx_add_platform_device("eukrea_tlv320", 0, NULL, 0, NULL, 0);\r\n}
