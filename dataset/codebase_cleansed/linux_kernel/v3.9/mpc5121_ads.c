static void __init mpc5121_ads_setup_arch(void)\r\n{\r\n#ifdef CONFIG_PCI\r\nstruct device_node *np;\r\n#endif\r\nprintk(KERN_INFO "MPC5121 ADS board from Freescale Semiconductor\n");\r\nmpc5121_ads_cpld_map();\r\n#ifdef CONFIG_PCI\r\nfor_each_compatible_node(np, "pci", "fsl,mpc5121-pci")\r\nmpc83xx_add_bridge(np);\r\n#endif\r\n#if defined(CONFIG_FB_FSL_DIU) || defined(CONFIG_FB_FSL_DIU_MODULE)\r\nmpc512x_setup_diu();\r\n#endif\r\n}\r\nstatic void __init mpc5121_ads_init_IRQ(void)\r\n{\r\nmpc512x_init_IRQ();\r\nmpc5121_ads_cpld_pic_init();\r\n}\r\nstatic int __init mpc5121_ads_probe(void)\r\n{\r\nunsigned long root = of_get_flat_dt_root();\r\nreturn of_flat_dt_is_compatible(root, "fsl,mpc5121ads");\r\n}
