void\r\ndebug_string_indication(unifi_priv_t *priv, const unsigned char *extra, unsigned int extralen)\r\n{\r\nconst unsigned int maxlen = sizeof(priv->last_debug_string) - 1;\r\nif (extralen > maxlen) {\r\nextralen = maxlen;\r\n}\r\nstrncpy(priv->last_debug_string, extra, extralen);\r\npriv->last_debug_string[extralen] = '\0';\r\nunifi_info(priv, "unifi debug: %s\n", priv->last_debug_string);\r\n}\r\nvoid\r\ndebug_word16_indication(unifi_priv_t *priv, const CSR_SIGNAL *sigptr)\r\n{\r\nint i;\r\nif (priv == NULL) {\r\nunifi_info(priv, "Priv is NULL\n");\r\nreturn;\r\n}\r\nfor (i = 0; i < 16; i++) {\r\npriv->last_debug_word16[i] =\r\nsigptr->u.DebugWord16Indication.DebugWords[i];\r\n}\r\nif (priv->last_debug_word16[0] == 0xFA11) {\r\nunsigned long ts;\r\nts = (priv->last_debug_word16[6] << 16) | priv->last_debug_word16[5];\r\nunifi_info(priv, " %10lu: %s fault %04x, arg %04x (x%d)\n",\r\nts,\r\npriv->last_debug_word16[3] == 0x8000 ? "MAC" :\r\npriv->last_debug_word16[3] == 0x4000 ? "PHY" :\r\n"???",\r\npriv->last_debug_word16[1],\r\npriv->last_debug_word16[2],\r\npriv->last_debug_word16[4]);\r\n}\r\nelse if (priv->last_debug_word16[0] != 0xDBAC)\r\n{\r\nunifi_info(priv, "unifi debug: %04X %04X %04X %04X %04X %04X %04X %04X\n",\r\npriv->last_debug_word16[0], priv->last_debug_word16[1],\r\npriv->last_debug_word16[2], priv->last_debug_word16[3],\r\npriv->last_debug_word16[4], priv->last_debug_word16[5],\r\npriv->last_debug_word16[6], priv->last_debug_word16[7]);\r\nunifi_info(priv, " %04X %04X %04X %04X %04X %04X %04X %04X\n",\r\npriv->last_debug_word16[8], priv->last_debug_word16[9],\r\npriv->last_debug_word16[10], priv->last_debug_word16[11],\r\npriv->last_debug_word16[12], priv->last_debug_word16[13],\r\npriv->last_debug_word16[14], priv->last_debug_word16[15]);\r\n}\r\n}\r\nvoid\r\ndebug_generic_indication(unifi_priv_t *priv, const CSR_SIGNAL *sigptr)\r\n{\r\nunifi_info(priv, "debug: %04X %04X %04X %04X %04X %04X %04X %04X\n",\r\nsigptr->u.DebugGenericIndication.DebugWords[0],\r\nsigptr->u.DebugGenericIndication.DebugWords[1],\r\nsigptr->u.DebugGenericIndication.DebugWords[2],\r\nsigptr->u.DebugGenericIndication.DebugWords[3],\r\nsigptr->u.DebugGenericIndication.DebugWords[4],\r\nsigptr->u.DebugGenericIndication.DebugWords[5],\r\nsigptr->u.DebugGenericIndication.DebugWords[6],\r\nsigptr->u.DebugGenericIndication.DebugWords[7]);\r\n}
