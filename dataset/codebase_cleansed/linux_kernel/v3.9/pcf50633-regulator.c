static int pcf50633_regulator_probe(struct platform_device *pdev)\r\n{\r\nstruct regulator_dev *rdev;\r\nstruct pcf50633 *pcf;\r\nstruct regulator_config config = { };\r\npcf = dev_to_pcf50633(pdev->dev.parent);\r\nconfig.dev = &pdev->dev;\r\nconfig.init_data = pdev->dev.platform_data;\r\nconfig.driver_data = pcf;\r\nconfig.regmap = pcf->regmap;\r\nrdev = regulator_register(&regulators[pdev->id], &config);\r\nif (IS_ERR(rdev))\r\nreturn PTR_ERR(rdev);\r\nplatform_set_drvdata(pdev, rdev);\r\nif (pcf->pdata->regulator_registered)\r\npcf->pdata->regulator_registered(pcf, pdev->id);\r\nreturn 0;\r\n}\r\nstatic int pcf50633_regulator_remove(struct platform_device *pdev)\r\n{\r\nstruct regulator_dev *rdev = platform_get_drvdata(pdev);\r\nplatform_set_drvdata(pdev, NULL);\r\nregulator_unregister(rdev);\r\nreturn 0;\r\n}\r\nstatic int __init pcf50633_regulator_init(void)\r\n{\r\nreturn platform_driver_register(&pcf50633_regulator_driver);\r\n}\r\nstatic void __exit pcf50633_regulator_exit(void)\r\n{\r\nplatform_driver_unregister(&pcf50633_regulator_driver);\r\n}
