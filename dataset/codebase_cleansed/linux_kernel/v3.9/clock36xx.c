int omap36xx_pwrdn_clk_enable_with_hsdiv_restore(struct clk_hw *clk)\r\n{\r\nstruct clk_hw_omap *parent;\r\nstruct clk_hw *parent_hw;\r\nu32 dummy_v, orig_v, clksel_shift;\r\nint ret;\r\nret = omap2_dflt_clk_enable(clk);\r\nparent_hw = __clk_get_hw(__clk_get_parent(clk->clk));\r\nparent = to_clk_hw_omap(parent_hw);\r\nif (!ret) {\r\nclksel_shift = __ffs(parent->clksel_mask);\r\norig_v = __raw_readl(parent->clksel_reg);\r\ndummy_v = orig_v;\r\ndummy_v ^= (1 << clksel_shift);\r\n__raw_writel(dummy_v, parent->clksel_reg);\r\n__raw_writel(orig_v, parent->clksel_reg);\r\n}\r\nreturn ret;\r\n}
