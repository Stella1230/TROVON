static int bf5xx_ad1836_hw_params(struct snd_pcm_substream *substream,\r\nstruct snd_pcm_hw_params *params)\r\n{\r\nstruct snd_soc_pcm_runtime *rtd = substream->private_data;\r\nstruct snd_soc_dai *cpu_dai = rtd->cpu_dai;\r\nunsigned int channel_map[] = {0, 4, 1, 5, 2, 6, 3, 7};\r\nint ret = 0;\r\nret = snd_soc_dai_set_channel_map(cpu_dai, ARRAY_SIZE(channel_map),\r\nchannel_map, ARRAY_SIZE(channel_map), channel_map);\r\nif (ret < 0)\r\nreturn ret;\r\nreturn 0;\r\n}\r\nstatic int bf5xx_ad1836_driver_probe(struct platform_device *pdev)\r\n{\r\nstruct snd_soc_card *card = &bf5xx_ad1836;\r\nconst char **link_name;\r\nint ret;\r\nlink_name = pdev->dev.platform_data;\r\nif (!link_name) {\r\ndev_err(&pdev->dev, "No platform data supplied\n");\r\nreturn -EINVAL;\r\n}\r\nbf5xx_ad1836_dai.cpu_dai_name = link_name[0];\r\nbf5xx_ad1836_dai.codec_name = link_name[1];\r\ncard->dev = &pdev->dev;\r\nplatform_set_drvdata(pdev, card);\r\nret = snd_soc_register_card(card);\r\nif (ret)\r\ndev_err(&pdev->dev, "Failed to register card\n");\r\nreturn ret;\r\n}\r\nstatic int bf5xx_ad1836_driver_remove(struct platform_device *pdev)\r\n{\r\nstruct snd_soc_card *card = platform_get_drvdata(pdev);\r\nsnd_soc_unregister_card(card);\r\nreturn 0;\r\n}
