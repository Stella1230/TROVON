static void __init at91sam9260_register_clocks(void)\r\n{\r\nint i;\r\nfor (i = 0; i < ARRAY_SIZE(periph_clocks); i++)\r\nclk_register(periph_clocks[i]);\r\nclkdev_add_table(periph_clocks_lookups,\r\nARRAY_SIZE(periph_clocks_lookups));\r\nclkdev_add_table(usart_clocks_lookups,\r\nARRAY_SIZE(usart_clocks_lookups));\r\nclk_register(&pck0);\r\nclk_register(&pck1);\r\n}\r\nstatic void __init at91sam9xe_map_io(void)\r\n{\r\nunsigned long sram_size;\r\nswitch (at91_soc_initdata.cidr & AT91_CIDR_SRAMSIZ) {\r\ncase AT91_CIDR_SRAMSIZ_32K:\r\nsram_size = 2 * SZ_16K;\r\nbreak;\r\ncase AT91_CIDR_SRAMSIZ_16K:\r\ndefault:\r\nsram_size = SZ_16K;\r\n}\r\nat91_init_sram(0, AT91SAM9XE_SRAM_BASE, sram_size);\r\n}\r\nstatic void __init at91sam9260_map_io(void)\r\n{\r\nif (cpu_is_at91sam9xe())\r\nat91sam9xe_map_io();\r\nelse if (cpu_is_at91sam9g20())\r\nat91_init_sram(0, AT91SAM9G20_SRAM_BASE, AT91SAM9G20_SRAM_SIZE);\r\nelse\r\nat91_init_sram(0, AT91SAM9260_SRAM_BASE, AT91SAM9260_SRAM_SIZE);\r\n}\r\nstatic void __init at91sam9260_ioremap_registers(void)\r\n{\r\nat91_ioremap_shdwc(AT91SAM9260_BASE_SHDWC);\r\nat91_ioremap_rstc(AT91SAM9260_BASE_RSTC);\r\nat91_ioremap_ramc(0, AT91SAM9260_BASE_SDRAMC, 512);\r\nat91sam926x_ioremap_pit(AT91SAM9260_BASE_PIT);\r\nat91sam9_ioremap_smc(0, AT91SAM9260_BASE_SMC);\r\nat91_ioremap_matrix(AT91SAM9260_BASE_MATRIX);\r\n}\r\nstatic void __init at91sam9260_initialize(void)\r\n{\r\narm_pm_idle = at91sam9_idle;\r\narm_pm_restart = at91sam9_alt_restart;\r\nat91_extern_irq = (1 << AT91SAM9260_ID_IRQ0) | (1 << AT91SAM9260_ID_IRQ1)\r\n| (1 << AT91SAM9260_ID_IRQ2);\r\nat91_gpio_init(at91sam9260_gpio, 3);\r\n}
