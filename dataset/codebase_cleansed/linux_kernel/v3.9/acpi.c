int xen_acpi_notify_hypervisor_state(u8 sleep_state,\r\nu32 pm1a_cnt, u32 pm1b_cnt)\r\n{\r\nstruct xen_platform_op op = {\r\n.cmd = XENPF_enter_acpi_sleep,\r\n.interface_version = XENPF_INTERFACE_VERSION,\r\n.u = {\r\n.enter_acpi_sleep = {\r\n.pm1a_cnt_val = (u16)pm1a_cnt,\r\n.pm1b_cnt_val = (u16)pm1b_cnt,\r\n.sleep_state = sleep_state,\r\n},\r\n},\r\n};\r\nif ((pm1a_cnt & 0xffff0000) || (pm1b_cnt & 0xffff0000)) {\r\nWARN(1, "Using more than 16bits of PM1A/B 0x%x/0x%x!"\r\n"Email xen-devel@lists.xensource.com Thank you.\n", \\r\npm1a_cnt, pm1b_cnt);\r\nreturn -1;\r\n}\r\nHYPERVISOR_dom0_op(&op);\r\nreturn 1;\r\n}
