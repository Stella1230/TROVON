static int devfreq_performance_func(struct devfreq *df,\r\nunsigned long *freq)\r\n{\r\nif (!df->max_freq)\r\n*freq = UINT_MAX;\r\nelse\r\n*freq = df->max_freq;\r\nreturn 0;\r\n}\r\nstatic int devfreq_performance_handler(struct devfreq *devfreq,\r\nunsigned int event, void *data)\r\n{\r\nint ret = 0;\r\nif (event == DEVFREQ_GOV_START) {\r\nmutex_lock(&devfreq->lock);\r\nret = update_devfreq(devfreq);\r\nmutex_unlock(&devfreq->lock);\r\n}\r\nreturn ret;\r\n}\r\nstatic int __init devfreq_performance_init(void)\r\n{\r\nreturn devfreq_add_governor(&devfreq_performance);\r\n}\r\nstatic void __exit devfreq_performance_exit(void)\r\n{\r\nint ret;\r\nret = devfreq_remove_governor(&devfreq_performance);\r\nif (ret)\r\npr_err("%s: failed remove governor %d\n", __func__, ret);\r\nreturn;\r\n}
