static void __init zylonite_detect_lcd_panel(void)\r\n{\r\nunsigned long mfpr_save[ARRAY_SIZE(lcd_detect_pins)];\r\nint i, gpio, id = 0;\r\nfor (i = 0; i < ARRAY_SIZE(lcd_detect_pins); i++) {\r\nmfpr_save[i] = pxa3xx_mfp_read(lcd_detect_pins[i]);\r\npxa3xx_mfp_write(lcd_detect_pins[i], lcd_detect_mfpr[i]);\r\n}\r\nfor (i = 0; i < NUM_LCD_DETECT_PINS; i++) {\r\nid = id << 1;\r\ngpio = mfp_to_gpio(lcd_detect_pins[i]);\r\ngpio_request(gpio, "LCD_ID_PINS");\r\ngpio_direction_input(gpio);\r\nif (gpio_get_value(gpio))\r\nid = id | 0x1;\r\ngpio_free(gpio);\r\n}\r\nlcd_id = id & 0x3d;\r\nlcd_orientation = (id >> 6) & 0x1;\r\nfor (i = 0; i < ARRAY_SIZE(lcd_detect_pins); i++)\r\npxa3xx_mfp_write(lcd_detect_pins[i], mfpr_save[i]);\r\n}\r\nvoid __init zylonite_pxa320_init(void)\r\n{\r\nif (cpu_is_pxa320()) {\r\npxa3xx_mfp_config(ARRAY_AND_SIZE(mfp_cfg));\r\nzylonite_detect_lcd_panel();\r\ngpio_eth_irq = mfp_to_gpio(MFP_PIN_GPIO9);\r\ngpio_debug_led1 = mfp_to_gpio(MFP_PIN_GPIO1_2);\r\ngpio_debug_led2 = mfp_to_gpio(MFP_PIN_GPIO4_2);\r\nwm9713_irq = mfp_to_gpio(MFP_PIN_GPIO15);\r\n}\r\n}
