void __init corenet_ds_pic_init(void)\r\n{\r\nstruct mpic *mpic;\r\nunsigned int flags = MPIC_BIG_ENDIAN | MPIC_SINGLE_DEST_CPU |\r\nMPIC_NO_RESET;\r\nif (ppc_md.get_irq == mpic_get_coreint_irq)\r\nflags |= MPIC_ENABLE_COREINT;\r\nmpic = mpic_alloc(NULL, 0, flags, 0, 256, " OpenPIC ");\r\nBUG_ON(mpic == NULL);\r\nmpic_init(mpic);\r\n}\r\nvoid __init corenet_ds_setup_arch(void)\r\n{\r\nmpc85xx_smp_init();\r\n#if defined(CONFIG_PCI) && defined(CONFIG_PPC64)\r\npci_devs_phb_init();\r\n#endif\r\nfsl_pci_assign_primary();\r\nswiotlb_detect_4g();\r\npr_info("%s board from Freescale Semiconductor\n", ppc_md.name);\r\n}\r\nint __init corenet_ds_publish_devices(void)\r\n{\r\nreturn of_platform_bus_probe(NULL, of_device_ids, NULL);\r\n}
