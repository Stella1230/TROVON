void __init edmini_v2_init(void)\r\n{\r\norion5x_mpp_conf(edminiv2_mpp_modes);\r\norion5x_ehci0_init();\r\norion5x_eth_init(&edmini_v2_eth_data);\r\norion5x_setup_dev_boot_win(EDMINI_V2_NOR_BOOT_BASE,\r\nEDMINI_V2_NOR_BOOT_SIZE);\r\nplatform_device_register(&edmini_v2_nor_flash);\r\npr_notice("edmini_v2: USB device port, flash write and power-off "\r\n"are not yet supported.\n");\r\nif (gpio_request(EDMINIV2_RTC_GPIO, "rtc") == 0) {\r\nif (gpio_direction_input(EDMINIV2_RTC_GPIO) == 0)\r\nedmini_v2_i2c_rtc.irq = gpio_to_irq(EDMINIV2_RTC_GPIO);\r\nelse\r\ngpio_free(EDMINIV2_RTC_GPIO);\r\n}\r\nif (edmini_v2_i2c_rtc.irq == 0)\r\npr_warning("edmini_v2: failed to get RTC IRQ\n");\r\ni2c_register_board_info(0, &edmini_v2_i2c_rtc, 1);\r\n}
