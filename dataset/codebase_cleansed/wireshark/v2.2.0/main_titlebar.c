static void\r\nmain_set_window_name(const gchar *window_name)\r\n{\r\ngchar *old_window_name;\r\nold_window_name = (gchar *)g_object_get_data(G_OBJECT(top_level), MAIN_WINDOW_NAME_KEY);\r\ng_free(old_window_name);\r\ng_object_set_data(G_OBJECT(top_level), MAIN_WINDOW_NAME_KEY, g_strdup(window_name));\r\nmain_titlebar_update();\r\n}\r\nvoid\r\nmain_titlebar_update(void)\r\n{\r\ngchar *window_name;\r\ngchar *title;\r\nwindow_name = (gchar *)g_object_get_data(G_OBJECT(top_level), MAIN_WINDOW_NAME_KEY);\r\nif (window_name != NULL) {\r\ntitle = create_user_window_title(window_name);\r\nif ((prefs.gui_version_placement == version_title_only) ||\r\n(prefs.gui_version_placement == version_both)) {\r\ngchar *old_title = title;\r\ntitle = g_strdup_printf("%s [Wireshark %s]", title, get_ws_vcs_version_info());\r\ng_free(old_title);\r\n}\r\ngtk_window_set_title(GTK_WINDOW(top_level), title);\r\ng_free(title);\r\n}\r\n}\r\nvoid\r\nset_titlebar_for_capture_file(capture_file *cf)\r\n{\r\ngchar *display_name;\r\ngchar *window_name;\r\nif (cf && cf->filename) {\r\ndisplay_name = cf_get_display_name(cf);\r\nwindow_name = g_strdup_printf("%s%s", cf_has_unsaved_data(cf) ? "*" : "",\r\ndisplay_name);\r\ng_free(display_name);\r\nmain_set_window_name(window_name);\r\ng_free(window_name);\r\n} else {\r\nmain_set_window_name("The Wireshark Network Analyzer");\r\n}\r\n}\r\nvoid\r\nset_titlebar_for_capture_in_progress(capture_file *cf)\r\n{\r\ngchar *window_name;\r\nwindow_name = g_strdup_printf("Capturing from %s", cf_get_tempfile_source(cf));\r\nmain_set_window_name(window_name);\r\ng_free(window_name);\r\n}
