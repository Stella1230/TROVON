void\r\ngoto_frame_cb(GtkWidget *w _U_, gpointer d _U_)\r\n{\r\nGtkWidget *goto_frame_w, *main_vb, *fnumber_hb, *fnumber_lb, *fnumber_te,\r\n*bbox, *ok_bt, *cancel_bt, *help_bt;\r\ngoto_frame_w = dlg_window_new("Wireshark: Go To Packet");\r\nmain_vb = ws_gtk_box_new(GTK_ORIENTATION_VERTICAL, 3, FALSE);\r\ngtk_container_set_border_width(GTK_CONTAINER(main_vb), 5);\r\ngtk_container_add(GTK_CONTAINER(goto_frame_w), main_vb);\r\ngtk_widget_show(main_vb);\r\nfnumber_hb = ws_gtk_box_new(GTK_ORIENTATION_HORIZONTAL, 3, FALSE);\r\ngtk_box_pack_start(GTK_BOX (main_vb), fnumber_hb, TRUE, TRUE, 0);\r\ngtk_widget_show(fnumber_hb);\r\nfnumber_lb = gtk_label_new("Packet number:");\r\ngtk_box_pack_start(GTK_BOX(fnumber_hb), fnumber_lb, FALSE, FALSE, 0);\r\ngtk_widget_show(fnumber_lb);\r\nfnumber_te = gtk_entry_new();\r\ngtk_box_pack_start(GTK_BOX(fnumber_hb), fnumber_te, FALSE, FALSE, 0);\r\ngtk_widget_show(fnumber_te);\r\nbbox = dlg_button_row_new(GTK_STOCK_JUMP_TO, GTK_STOCK_CANCEL, GTK_STOCK_HELP, NULL);\r\ngtk_box_pack_start(GTK_BOX (main_vb), bbox, TRUE, TRUE, 0);\r\ngtk_widget_show(bbox);\r\nok_bt = (GtkWidget *)g_object_get_data(G_OBJECT(bbox), GTK_STOCK_JUMP_TO);\r\ng_signal_connect(ok_bt, "clicked", G_CALLBACK(goto_frame_ok_cb), goto_frame_w);\r\ncancel_bt = (GtkWidget *)g_object_get_data(G_OBJECT(bbox), GTK_STOCK_CANCEL);\r\nwindow_set_cancel_button(goto_frame_w, cancel_bt, window_cancel_button_cb);\r\nhelp_bt = (GtkWidget *)g_object_get_data(G_OBJECT(bbox), GTK_STOCK_HELP);\r\ng_signal_connect(help_bt, "clicked", G_CALLBACK(topic_cb), (gpointer)HELP_GOTO_DIALOG);\r\ngtk_widget_grab_default(ok_bt);\r\ndlg_set_activate(fnumber_te, ok_bt);\r\ngtk_widget_grab_focus(fnumber_te);\r\ng_object_set_data(G_OBJECT(goto_frame_w), E_GOTO_FNUMBER_KEY, fnumber_te);\r\ng_signal_connect(goto_frame_w, "delete_event", G_CALLBACK(window_delete_event_cb), NULL);\r\ngtk_widget_show(goto_frame_w);\r\nwindow_present(goto_frame_w);\r\n}\r\nstatic void\r\ngoto_frame_ok_cb(GtkWidget *ok_bt _U_, gpointer parent_w)\r\n{\r\nGtkWidget *fnumber_te;\r\nconst gchar *fnumber_text;\r\nguint fnumber;\r\nchar *p;\r\nfnumber_te = (GtkWidget *)g_object_get_data(G_OBJECT(parent_w), E_GOTO_FNUMBER_KEY);\r\nfnumber_text = gtk_entry_get_text(GTK_ENTRY(fnumber_te));\r\nfnumber = (guint) strtoul(fnumber_text, &p, 10);\r\nif (p == fnumber_text || *p != '\0') {\r\nsimple_dialog(ESD_TYPE_ERROR, ESD_BTN_OK,\r\n"The packet number you entered isn't a valid number.");\r\nreturn;\r\n}\r\nif (cf_goto_frame(&cfile, fnumber)) {\r\nwindow_destroy(GTK_WIDGET(parent_w));\r\n}\r\n}\r\nvoid\r\ngoto_framenum_cb(GtkWidget *w _U_, gpointer data _U_)\r\n{\r\ncf_goto_framenum(&cfile);\r\n}\r\nvoid\r\ngoto_top_frame_cb(GtkWidget *w _U_, gpointer d _U_)\r\n{\r\ncf_goto_top_frame();\r\n}\r\nvoid\r\ngoto_bottom_frame_cb(GtkWidget *w _U_, gpointer d _U_)\r\n{\r\ncf_goto_bottom_frame();\r\n}\r\nvoid\r\ngoto_next_frame_cb(GtkWidget *w _U_, gpointer d _U_)\r\n{\r\npacket_list_next();\r\n}\r\nvoid\r\ngoto_previous_frame_cb(GtkWidget *w _U_, gpointer d _U_)\r\n{\r\npacket_list_prev();\r\n}
