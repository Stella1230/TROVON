struct filter_expression *\r\nfilter_expression_new(const gchar *label, const gchar *expr,\r\nconst gboolean enabled)\r\n{\r\nstruct filter_expression *expression;\r\nstruct filter_expression *prev;\r\nexpression = (struct filter_expression *)g_malloc(sizeof(struct filter_expression));\r\nmemset(expression, '\0', sizeof(struct filter_expression));\r\nexpression->button = NULL;\r\nexpression->label = g_strdup(label);\r\nexpression->expression = g_strdup(expr);\r\nexpression->enabled = enabled;\r\nexpression->deleted = FALSE;\r\nexpression->index = 0;\r\nexpression->next = NULL;\r\nif (*pfilter_expression_head == NULL) {\r\n_filter_expression_head = expression;\r\n} else {\r\nprev = *pfilter_expression_head;\r\nwhile (prev->next != NULL)\r\nprev = prev->next;\r\nprev->next = expression;\r\nexpression->index = prev->index + 1;\r\n}\r\nreturn(expression);\r\n}\r\nvoid\r\nfilter_expression_init(gboolean enable_prefs)\r\n{\r\nif (enable_prefs)\r\nprefs.filter_expressions = pfilter_expression_head;\r\n}
