const funnel_ops_t* funnel_get_funnel_ops(void) { return ops; }\r\nvoid funnel_set_funnel_ops(const funnel_ops_t* o) { ops = o; }\r\nvoid funnel_register_menu(const char *name,\r\nregister_stat_group_t group,\r\nvoid (*callback)(gpointer),\r\ngpointer callback_data,\r\ngboolean retap) {\r\nfunnel_menu_t* m = (funnel_menu_t *)g_malloc(sizeof(funnel_menu_t));\r\nm->name = g_strdup(name);\r\nm->group = group;\r\nm->callback = callback;\r\nm->callback_data = callback_data;\r\nm->retap = retap;\r\nm->next = NULL;\r\nif (!menus) {\r\nmenus = m;\r\n} else {\r\nfunnel_menu_t* c;\r\nfor (c = menus; c->next; c = c->next);\r\nc->next = m;\r\n}\r\n}\r\nvoid funnel_register_all_menus(funnel_registration_cb_t r_cb) {\r\nfunnel_menu_t* c;\r\nfor (c = menus; c; c = c->next) {\r\nr_cb(c->name,c->group,c->callback,c->callback_data,c->retap);\r\n}\r\n}
