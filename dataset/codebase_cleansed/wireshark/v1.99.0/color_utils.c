gboolean\r\ninitialize_color(color_t *color, guint16 red, guint16 green, guint16 blue)\r\n{\r\nGdkColor gdk_color;\r\ngdk_color.pixel = 0;\r\ngdk_color.red = red;\r\ngdk_color.green = green;\r\ngdk_color.blue = blue;\r\n#if 0\r\nif (!get_color(&gdk_color))\r\nreturn FALSE;\r\n#endif\r\ngdkcolor_to_color_t(color, &gdk_color);\r\nreturn TRUE;\r\n}\r\nvoid\r\ncolors_init(void)\r\n{\r\n#if 0\r\ngboolean got_white, got_black;\r\nsys_cmap = gdk_colormap_get_system();\r\ngot_white = get_color(&WHITE);\r\ngot_black = get_color(&BLACK);\r\nif (!got_white) {\r\nif (!got_black)\r\nsimple_dialog(ESD_TYPE_WARN, ESD_BTN_OK,\r\n"Could not allocate colors black or white.");\r\nelse\r\nsimple_dialog(ESD_TYPE_WARN, ESD_BTN_OK,\r\n"Could not allocate color white.");\r\n} else {\r\nif (!got_black)\r\nsimple_dialog(ESD_TYPE_WARN, ESD_BTN_OK,\r\n"Could not allocate color black.");\r\n}\r\n#endif\r\n}\r\nvoid\r\ncolor_t_to_gdkcolor(GdkColor *target, const color_t *source)\r\n{\r\ntarget->pixel = source->pixel;\r\ntarget->red = source->red;\r\ntarget->green = source->green;\r\ntarget->blue = source->blue;\r\n}\r\nvoid\r\ncolor_t_to_gdkRGBAcolor(GdkRGBA *target, const color_t *source)\r\n{\r\ntarget->alpha = 1;\r\ntarget->red = source->red / 65535.0;\r\ntarget->green = source->green / 65535.0;\r\ntarget->blue = source->blue / 65535.0;\r\n}\r\nvoid\r\ngdkcolor_to_color_t(color_t *target, const GdkColor *source)\r\n{\r\ntarget->pixel = source->pixel;\r\ntarget->red = source->red;\r\ntarget->green = source->green;\r\ntarget->blue = source->blue;\r\n}\r\nvoid\r\ngdkRGBAcolor_to_color_t(color_t *target, const GdkRGBA *source)\r\n{\r\ntarget->pixel = 0;\r\ntarget->red = (guint16)(source->red*65535);\r\ntarget->green = (guint16)(source->green*65535);\r\ntarget->blue = (guint16)(source->blue*65535);\r\n}\r\nvoid\r\nGdkColor_to_GdkRGBA(GdkRGBA *target, const GdkColor *source)\r\n{\r\ntarget->alpha = 1;\r\ntarget->red = (double)source->red / 65535.0;\r\ntarget->green = (double)source->green / 65535.0;\r\ntarget->blue = (double)source->blue / 65535.0;\r\n}\r\nvoid\r\ngdkRGBAcolor_to_GdkColor(GdkColor *target, const GdkRGBA *source)\r\n{\r\ntarget->pixel = 0;\r\ntarget->red = (guint16)(source->red*65535);\r\ntarget->green = (guint16)(source->green*65535);\r\ntarget->blue = (guint16)(source->blue*65535);\r\n}
