gint\r\nieee80211_mhz_to_chan(guint freq) {\r\nguint i;\r\nfor (i = 0; i < NUM_FREQ_CVT; i++) {\r\nif (freq >= freq_cvt[i].fmin && freq <= freq_cvt[i].fmax) {\r\nreturn ((freq - freq_cvt[i].fmin) / FREQ_STEP) + freq_cvt[i].cmin;\r\n}\r\n}\r\nreturn -1;\r\n}\r\nguint\r\nieee80211_chan_to_mhz(gint chan, gboolean is_bg) {\r\nguint i;\r\nfor (i = 0; i < NUM_FREQ_CVT; i++) {\r\nif (is_bg == freq_cvt[i].is_bg &&\r\nchan >= freq_cvt[i].cmin && chan <= MAX_CHANNEL(freq_cvt[i])) {\r\nreturn ((chan - freq_cvt[i].cmin) * FREQ_STEP) + freq_cvt[i].fmin;\r\n}\r\n}\r\nreturn 0;\r\n}\r\ngchar*\r\nieee80211_mhz_to_str(guint freq){\r\ngint chan = ieee80211_mhz_to_chan(freq);\r\ngboolean is_bg = FREQ_IS_BG(freq);\r\nif (chan < 0) {\r\nreturn g_strdup_printf("%u", freq);\r\n} else {\r\nreturn g_strdup_printf("%u [%s %u]", freq, is_bg ? "BG" : "A",\r\nchan);\r\n}\r\n}
