static int si_cmp(const stock_item_t * a, const stock_item_t * b) {\r\nreturn strcmp(a->name, b->name);\r\n}\r\nGtkWidget * ws_gtk_button_new_from_stock(const gchar *stock_id) {\r\n#if !GTK_CHECK_VERSION(3, WS_GTK3_MINOR_STOCK_DEPRECATION_STARTS, 0)\r\nreturn gtk_button_new_from_stock(stock_id);\r\n#else\r\nGtkWidget * b;\r\nstock_item_t * i = NULL;\r\nif (NULL != (i = BS(stock_id, gtk_stock_items))) {\r\nreturn gtk_button_new_with_mnemonic(i->label);\r\n} else if (NULL != (i = BS(stock_id, ws_stock_items))) {\r\nstock_item_t * fallback_item;\r\nif (NULL != (fallback_item = BS(i->icon, gtk_stock_items))) {\r\nb = gtk_button_new_from_icon_name(fallback_item->icon, GTK_ICON_SIZE_BUTTON);\r\n} else {\r\nb = gtk_button_new_from_icon_name(i->icon, GTK_ICON_SIZE_BUTTON);\r\n}\r\ngtk_button_set_label(GTK_BUTTON(b), i->label);\r\ngtk_button_set_use_underline(GTK_BUTTON(b), TRUE);\r\nreturn b;\r\n}\r\nreturn NULL;\r\n#endif\r\n}\r\nGtkToolItem * ws_gtk_tool_button_new_from_stock(const gchar *stock_id) {\r\n#if !GTK_CHECK_VERSION(3, WS_GTK3_MINOR_STOCK_DEPRECATION_STARTS, 0)\r\nreturn gtk_tool_button_new_from_stock(stock_id);\r\n#else\r\nGtkToolItem * b = NULL;\r\nstock_item_t * i = NULL;\r\nif (NULL != (i = BS(stock_id, gtk_stock_items))) {\r\nb = gtk_tool_button_new(NULL, i->label);\r\ngtk_tool_button_set_use_underline(GTK_TOOL_BUTTON(b), TRUE);\r\ngtk_tool_button_set_icon_name(GTK_TOOL_BUTTON (b), i->icon);\r\n} else if (NULL != (i = BS(stock_id, ws_stock_items))) {\r\nstock_item_t * fallback_item;\r\nif (NULL != (fallback_item = BS(i->icon, gtk_stock_items))) {\r\nb = gtk_tool_button_new(NULL, i->label);\r\ngtk_tool_button_set_use_underline(GTK_TOOL_BUTTON(b), TRUE);\r\ngtk_tool_button_set_icon_name(GTK_TOOL_BUTTON(b), fallback_item->icon);\r\n} else {\r\nb = gtk_tool_button_new(NULL, i->label);\r\ngtk_tool_button_set_icon_name(GTK_TOOL_BUTTON(b), i->icon);\r\n}\r\n}\r\nreturn b;\r\n#endif\r\n}\r\nGtkToolItem * ws_gtk_toggle_tool_button_new_from_stock(const gchar *stock_id) {\r\n#if !GTK_CHECK_VERSION(3, WS_GTK3_MINOR_STOCK_DEPRECATION_STARTS, 0)\r\nreturn gtk_toggle_tool_button_new_from_stock(stock_id);\r\n#else\r\nGtkToolItem * b = NULL;\r\nstock_item_t * i = NULL;\r\nif (NULL != (i = BS(stock_id, gtk_stock_items))) {\r\nb = gtk_toggle_tool_button_new();\r\ngtk_tool_button_set_icon_name(GTK_TOOL_BUTTON (b), i->icon);\r\nLBL_UNDERLINE(GTK_TOOL_BUTTON, b, i);\r\n} else if (NULL != (i = BS(stock_id, ws_stock_items))) {\r\nstock_item_t * fallback_item;\r\nif (NULL != (fallback_item = BS(i->icon, gtk_stock_items))) {\r\nb = gtk_toggle_tool_button_new();\r\ngtk_tool_button_set_icon_name(GTK_TOOL_BUTTON (b), fallback_item->icon);\r\nLBL_UNDERLINE(GTK_TOOL_BUTTON, b, i);\r\n} else {\r\nb = gtk_toggle_tool_button_new();\r\ngtk_tool_button_set_icon_name(GTK_TOOL_BUTTON (b), i->icon);\r\nLBL_UNDERLINE(GTK_TOOL_BUTTON, b, i);\r\n}\r\n}\r\nreturn b;\r\n#endif\r\n}\r\nGtkWidget * ws_gtk_image_new_from_stock(const gchar *stock_id, GtkIconSize size) {\r\n#if !GTK_CHECK_VERSION(3, WS_GTK3_MINOR_STOCK_DEPRECATION_STARTS, 0)\r\nreturn gtk_image_new_from_stock(stock_id, size);\r\n#else\r\nstock_item_t * i = NULL;\r\nif (NULL != (i = BS(stock_id, gtk_stock_items))) {\r\nreturn gtk_image_new_from_icon_name(i->icon, size);\r\n} else if (NULL != (i = BS(stock_id, ws_stock_items))) {\r\nstock_item_t * fallback_item;\r\nif (NULL != (fallback_item = BS(i->icon, gtk_stock_items))) {\r\nreturn gtk_image_new_from_icon_name(fallback_item->icon, size);\r\n} else {\r\nreturn gtk_image_new_from_icon_name(i->icon, size);\r\n}\r\n}\r\nreturn NULL;\r\n#endif\r\n}
