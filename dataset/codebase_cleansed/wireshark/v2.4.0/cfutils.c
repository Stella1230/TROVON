char *\r\nCFString_to_C_string(CFStringRef cfstring)\r\n{\r\nCFIndex string_len;\r\nchar *string;\r\nstring_len = CFStringGetMaximumSizeForEncoding(CFStringGetLength(cfstring),\r\nkCFStringEncodingUTF8);\r\nstring = (char *)g_malloc(string_len + 1);\r\nif (!CFStringGetCString(cfstring, string, string_len + 1,\r\nkCFStringEncodingUTF8)) {\r\ng_free(string);\r\nreturn NULL;\r\n}\r\nreturn string;\r\n}
